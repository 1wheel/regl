<!DOCTYPE html>
      <html>
        <head>
          <title>example/metaball.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return"jscomp_symbol_"+b+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();if(b[$jscomp.global.Symbol.iterator])return b[$jscomp.global.Symbol.iterator]();var d=0;return{next:function(){return d==b.length?{done:!0}:{done:!1,value:b[d++]}}}};
$jscomp.arrayFromIterator=function(b){for(var d,f=[];!(d=b.next()).done;)f.push(d.value);return f};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.inherits=function(b,d){function f(){}f.prototype=d.prototype;b.prototype=new f;b.prototype.constructor=b;for(var a in d)if($jscomp.global.Object.defineProperties){var c=$jscomp.global.Object.getOwnPropertyDescriptor(d,a);c&&$jscomp.global.Object.defineProperty(b,a,c)}else b[a]=d[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(b,d){b instanceof String&&(b=String(b));var f=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},c=(a.next=function(){if(f<b.length){var a=f++;return{value:d(a,b[a]),done:!1}}c.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return c},a);return c};
$jscomp.array.findInternal_=function(b,d,f){b instanceof String&&(b=String(b));for(var a=b.length,c=0;c<a;c++){var h=b[c];if(d.call(f,h,c,b))return{i:c,v:h}}return{i:-1,v:void 0}};
$jscomp.array.from=function(b,d,f){d=void 0===d?function(a){return a}:d;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(b[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();b=b[Symbol.iterator]();for(var c;!(c=b.next()).done;)a.push(d.call(f,c.value))}else{c=b.length;for(var h=0;h<c;h++)a.push(d.call(f,b[h]))}return a};$jscomp.array.of=function(b){for(var d=[],f=0;f<arguments.length;++f)d[f-0]=arguments[f];return $jscomp.array.from(d)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(b,d){return[b,d]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(b){return b})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(b,d){return d})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(b,d,f){var a=this.length;b=Number(b);d=Number(d);f=Number(null!=f?f:a);if(b<d)for(f=Math.min(f,a);d<f;)d in this?this[b++]=this[d++]:(delete this[b++],d++);else for(f=Math.min(f,a+d-b),b+=f-d;f>d;)--f in this?this[--b]=this[f]:delete this[b];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(b,d,f){null!=f&&b.length||(f=this.length||0);f=Number(f);for(d=Number((void 0===d?0:d)||0);d<f;d++)this[d]=b;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(b,d){return $jscomp.array.findInternal_(this,b,d).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(b,d){return $jscomp.array.findInternal_(this,b,d).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(b){b=void 0===b?[]:b;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next())d=d.value,this.set(d[0],d[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var b=$jscomp.global.Map;if(!b||!b.prototype.entries||!Object.seal)return!1;try{var d=Object.seal({x:4}),f=new b($jscomp.makeIterator([[d,"s"]]));if("s"!=f.get(d)||1!=f.size||f.get({x:4})||f.set({x:4},"t")!=f||2!=f.size)return!1;var a=f.entries(),c=a.next();if(c.done||c.value[0]!=d||"s"!=c.value[1])return!1;c=a.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!a.next().done?!1:!0}catch(h){return!1}};
$jscomp.Map.createHead_=function(){var b={};return b.previous=b.next=b.head=b};$jscomp.Map.getId_=function(b){if(!(b instanceof Object))return String(b);$jscomp.Map.key_ in b||b instanceof Object&&Object.isExtensible&&Object.isExtensible(b)&&$jscomp.Map.defineProperty_(b,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in b?b[$jscomp.Map.key_]:" "+b};
$jscomp.Map.prototype.set=function(b,d){var f=this.maybeGetEntry_(b),a=f.id,c=f.list,f=f.entry;c||(c=this.data_[a]=[]);f?f.value=d:(f={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:d},c.push(f),this.head_.previous.next=f,this.head_.previous=f,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(b){var d=this.maybeGetEntry_(b);b=d.id;var f=d.list,a=d.index;return(d=d.entry)&&f?(f.splice(a,1),f.length||delete this.data_[b],d.previous.next=d.next,d.next.previous=d.previous,d.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(b){return!!this.maybeGetEntry_(b).entry};
$jscomp.Map.prototype.get=function(b){return(b=this.maybeGetEntry_(b).entry)&&b.value};$jscomp.Map.prototype.maybeGetEntry_=function(b){var d=$jscomp.Map.getId_(b),f=this.data_[d];if(f)for(var a=0;a<f.length;a++){var c=f[a];if(b!==b&&c.key!==c.key||b===c.key)return{id:d,list:f,index:a,entry:c}}return{id:d,list:f,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(b){return[b.key,b.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(b){return b.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(b){return b.value})};$jscomp.Map.prototype.forEach=function(b,d){for(var f=$jscomp.makeIterator(this.entries()),a=f.next();!a.done;a=f.next())a=a.value,b.call(d,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(b){var d=this,f=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(f){for(;f.head!=d.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:b(f)};f=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(b,d,f){Object.defineProperty(b,d,{value:String(f)})}:function(b,d,f){b[d]=String(f)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(b){b=Number(b)>>>0;if(0===b)return 32;var d=0;0===(b&4294901760)&&(b<<=16,d+=16);0===(b&4278190080)&&(b<<=8,d+=8);0===(b&4026531840)&&(b<<=4,d+=4);0===(b&3221225472)&&(b<<=2,d+=2);0===(b&2147483648)&&d++;return d};$jscomp.math.imul=function(b,d){b=Number(b);d=Number(d);var f=b&65535,a=d&65535;return f*a+((b>>>16&65535)*a+f*(d>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1};
$jscomp.math.log10=function(b){return Math.log(b)/Math.LN10};$jscomp.math.log2=function(b){return Math.log(b)/Math.LN2};$jscomp.math.log1p=function(b){b=Number(b);if(.25>b&&-.25<b){for(var d=b,f=1,a=b,c=0,h=1;c!=a;)d*=b,h*=-1,a=(c=a)+h*d/++f;return a}return Math.log(1+b)};$jscomp.math.expm1=function(b){b=Number(b);if(.25>b&&-.25<b){for(var d=b,f=1,a=b,c=0;c!=a;)d*=b/++f,a=(c=a)+d;return a}return Math.exp(b)-1};$jscomp.math.cosh=function(b){b=Number(b);return(Math.exp(b)+Math.exp(-b))/2};
$jscomp.math.sinh=function(b){b=Number(b);return 0===b?b:(Math.exp(b)-Math.exp(-b))/2};$jscomp.math.tanh=function(b){b=Number(b);if(0===b)return b;var d=Math.exp(2*-Math.abs(b)),d=(1-d)/(1+d);return 0>b?-d:d};$jscomp.math.acosh=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};$jscomp.math.asinh=function(b){b=Number(b);if(0===b)return b;var d=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return 0>b?-d:d};
$jscomp.math.atanh=function(b){b=Number(b);return($jscomp.math.log1p(b)-$jscomp.math.log1p(-b))/2};
$jscomp.math.hypot=function(b,d,f){for(var a=[],c=2;c<arguments.length;++c)a[c-2]=arguments[c];b=Number(b);d=Number(d);for(var h=Math.max(Math.abs(b),Math.abs(d)),e=$jscomp.makeIterator(a),c=e.next();!c.done;c=e.next())h=Math.max(h,Math.abs(c.value));if(1E100<h||1E-100>h){b/=h;d/=h;e=b*b+d*d;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c)/h,e+=c*c;return Math.sqrt(e)*h}h=b*b+d*d;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c),h+=
c*c;return Math.sqrt(h)};$jscomp.math.trunc=function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var d=Math.floor(Math.abs(b));return 0>b?-d:d};$jscomp.math.cbrt=function(b){if(0===b)return b;b=Number(b);var d=Math.pow(Math.abs(b),1/3);return 0>b?-d:d};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b};
$jscomp.number.isInteger=function(b){return $jscomp.number.isFinite(b)?b===Math.floor(b):!1};$jscomp.number.isNaN=function(b){return"number"===typeof b&&isNaN(b)};$jscomp.number.isSafeInteger=function(b){return $jscomp.number.isInteger(b)&&Math.abs(b)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(b,d){for(var f=[],a=1;a<arguments.length;++a)f[a-1]=arguments[a];f=$jscomp.makeIterator(f);for(a=f.next();!a.done;a=f.next())if(a=a.value)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b};$jscomp.object.is=function(b,d){return b===d?0!==b||1/b===1/d:b!==b&&d!==d};$jscomp.Set=function(b){b=void 0===b?[]:b;this.map_=new $jscomp.Map;if(b){b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next())this.add(d.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var b=$jscomp.global.Set;if(!b||!b.prototype.entries||!Object.seal)return!1;var d=Object.seal({x:4}),b=new b($jscomp.makeIterator([d]));if(b.has(d)||1!=b.size||b.add(d)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var b=b.entries(),f=b.next();if(f.done||f.value[0]!=d||f.value[1]!=d)return!1;f=b.next();return f.done||f.value[0]==d||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:b.next().done};
$jscomp.Set.prototype.add=function(b){this.map_.set(b,b);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(b){b=this.map_["delete"](b);this.size=this.map_.size;return b};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(b){return this.map_.has(b)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(b,d){var f=this;this.map_.forEach(function(a){return b.call(d,a,a,f)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(b,d){if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(b){for(var d=[],f=0;f<arguments.length;++f)d[f-0]=arguments[f];for(var f="",d=$jscomp.makeIterator(d),a=d.next();!a.done;a=d.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?f+=String.fromCharCode(a):(a-=65536,f+=String.fromCharCode(a>>>10&1023|55296),f+=String.fromCharCode(a&1023|56320))}return f};
$jscomp.string.repeat=function(b){var d=this.toString();if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var f="";b;)if(b&1&&(f+=d),b>>>=1)d+=d;return f};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(b){var d=this.toString(),f=d.length;b=Number(b)||0;if(0<=b&&b<f){b|=0;var a=d.charCodeAt(b);if(55296>a||56319<a||b+1===f)return a;b=d.charCodeAt(b+1);return 56320>b||57343<b?a:1024*(a-55296)+b+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(b,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(b,"includes");return-1!==this.toString().indexOf(b,d)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(b,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(b,"startsWith");var f=this.toString();b+="";for(var a=f.length,c=b.length,h=Math.max(0,Math.min(d|0,f.length)),e=0;e<c&&h<a;)if(f[h++]!=b[e++])return!1;return e>=c};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(b,d){$jscomp.string.noRegExp_(b,"endsWith");var f=this.toString();b+="";void 0===d&&(d=f.length);for(var a=Math.max(0,Math.min(d|0,f.length)),c=b.length;0<c&&0<a;)if(f[--a]!=b[--c])return!1;return 0>=c};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(d,f,a){function c(e,m){if(!f[e]){if(!d[e]){var g="function"==typeof require&&require;if(!m&&g)return g(e,!0);if(h)return h(e,!0);g=Error("Cannot find module '"+e+"'");throw g.code="MODULE_NOT_FOUND",g;}g=f[e]={exports:{}};d[e][0].call(g.exports,function(a){var h=d[e][1][a];return c(h?h:a)},g,g.exports,e$$0,d,f,a)}return f[e].exports}for(var h="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c})({1:[function(b,d,f){var a=b("../regl")(),c=b("surface-nets"),h=b("ndarray"),
e=b("angle-normals"),p=b("gl-mat3"),m=b("./util/camera")(a,{distance:1.5,maxDistance:3,minDistance:.5,center:[1,1,1],theta:1}),g=a.buffer({length:49152,type:"float",usage:"dynamic"}),q=a.buffer({length:49152,type:"float",usage:"dynamic"}),r=a.elements({length:221184,count:36864,type:"uint16",usage:"dynamic",primitive:"triangles"}),y=a({vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n      gl_Position = vec4(position, 0., 1.);\n    }",frag:"\n    precision mediump float;\n    uniform vec3 color;\n    uniform float noise, width, height;\n\n    #define VIG_REDUCTION_POWER 1.\n    #define VIG_BOOST 1.\n\n    float random(vec3 scale,float seed) {\n      return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);\n    }\n\n    void main () {\n      vec2 resolution = vec2(width, height);\n      vec2 center = resolution * 0.5;\n      float vignette = distance( center, gl_FragCoord.xy ) / resolution.x;\n      vignette = VIG_BOOST - vignette * VIG_REDUCTION_POWER;\n\n      float n = noise * (.5 - random(vec3(1.), length(gl_FragCoord)));\n\n      float v = .5 * length(vec2(gl_FragCoord.y / resolution.y, (1. - abs(.5 - gl_FragCoord.x / resolution.x))));\n      vec3 base = color;\n      base += vec3(pow(v, 2.));\n\n      gl_FragColor = vec4(base * vec3(vignette) + vec3(n), 1.);\n    }",
uniforms:{color:[36/255,70/255,106/255],width:a.context("viewportWidth"),height:a.context("viewportHeight"),noise:.05},attributes:{position:[-4,-4,4,-4,0,4]},count:3}),n=a({vert:"\n    precision mediump float;\n    uniform mat4 projection, view;\n    uniform mat3 normalMatrix;\n\n    attribute vec3 position, normal;\n\n    varying vec3 vNormal, vONormal, vU;\n    varying vec4 vPosition, vOPosition;\n\n    void main () {\n      vNormal = normalMatrix * normal;\n      vONormal = normal;\n      vPosition = vec4(position, 1.0);\n      vOPosition = view * vPosition;\n      vU = normalize(vec3(vOPosition));\n      gl_Position = projection * vOPosition;\n    }",
frag:"\n    precision mediump float;\n    uniform sampler2D textureMap, normalMap;\n    uniform float normalScale, texScale;\n    uniform vec3 color, eye;\n\n    varying vec3 vNormal, vONormal, vU;\n    varying vec4 vPosition, vOPosition;\n\n    float random(vec3 scale, float seed) {\n      return fract(sin(dot(gl_FragCoord.xyz + seed,scale)) * 43758.5453 + seed);\n    }\n\n    vec3 spherical_environment_map(vec3 ray, vec3 normal) {\n      vec3 r = reflect(normalize(ray), normalize(normal));\n      float m = 2.0 * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.0) * (r.z + 1.0));\n      vec2 calculatedNormal = vec2(r.x / m + 0.5, r.y / m + 0.5);\n      return texture2D(textureMap, calculatedNormal).rgb;\n    }\n\n    mat3 tangent_space_basis(vec3 blend_weights) {\n      vec3 tanX = vec3(vNormal.x, -vNormal.z, vNormal.y);\n      vec3 tanY = vec3(vNormal.z, vNormal.y, -vNormal.x);\n      vec3 tanZ = vec3(-vNormal.y, vNormal.x, vNormal.z);\n      vec3 blended_tangent = tanX * blend_weights.xxx +\n                             tanY * blend_weights.yyy +\n                             tanZ * blend_weights.zzz;\n\n      return mat3(\n        normalize(blended_tangent),\n        normalize(cross(vNormal, blended_tangent)),\n        normalize(vNormal)\n      );\n    }\n\n    vec3 blended_bump(vec3 blend_weights) {\n      vec2 coord1 = vPosition.yz * texScale;\n      vec2 coord2 = vPosition.zx * texScale;\n      vec2 coord3 = vPosition.xy * texScale;\n\n      vec3 bump1 = texture2D(normalMap, coord1).rgb;\n      vec3 bump2 = texture2D(normalMap, coord2).rgb;\n      vec3 bump3 = texture2D(normalMap, coord3).rgb;\n\n      return bump1 * blend_weights.xxx +\n             bump2 * blend_weights.yyy +\n             bump3 * blend_weights.zzz;\n    }\n\n    void main() {\n      // Using triplanar texturing, as in http://http.developer.nvidia.com/GPUGems3/gpugems3_ch01.html\n      vec3 blend_weights = abs(normalize(vONormal.xyz));\n      blend_weights = (blend_weights - 0.2) * 7.;\n      blend_weights = max(blend_weights, 0.);\n      blend_weights /= (blend_weights.x + blend_weights.y + blend_weights.z);\n\n      mat3 tsb = tangent_space_basis(blend_weights);\n      vec3 bump = blended_bump(blend_weights);\n\n      vec3 normalTex = bump * 2.0 - 1.0;\n      normalTex.xy *= normalScale;\n      normalTex.y *= -1.;\n      normalTex = normalize(normalTex);\n      vec3 finalNormal = tsb * normalTex;\n      vec3 base = spherical_environment_map(vU, finalNormal);\n\n      float rim = 1.75 * max(0., abs(dot(normalize(vNormal), normalize(-vOPosition.xyz))));\n      base += 10. * base * color * clamp(1. - rim, 0., .15);\n\n      base = vec3(1.) - (vec3(1.) - base) * (vec3(1.) - base);\n\n      float dither = .05 * random(vec3(1.), length(gl_FragCoord));\n      base += vec3(dither);\n\n      gl_FragColor = vec4(base.rgb, 1.);\n    }",
attributes:{position:{buffer:g},normal:{buffer:q}},uniforms:{color:[36/255,70/255,106/255],sphereColor:[36/255,70/255,106/255],normalScale:1,texScale:10,normalMatrix:function(a){var c=p.create();p.normalFromMat4(c,a.view);return c},textureMap:a.prop("textureMap"),normalMap:a.prop("normalMap")},elements:r}),t=1.2/((Math.sqrt(20)-1)/4+1),w=[.5,.5,.5],u=[1.5,1.5,1.5],v=[0,1,2].map(function(a){return(u[a]-w[a])/50}),B=50*Math.sqrt(t/12),x=function(a){a*=.5;for(var b=new Float32Array(125E3),e=0;20>e;e++){var m=
void 0,p,g,n,d,q;g=$jscomp.makeIterator([.27*Math.sin(e+1.26*a*(1.03+.5*Math.cos(.21*e)))+.5,.27*Math.cos(e+1.12*a*.21*Math.sin(.72+.83*e))+.5,.27*Math.cos(e+.132*a*Math.sin(.92+.53*e))+.5]);m=g.next().value;p=g.next().value;g=g.next().value;q=[m,p,g].map(function(k){k*=50;return[Math.max(Math.floor(k-B),1),Math.min(Math.floor(k+B),49)]});n=q[0];d=q[1];q=q[2];for(var f=q[0];f<q[1];f++)for(var r=2500*f,u=d[0];u<d[1];u++)for(var y=50*u,x=n[0];x<n[1];x++){var X=x/50-m,k=u/50-p,l=f/50-g,X=t/(1E-6+X*X+
k*k+l*l)-12;0<X&&(b[r+y+x]+=X)}}a=c(h(b,[50,50,50]),80);b=Array(a.positions.length);for(e=0;e<a.positions.length;e++){m=a.positions[e];p=Array(3);for(g=0;3>g;g++)p[g]=w[g]+m[g]*v[g];b[e]=p}return{positions:b,cells:a.cells}};b("resl")({manifest:{sphereTexture:{type:"image",src:"assets/spheretexture.jpg",parser:function(c){return a.texture({data:c,mag:"linear",min:"linear"})}},normalTexture:{type:"image",src:"assets/normaltexture.jpg",parser:function(c){return a.texture({data:c,wrapT:"repeat",wrapS:"repeat",
min:"linear mipmap linear",mag:"linear"})}}},onDone:function(c){var h=c.sphereTexture,b=c.normalTexture;a.frame(function(c){c=x(c.time);g({data:c.positions});r({data:c.cells});q({data:e(c.cells,c.positions)});m(function(){y({depth:{enable:!1,mask:!1}});a.clear({depth:1});n({textureMap:h,normalMap:b})})})}})},{"../regl":86,"./util/camera":2,"angle-normals":34,"gl-mat3":53,ndarray:74,resl:78,"surface-nets":79}],2:[function(b,d,f){var a=b("mouse-change"),c=b("mouse-wheel"),h=b("gl-mat4/identity"),e=
b("gl-mat4/perspective"),p=b("gl-mat4/lookAt");d.exports=function(b,g){function q(a){a*=.9;return.1>a?0:a}function d(a){var c=f.center,b=f.eye,h=f.up;f.theta+=v;f.phi=Math.min(Math.max(f.phi+B,-Math.PI/2),Math.PI/2);f.distance=Math.min(Math.max(f.distance+x,w),u);v=q(v);B=q(B);x=q(x);for(var e=f.theta,m=f.phi,g=Math.exp(f.distance),r=g*Math.sin(e)*Math.cos(m),e=g*Math.cos(e)*Math.cos(m),m=g*Math.sin(m),g=0;3>g;++g)b[g]=c[g]+r*t[g]+e*n[g]+m*h[g];p(f.view,b,c,h);D(a)}var f={view:h(new Float32Array(16)),
projection:h(new Float32Array(16)),center:new Float32Array(g.center||3),theta:g.theta||0,phi:g.phi||0,distance:Math.log(g.distance||10),eye:new Float32Array(3),up:new Float32Array(g.up||[0,1,0])},n=new Float32Array([1,0,0]),t=new Float32Array([0,0,1]),w=Math.log("minDistance"in g?g.minDistance:.1),u=Math.log("maxDistance"in g?g.maxDistance:1E3),v=0,B=0,x=0,A=0,E=0;a(function(a,c,b){if(a&1){a=(b-E)/window.innerHeight;var h=Math.max(f.distance,.5);v+=(c-A)/window.innerWidth*h;B+=h*a}A=c;E=b});c(function(a,
c){x+=c/window.innerHeight});var D=b({context:Object.assign({},f,{projection:function(a){return e(f.projection,Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)}}),uniforms:Object.keys(f).reduce(function(a,c){a[c]=b.context(c);return a},{})});Object.keys(f).forEach(function(a){d[a]=f[a]});return d}},{"gl-mat4/identity":62,"gl-mat4/lookAt":63,"gl-mat4/perspective":64,"mouse-change":70,"mouse-wheel":72}],3:[function(b,d,f){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=
0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}d.exports=function(c,b,e,p,m){c=e.maxAttributes;b=Array(c);for(e=0;e<c;++e)b[e]=new a;return{Record:a,scope:{},state:b}}},{}],4:[function(b,d,f){function a(a){return r[Object.prototype.toString.call(a)]|0}function c(a,c){for(var b=0;b<c.length;++b)a[b]=c[b]}function h(a,c,b,h,e,m,p){for(var g=0,n=0;n<b;++n)for(var d=0;d<h;++d)a[g++]=c[e*n+m*d+p]}function e(a,c,b){for(var h=0,e=0;e<c.length;++e)for(var m=c[e],p=0;p<b;++p)a[h++]=
m[p]}var p=b("./util/is-typed-array"),m=b("./util/is-ndarray"),g=b("./util/values"),q=b("./util/pool"),r=b("./constants/arraytypes.json"),y=b("./constants/dtypes.json"),n=b("./constants/usage.json"),t=[];t[5120]=1;t[5122]=2;t[5124]=4;t[5121]=1;t[5123]=2;t[5125]=4;t[5126]=4;d.exports=function(b,d,f){function r(a){this.id=D++;this.buffer=b.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;f.profile&&(this.stats={size:0})}function x(a,
c,h){a.byteLength=c.byteLength;b.bufferData(a.type,c,h)}function A(b,g,n,d,f,r){b.usage=n;if(Array.isArray(g))b.dtype=d||5126,0<g.length&&(Array.isArray(g[0])?(b.dimension=g[0].length,d=q.allocType(b.dtype,g.length*b.dimension),e(d,g,b.dimension),x(b,d,n),r?b.persistentData=d:q.freeType(d)):"number"===typeof g[0]?(b.dimension=f,d=q.allocType(b.dtype,g.length),c(d,g),x(b,d,n),r?b.persistentData=d:q.freeType(d)):p(g[0])&&(b.dimension=g[0].length,b.dtype=d||a(g[0])||5126,d=q.allocType(b.dtype,g.length*
b.dimension),e(d,g,b.dimension),x(b,d,n),r?b.persistentData=d:q.freeType(d)));else if(p(g))b.dtype=d||a(g),b.dimension=f,x(b,g,n),r&&(b.persistentData=new Uint8Array(new Uint8Array(g.buffer)));else if(m(g)){var t=g.shape,C=g.stride;f=g.offset;var w=0,u=0,k=0,l=0;1===t.length?(w=t[0],u=1,k=C[0],l=0):2===t.length&&(w=t[0],u=t[1],k=C[0],l=C[1]);b.dtype=d||a(g.data)||5126;b.dimension=u;d=q.allocType(b.dtype,w*u);h(d,g.data,w,u,k,l,f);x(b,d,n);r?b.persistentData=d:q.freeType(d)}}function E(a){d.bufferCount--;
b.deleteBuffer(a.buffer);a.buffer=null;delete C[a.id]}var D=0,C={};r.prototype.bind=function(){b.bindBuffer(this.type,this.buffer)};r.prototype.destroy=function(){E(this)};var M=[];f.profile&&(d.getTotalBufferSize=function(){var a=0;Object.keys(C).forEach(function(c){a+=C[c].stats.size});return a});return{create:function(g,x,M,D){function F(a){var c=35044,h=null,e=0,k=0,l=1;Array.isArray(a)||p(a)||m(a)?h=a:"number"===typeof a?e=a|0:a&&("data"in a&&(h=a.data),"usage"in a&&(c=n[a.usage]),"type"in a&&
(k=y[a.type]),"dimension"in a&&(l=a.dimension|0),"length"in a&&(e=a.length|0));I.bind();h?A(I,h,c,k,l,D):(b.bufferData(I.type,e,c),I.dtype=k||5121,I.usage=c,I.dimension=l,I.byteLength=e);f.profile&&(I.stats.size=I.byteLength*t[I.dtype]);return F}d.bufferCount++;var I=new r(x);C[I.id]=I;M||F(g);F._reglType="buffer";F._buffer=I;F.subdata=function(g,d){var n=(d||0)|0;I.bind();if(Array.isArray(g)){if(0<g.length)if("number"===typeof g[0]){var f=q.allocType(I.dtype,g.length);c(f,g);b.bufferSubData(I.type,
n,f);q.freeType(f)}else if(Array.isArray(g[0])||p(g[0])){var f=g[0].length,k=q.allocType(I.dtype,g.length*f);e(k,g,f);b.bufferSubData(I.type,n,k);q.freeType(k)}}else if(p(g))b.bufferSubData(I.type,n,g);else if(m(g)){var l=g.shape,z=g.stride,r=k=f=0,t=0;1===l.length?(f=l[0],k=1,r=z[0],t=0):2===l.length&&(f=l[0],k=l[1],r=z[0],t=z[1]);l=Array.isArray(g.data)?I.dtype:a(g.data);l=q.allocType(l,f*k);h(l,g.data,f,k,r,t,g.offset);b.bufferSubData(I.type,n,l);q.freeType(l)}return F};f.profile&&(F.stats=I.stats);
F.destroy=function(){E(I)};return F},createStream:function(a,c){var b=M.pop();b||(b=new r(a));b.bind();A(b,c,35040,0,1,!1);return b},destroyStream:function(a){M.push(a)},clear:function(){g(C).forEach(E);M.forEach(E)},getBuffer:function(a){return a&&a._buffer instanceof r?a._buffer:null},restore:function(){g(C).forEach(function(a){a.buffer=b.createBuffer();b.bindBuffer(a.type,a.buffer);b.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:A}}},{"./constants/arraytypes.json":5,
"./constants/dtypes.json":6,"./constants/usage.json":8,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/pool":29,"./util/values":32}],5:[function(b,d,f){d.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(b,d,f){d.exports={int8:5120,
int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],7:[function(b,d,f){d.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(b,d,f){d.exports={"static":35044,dynamic:35048,stream:35040}},{}],9:[function(b,d,f){function a(a){return Array.isArray(a)||r(a)||y(a)}function c(a){return a.sort(function(a,c){return"viewport"===a?-1:"viewport"===c?1:a<c?-1:1})}function h(a,c,
b,h){this.thisDep=a;this.contextDep=c;this.propDep=b;this.append=h}function e(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function p(a){return new h(!1,!1,!1,a)}function m(a,c){var b=a.type;return 0===b?(b=a.data.length,new h(!0,1<=b,2<=b,c)):4===b?(b=a.data,new h(b.thisDep,b.contextDep,b.propDep,c)):new h(3===b,2===b,1===b,c)}var g=b("./util/codegen"),q=b("./util/loop"),r=b("./util/is-typed-array"),y=b("./util/is-ndarray"),n=b("./util/is-array-like"),t=b("./dynamic"),w=b("./constants/primitives.json"),
u=b("./constants/dtypes.json"),v=["x","y","z","w"],B="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),x={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
A={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},E={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},D={cw:2304,ccw:2305},C=new h(!1,!1,!1,function(){});d.exports=function(b,d,f,r,y,F,I,K,V,ba,X,k,l,z,J){function P(a){return a.replace(".","_")}function O(a,k,c){var b=P(a);Ba.push(a);ya[b]=qa[b]=!!c;ra[b]=
k}function L(a,k,c){var b=P(a);Ba.push(a);Array.isArray(c)?(qa[b]=c.slice(),ya[b]=c.slice()):qa[b]=ya[b]=c;sa[b]=k}function ta(){var a=g(),k=a.link,c=a.global;a.id=Ia++;a.batchId="0";var b=k(Ha),l=a.shared={props:"a0"};Object.keys(Ha).forEach(function(a){l[a]=c.def(b,".",a)});var h=a.next={},e=a.current={};Object.keys(sa).forEach(function(a){Array.isArray(qa[a])&&(h[a]=c.def(l.next,".",a),e[a]=c.def(l.current,".",a))});var m=a.constants={};Object.keys(Ca).forEach(function(a){m[a]=c.def(JSON.stringify(Ca[a]))});
a.invoke=function(c,b){switch(b.type){case 0:var h=["this",l.context,l.props,a.batchId];return c.def(k(b.data),".call(",h.slice(0,Math.max(b.data.length+1,4)),")");case 1:return c.def(l.props,b.data);case 2:return c.def(l.context,b.data);case 3:return c.def("this",b.data);case 4:return b.data.append(a,c),b.data.ref}};a.attribCache={};var p={};a.scopeAttrib=function(a){a=d.id(a);if(a in p)return p[a];var c=ba.scope[a];c||(c=ba.scope[a]=new ca);return p[a]=k(c)};return a}function la(a){var k=a["static"];
a=a.dynamic;var c;if("profile"in k){var b=!!k.profile;c=p(function(a,k){return b});c.enable=b}else if("profile"in a){var l=a.profile;c=m(l,function(a,k){return a.invoke(k,l)})}return c}function ua(a,k){var c=a["static"],b=a.dynamic;if("framebuffer"in c){var l=c.framebuffer;return l?(l=K.getFramebuffer(l),p(function(a,k){var c=a.link(l),b=a.shared;k.set(b.framebuffer,".next",c);b=b.context;k.set(b,".framebufferWidth",c+".width");k.set(b,".framebufferHeight",c+".height");return c})):p(function(a,k){var c=
a.shared;k.set(c.framebuffer,".next","null");c=c.context;k.set(c,".framebufferWidth",c+".drawingBufferWidth");k.set(c,".framebufferHeight",c+".drawingBufferHeight");return"null"})}if("framebuffer"in b){var h=b.framebuffer;return m(h,function(a,k){var c=a.invoke(k,h),b=a.shared,l=b.framebuffer,c=k.def(l,".getFramebuffer(",c,")");k.set(l,".next",c);b=b.context;k.set(b,".framebufferWidth",c+"?"+c+".width:"+b+".drawingBufferWidth");k.set(b,".framebufferHeight",c+"?"+c+".height:"+b+".drawingBufferHeight");
return c})}return null}function S(a,k,c){function b(a){if(a in l){var c=l[a];a=!0;var g=c.x|0,p=c.y|0,d,z;"width"in c?d=c.width|0:a=!1;"height"in c?z=c.height|0:a=!1;return new h(!a&&k&&k.thisDep,!a&&k&&k.contextDep,!a&&k&&k.propDep,function(a,k){var b=a.shared.context,l=d;"width"in c||(l=k.def(b,".","framebufferWidth","-",g));var h=z;"height"in c||(h=k.def(b,".","framebufferHeight","-",p));return[g,p,l,h]})}if(a in e){var n=e[a];a=m(n,function(a,k){var c=a.invoke(k,n),b=a.shared.context,l=k.def(c,
".x|0"),h=k.def(c,".y|0"),e=k.def('"width" in ',c,"?",c,".width|0:","(",b,".","framebufferWidth","-",l,")"),c=k.def('"height" in ',c,"?",c,".height|0:","(",b,".","framebufferHeight","-",h,")");return[l,h,e,c]});k&&(a.thisDep=a.thisDep||k.thisDep,a.contextDep=a.contextDep||k.contextDep,a.propDep=a.propDep||k.propDep);return a}return k?new h(k.thisDep,k.contextDep,k.propDep,function(a,k){var c=a.shared.context;return[0,0,k.def(c,".","framebufferWidth"),k.def(c,".","framebufferHeight")]}):null}var l=
a["static"],e=a.dynamic;if(a=b("viewport")){var g=a;a=new h(a.thisDep,a.contextDep,a.propDep,function(a,k){var c=g.append(a,k),b=a.shared.context;k.set(b,".viewportWidth",c[2]);k.set(b,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:b("scissor.box")}}function fa(a){function k(a){if(a in c){var l=d.id(c[a]);a=p(function(){return l});a.id=l;return a}if(a in b){var h=b[a];return m(h,function(a,k){var c=a.invoke(k,h);return k.def(a.shared.strings,".id(",c,")")})}return null}var c=a["static"],
b=a.dynamic,l=k("frag"),g=k("vert"),z=null;e(l)&&e(g)?(z=X.program(g.id,l.id),a=p(function(a,k){return a.link(z)})):a=new h(l&&l.thisDep||g&&g.thisDep,l&&l.contextDep||g&&g.contextDep,l&&l.propDep||g&&g.propDep,function(a,k){var c=a.shared.shader,b;b=l?l.append(a,k):k.def(c,".","frag");var h;h=g?g.append(a,k):k.def(c,".","vert");return k.def(c+".program("+h+","+b+")")});return{frag:l,vert:g,progVar:a,program:z}}function ga(k,c){function b(a,k){if(a in l){var c=l[a]|0;return p(function(a,b){k&&(a.OFFSET=
c);return c})}if(a in g){var h=g[a];return m(h,function(a,c){var b=a.invoke(c,h);k&&(a.OFFSET=b);return b})}return k&&z?p(function(a,k){a.OFFSET="0";return 0}):null}var l=k["static"],g=k.dynamic,z=function(){if("elements"in l){var k=l.elements;a(k)?k=F.getElements(F.create(k,!0)):k&&(k=F.getElements(k));var c=p(function(a,c){if(k){var b=a.link(k);return a.ELEMENTS=b}return a.ELEMENTS=null});c.value=k;return c}if("elements"in g){var b=g.elements;return m(b,function(a,k){var c=a.shared,l=c.isBufferArgs,
c=c.elements,h=a.invoke(k,b),e=k.def("null"),l=k.def(l,"(",h,")"),h=a.cond(l).then(e,"=",c,".createStream(",h,");")["else"](e,"=",c,".getElements(",h,");");k.entry(h);k.exit(a.cond(l).then(c,".destroyStream(",e,");"));return a.ELEMENTS=e})}return null}(),d=b("offset",!0);return{elements:z,primitive:function(){if("primitive"in l){var a=l.primitive;return p(function(k,c){return w[a]})}if("primitive"in g){var k=g.primitive;return m(k,function(a,c){var b=a.constants.primTypes,l=a.invoke(c,k);return c.def(b,
"[",l,"]")})}return z?e(z)?z.value?p(function(a,k){return k.def(a.ELEMENTS,".primType")}):p(function(){return 4}):new h(z.thisDep,z.contextDep,z.propDep,function(a,k){var c=a.ELEMENTS;return k.def(c,"?",c,".primType:",4)}):null}(),count:function(){if("count"in l){var a=l.count|0;return p(function(){return a})}if("count"in g){var k=g.count;return m(k,function(a,c){return a.invoke(c,k)})}return z?e(z)?z?d?new h(d.thisDep,d.contextDep,d.propDep,function(a,k){return k.def(a.ELEMENTS,".vertCount-",a.OFFSET)}):
p(function(a,k){return k.def(a.ELEMENTS,".vertCount")}):p(function(){return-1}):new h(z.thisDep||d.thisDep,z.contextDep||d.contextDep,z.propDep||d.propDep,function(a,k){var c=a.ELEMENTS;return a.OFFSET?k.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):k.def(c,"?",c,".vertCount:-1")}):null}(),instances:b("instances",!1),offset:d}}function na(a,k){var c=a["static"],b=a.dynamic,l={};Ba.forEach(function(a){function k(e,g){if(a in c){var z=e(c[a]);l[h]=p(function(){return z})}else if(a in b){var d=b[a];l[h]=
m(d,function(a,k){return g(a,k,a.invoke(k,d))})}}var h=P(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return k(function(a){return a},function(a,k,c){return c});case "depth.func":return k(function(a){return A[a]},function(a,k,c){return k.def(a.constants.compareFuncs,"[",c,"]")});case "depth.range":return k(function(a){return a},
function(a,k,c){a=k.def("+",c,"[0]");k=k.def("+",c,"[1]");return[a,k]});case "blend.func":return k(function(a){return[x["srcRGB"in a?a.srcRGB:a.src],x["dstRGB"in a?a.dstRGB:a.dst],x["srcAlpha"in a?a.srcAlpha:a.src],x["dstAlpha"in a?a.dstAlpha:a.dst]]},function(a,k,c){function b(a,l){return k.def('"',a,l,'" in ',c,"?",c,".",a,l,":",c,".",a)}a=a.constants.blendFuncs;var l=b("src","RGB"),h=b("dst","RGB"),l=k.def(a,"[",l,"]"),e=k.def(a,"[",b("src","Alpha"),"]"),h=k.def(a,"[",h,"]");a=k.def(a,"[",b("dst",
"Alpha"),"]");return[l,h,e,a]});case "blend.equation":return k(function(a){if("string"===typeof a)return[ja[a],ja[a]];if("object"===typeof a)return[ja[a.rgb],ja[a.alpha]]},function(a,k,c){var b=a.constants.blendEquations,l=k.def(),h=k.def();a=a.cond("typeof ",c,'==="string"');a.then(l,"=",h,"=",b,"[",c,"];");a["else"](l,"=",b,"[",c,".rgb];",h,"=",b,"[",c,".alpha];");k(a);return[l,h]});case "blend.color":return k(function(a){return q(4,function(k){return+a[k]})},function(a,k,c){return q(4,function(a){return k.def("+",
c,"[",a,"]")})});case "stencil.mask":return k(function(a){return a|0},function(a,k,c){return k.def(c,"|0")});case "stencil.func":return k(function(a){return[A[a.cmp||"keep"],a.ref||0,"mask"in a?a.mask:-1]},function(a,k,c){a=k.def('"cmp" in ',c,"?",a.constants.compareFuncs,"[",c,".cmp]",":",7680);var b=k.def(c,".ref|0");k=k.def('"mask" in ',c,"?",c,".mask|0:-1");return[a,b,k]});case "stencil.opFront":case "stencil.opBack":return k(function(k){return["stencil.opBack"===a?1029:1028,E[k.fail||"keep"],
E[k.zfail||"keep"],E[k.zpass||"keep"]]},function(k,c,b){function l(a){return c.def('"',a,'" in ',b,"?",h,"[",b,".",a,"]:",7680)}var h=k.constants.stencilOps;return["stencil.opBack"===a?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return k(function(a){return[a.factor|0,a.units|0]},function(a,k,c){a=k.def(c,".factor|0");k=k.def(c,".units|0");return[a,k]});case "cull.face":return k(function(a){var k=0;"front"===a?k=1028:"back"===a&&(k=1029);return k},function(a,k,c){return k.def(c,
'==="front"?',1028,":",1029)});case "lineWidth":return k(function(a){return a},function(a,k,c){return c});case "frontFace":return k(function(a){return D[a]},function(a,k,c){return k.def(c+'==="cw"?2304:2305')});case "colorMask":return k(function(a){return a.map(function(a){return!!a})},function(a,k,c){return q(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return k(function(a){return["value"in a?a.value:1,!!a.invert]},function(a,k,c){a=k.def('"value" in ',c,"?+",c,".value:1");k=k.def("!!",
c,".invert");return[a,k]})}});return l}function ha(a,k){var c=a["static"],b=a.dynamic,l={};Object.keys(c).forEach(function(a){var k=c[a],b;if("number"===typeof k||"boolean"===typeof k)b=p(function(){return k});else if("function"===typeof k){var h=k._reglType;if("texture2d"===h||"textureCube"===h)b=p(function(a){return a.link(k)});else if("framebuffer"===h||"framebufferCube"===h)b=p(function(a){return a.link(k.color[0])})}else n(k)&&(b=p(function(a){return a.global.def("[",q(k.length,function(a){return k[a]}),
"]")}));b.value=k;l[a]=b});Object.keys(b).forEach(function(a){var k=b[a];l[a]=m(k,function(a,c){return a.invoke(c,k)})});return l}function Y(k,c){var b=k["static"],l=k.dynamic,h={};Object.keys(b).forEach(function(k){var c=b[k],l=d.id(k),e=new ca;if(a(c))e.state=1,e.buffer=y.getBuffer(y.create(c,34962,!1,!0)),e.type=0;else{var g=y.getBuffer(c);if(g)e.state=1,e.buffer=g,e.type=0;else if(c.constant){var m=c.constant;e.buffer="null";e.state=2;"number"===typeof m?e.x=m:v.forEach(function(a,k){k<m.length&&
(e[a]=m[k])})}else{var g=a(c.buffer)?y.getBuffer(y.create(c.buffer,34962,!1,!0)):y.getBuffer(c.buffer),z=c.offset|0,n=c.stride|0,q=c.size|0,f=!!c.normalized,r=0;"type"in c&&(r=u[c.type]);c=c.divisor|0;e.buffer=g;e.state=1;e.size=q;e.normalized=f;e.type=r||g.dtype;e.offset=z;e.stride=n;e.divisor=c}}h[k]=p(function(a,k){var c=a.attribCache;if(l in c)return c[l];var b={isStream:!1};Object.keys(e).forEach(function(a){b[a]=e[a]});e.buffer&&(b.buffer=a.link(e.buffer),b.type=b.type||b.buffer+".dtype");return c[l]=
b})});Object.keys(l).forEach(function(a){var k=l[a];h[a]=m(k,function(a,c){function b(a){c(m[a],"=",l,".",a,"|0;")}var l=a.invoke(c,k),h=a.shared,e=h.isBufferArgs,g=h.buffer,m={isStream:c.def(!1)},p=new ca;p.state=1;Object.keys(p).forEach(function(a){m[a]=c.def(""+p[a])});var z=m.buffer,d=m.type;c("if(",e,"(",l,")){",m.isStream,"=true;",z,"=",g,".createStream(",34962,",",l,");",d,"=",z,".dtype;","}else{",z,"=",g,".getBuffer(",l,");","if(",z,"){",d,"=",z,".dtype;",'}else if("constant" in ',l,"){",
m.state,"=",2,";","if(typeof "+l+'.constant === "number"){',m[v[0]],"=",l,".constant;",v.slice(1).map(function(a){return m[a]}).join("="),"=0;","}else{",v.map(function(a,k){return m[a]+"="+l+".constant.length>="+k+"?"+l+".constant["+k+"]:0;"}).join(""),"}}else{","if(",e,"(",l,".buffer)){",z,"=",g,".createStream(",34962,",",l,".buffer);","}else{",z,"=",g,".getBuffer(",l,".buffer);","}",d,'="type" in ',l,"?",h.glTypes,"[",l,".type]:",z,".dtype;",m.normalized,"=!!",l,".normalized;");b("size");b("offset");
b("stride");b("divisor");c("}}");c.exit("if(",m.isStream,"){",g,".destroyStream(",z,");","}");return m})});return h}function oa(a){var k=a["static"],c=a.dynamic,b={};Object.keys(k).forEach(function(a){var c=k[a];b[a]=p(function(a,k){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});Object.keys(c).forEach(function(a){var k=c[a];b[a]=m(k,function(a,c){return a.invoke(c,k)})});return b}function ma(a,k,c,b,l){var h=ua(a,l),e=S(a,h,l),g=ga(a,l),m=na(a,l),p=fa(a,l),z=e.viewport;z&&(m.viewport=
z);z=P("scissor.box");(e=e[z])&&(m[z]=e);e=0<Object.keys(m).length;h={framebuffer:h,draw:g,shader:p,state:m,dirty:e};h.profile=la(a,l);h.uniforms=ha(c,l);h.attributes=Y(k,l);h.context=oa(b,l);return h}function Q(a,k,c){var b=a.shared.context,l=a.scope();Object.keys(c).forEach(function(h){k.save(b,"."+h);l(b,".",h,"=",c[h].append(a,k),";")});k(l)}function aa(a,k,c,b){var l=a.shared,h=l.gl,e=l.framebuffer,m;ia&&(m=k.def(l.extensions,".webgl_draw_buffers"));var g=a.constants,l=g.drawBuffer,g=g.backBuffer;
a=c?c.append(a,k):k.def(e,".next");b||k("if(",a,"!==",e,".cur){");k("if(",a,"){",h,".bindFramebuffer(",36160,",",a,".framebuffer);");ia&&k(m,".drawBuffersWEBGL(",l,"[",a,".colorAttachments.length]);");k("}else{",h,".bindFramebuffer(",36160,",null);");ia&&k(m,".drawBuffersWEBGL(",g,");");k("}",e,".cur=",a,";");b||k("}")}function da(a,k,c){var b=a.shared,l=b.gl,h=a.current,e=a.next,m=b.current,g=b.next,p=a.cond(m,".dirty");Ba.forEach(function(k){k=P(k);if(!(k in c.state)){var b,z;if(k in e){b=e[k];
z=h[k];var d=q(qa[k].length,function(a){return p.def(b,"[",a,"]")});p(a.cond(d.map(function(a,k){return a+"!=="+z+"["+k+"]"}).join("||")).then(l,".",sa[k],"(",d,");",d.map(function(a,k){return z+"["+k+"]="+a}).join(";"),";"))}else b=p.def(g,".",k),d=a.cond(b,"!==",m,".",k),p(d),k in ra?d(a.cond(b).then(l,".enable(",ra[k],");")["else"](l,".disable(",ra[k],");"),m,".",k,"=",b,";"):d(l,".",sa[k],"(",b,");",m,".",k,"=",b,";")}});0===Object.keys(c.state).length&&p(m,".dirty=false;");k(p)}function R(a,
k,b,l){var h=a.shared,m=a.current,g=h.current,p=h.gl;c(Object.keys(b)).forEach(function(c){var h=b[c];if(!l||l(h)){var z=h.append(a,k);if(ra[c]){var d=ra[c];e(h)?z?k(p,".enable(",d,");"):k(p,".disable(",d,");"):k(a.cond(z).then(p,".enable(",d,");")["else"](p,".disable(",d,");"));k(g,".",c,"=",z,";")}else if(n(z)){var q=m[c];k(p,".",sa[c],"(",z,");",z.map(function(a,k){return q+"["+k+"]="+a}).join(";"),";")}else k(p,".",sa[c],"(",z,");",g,".",c,"=",z,";")}})}function T(a,k){ka&&(a.instancing=k.def(a.shared.extensions,
".angle_instanced_arrays"))}function W(a,k,c,b,l){function h(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function m(a){r=k.def();a(r,"=",h(),";");"string"===typeof l?a(n,".count+=",l,";"):a(n,".count++;");z&&(b?(t=k.def(),a(t,"=",f,".getNumPendingQueries();")):a(f,".beginQuery(",n,");"))}function g(a){a(n,".cpuTime+=",h(),"-",r,";");z&&(b?a(f,".pushScopeStats(",t,",",f,".getNumPendingQueries(),",n,");"):a(f,".endQuery();"))}function p(a){var c=k.def(q,".profile");k(q,
".profile=",a,";");k.exit(q,".profile=",c,";")}var d=a.shared,n=a.stats,q=d.current,f=d.timer;c=c.profile;var r,t;if(c){if(e(c)){c.enable?(m(k),g(k.exit),p("true")):p("false");return}c=c.append(a,k);p(c)}else c=k.def(q,".profile");d=a.block();m(d);k("if(",c,"){",d,"}");a=a.block();g(a);k.exit("if(",c,"){",a,"}")}function Z(a,k,c,b,l){function h(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function e(c,b,l){function h(){k("if(!",d,".buffer){",p,".enableVertexAttribArray(",z,");}");var c=l.type,e;e=l.size?k.def(l.size,"||",b):b;k("if(",d,".type!==",c,"||",d,".size!==",e,"||",f.map(function(a){return d+"."+a+"!=="+l[a]}).join("||"),"){",p,".bindBuffer(",34962,",",n,".buffer);",p,".vertexAttribPointer(",[z,e,c,l.normalized,l.stride,l.offset],");",d,".type=",c,";",d,".size=",e,";",f.map(function(a){return d+"."+a+"="+l[a]+";"}).join(""),"}");ka&&(c=l.divisor,k("if(",d,".divisor!==",c,"){",
a.instancing,".vertexAttribDivisorANGLE(",[z,c],");",d,".divisor=",c,";}"))}function g(){k("if(",d,".buffer){",p,".disableVertexAttribArray(",z,");","}if(",v.map(function(a,k){return d+"."+a+"!=="+q[k]}).join("||"),"){",p,".vertexAttrib4f(",z,",",q,");",v.map(function(a,k){return d+"."+a+"="+q[k]+";"}).join(""),"}")}var p=m.gl,z=k.def(c,".location"),d=k.def(m.attributes,"[",z,"]");c=l.state;var n=l.buffer,q=[l.x,l.y,l.z,l.w],f=["buffer","normalized","offset","stride"];1===c?h():2===c?g():(k("if(",
c,"===",1,"){"),h(),k("}else{"),g(),k("}"))}var m=a.shared;b.forEach(function(b){var m=b.name,g=c.attributes[m],p;if(g){if(!l(g))return;p=g.append(a,k)}else{if(!l(C))return;var z=a.scopeAttrib(m);p={};Object.keys(new ca).forEach(function(a){p[a]=k.def(z,".",a)})}e(a.link(b),h(b.info.type),p)})}function ea(a,k,c,b,l){for(var h=a.shared,m=h.gl,g,p=0;p<b.length;++p){var z=b[p],f=z.name,r=z.info.type,t=c.uniforms[f],z=a.link(z)+".location",J;if(t){if(!l(t))continue;if(e(t)){f=t.value;if(35678===r||35680===
r)r=a.link(f._texture||f.color[0]._texture),k(m,".uniform1i(",z,",",r+".bind());"),k.exit(r,".unbind();");else if(35674===r||35675===r||35676===r)f=a.global.def("new Float32Array(["+Array.prototype.slice.call(f)+"])"),t=2,35675===r?t=3:35676===r&&(t=4),k(m,".uniformMatrix",t,"fv(",z,",false,",f,");");else{switch(r){case 5126:g="1f";break;case 35664:g="2f";break;case 35665:g="3f";break;case 35666:g="4f";break;case 35670:g="1i";break;case 5124:g="1i";break;case 35671:g="2i";break;case 35667:g="2i";
break;case 35672:g="3i";break;case 35668:g="3i";break;case 35673:g="4i";break;case 35669:g="4i"}k(m,".uniform",g,"(",z,",",n(f)?Array.prototype.slice.call(f):f,");")}continue}else J=t.append(a,k)}else{if(!l(C))continue;J=k.def(h.uniforms,"[",d.id(f),"]")}35678===r?k("if(",J,"&&",J,'._reglType==="framebuffer"){',J,"=",J,".color[0];","}"):35680===r&&k("if(",J,"&&",J,'._reglType==="framebufferCube"){',J,"=",J,".color[0];","}");f=1;switch(r){case 35678:case 35680:r=k.def(J,"._texture");k(m,".uniform1i(",
z,",",r,".bind());");k.exit(r,".unbind();");continue;case 5124:case 35670:g="1i";break;case 35667:case 35671:g="2i";f=2;break;case 35668:case 35672:g="3i";f=3;break;case 35669:case 35673:g="4i";f=4;break;case 5126:g="1f";break;case 35664:g="2f";f=2;break;case 35665:g="3f";f=3;break;case 35666:g="4f";f=4;break;case 35674:g="Matrix2fv";break;case 35675:g="Matrix3fv";break;case 35676:g="Matrix4fv"}k(m,".uniform",g,"(",z,",");if("M"===g.charAt(0)){var z=Math.pow(r-35674+2,2),ia=a.global.def("new Float32Array(",
z,")");k("false,(Array.isArray(",J,")||",J," instanceof Float32Array)?",J,":(",q(z,function(a){return ia+"["+a+"]="+J+"["+a+"]"}),",",ia,")")}else 1<f?k(q(f,function(a){return J+"["+a+"]"})):k(J);k(");")}}function wa(a,k,c,b){function l(h){var e=d[h];return e?e.contextDep&&b.contextDynamic||e.propDep?e.append(a,c):e.append(a,k):k.def(z,".",h)}function h(){function a(){c(J,".drawElementsInstancedANGLE(",[f,r,ia,q+"<<(("+ia+"-5121)>>1)",t],");")}function k(){c(J,".drawArraysInstancedANGLE(",[f,q,r,
t],");")}n?C?a():(c("if(",n,"){"),a(),c("}else{"),k(),c("}")):k()}function g(){function a(){c(p+".drawElements("+[f,r,ia,q+"<<(("+ia+"-5121)>>1)"]+");")}function k(){c(p+".drawArrays("+[f,q,r]+");")}n?C?a():(c("if(",n,"){"),a(),c("}else{"),k(),c("}")):k()}var m=a.shared,p=m.gl,z=m.draw,d=b.draw,n=function(){var l=d.elements,h=k;if(l){if(l.contextDep&&b.contextDynamic||l.propDep)h=c;l=l.append(a,h)}else l=h.def(z,".","elements");l&&h("if("+l+")"+p+".bindBuffer(34963,"+l+".buffer.buffer);");return l}(),
f=l("primitive"),q=l("offset"),r=function(){var l=d.count,h=k;if(l){if(l.contextDep&&b.contextDynamic||l.propDep)h=c;l=l.append(a,h)}else l=h.def(z,".","count");return l}();if("number"===typeof r){if(0===r)return}else c("if(",r,"){"),c.exit("}");var t,J;ka&&(t=l("instances"),J=a.instancing);var ia=n+".type",C=d.elements&&e(d.elements);ka&&("number"!==typeof t||0<=t)?"string"===typeof t?(c("if(",t,">0){"),h(),c("}else if(",t,"<0){"),g(),c("}")):h():g()}function va(a,k,c,b,l){k=ta();l=k.proc("body",
l);ka&&(k.instancing=l.def(k.shared.extensions,".angle_instanced_arrays"));a(k,l,c,b);return k.compile().body}function xa(a,k,c,b){T(a,k);Z(a,k,c,b.attributes,function(){return!0});ea(a,k,c,b.uniforms,function(){return!0});wa(a,k,k,c)}function za(a,k){var c=a.proc("draw",1);T(a,c);Q(a,c,k.context);aa(a,c,k.framebuffer);da(a,c,k);R(a,c,k.state);W(a,c,k,!1,!0);var b=k.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",b,".program);");if(k.shader.program)xa(a,c,k,k.shader.program);else{var l=a.global.def("{}"),
h=c.def(b,".id"),e=c.def(l,"[",h,"]");c(a.cond(e).then(e,".call(this,a0);")["else"](e,"=",l,"[",h,"]=",a.link(function(c){return va(xa,a,k,c,1)}),"(",b,");",e,".call(this,a0);"))}0<Object.keys(k.state).length&&c(a.shared.current,".dirty=true;")}function Aa(a,k,c,b){function l(){return!0}a.batchId="a1";T(a,k);Z(a,k,c,b.attributes,l);ea(a,k,c,b.uniforms,l);wa(a,k,k,c)}function pa(a,k,c,b){function l(a){return a.contextDep&&e||a.propDep}function h(a){return!l(a)}T(a,k);var e=c.contextDep,g=k.def(),m=
k.def();a.shared.props=m;a.batchId=g;var p=a.scope(),z=a.scope();k(p.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",m,"=","a0","[",g,"];",z,"}",p.exit);c.needsContext&&Q(a,z,c.context);c.needsFramebuffer&&aa(a,z,c.framebuffer);R(a,z,c.state,l);c.profile&&l(c.profile)&&W(a,z,c,!1,!0);b?(Z(a,p,c,b.attributes,h),Z(a,z,c,b.attributes,l),ea(a,p,c,b.uniforms,h),ea(a,z,c,b.uniforms,l),wa(a,p,z,c)):(k=a.global.def("{}"),b=c.shader.progVar.append(a,z),m=z.def(b,".id"),p=z.def(k,"[",m,"]"),z(a.shared.gl,".useProgram(",
b,".program);","if(!",p,"){",p,"=",k,"[",m,"]=",a.link(function(k){return va(Aa,a,c,k,2)}),"(",b,");}",p,".call(this,a0[",g,"],",g,");"))}function Ga(a,k){function c(a){return a.contextDep&&l||a.propDep}var b=a.proc("batch",2);a.batchId="0";T(a,b);var l=!1,h=!0;Object.keys(k.context).forEach(function(a){l=l||k.context[a].propDep});l||(Q(a,b,k.context),h=!1);var e=k.framebuffer,g=!1;e?(e.propDep?l=g=!0:e.contextDep&&l&&(g=!0),g||aa(a,b,e)):aa(a,b,null);k.state.viewport&&k.state.viewport.propDep&&(l=
!0);da(a,b,k);R(a,b,k.state,function(a){return!c(a)});k.profile&&c(k.profile)||W(a,b,k,!1,"a1");k.contextDep=l;k.needsContext=h;k.needsFramebuffer=g;h=k.shader.progVar;if(h.contextDep&&l||h.propDep)pa(a,b,k,null);else if(h=h.append(a,b),b(a.shared.gl,".useProgram(",h,".program);"),k.shader.program)pa(a,b,k,k.shader.program);else{var e=a.global.def("{}"),g=b.def(h,".id"),m=b.def(e,"[",g,"]");b(a.cond(m).then(m,".call(this,a0,a1);")["else"](m,"=",e,"[",g,"]=",a.link(function(c){return va(pa,a,k,c,2)}),
"(",h,");",m,".call(this,a0,a1);"))}0<Object.keys(k.state).length&&b(a.shared.current,".dirty=true;")}function Da(a,k){function b(c){var e=k.shader[c];e&&l.set(h.shader,"."+c,e.append(a,l))}var l=a.proc("scope",3);a.batchId="a2";var h=a.shared,e=h.current;Q(a,l,k.context);k.framebuffer&&k.framebuffer.append(a,l);c(Object.keys(k.state)).forEach(function(c){var b=k.state[c].append(a,l);n(b)?b.forEach(function(k,b){l.set(a.next[c],"["+b+"]",k)}):l.set(h.next,"."+c,b)});W(a,l,k,!0,!0);["elements","offset",
"count","instances","primitive"].forEach(function(c){var b=k.draw[c];b&&l.set(h.draw,"."+c,""+b.append(a,l))});Object.keys(k.uniforms).forEach(function(c){l.set(h.uniforms,"["+d.id(c)+"]",k.uniforms[c].append(a,l))});Object.keys(k.attributes).forEach(function(c){var b=k.attributes[c].append(a,l),h=a.scopeAttrib(c);Object.keys(new ca).forEach(function(a){l.set(h,"."+a,b[a])})});b("vert");b("frag");0<Object.keys(k.state).length&&(l(e,".dirty=true;"),l.exit(e,".dirty=true;"));l("a1(",a.shared.context,
",a0,",a.batchId,");")}function Ea(a){if("object"===typeof a&&!n(a)){for(var k=Object.keys(a),c=0;c<k.length;++c)if(t.isDynamic(a[k[c]]))return!0;return!1}}function Fa(a,k,c){function b(a,k){e.forEach(function(c){var b=l[c];t.isDynamic(b)&&(b=a.invoke(k,b),k(d,".",c,"=",b,";"))})}var l=k["static"][c];if(l&&Ea(l)){var h=a.global,e=Object.keys(l),g=!1,p=!1,z=!1,d=a.global.def("{}");e.forEach(function(k){var c=l[k];if(t.isDynamic(c))"function"===typeof c&&(c=l[k]=t.unbox(c)),k=m(c,null),g=g||k.thisDep,
z=z||k.propDep,p=p||k.contextDep;else{h(d,".",k,"=");switch(typeof c){case "number":h(c);break;case "string":h('"',c,'"');break;case "object":Array.isArray(c)&&h("[",c.join(),"]");break;default:h(a.link(c))}h(";")}});k.dynamic[c]=new t.DynamicVariable(4,{thisDep:g,contextDep:p,propDep:z,ref:d,append:b});delete k["static"][c]}}var ca=ba.Record,ja={add:32774,subtract:32778,"reverse subtract":32779};f.ext_blend_minmax&&(ja.min=32775,ja.max=32776);var ka=f.angle_instanced_arrays,ia=f.webgl_draw_buffers,
qa={dirty:!0,profile:J.profile},ya={},Ba=[],ra={},sa={};O("dither",3024);O("blend.enable",3042);L("blend.color","blendColor",[0,0,0,0]);L("blend.equation","blendEquationSeparate",[32774,32774]);L("blend.func","blendFuncSeparate",[1,0,1,0]);O("depth.enable",2929,!0);L("depth.func","depthFunc",513);L("depth.range","depthRange",[0,1]);L("depth.mask","depthMask",!0);L("colorMask","colorMask",[!0,!0,!0,!0]);O("cull.enable",2884);L("cull.face","cullFace",1029);L("frontFace","frontFace",2305);L("lineWidth",
"lineWidth",1);O("polygonOffset.enable",32823);L("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",32928);L("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);L("stencil.mask","stencilMask",-1);L("stencil.func","stencilFunc",[519,0,-1]);L("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);L("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);O("scissor.enable",3089);L("scissor.box","scissor",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);
L("viewport","viewport",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);var Ha={gl:b,context:l,strings:d,next:ya,current:qa,draw:k,elements:F,buffer:y,shader:X,attributes:ba.state,uniforms:V,framebuffer:K,extensions:f,timer:z,isBufferArgs:a},Ca={primTypes:w,compareFuncs:A,blendFuncs:x,blendEquations:ja,stencilOps:E,glTypes:u,orientationType:D};ia&&(Ca.backBuffer=[1029],Ca.drawBuffer=q(r.maxDrawbuffers,function(a){return 0===a?[0]:q(a,function(a){return 36064+a})}));var Ia=0;return{next:ya,current:qa,
procs:function(){var a=ta(),k=a.proc("poll"),c=a.proc("refresh"),l=a.block();k(l);c(l);var h=a.shared,e=h.gl,g=h.next,m=h.current;l(m,".dirty=false;");aa(a,k);aa(a,c,null,!0);var p=b.getExtension("angle_instanced_arrays"),z;p&&(z=a.link(p));for(var d=0;d<r.maxAttributes;++d){var f=c.def(h.attributes,"[",d,"]"),t=a.cond(f,".buffer");t.then(e,".enableVertexAttribArray(",d,");",e,".bindBuffer(",34962,",",f,".buffer.buffer);",e,".vertexAttribPointer(",d,",",f,".size,",f,".type,",f,".normalized,",f,".stride,",
f,".offset);")["else"](e,".disableVertexAttribArray(",d,");",e,".vertexAttrib4f(",d,",",f,".x,",f,".y,",f,".z,",f,".w);",f,".buffer=null;");c(t);p&&c(z,".vertexAttribDivisorANGLE(",d,",",f,".divisor);")}Object.keys(ra).forEach(function(b){var h=ra[b],p=l.def(g,".",b),z=a.block();z("if(",p,"){",e,".enable(",h,")}else{",e,".disable(",h,")}",m,".",b,"=",p,";");c(z);k("if(",p,"!==",m,".",b,"){",z,"}")});Object.keys(sa).forEach(function(b){var h=sa[b],p=qa[b],z,d,f=a.block();f(e,".",h,"(");n(p)?(h=p.length,
z=a.global.def(g,".",b),d=a.global.def(m,".",b),f(q(h,function(a){return z+"["+a+"]"}),");",q(h,function(a){return d+"["+a+"]="+z+"["+a+"];"}).join("")),k("if(",q(h,function(a){return z+"["+a+"]!=="+d+"["+a+"]"}).join("||"),"){",f,"}")):(z=l.def(g,".",b),d=l.def(m,".",b),f(z,");",m,".",b,"=",z,";"),k("if(",z,"!==",d,"){",f,"}"));c(f)});return a.compile()}(),compile:function(a,k,c,b,l){var h=ta();h.stats=h.link(l);Object.keys(k["static"]).forEach(function(a){Fa(h,k,a)});B.forEach(function(k){Fa(h,
a,k)});c=ma(a,k,c,b,h);za(h,c);Da(h,c);Ga(h,c);return h.compile()}}}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./dynamic":10,"./util/codegen":23,"./util/is-array-like":25,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/loop":28}],10:[function(b,d,f){function a(a,c){this.id=e++;this.type=a;this.data=c}function c(a){if(0===a.length)return[];var b=a.charAt(0),h=a.charAt(a.length-1);if(1<a.length&&b===h&&('"'===b||"'"===b))return['"'+a.substr(1,a.length-2).replace(/\\/g,
"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return c(a.substr(0,b.index)).concat(c(b[1])).concat(c(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(h=0;h<b.length;++h)a=a.concat(c(b[h]));return a}function h(a){return"["+c(a).join("][")+"]"}var e=0;d.exports={DynamicVariable:a,define:function(c,b){return new a(c,h(b+""))},isDynamic:function(c){return"function"===typeof c&&
!c._reglType||c instanceof a},unbox:function(c,b){return"function"===typeof c?new a(0,c):c},accessor:h}},{}],11:[function(b,d,f){var a=b("./util/is-typed-array"),c=b("./util/is-ndarray"),h=b("./util/values"),e=b("./constants/primitives.json"),p=b("./constants/usage.json");d.exports=function(b,g,d,f){function y(a){this.id=u++;w[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function n(b,h,e,m,p,f,n){(f=n)||a(h)&&(!c(h)||a(h.data))||(f=g.oes_element_index_uint?5125:5123);b.buffer.bind();
d._initBuffer(b.buffer,h,e,f,3);h=n;if(!n){switch(b.buffer.dtype){case 5121:case 5120:h=5121;break;case 5123:case 5122:h=5123;break;case 5125:case 5124:h=5125}b.buffer.dtype=h}b.type=h;0>p&&(p=b.buffer.byteLength,5123===h?p>>=1:5125===h&&(p>>=2));b.vertCount=p;p=m;0>m&&(p=4,m=b.buffer.dimension,1===m&&(p=0),2===m&&(p=1),3===m&&(p=4));b.primType=p}function t(a){f.elementsCount--;delete w[a.id];a.buffer.destroy();a.buffer=null}var w={},u=0,v={uint8:5121,uint16:5123};g.oes_element_index_uint&&(v.uint32=
5125);y.prototype.bind=function(){this.buffer.bind()};var B=[];return{create:function(h,g){function u(h){if(h)if("number"===typeof h)w(h),C.primType=4,C.vertCount=h|0,C.type=5121;else{var g=null,d=35044,f=-1,q=-1,r=0,t=0;Array.isArray(h)||a(h)||c(h)?g=h:("data"in h&&(g=h.data),"usage"in h&&(d=p[h.usage]),"primitive"in h&&(f=e[h.primitive]),"count"in h&&(q=h.count|0),"length"in h&&(r=h.length|0),"type"in h&&(t=v[h.type]));g?n(C,g,d,f,q,r,t):(h=C.buffer,h.bind(),b.bufferData(34963,r,d),h.dtype=t||5121,
h.usage=d,h.dimension=3,h.byteLength=r,C.primType=0>f?4:f,C.vertCount=0>q?0:q,C.type=h.dtype)}else w(),C.primType=4,C.vertCount=0,C.type=5121;return u}var w=d.create(null,34963,!0),C=new y(w._buffer);f.elementsCount++;u(h);u._reglType="elements";u._elements=C;u.subdata=function(a,c){w.subdata(a,c);return u};u.destroy=function(){t(C)};return u},createStream:function(a){var c=B.pop();c||(c=new y(d.create(null,34963,!0,!1)._buffer));n(c,a,35040,-1,-1,0,0);return c},destroyStream:function(a){B.push(a)},
getElements:function(a){return"function"===typeof a&&a._elements instanceof y?a._elements:null},clear:function(){h(w).forEach(t)}}}},{"./constants/primitives.json":7,"./constants/usage.json":8,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/values":32}],12:[function(b,d,f){d.exports=function(a,c){function b(c){c=c.toLowerCase();var h;try{h=e[c]=a.getExtension(c)}catch(m){}return!!h}for(var e={},p=0;p<c.extensions.length;++p){var m=c.extensions[p];if(!b(m))return c.onDestroy(),c.onDone('"'+
m+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}c.optionalExtensions.forEach(b);return{extensions:e,restore:function(){Object.keys(e).forEach(function(a){if(!b(a))throw Error("(regl): error restoring extension "+a);})}}}},{}],13:[function(b,d,f){var a=b("./util/values"),c=b("./util/extend"),h=[];h[6408]=4;var e=[];e[5121]=1;e[5126]=4;e[36193]=2;d.exports=function(b,m,g,d,f,y){function n(a,c,b){this.target=a;this.texture=c;this.renderbuffer=
b;var k=a=0;c?(a=c.width,k=c.height):b&&(a=b.width,k=b.height);this.width=a;this.height=k}function t(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function w(a,c,b){a&&(a.texture?a.texture._texture.refCount+=1:a.renderbuffer._renderbuffer.refCount+=1)}function u(a,c){c?c.texture?b.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):b.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer):b.framebufferTexture2D(36160,
a,3553,null,0)}function v(a){var c=3553,b=null,k=null,l=a;"object"===typeof a&&(l=a.data,"target"in a&&(c=a.target|0));a=l._reglType;"texture2d"===a?b=l:"textureCube"===a?b=l:"renderbuffer"===a&&(k=l,c=36161);return new n(c,b,k)}function B(a,c,b,k,l){if(b)return a=d.create2D({width:a,height:c,format:k,type:l}),a._texture.refCount=0,new n(3553,a,null);a=f.create({width:a,height:c,format:k});a._renderbuffer.refCount=0;return new n(36161,null,a)}function x(a){return a&&(a.texture||a.renderbuffer)}function A(a,
c,b){a&&(a.texture?a.texture.resize(c,b):a.renderbuffer&&a.renderbuffer.resize(c,b))}function E(){this.id=I++;K[this.id]=this;this.framebuffer=b.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function D(a){a.colorAttachments.forEach(t);t(a.depthAttachment);t(a.stencilAttachment);t(a.depthStencilAttachment)}function C(a){b.deleteFramebuffer(a.framebuffer);a.framebuffer=null;y.framebufferCount--;delete K[a.id]}
function M(a){var c;b.bindFramebuffer(36160,a.framebuffer);var h=a.colorAttachments;for(c=0;c<h.length;++c)u(36064+c,h[c]);for(c=h.length;c<g.maxColorAttachments;++c)u(36064+c,null);u(36096,a.depthAttachment);u(36128,a.stencilAttachment);u(33306,a.depthStencilAttachment);b.checkFramebufferStatus(36160);b.bindFramebuffer(36160,N.next);N.cur=N.next;b.getError()}function H(a,b){function g(a,c){var b,m=0,d=0,p=!0,f=!0;b=null;var n=!0,q="rgba",r="uint8",t=1,u=null,C=null,y=null,A=!1;if("number"===typeof a)m=
a|0,d=c|0||m;else if(a){"shape"in a?(d=a.shape,m=d[0],d=d[1]):("radius"in a&&(m=d=a.radius),"width"in a&&(m=a.width),"height"in a&&(d=a.height));if("color"in a||"colors"in a)b=a.color||a.colors,Array.isArray(b);if(!b){"colorCount"in a&&(t=a.colorCount|0);"colorTexture"in a&&(n=!!a.colorTexture,q="rgba4");if("colorType"in a&&(r=a.colorType,!n))if("half float"===r||"float16"===r)q="rgba16f";else if("float"===r||"float32"===r)q="rgba32f";"colorFormat"in a&&(q=a.colorFormat,0<=U.indexOf(q)?n=!0:0<=G.indexOf(q)&&
(n=!1))}if("depthTexture"in a||"depthStencilTexture"in a)A=!(!a.depthTexture&&!a.depthStencilTexture);"depth"in a&&("boolean"===typeof a.depth?p=a.depth:(u=a.depth,f=!1));"stencil"in a&&("boolean"===typeof a.stencil?f=a.stencil:(C=a.stencil,p=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?p=f=a.depthStencil:(y=a.depthStencil,f=p=!1))}else m=d=1;var E=null,H=null,F=null,V=null;if(Array.isArray(b))E=b.map(v);else if(b)E=[v(b)];else for(E=Array(t),b=0;b<t;++b)E[b]=B(m,d,n,q,r);m=m||E[0].width;
d=d||E[0].height;u?H=v(u):p&&!f&&(H=B(m,d,A,"depth","uint32"));C?F=v(C):f&&!p&&(F=B(m,d,!1,"stencil","uint8"));y?V=v(y):!u&&!C&&f&&p&&(V=B(m,d,A,"depth stencil","depth stencil"));p=null;for(b=0;b<E.length;++b)w(E[b],m,d),E[b]&&E[b].texture&&(f=h[E[b].texture._texture.format]*e[E[b].texture._texture.type],null===p&&(p=f));w(H,m,d);w(F,m,d);w(V,m,d);D(k);k.width=m;k.height=d;k.colorAttachments=E;k.depthAttachment=H;k.stencilAttachment=F;k.depthStencilAttachment=V;g.color=E.map(x);g.depth=x(H);g.stencil=
x(F);g.depthStencil=x(V);g.width=k.width;g.height=k.height;M(k);return g}var k=new E;y.framebufferCount++;g(a,b);return c(g,{resize:function(a,c){var b=a|0,h=c|0||b;if(b===k.width&&h===k.height)return g;for(var e=k.colorAttachments,m=0;m<e.length;++m)A(e[m],b,h);A(k.depthAttachment,b,h);A(k.stencilAttachment,b,h);A(k.depthStencilAttachment,b,h);k.width=g.width=b;k.height=g.height=h;M(k);return g},_reglType:"framebuffer",_framebuffer:k,destroy:function(){C(k);D(k)}})}var N={cur:null,next:null,dirty:!1},
U=["rgba"],G=["rgba4","rgb565","rgb5 a1"];m.ext_srgb&&G.push("srgba");m.ext_color_buffer_half_float&&G.push("rgba16f","rgb16f");m.webgl_color_buffer_float&&G.push("rgba32f");var F=["uint8"];m.oes_texture_half_float&&F.push("half float","float16");m.oes_texture_float&&F.push("float","float32");var I=0,K={};return c(N,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof E)?a:null},create:H,createCube:function(a){function b(a){var l,e={color:null},
g=0,m=null;l="rgba";var p="uint8",f=1;if("number"===typeof a)g=a|0;else if(a){"shape"in a?g=a.shape[0]:("radius"in a&&(g=a.radius|0),"width"in a?g=a.width|0:"height"in a&&(g=a.height|0));if("color"in a||"colors"in a)m=a.color||a.colors,Array.isArray(m);m||("colorCount"in a&&(f=a.colorCount|0),"colorType"in a&&(p=a.colorType),"colorFormat"in a&&(l=a.colorFormat));"depth"in a&&(e.depth=a.depth);"stencil"in a&&(e.stencil=a.stencil);"depthStencil"in a&&(e.depthStencil=a.depthStencil)}else g=1;if(m)if(Array.isArray(m))for(a=
[],l=0;l<m.length;++l)a[l]=m[l];else a=[m];else for(a=Array(f),m={radius:g,format:l,type:p},l=0;l<f;++l)a[l]=d.createCube(m);e.color=Array(a.length);for(l=0;l<a.length;++l)f=a[l],g=g||f.width,e.color[l]={target:34069,data:a[l]};for(l=0;6>l;++l){for(f=0;f<a.length;++f)e.color[f].target=34069+l;0<l&&(e.depth=h[0].depth,e.stencil=h[0].stencil,e.depthStencil=h[0].depthStencil);if(h[l])h[l](e);else h[l]=H(e)}return c(b,{width:g,height:g,color:a})}var h=Array(6);b(a);return c(b,{faces:h,resize:function(a){var c=
a|0;if(c===b.width)return b;var e=b.color;for(a=0;a<e.length;++a)e[a].resize(c);for(a=0;6>a;++a)h[a].resize(c);b.width=b.height=c;return b},_reglType:"framebufferCube",destroy:function(){h.forEach(function(a){a.destroy()})}})},clear:function(){a(K).forEach(C)},restore:function(){a(K).forEach(function(a){a.framebuffer=b.createFramebuffer();M(a)})}})}},{"./util/extend":24,"./util/values":32}],14:[function(b,d,f){d.exports=function(a,c){var b=1;c.ext_texture_filter_anisotropic&&(b=a.getParameter(34047));
var e=1,d=1;c.webgl_draw_buffers&&(e=a.getParameter(34852),d=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(c).filter(function(a){return!!c[a]}),maxAnisotropic:b,maxDrawbuffers:e,maxColorAttachments:d,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),
maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},
{}],15:[function(b,d,f){var a=b("./util/is-typed-array");d.exports=function(c,b,e,d,m,g){return function(g){var m;m=null===b.next?5121:b.next.colorAttachments[0].texture._texture.type;var f=0,n=0,t=d.framebufferWidth,w=d.framebufferHeight,u=null;a(g)?u=g:g&&(f=g.x|0,n=g.y|0,t=(g.width||d.framebufferWidth-f)|0,w=(g.height||d.framebufferHeight-n)|0,u=g.data||null);e();g=t*w*4;u||(5121===m?u=new Uint8Array(g):5126===m&&(u=u||new Float32Array(g)));c.pixelStorei(3333,4);c.readPixels(f,n,t,w,6408,m,u);
return u}}},{"./util/is-typed-array":27}],16:[function(b,d,f){var a=b("./util/values"),c=[];c[32854]=2;c[32855]=2;c[36194]=2;c[33189]=2;c[36168]=1;c[34041]=4;c[35907]=4;c[34836]=16;c[34842]=8;c[34843]=6;d.exports=function(b,e,d,m,g){function f(a){this.id=t++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;g.profile&&(this.stats={size:0})}function r(a){var c=a.renderbuffer;b.bindRenderbuffer(36161,null);b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete w[a.id];
m.renderbufferCount--}var y={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(y.srgba=35907);e.ext_color_buffer_half_float&&(y.rgba16f=34842,y.rgb16f=34843);e.webgl_color_buffer_float&&(y.rgba32f=34836);var n=[];Object.keys(y).forEach(function(a){n[y[a]]=a});var t=0,w={};f.prototype.decRef=function(){0>=--this.refCount&&r(this)};g.profile&&(m.getTotalRenderbufferSize=function(){var a=0;Object.keys(w).forEach(function(c){a+=w[c].stats.size});return a});
return{create:function(a,e){function d(a,e){var m=0,f=0,q=32854;"object"===typeof a&&a?("shape"in a?(f=a.shape,m=f[0]|0,f=f[1]|0):("radius"in a&&(m=f=a.radius|0),"width"in a&&(m=a.width|0),"height"in a&&(f=a.height|0)),"format"in a&&(q=y[a.format])):"number"===typeof a?(m=a|0,f="number"===typeof e?e|0:m):a||(m=f=1);if(m!==p.width||f!==p.height||q!==p.format)return d.width=p.width=m,d.height=p.height=f,p.format=q,b.bindRenderbuffer(36161,p.renderbuffer),b.renderbufferStorage(36161,q,m,f),g.profile&&
(p.stats.size=c[p.format]*p.width*p.height),d.format=n[p.format],d}var p=new f(b.createRenderbuffer());w[p.id]=p;m.renderbufferCount++;d(a,e);d.resize=function(a,e){var m=a|0,f=e|0||m;if(m===p.width&&f===p.height)return d;d.width=p.width=m;d.height=p.height=f;b.bindRenderbuffer(36161,p.renderbuffer);b.renderbufferStorage(36161,p.format,m,f);g.profile&&(p.stats.size=c[p.format]*p.width*p.height);return d};d._reglType="renderbuffer";d._renderbuffer=p;g.profile&&(d.stats=p.stats);d.destroy=function(){p.decRef()};
return d},clear:function(){a(w).forEach(r)},restore:function(){a(w).forEach(function(a){a.renderbuffer=b.createRenderbuffer();b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)});b.bindRenderbuffer(36161,null)}}}},{"./util/values":32}],17:[function(b,d,f){var a=b("./util/values");d.exports=function(c,b,e,d){function m(a,c,b,h){this.name=a;this.id=c;this.location=b;this.info=h}function g(a,c){for(var b=0;b<a.length;++b)if(a[b].id===c.id){a[b].location=c.location;
return}a.push(c)}function f(a,e,g){g=35632===a?n:t;var m=g[e];if(!m){var d=b.str(e),m=c.createShader(a);c.shaderSource(m,d);c.compileShader(m);g[e]=m}return m}function r(a,c){this.id=v++;this.fragId=a;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[];d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function y(a,e){var n,r;n=f(35632,a.fragId);r=f(35633,a.vertId);var t=a.program=c.createProgram();c.attachShader(t,n);c.attachShader(t,r);c.linkProgram(t);var w=c.getProgramParameter(t,
35718);d.profile&&(a.stats.uniformsCount=w);var u=a.uniforms;for(n=0;n<w;++n)if(r=c.getActiveUniform(t,n))if(1<r.size)for(var y=0;y<r.size;++y){var v=r.name.replace("[0]","["+y+"]");g(u,new m(v,b.id(v),c.getUniformLocation(t,v),r))}else g(u,new m(r.name,b.id(r.name),c.getUniformLocation(t,r.name),r));w=c.getProgramParameter(t,35721);d.profile&&(a.stats.attributesCount=w);u=a.attributes;for(n=0;n<w;++n)(r=c.getActiveAttrib(t,n))&&g(u,new m(r.name,b.id(r.name),c.getAttribLocation(t,r.name),r))}var n=
{},t={},w={},u=[],v=0;d.profile&&(e.getMaxUniformsCount=function(){var a=0;u.forEach(function(c){c.stats.uniformsCount>a&&(a=c.stats.uniformsCount)});return a},e.getMaxAttributesCount=function(){var a=0;u.forEach(function(c){c.stats.attributesCount>a&&(a=c.stats.attributesCount)});return a});return{clear:function(){var b=c.deleteShader.bind(c);a(n).forEach(b);n={};a(t).forEach(b);t={};u.forEach(function(a){c.deleteProgram(a.program)});u.length=0;w={};e.shaderCount=0},program:function(a,c,b){e.shaderCount++;
var h=w[c];h||(h=w[c]={});var g=h[a];g||(g=new r(c,a),y(g,b),h[a]=g,u.push(g));return g},restore:function(){n={};t={};for(var a=0;a<u.length;++a)y(u[a])},shader:f,frag:-1,vert:-1}}},{"./util/values":32}],18:[function(b,d,f){d.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],19:[function(b,d,f){d.exports=function(){var a={"":0},c=[""];return{id:function(b){var e=a[b];if(e)return e;e=a[b]=
c.length;c.push(b);return e},str:function(a){return c[a]}}}},{}],20:[function(b,d,f){function a(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function c(a){return Array.isArray(a)&&0!==a.length&&w(a[0])?!0:!1}function h(a){return Object.prototype.toString.call(a)}function e(b){if(!b)return!1;var e=h(b);return 0<=A.indexOf(e)?!0:a(b)||c(b)||y(b)}function p(a,c){36193===a.type?(a.data=t(c),n.freeType(c)):a.data=c}function m(a,c,b,h,e,g){a="undefined"!==typeof D[a]?D[a]:x[a]*E[c];
g&&(a*=6);if(e){for(h=0;1<=b;)h+=a*b*b,b/=2;return h}return a*b*h}var g=b("./util/extend"),q=b("./util/values"),r=b("./util/is-typed-array"),y=b("./util/is-ndarray"),n=b("./util/pool"),t=b("./util/to-half-float"),w=b("./util/is-array-like");f=b("./constants/arraytypes.json");var u=b("./constants/arraytypes.json"),v=[9984,9986,9985,9987],B=[0,6409,6410,6407,6408],x={};x[6409]=x[6406]=x[6402]=1;x[34041]=x[6410]=2;x[6407]=x[35904]=3;x[6408]=x[35906]=4;var A=Object.keys(f).concat(["[object HTMLCanvasElement]",
"[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),E=[];E[5121]=1;E[5126]=4;E[36193]=2;E[5123]=2;E[5125]=4;var D=[];D[32854]=2;D[32855]=2;D[36194]=2;D[34041]=4;D[33776]=.5;D[33777]=.5;D[33778]=1;D[33779]=1;D[35986]=.5;D[35987]=1;D[34798]=1;D[35840]=.5;D[35841]=.25;D[35842]=.5;D[35843]=.25;D[36196]=.5;d.exports=function(b,d,f,E,A,D,F){function I(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=
1;this.height=this.width=this.colorSpace=0;this.channels=4}function K(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=c.unpackAlignment;a.colorSpace=c.colorSpace;a.width=c.width;a.height=c.height;a.channels=c.channels}function V(a,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(a.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(a.flipY=c.flipY);"alignment"in c&&(a.unpackAlignment=
c.alignment);"colorSpace"in c&&(a.colorSpace=R[c.colorSpace]);"type"in c&&(a.type=T[c.type]);var k=a.width,b=a.height,l=a.channels,h=!1;"shape"in c?(k=c.shape[0],b=c.shape[1],3===c.shape.length&&(l=c.shape[2],h=!0)):("radius"in c&&(k=b=c.radius),"width"in c&&(k=c.width),"height"in c&&(b=c.height),"channels"in c&&(l=c.channels,h=!0));a.width=k|0;a.height=b|0;a.channels=l|0;k=!1;"format"in c&&(k=c.format,b=a.internalformat=W[k],a.format=Ga[b],k in T&&!("type"in c)&&(a.type=T[k]),k in Z&&(a.compressed=
!0),k=!0);!h&&k?a.channels=x[a.format]:h&&!k&&a.channels!==B[a.format]&&(a.format=a.internalformat=B[a.channels])}}function ba(a){b.pixelStorei(37440,a.flipY);b.pixelStorei(37441,a.premultiplyAlpha);b.pixelStorei(37443,a.colorSpace);b.pixelStorei(3317,a.unpackAlignment)}function X(){I.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function k(k,b){var l=null;e(b)?l=b:b&&(V(k,b),"x"in b&&(k.xOffset=b.x|0),"y"in b&&(k.yOffset=b.y|0),e(b.data)&&
(l=b.data));if(b.copy){var g=A.viewportWidth,m=A.viewportHeight;k.width=k.width||g-k.xOffset;k.height=k.height||m-k.yOffset;k.needsCopy=!0}else if(!l)k.width=k.width||1,k.height=k.height||1;else if(r(l))k.data=l,"type"in b||5121!==k.type||(k.type=u[Object.prototype.toString.call(l)]|0);else if(a(l)){g=l;m=k.width*k.height*k.channels;switch(k.type){case 5121:case 5123:case 5125:case 5126:m=n.allocType(k.type,m);m.set(g);k.data=m;break;case 36193:k.data=t(g)}k.alignment=1;k.needsFree=!0}else if(y(l)){g=
l.data;Array.isArray(g)||5121!==k.type||(k.type=u[Object.prototype.toString.call(g)]|0);var m=l.shape,d=l.stride,z,f,q,J;3===m.length?(q=m[2],J=d[2]):J=q=1;z=m[0];f=m[1];m=d[0];d=d[1];k.alignment=1;k.width=z;k.height=f;k.channels=q;k.format=k.internalformat=B[q];k.needsFree=!0;z=J;l=l.offset;q=k.width;J=k.height;f=k.channels;for(var v=n.allocType(36193===k.type?5126:k.type,q*J*f),x=0,C=0;C<J;++C)for(var P=0;P<q;++P)for(var M=0;M<f;++M)v[x++]=g[m*P+d*C+z*M+l];p(k,v)}else if("[object HTMLCanvasElement]"===
h(l)||"[object CanvasRenderingContext2D]"===h(l))"[object HTMLCanvasElement]"===h(l)?k.element=l:k.element=l.canvas,k.width=k.element.width,k.height=k.element.height;else if("[object HTMLImageElement]"===h(l))k.element=l,k.width=l.naturalWidth,k.height=l.naturalHeight;else if("[object HTMLVideoElement]"===h(l))k.element=l,k.width=l.videoWidth,k.height=l.videoHeight;else if(c(l)){g=l[0].length;m=l.length;d=1;if(w(l[0][0])){z=d=l[0][0].length;q=n.allocType(36193===k.type?5126:k.type,g*m*z);for(f=J=
0;f<m;++f)for(v=l[f],x=0;x<g;++x)for(C=v[x],P=0;P<z;++P)q[J++]=C[P];p(k,q)}else{z=n.allocType(36193===k.type?5126:k.type,g*m);for(J=q=0;J<m;++J)for(f=l[J],v=0;v<g;++v)z[q++]=f[v];p(k,z)}k.alignment=1;k.width=g;k.height=m;k.channels=d;k.format=k.internalformat=B[d];k.needsFree=!0}}function l(a,k,c,l,h){var e=a.element,g=a.data,m=a.internalformat,d=a.format,p=a.type,z=a.width,f=a.height;ba(a);e?b.texSubImage2D(k,h,c,l,d,p,e):a.compressed?b.compressedTexSubImage2D(k,h,c,l,m,z,f,g):a.needsCopy?(E(),b.copyTexSubImage2D(k,
h,c,l,a.xOffset,a.yOffset,z,f)):b.texSubImage2D(k,h,c,l,z,f,d,p,g)}function z(){return Da.pop()||new X}function J(a){a.needsFree&&n.freeType(a.data);X.call(a);Da.push(a)}function P(){I.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function O(a,k,c){var b=a.images[0]=z();a.mipmask=1;b.width=a.width=k;b.height=a.height=c}function L(a,c){var b=null;if(e(c))b=a.images[0]=z(),K(b,a),k(b,c),a.mipmask=1;else if(V(a,c),Array.isArray(c.mipmap))for(var l=c.mipmap,h=
0;h<l.length;++h)b=a.images[h]=z(),K(b,a),b.width>>=h,b.height>>=h,k(b,l[h]),a.mipmask|=1<<h;else b=a.images[0]=z(),K(b,a),k(b,c),a.mipmask=1;K(a,a.images[0])}function ta(a,k){for(var c=a.images,l=0;l<c.length&&c[l];++l){var h=c[l],e=k,g=l,m=h.element,d=h.data,p=h.internalformat,z=h.format,f=h.type,n=h.width,q=h.height;ba(h);m?b.texImage2D(e,g,z,z,f,m):h.compressed?b.compressedTexImage2D(e,g,p,n,q,0,d):h.needsCopy?(E(),b.copyTexImage2D(e,g,z,h.xOffset,h.yOffset,n,q,0)):b.texImage2D(e,g,z,n,q,0,z,
f,d)}}function la(){var a=Ea.pop()||new P;I.call(a);for(var k=a.mipmask=0;16>k;++k)a.images[k]=null;return a}function ua(a){for(var k=a.images,c=0;c<k.length;++c)k[c]&&J(k[c]),k[c]=null;Ea.push(a)}function S(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function fa(a,k){"min"in k&&(a.minFilter=da[k.min],0<=v.indexOf(a.minFilter)&&(a.genMipmaps=!0));"mag"in k&&(a.magFilter=aa[k.mag]);var c=a.wrapS,b=a.wrapT;if("wrap"in k){var l=
k.wrap;"string"===typeof l?c=b=Q[l]:Array.isArray(l)&&(c=Q[l[0]],b=Q[l[1]])}else"wrapS"in k&&(c=Q[k.wrapS]),"wrapT"in k&&(b=Q[k.wrapT]);a.wrapS=c;a.wrapT=b;"anisotropic"in k&&(a.anisotropic=k.anisotropic);if("mipmap"in k){c=!1;switch(typeof k.mipmap){case "string":a.mipmapHint=ma[k.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=k.mipmap;break;case "object":a.genMipmaps=!1,c=!0}!c||"min"in k||(a.minFilter=9984)}}function ga(a,k){b.texParameteri(k,10241,a.minFilter);b.texParameteri(k,
10240,a.magFilter);b.texParameteri(k,10242,a.wrapS);b.texParameteri(k,10243,a.wrapT);d.ext_texture_filter_anisotropic&&b.texParameteri(k,34046,a.anisotropic);a.genMipmaps&&(b.hint(33170,a.mipmapHint),b.generateMipmap(k))}function na(a){I.call(this);this.mipmask=0;this.internalformat=6408;this.id=Fa++;this.refCount=1;this.target=a;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new S;F.profile&&(this.stats={size:0})}function ha(a){b.activeTexture(33984);b.bindTexture(a.target,
a.texture)}function Y(){var a=ka[0];a?b.bindTexture(a.target,a.texture):b.bindTexture(3553,null)}function oa(a){var k=a.texture,c=a.unit,l=a.target;0<=c&&(b.activeTexture(33984+c),b.bindTexture(l,null),ka[c]=null);b.deleteTexture(k);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete ca[a.id];D.textureCount--}var ma={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Q={repeat:10497,clamp:33071,mirror:33648},aa={nearest:9728,linear:9729},da=g({mipmap:9987,"nearest mipmap nearest":9984,
"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},aa),R={none:0,browser:37444},T={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},W={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Z={};d.ext_srgb&&(W.srgb=35904,W.srgba=35906);d.oes_texture_float&&(T.float32=T["float"]=5126);d.oes_texture_half_float&&(T.float16=T["half float"]=36193);d.webgl_depth_texture&&(g(W,{depth:6402,"depth stencil":34041}),
g(T,{uint16:5123,uint32:5125,"depth stencil":34042}));d.webgl_compressed_texture_s3tc&&g(Z,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});d.webgl_compressed_texture_atc&&g(Z,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});d.webgl_compressed_texture_pvrtc&&g(Z,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});d.webgl_compressed_texture_etc1&&(Z["rgb etc1"]=36196);
var ea=Array.prototype.slice.call(b.getParameter(34467));Object.keys(Z).forEach(function(a){var k=Z[a];0<=ea.indexOf(k)&&(W[a]=k)});var wa=Object.keys(W);f.textureFormats=wa;var va=[];Object.keys(W).forEach(function(a){va[W[a]]=a});var xa=[];Object.keys(T).forEach(function(a){xa[T[a]]=a});var za=[];Object.keys(aa).forEach(function(a){za[aa[a]]=a});var Aa=[];Object.keys(da).forEach(function(a){Aa[da[a]]=a});var pa=[];Object.keys(Q).forEach(function(a){pa[Q[a]]=a});var Ga=wa.reduce(function(a,k){var c=
W[k];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=k.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),Da=[],Ea=[],Fa=0,ca={},ja=f.maxTextureUnits,ka=Array(ja).map(function(){return null});g(na.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var k=0;k<ja;++k){var c=ka[k];if(c){if(0<c.bindCount)continue;c.unit=-1}ka[k]=this;a=k;break}F.profile&&D.maxTextureUnits<a+1&&(D.maxTextureUnits=a+1);this.unit=a;b.activeTexture(33984+a);b.bindTexture(this.target,
this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&oa(this)}});F.profile&&(D.getTotalTextureSize=function(){var a=0;Object.keys(ca).forEach(function(k){a+=ca[k].stats.size});return a});return{create2D:function(a,c){function h(a,k){var c=e.texInfo;S.call(c);var b=la();"number"===typeof a?"number"===typeof k?O(b,a|0,k|0):O(b,a|0,a|0):a?(fa(c,a),L(b,a)):O(b,1,1);c.genMipmaps&&(b.mipmask=(b.width<<1)-1);e.mipmask=b.mipmask;K(e,b);e.internalformat=b.internalformat;
h.width=b.width;h.height=b.height;ha(e);ta(b,3553);ga(c,3553);Y();ua(b);F.profile&&(e.stats.size=m(e.internalformat,e.type,b.width,b.height,c.genMipmaps,!1));h.format=va[e.internalformat];h.type=xa[e.type];h.mag=za[c.magFilter];h.min=Aa[c.minFilter];h.wrapS=pa[c.wrapS];h.wrapT=pa[c.wrapT];return h}var e=new na(3553);ca[e.id]=e;D.textureCount++;h(a,c);h.subimage=function(a,c,b,g){c|=0;b|=0;g|=0;var m=z();K(m,e);m.width>>=g;m.height>>=g;m.width-=c;m.height-=b;k(m,a);ha(e);l(m,3553,c,b,g);Y();J(m);return h};
h.resize=function(a,k){var c=a|0,l=k|0||c;if(c===e.width&&l===e.height)return h;h.width=e.width=c;h.height=e.height=l;ha(e);for(var g=0;e.mipmask>>g;++g)b.texImage2D(3553,g,e.format,c>>g,l>>g,0,e.format,e.type,null);Y();F.profile&&(e.stats.size=m(e.internalformat,e.type,c,l,!1,!1));return h};h._reglType="texture2d";h._texture=e;F.profile&&(h.stats=e.stats);h.destroy=function(){e.decRef()};return h},createCube:function(a,c,h,e,g,d){function p(a,c,k,b,l,h){var e,g=f.texInfo;S.call(g);for(e=0;6>e;++e)n[e]=
la();if("number"===typeof a||!a)for(a=a|0||1,e=0;6>e;++e)O(n[e],a,a);else if("object"===typeof a)if(c)L(n[0],a),L(n[1],c),L(n[2],k),L(n[3],b),L(n[4],l),L(n[5],h);else if(fa(g,a),V(f,a),"faces"in a)for(a=a.faces,e=0;6>e;++e)K(n[e],f),L(n[e],a[e]);else for(e=0;6>e;++e)L(n[e],a);K(f,n[0]);f.mipmask=g.genMipmaps?(n[0].width<<1)-1:n[0].mipmask;f.internalformat=n[0].internalformat;p.width=n[0].width;p.height=n[0].height;ha(f);for(e=0;6>e;++e)ta(n[e],34069+e);ga(g,34067);Y();F.profile&&(f.stats.size=m(f.internalformat,
f.type,p.width,p.height,g.genMipmaps,!0));p.format=va[f.internalformat];p.type=xa[f.type];p.mag=za[g.magFilter];p.min=Aa[g.minFilter];p.wrapS=pa[g.wrapS];p.wrapT=pa[g.wrapT];for(e=0;6>e;++e)ua(n[e]);return p}var f=new na(34067);ca[f.id]=f;D.cubeCount++;var n=Array(6);p(a,c,h,e,g,d);p.subimage=function(a,c,b,h,e){b|=0;h|=0;e|=0;var g=z();K(g,f);g.width>>=e;g.height>>=e;g.width-=b;g.height-=h;k(g,c);ha(f);l(g,34069+a,b,h,e);Y();J(g);return p};p.resize=function(a){a|=0;if(a!==f.width){p.width=f.width=
a;p.height=f.height=a;ha(f);for(var c=0;6>c;++c)for(var k=0;f.mipmask>>k;++k)b.texImage2D(34069+c,k,f.format,a>>k,a>>k,0,f.format,f.type,null);Y();F.profile&&(f.stats.size=m(f.internalformat,f.type,p.width,p.height,!1,!0));return p}};p._reglType="textureCube";p._texture=f;F.profile&&(p.stats=f.stats);p.destroy=function(){f.decRef()};return p},clear:function(){for(var a=0;a<ja;++a)b.activeTexture(33984+a),b.bindTexture(3553,null),ka[a]=null;q(ca).forEach(oa);D.cubeCount=0;D.textureCount=0},getTexture:function(a){return null},
restore:function(){q(ca).forEach(function(a){a.texture=b.createTexture();b.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)b.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);else for(var k=0;6>k;++k)b.texImage2D(34069+k,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);ga(a.texInfo,a.target)})}}}},{"./constants/arraytypes.json":5,"./util/extend":24,"./util/is-array-like":25,"./util/is-ndarray":26,
"./util/is-typed-array":27,"./util/pool":29,"./util/to-half-float":31,"./util/values":32}],21:[function(b,d,f){d.exports=function(a,c){function b(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function e(a,c,e){var g=f.pop()||new b;g.startQueryIndex=a;g.endQueryIndex=c;g.sum=0;g.stats=e;r.push(g)}var d=c.ext_disjoint_timer_query;if(!d)return null;var m=[],g=[],f=[],r=[],y=[],n=[];return{beginQuery:function(a){var c=m.pop()||d.createQueryEXT();d.beginQueryEXT(35007,c);g.push(c);
e(g.length-1,g.length,a)},endQuery:function(){d.endQueryEXT(35007)},pushScopeStats:e,update:function(){var a,c;a=g.length;if(0!==a){n.length=Math.max(n.length,a+1);y.length=Math.max(y.length,a+1);y[0]=0;var b=n[0]=0;for(c=a=0;c<g.length;++c){var h=g[c];d.getQueryObjectEXT(h,34919)?(b+=d.getQueryObjectEXT(h,34918),m.push(h)):g[a++]=h;y[c+1]=b;n[c+1]=a}g.length=a;for(c=a=0;c<r.length;++c){var b=r[c],e=b.startQueryIndex,h=b.endQueryIndex;b.sum+=y[h]-y[e];e=n[e];h=n[h];h===e?(b.stats.gpuTime+=b.sum/1E6,
f.push(b)):(b.startQueryIndex=e,b.endQueryIndex=h,r[a++]=b)}r.length=a}},getNumPendingQueries:function(){return g.length},clear:function(){m.push.apply(m,g);for(var a=0;a<m.length;a++)d.deleteQueryEXT(m[a]);g.length=0;m.length=0},restore:function(){g.length=0;m.length=0}}}},{}],22:[function(b,d,f){d.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(b,d,f){function a(a){return Array.prototype.slice.call(a)}function c(c){return a(c).join("")}
var h=b("./extend");d.exports=function(){function b(){var e=[],g=[];return h(function(){e.push.apply(e,a(arguments))},{def:function(){var c="v"+m++;g.push(c);0<arguments.length&&(e.push(c,"="),e.push.apply(e,a(arguments)),e.push(";"));return c},toString:function(){return c([0<g.length?"var "+g+";":"",c(e)])}})}function d(){function c(a,b){m(a,b,"=",g.def(a,b),";")}var g=b(),m=b(),p=g.toString,f=m.toString;return h(function(){g.apply(g,a(arguments))},{def:g.def,entry:g,exit:m,save:c,set:function(a,
b,h){c(a,b);g(a,b,"=",h,";")},toString:function(){return p()+f()}})}var m=0,g=[],f=[],r=b(),y={};return{global:r,link:function(a){for(var c=0;c<f.length;++c)if(f[c]===a)return g[c];c="g"+m++;g.push(c);f.push(a);return c},block:b,proc:function(a,b){function e(){var a="a"+g.length;g.push(a);return a}var g=[];b=b||0;for(var m=0;m<b;++m)e();var m=d(),f=m.toString;return y[a]=h(m,{arg:e,toString:function(){return c(["function(",g.join(),"){",f(),"}"])}})},scope:d,cond:function(){var b=c(arguments),e=d(),
g=d(),m=e.toString,f=g.toString;return h(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){g.apply(g,a(arguments));return this},toString:function(){var a=f();a&&(a="else{"+a+"}");return c(["if(",b,"){",m(),"}",a])}})},compile:function(){var a=['"use strict";',r,"return {"];Object.keys(y).forEach(function(c){a.push('"',c,'":',y[c].toString(),",")});a.push("}");var b=c(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,g.concat(b)).apply(null,
f)}}}},{"./extend":24}],24:[function(b,d,f){d.exports=function(a,c){for(var b=Object.keys(c),e=0;e<b.length;++e)a[b[e]]=c[b[e]];return a}},{}],25:[function(b,d,f){var a=b("./is-typed-array");d.exports=function(c){return Array.isArray(c)||a(c)}},{"./is-typed-array":27}],26:[function(b,d,f){var a=b("./is-typed-array");d.exports=function(c){return!!c&&"object"===typeof c&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&"number"===typeof c.offset&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||
a(c.data))}},{"./is-typed-array":27}],27:[function(b,d,f){var a=b("../constants/arraytypes.json");d.exports=function(c){return Object.prototype.toString.call(c)in a}},{"../constants/arraytypes.json":5}],28:[function(b,d,f){d.exports=function(a,c){for(var b=Array(a),e=0;e<a;++e)b[e]=c(e);return b}},{}],29:[function(b,d,f){function a(a){var c,b;c=(65535<a)<<4;a>>>=c;b=(255<a)<<3;a>>>=b;c|=b;b=(15<a)<<2;a>>>=b;c|=b;b=(3<a)<<1;return c|b|a>>>b>>1}function c(c){a:{for(var b=16;268435456>=b;b*=16)if(c<=
b){c=b;break a}c=0}b=e[a(c)>>2];return 0<b.length?b.pop():new ArrayBuffer(c)}function h(c){e[a(c.byteLength)>>2].push(c)}var e=b("./loop")(8,function(){return[]});d.exports={alloc:c,free:h,allocType:function(a,b){var h=null;switch(a){case 5120:h=new Int8Array(c(b),0,b);break;case 5121:h=new Uint8Array(c(b),0,b);break;case 5122:h=new Int16Array(c(2*b),0,b);break;case 5123:h=new Uint16Array(c(2*b),0,b);break;case 5124:h=new Int32Array(c(4*b),0,b);break;case 5125:h=new Uint32Array(c(4*b),0,b);break;
case 5126:h=new Float32Array(c(4*b),0,b);break;default:return null}return h.length!==b?h.subarray(0,b):h},freeType:function(a){h(a.buffer)}}},{"./loop":28}],30:[function(b,d,f){d.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){return setTimeout(a,16)},cancel:clearTimeout}},{}],31:[function(b,d,f){var a=b("./pool"),c=new Float32Array(1),
h=new Uint32Array(c.buffer);d.exports=function(b){for(var d=a.allocType(5123,b.length),m=0;m<b.length;++m)if(isNaN(b[m]))d[m]=65535;else if(Infinity===b[m])d[m]=31744;else if(-Infinity===b[m])d[m]=64512;else{c[0]=b[m];var g=h[0],f=g>>>31<<15,r=(g<<1>>>24)-127,g=g>>13&1023;d[m]=-24>r?f:-14>r?f+(g+1024>>-14-r):15<r?f+31744:f+(r+15<<10)+g}return d}},{"./pool":29}],32:[function(b,d,f){d.exports=function(a){return Object.keys(a).map(function(c){return a[c]})}},{}],33:[function(b,d,f){function a(a,c,b){function h(){var c=
window.innerWidth,g=window.innerHeight;a!==document.body&&(g=a.getBoundingClientRect(),c=g.right-g.left,g=g.top-g.bottom);e.width=b*c;e.height=b*g;p(e.style,{width:c+"px",height:g+"px"})}var e=document.createElement("canvas");p(e.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(e);a===document.body&&(e.style.position="absolute",p(a.style,{margin:0,padding:0}));window.addEventListener("resize",h,!1);h();return{canvas:e,onDestroy:function(){window.removeEventListener("resize",h);a.removeChild(e)}}}
function c(a,c){function b(h){try{return a.getContext(h,c)}catch(e){return null}}return b("webgl")||b("experimental-webgl")||b("webgl-experimental")}function h(a){return"string"===typeof a?a.split():a}function e(a){return"string"===typeof a?document.querySelector(a):a}var p=b("./util/extend");d.exports=function(b){var g=b||{},d,f,p,n;b={};var t=[],w=[],u="undefined"===typeof window?1:window.devicePixelRatio,v=!1,B=function(a){},x=function(){};"string"===typeof g?d=document.querySelector(g):"object"===
typeof g&&("string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?d=g:"function"===typeof g.drawArrays||"function"===typeof g.drawElements?(n=g,p=n.canvas):("gl"in g?n=g.gl:"canvas"in g?p=e(g.canvas):"container"in g&&(f=e(g.container)),"attributes"in g&&(b=g.attributes),"extensions"in g&&(t=h(g.extensions)),"optionalExtensions"in g&&(w=h(g.optionalExtensions)),"onDone"in g&&(B=g.onDone),"profile"in g&&(v=!!g.profile),"pixelRatio"in g&&(u=+g.pixelRatio)));
d&&("canvas"===d.nodeName.toLowerCase()?p=d:f=d);if(!n){if(!p){d=a(f||document.body,B,u);if(!d)return null;p=d.canvas;x=d.onDestroy}n=c(p,b)}return n?{gl:n,canvas:p,container:f,extensions:t,optionalExtensions:w,pixelRatio:u,profile:v,onDone:B,onDestroy:x}:(x(),B("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/extend":24}],34:[function(b,d,f){function a(a,b,e){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(e,2))}d.exports=function(c,
b){for(var e=b.length,d=c.length,m=Array(e),g=0;g<e;++g)m[g]=[0,0,0];for(g=0;g<d;++g){var f=c[g],r=b[f[0]],y=b[f[1]],n=b[f[2]],t=r[0]-y[0],w=r[1]-y[1],u=r[2]-y[2],v=a(t,w,u),B=y[0]-n[0],x=y[1]-n[1],A=y[2]-n[2],E=a(B,x,A),D=a(n[0]-r[0],n[1]-r[1],n[2]-r[2]);1E-6>Math.min(v,E,D)||(n=.5*(v+E+D),y=Math.sqrt((n-v)*(n-E)*(n-D)/n),r=w*A-u*x,u=u*B-t*A,t=t*x-w*B,w=a(r,u,t),r/=w,u/=w,t/=w,w=m[f[0]],E=Math.atan2(y,n-E),B=u,x=t,w[0]+=E*r,w[1]+=E*B,w[2]+=E*x,E=m[f[1]],D=Math.atan2(y,n-D),w=u,B=t,E[0]+=D*r,E[1]+=
D*w,E[2]+=D*B,f=m[f[2]],v=Math.atan2(y,n-v),n=u,y=t,f[0]+=v*r,f[1]+=v*n,f[2]+=v*y)}for(g=0;g<e;++g)d=m[g],v=Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)),1E-8>v?(d[0]=1,d[1]=0,d[2]=0):(d[0]/=v,d[1]/=v,d[2]/=v);return m}},{}],35:[function(b,d,f){function a(a,b,h){for(var e=[],d=b;d<h;d+=3)b=(a[d]<<16)+(a[d+1]<<8)+a[d+2],e.push(c[b>>18&63]+c[b>>12&63]+c[b>>6&63]+c[b&63]);return e.join("")}f.toByteArray=function(a){var c,b,d,f,y;c=a.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");
f="="===a[c-2]?2:"="===a[c-1]?1:0;y=new e(3*c/4-f);b=0<f?c-4:c;var n=0;for(c=0;c<b;c+=4)d=h[a.charCodeAt(c)]<<18|h[a.charCodeAt(c+1)]<<12|h[a.charCodeAt(c+2)]<<6|h[a.charCodeAt(c+3)],y[n++]=d>>16&255,y[n++]=d>>8&255,y[n++]=d&255;2===f?(d=h[a.charCodeAt(c)]<<2|h[a.charCodeAt(c+1)]>>4,y[n++]=d&255):1===f&&(d=h[a.charCodeAt(c)]<<10|h[a.charCodeAt(c+1)]<<4|h[a.charCodeAt(c+2)]>>2,y[n++]=d>>8&255,y[n++]=d&255);return y};f.fromByteArray=function(b){for(var h=b.length,e=h%3,d="",f=[],y=0,n=h-e;y<n;y+=16383)f.push(a(b,
y,y+16383>n?n:y+16383));1===e?(b=b[h-1],d+=c[b>>2],d+=c[b<<4&63],d+="=="):2===e&&(b=(b[h-2]<<8)+b[h-1],d+=c[b>>10],d+=c[b>>4&63],d+=c[b<<2&63],d+="=");f.push(d);return f.join("")};var c=[],h=[],e="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var a=0;64>a;++a)c[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;h[45]=62;h[95]=63})()},{}],36:[function(b,d,f){function a(a){var c=
32;(a&=-a)&&c--;a&65535&&(c-=16);a&16711935&&(c-=8);a&252645135&&(c-=4);a&858993459&&(c-=2);a&1431655765&&--c;return c}"use restrict";f.INT_BITS=32;f.INT_MAX=2147483647;f.INT_MIN=-2147483648;f.sign=function(a){return(0<a)-(0>a)};f.abs=function(a){var c=a>>31;return(a^c)-c};f.min=function(a,c){return c^(a^c)&-(a<c)};f.max=function(a,c){return a^(a^c)&-(a<c)};f.isPow2=function(a){return!(a&a-1)&&!!a};f.log2=function(a){var c,b;c=(65535<a)<<4;a>>>=c;b=(255<a)<<3;a>>>=b;c|=b;b=(15<a)<<2;a>>>=b;c|=b;b=
(3<a)<<1;return c|b|a>>>b>>1};f.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};f.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};f.countTrailingZeros=a;f.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};f.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};f.parity=function(a){a^=a>>>16;a^=a>>>
8;a=(a^a>>>4)&15;return 27030>>>a&1};var c=Array(256);(function(a){for(var c=0;256>c;++c){for(var b=c,d=c,g=7,b=b>>>1;b;b>>>=1)d<<=1,d|=b&1,--g;a[c]=d<<g&255}})(c);f.reverse=function(a){return c[a&255]<<24|c[a>>>8&255]<<16|c[a>>>16&255]<<8|c[a>>>24&255]};f.interleave2=function(a,c){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;c&=65535;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|a<<1)&1431655765|((c|c<<1)&1431655765)<<1};f.deinterleave2=function(a,
c){a=a>>>c&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};f.interleave3=function(a,c,b){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;a=(a|a<<2)&1227133513|((c|c<<2)&1227133513)<<1;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;return a|((b|b<<2)&1227133513)<<2};f.deinterleave3=function(a,c){a=a>>>c&1227133513;
a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};f.nextCombination=function(c){var b=c|c-1;return b+1|(~b&-~b)-1>>>a(c)+1}},{}],37:[function(b,d,f){(function(a){function c(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()&&"function"===typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(c){return!1}}function h(a,c){if((e.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");
e.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(c),a.__proto__=e.prototype):(null===a&&(a=new e(c)),a.length=c);return a}function e(a,c,b){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(a,c,b);if("number"===typeof a){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return g(this,a)}return d(this,a,c,b)}function d(a,c,b,g){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&
c instanceof ArrayBuffer){c.byteLength;if(0>b||c.byteLength<b)throw new RangeError("'offset' is out of bounds");if(c.byteLength<b+(g||0))throw new RangeError("'length' is out of bounds");c=void 0===b&&void 0===g?new Uint8Array(c):void 0===g?new Uint8Array(c,b):new Uint8Array(c,b,g);e.TYPED_ARRAY_SUPPORT?(a=c,a.__proto__=e.prototype):a=q(a,c);return a}if("string"===typeof c){g=a;a=b;if("string"!==typeof a||""===a)a="utf8";if(!e.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');
b=n(c,a)|0;g=h(g,b);c=g.write(c,a);c!==b&&(g=g.slice(0,c));return g}return r(a,c)}function m(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function g(a,c){m(c);a=h(a,0>c?0:y(c)|0);if(!e.TYPED_ARRAY_SUPPORT)for(var b=0;b<c;++b)a[b]=0;return a}function q(a,c){var b=0>c.length?0:y(c.length)|0;a=h(a,b);for(var e=0;e<b;e+=1)a[e]=c[e]&255;return a}function r(a,c){if(e.isBuffer(c)){var b=y(c.length)|
0;a=h(a,b);if(0===a.length)return a;c.copy(a,0,0,b);return a}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(b="number"!==typeof c.length)||(b=c.length,b=b!==b),b?h(a,0):q(a,c);if("Buffer"===c.type&&V(c.data))return q(a,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function y(a){if(a>=(e.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(e.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function n(a,c){if(e.isBuffer(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var b=a.length;if(0===b)return 0;for(var h=!1;;)switch(c){case "ascii":case "latin1":case "binary":return b;case "utf8":case "utf-8":case void 0:return U(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
b;case "hex":return b>>>1;case "base64":return I.toByteArray(N(a)).length;default:if(h)return U(a).length;c=(""+c).toLowerCase();h=!0}}function t(a,c,b){var e=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===b||b>this.length)b=this.length;if(0>=b)return"";b>>>=0;c>>>=0;if(b<=c)return"";for(a||(a="utf8");;)switch(a){case "hex":a=c;c=b;b=this.length;if(!a||0>a)a=0;if(!c||0>c||c>b)c=b;e="";for(b=a;b<c;++b)a=e,e=this[b],e=16>e?"0"+e.toString(16):e.toString(16),e=a+e;return e;case "utf8":case "utf-8":return B(this,
c,b);case "ascii":a="";for(b=Math.min(this.length,b);c<b;++c)a+=String.fromCharCode(this[c]&127);return a;case "latin1":case "binary":a="";for(b=Math.min(this.length,b);c<b;++c)a+=String.fromCharCode(this[c]);return a;case "base64":return c=0===c&&b===this.length?I.fromByteArray(this):I.fromByteArray(this.slice(c,b)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,b);b="";for(a=0;a<c.length;a+=2)b+=String.fromCharCode(c[a]+256*c[a+1]);return b;default:if(e)throw new TypeError("Unknown encoding: "+
a);a=(a+"").toLowerCase();e=!0}}function w(a,c,b){var e=a[c];a[c]=a[b];a[b]=e}function u(a,c,b,h,g){if(0===a.length)return-1;"string"===typeof b?(h=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b=+b;isNaN(b)&&(b=g?0:a.length-1);0>b&&(b=a.length+b);if(b>=a.length){if(g)return-1;b=a.length-1}else if(0>b)if(g)b=0;else return-1;"string"===typeof c&&(c=e.from(c,h));if(e.isBuffer(c))return 0===c.length?-1:v(a,c,b,h,g);if("number"===typeof c)return c&=255,e.TYPED_ARRAY_SUPPORT&&"function"===
typeof Uint8Array.prototype.indexOf?g?Uint8Array.prototype.indexOf.call(a,c,b):Uint8Array.prototype.lastIndexOf.call(a,c,b):v(a,[c],b,h,g);throw new TypeError("val must be string, number or Buffer");}function v(a,c,b,e,h){function g(a,c){return 1===d?a[c]:a.readUInt16BE(c*d)}var d=1,f=a.length,m=c.length;if(void 0!==e&&(e=String(e).toLowerCase(),"ucs2"===e||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>a.length||2>c.length)return-1;d=2;f/=2;m/=2;b/=2}if(h)for(e=-1;b<f;b++)if(g(a,b)===g(c,-1===
e?0:b-e)){if(-1===e&&(e=b),b-e+1===m)return e*d}else-1!==e&&(b-=b-e),e=-1;else for(b+m>f&&(b=f-m);0<=b;b--){f=!0;for(e=0;e<m;e++)if(g(a,b+e)!==g(c,e)){f=!1;break}if(f)return b}return-1}function B(a,c,b){b=Math.min(a.length,b);for(var e=[];c<b;){var h=a[c],g=null,d=239<h?4:223<h?3:191<h?2:1;if(c+d<=b){var f,m,n;switch(d){case 1:128>h&&(g=h);break;case 2:f=a[c+1];128===(f&192)&&(h=(h&31)<<6|f&63,127<h&&(g=h));break;case 3:f=a[c+1];m=a[c+2];128===(f&192)&&128===(m&192)&&(h=(h&15)<<12|(f&63)<<6|m&63,
2047<h&&(55296>h||57343<h)&&(g=h));break;case 4:f=a[c+1],m=a[c+2],n=a[c+3],128===(f&192)&&128===(m&192)&&128===(n&192)&&(h=(h&15)<<18|(f&63)<<12|(m&63)<<6|n&63,65535<h&&1114112>h&&(g=h))}}null===g?(g=65533,d=1):65535<g&&(g-=65536,e.push(g>>>10&1023|55296),g=56320|g&1023);e.push(g);c+=d}a=e.length;if(a<=ba)e=String.fromCharCode.apply(String,e);else{b="";for(c=0;c<a;)b+=String.fromCharCode.apply(String,e.slice(c,c+=ba));e=b}return e}function x(a,c,b){if(0!==a%1||0>a)throw new RangeError("offset is not uint");
if(a+c>b)throw new RangeError("Trying to access beyond buffer length");}function A(a,c,b,h,g,d){if(!e.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>g||c<d)throw new RangeError('"value" argument is out of bounds');if(b+h>a.length)throw new RangeError("Index out of range");}function E(a,c,b,e){0>c&&(c=65535+c+1);for(var h=0,g=Math.min(a.length-b,2);h<g;++h)a[b+h]=(c&255<<8*(e?h:1-h))>>>8*(e?h:1-h)}function D(a,c,b,e){0>c&&(c=4294967295+c+1);for(var h=0,g=Math.min(a.length-
b,4);h<g;++h)a[b+h]=c>>>8*(e?h:3-h)&255}function C(a,c,b,e,h,g){if(b+e>a.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("Index out of range");}function M(a,c,b,e,h){h||C(a,c,b,4,3.4028234663852886E38,-3.4028234663852886E38);K.write(a,c,b,e,23,4);return b+4}function H(a,c,b,e,h){h||C(a,c,b,8,1.7976931348623157E308,-1.7976931348623157E308);K.write(a,c,b,e,52,8);return b+8}function N(a){a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");a=a.replace(X,"");if(2>a.length)return"";
for(;0!==a.length%4;)a+="=";return a}function U(a,c){c=c||Infinity;for(var b,e=a.length,h=null,g=[],d=0;d<e;++d){b=a.charCodeAt(d);if(55295<b&&57344>b){if(!h){if(56319<b){-1<(c-=3)&&g.push(239,191,189);continue}else if(d+1===e){-1<(c-=3)&&g.push(239,191,189);continue}h=b;continue}if(56320>b){-1<(c-=3)&&g.push(239,191,189);h=b;continue}b=(h-55296<<10|b-56320)+65536}else h&&-1<(c-=3)&&g.push(239,191,189);h=null;if(128>b){if(0>--c)break;g.push(b)}else if(2048>b){if(0>(c-=2))break;g.push(b>>6|192,b&63|
128)}else if(65536>b){if(0>(c-=3))break;g.push(b>>12|224,b>>6&63|128,b&63|128)}else if(1114112>b){if(0>(c-=4))break;g.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw Error("Invalid code point");}return g}function G(a){for(var c=[],b=0;b<a.length;++b)c.push(a.charCodeAt(b)&255);return c}function F(a,c,b,e){for(var h=0;h<e&&!(h+b>=c.length||h>=a.length);++h)c[h+b]=a[h];return h}var I=b("base64-js"),K=b("ieee754"),V=b("isarray");f.Buffer=e;f.SlowBuffer=function(a){+a!=a&&(a=0);return e.alloc(+a)};
f.INSPECT_MAX_BYTES=50;e.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:c();f.kMaxLength=e.TYPED_ARRAY_SUPPORT?2147483647:1073741823;e.poolSize=8192;e._augment=function(a){a.__proto__=e.prototype;return a};e.from=function(a,c,b){return d(null,a,c,b)};e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&($jscomp.initSymbol(),
Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})));e.alloc=function(a,c,b){m(a);a=0>=a?h(null,a):void 0!==c?"string"===typeof b?h(null,a).fill(c,b):h(null,a).fill(c):h(null,a);return a};e.allocUnsafe=function(a){return g(null,a)};e.allocUnsafeSlow=function(a){return g(null,a)};e.isBuffer=function(a){return!(null==a||!a._isBuffer)};e.compare=function(a,c){if(!e.isBuffer(a)||!e.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(a===c)return 0;for(var b=a.length,h=c.length,
g=0,d=Math.min(b,h);g<d;++g)if(a[g]!==c[g]){b=a[g];h=c[g];break}return b<h?-1:h<b?1:0};e.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};e.concat=function(a,c){if(!V(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return e.alloc(0);var b;if(void 0===c)for(b=c=0;b<a.length;++b)c+=a[b].length;
var h=e.allocUnsafe(c),g=0;for(b=0;b<a.length;++b){var d=a[b];if(!e.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(h,g);g+=d.length}return h};e.byteLength=n;e.prototype._isBuffer=!0;e.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<a;c+=2)w(this,c,c+1);return this};e.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var c=0;c<a;c+=4)w(this,c,c+3),w(this,c+1,c+2);return this};e.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<a;c+=8)w(this,c,c+7),w(this,c+1,c+6),w(this,c+2,c+5),w(this,c+3,c+4);return this};e.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?B(this,0,a):t.apply(this,arguments)};e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");
return this===a?!0:0===e.compare(this,a)};e.prototype.inspect=function(){var a="",c=f.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(a+=" ... "));return"<Buffer "+a+">"};e.prototype.compare=function(a,c,b,h,g){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===b&&(b=a?a.length:0);void 0===h&&(h=0);void 0===g&&(g=this.length);if(0>c||b>a.length||0>h||g>this.length)throw new RangeError("out of range index");
if(h>=g&&c>=b)return 0;if(h>=g)return-1;if(c>=b)return 1;c>>>=0;b>>>=0;h>>>=0;g>>>=0;if(this===a)return 0;var d=g-h,f=b-c,m=Math.min(d,f);h=this.slice(h,g);a=a.slice(c,b);for(c=0;c<m;++c)if(h[c]!==a[c]){d=h[c];f=a[c];break}return d<f?-1:f<d?1:0};e.prototype.includes=function(a,c,b){return-1!==this.indexOf(a,c,b)};e.prototype.indexOf=function(a,c,b){return u(this,a,c,b,!0)};e.prototype.lastIndexOf=function(a,c,b){return u(this,a,c,b,!1)};e.prototype.write=function(a,c,b,e){if(void 0===c)e="utf8",b=
this.length,c=0;else if(void 0===b&&"string"===typeof c)e=c,b=this.length,c=0;else if(isFinite(c))c|=0,isFinite(b)?(b|=0,void 0===e&&(e="utf8")):(e=b,b=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var h=this.length-c;if(void 0===b||b>h)b=h;if(0<a.length&&(0>b||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");e||(e="utf8");for(h=!1;;)switch(e){case "hex":a:{c=Number(c)||0;e=this.length-c;b?(b=Number(b),b>e&&(b=
e)):b=e;e=a.length;if(0!==e%2)throw new TypeError("Invalid hex string");b>e/2&&(b=e/2);for(e=0;e<b;++e){h=parseInt(a.substr(2*e,2),16);if(isNaN(h)){a=e;break a}this[c+e]=h}a=e}return a;case "utf8":case "utf-8":return F(U(a,this.length-c),this,c,b);case "ascii":return F(G(a),this,c,b);case "latin1":case "binary":return F(G(a),this,c,b);case "base64":return F(I.toByteArray(N(a)),this,c,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.length-c;for(var g=void 0,g=h=void 0,d=[],f=0;f<
a.length&&!(0>(e-=2));++f)g=a.charCodeAt(f),h=g>>8,g%=256,d.push(g),d.push(h);return F(d,this,c,b);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase();h=!0}};e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ba=4096;e.prototype.slice=function(a,c){var b=this.length;a=~~a;c=void 0===c?b:~~c;0>a?(a+=b,0>a&&(a=0)):a>b&&(a=b);0>c?(c+=b,0>c&&(c=0)):c>b&&(c=b);c<a&&(c=a);if(e.TYPED_ARRAY_SUPPORT)b=this.subarray(a,c),b.__proto__=
e.prototype;else for(var h=c-a,b=new e(h,void 0),g=0;g<h;++g)b[g]=this[g+a];return b};e.prototype.readUIntLE=function(a,c,b){a|=0;c|=0;b||x(a,c,this.length);b=this[a];for(var e=1,h=0;++h<c&&(e*=256);)b+=this[a+h]*e;return b};e.prototype.readUIntBE=function(a,c,b){a|=0;c|=0;b||x(a,c,this.length);b=this[a+--c];for(var e=1;0<c&&(e*=256);)b+=this[a+--c]*e;return b};e.prototype.readUInt8=function(a,c){c||x(a,1,this.length);return this[a]};e.prototype.readUInt16LE=function(a,c){c||x(a,2,this.length);return this[a]|
this[a+1]<<8};e.prototype.readUInt16BE=function(a,c){c||x(a,2,this.length);return this[a]<<8|this[a+1]};e.prototype.readUInt32LE=function(a,c){c||x(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};e.prototype.readUInt32BE=function(a,c){c||x(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};e.prototype.readIntLE=function(a,c,b){a|=0;c|=0;b||x(a,c,this.length);b=this[a];for(var e=1,h=0;++h<c&&(e*=256);)b+=this[a+h]*e;b>=128*e&&(b-=Math.pow(2,
8*c));return b};e.prototype.readIntBE=function(a,c,b){a|=0;c|=0;b||x(a,c,this.length);b=c;for(var e=1,h=this[a+--b];0<b&&(e*=256);)h+=this[a+--b]*e;h>=128*e&&(h-=Math.pow(2,8*c));return h};e.prototype.readInt8=function(a,c){c||x(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};e.prototype.readInt16LE=function(a,c){c||x(a,2,this.length);var b=this[a]|this[a+1]<<8;return b&32768?b|4294901760:b};e.prototype.readInt16BE=function(a,c){c||x(a,2,this.length);var b=this[a+1]|this[a]<<8;return b&
32768?b|4294901760:b};e.prototype.readInt32LE=function(a,c){c||x(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};e.prototype.readInt32BE=function(a,c){c||x(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};e.prototype.readFloatLE=function(a,c){c||x(a,4,this.length);return K.read(this,a,!0,23,4)};e.prototype.readFloatBE=function(a,c){c||x(a,4,this.length);return K.read(this,a,!1,23,4)};e.prototype.readDoubleLE=function(a,c){c||x(a,8,this.length);return K.read(this,
a,!0,52,8)};e.prototype.readDoubleBE=function(a,c){c||x(a,8,this.length);return K.read(this,a,!1,52,8)};e.prototype.writeUIntLE=function(a,c,b,e){a=+a;c|=0;b|=0;e||A(this,a,c,b,Math.pow(2,8*b)-1,0);e=1;var h=0;for(this[c]=a&255;++h<b&&(e*=256);)this[c+h]=a/e&255;return c+b};e.prototype.writeUIntBE=function(a,c,b,e){a=+a;c|=0;b|=0;e||A(this,a,c,b,Math.pow(2,8*b)-1,0);e=b-1;var h=1;for(this[c+e]=a&255;0<=--e&&(h*=256);)this[c+e]=a/h&255;return c+b};e.prototype.writeUInt8=function(a,c,b){a=+a;c|=0;b||
A(this,a,c,1,255,0);e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[c]=a&255;return c+1};e.prototype.writeUInt16LE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,2,65535,0);e.TYPED_ARRAY_SUPPORT?(this[c]=a&255,this[c+1]=a>>>8):E(this,a,c,!0);return c+2};e.prototype.writeUInt16BE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,2,65535,0);e.TYPED_ARRAY_SUPPORT?(this[c]=a>>>8,this[c+1]=a&255):E(this,a,c,!1);return c+2};e.prototype.writeUInt32LE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,4,4294967295,0);e.TYPED_ARRAY_SUPPORT?
(this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255):D(this,a,c,!0);return c+4};e.prototype.writeUInt32BE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,4,4294967295,0);e.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255):D(this,a,c,!1);return c+4};e.prototype.writeIntLE=function(a,c,b,e){a=+a;c|=0;e||(e=Math.pow(2,8*b-1),A(this,a,c,b,e-1,-e));e=0;var h=1,g=0;for(this[c]=a&255;++e<b&&(h*=256);)0>a&&0===g&&0!==this[c+e-1]&&(g=1),this[c+e]=(a/h>>0)-g&255;return c+
b};e.prototype.writeIntBE=function(a,c,b,e){a=+a;c|=0;e||(e=Math.pow(2,8*b-1),A(this,a,c,b,e-1,-e));e=b-1;var h=1,g=0;for(this[c+e]=a&255;0<=--e&&(h*=256);)0>a&&0===g&&0!==this[c+e+1]&&(g=1),this[c+e]=(a/h>>0)-g&255;return c+b};e.prototype.writeInt8=function(a,c,b){a=+a;c|=0;b||A(this,a,c,1,127,-128);e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[c]=a&255;return c+1};e.prototype.writeInt16LE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,2,32767,-32768);e.TYPED_ARRAY_SUPPORT?(this[c]=a&255,
this[c+1]=a>>>8):E(this,a,c,!0);return c+2};e.prototype.writeInt16BE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,2,32767,-32768);e.TYPED_ARRAY_SUPPORT?(this[c]=a>>>8,this[c+1]=a&255):E(this,a,c,!1);return c+2};e.prototype.writeInt32LE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,4,2147483647,-2147483648);e.TYPED_ARRAY_SUPPORT?(this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24):D(this,a,c,!0);return c+4};e.prototype.writeInt32BE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,4,2147483647,-2147483648);
0>a&&(a=4294967295+a+1);e.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255):D(this,a,c,!1);return c+4};e.prototype.writeFloatLE=function(a,c,b){return M(this,a,c,!0,b)};e.prototype.writeFloatBE=function(a,c,b){return M(this,a,c,!1,b)};e.prototype.writeDoubleLE=function(a,c,b){return H(this,a,c,!0,b)};e.prototype.writeDoubleBE=function(a,c,b){return H(this,a,c,!1,b)};e.prototype.copy=function(a,c,b,h){b||(b=0);h||0===h||(h=this.length);c>=a.length&&(c=a.length);
c||(c=0);0<h&&h<b&&(h=b);if(h===b||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>b||b>=this.length)throw new RangeError("sourceStart out of bounds");if(0>h)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length);a.length-c<h-b&&(h=a.length-c+b);var g=h-b;if(this===a&&b<c&&c<h)for(h=g-1;0<=h;--h)a[h+c]=this[h+b];else if(1E3>g||!e.TYPED_ARRAY_SUPPORT)for(h=0;h<g;++h)a[h+c]=this[h+b];else Uint8Array.prototype.set.call(a,this.subarray(b,
b+g),c);return g};e.prototype.fill=function(a,c,b,h){if("string"===typeof a){"string"===typeof c?(h=c,c=0,b=this.length):"string"===typeof b&&(h=b,b=this.length);if(1===a.length){var g=a.charCodeAt(0);256>g&&(a=g)}if(void 0!==h&&"string"!==typeof h)throw new TypeError("encoding must be a string");if("string"===typeof h&&!e.isEncoding(h))throw new TypeError("Unknown encoding: "+h);}else"number"===typeof a&&(a&=255);if(0>c||this.length<c||this.length<b)throw new RangeError("Out of range index");if(b<=
c)return this;c>>>=0;b=void 0===b?this.length:b>>>0;a||(a=0);if("number"===typeof a)for(h=c;h<b;++h)this[h]=a;else for(a=e.isBuffer(a)?a:U((new e(a,h)).toString()),g=a.length,h=0;h<b-c;++h)this[h+c]=a[h%g];return this};var X=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":35,ieee754:65,isarray:69}],38:[function(b,d,f){function a(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=
[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var c=b("./lib/thunk.js");d.exports=function(b){var e=new a;e.pre=b.pre;e.body=b.body;e.post=b.post;var d=b.args.slice(0);e.argTypes=d;for(var f=0;f<d.length;++f){var g=d[f];if("array"===g||"object"===typeof g&&g.blockIndices){e.argTypes[f]="array";e.arrayArgs.push(f);e.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);e.shimArgs.push("array"+
f);if(f<e.pre.args.length&&0<e.pre.args[f].count)throw Error("cwise: pre() block may not reference array args");if(f<e.post.args.length&&0<e.post.args[f].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)e.scalarArgs.push(f),e.shimArgs.push("scalar"+f);else if("index"===g){e.indexArgs.push(f);if(f<e.pre.args.length&&0<e.pre.args[f].count)throw Error("cwise: pre() block may not reference array index");if(f<e.body.args.length&&e.body.args[f].lvalue)throw Error("cwise: body() block may not write to array index");
if(f<e.post.args.length&&0<e.post.args[f].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){e.shapeArgs.push(f);if(f<e.pre.args.length&&e.pre.args[f].lvalue)throw Error("cwise: pre() block may not write to array shape");if(f<e.body.args.length&&e.body.args[f].lvalue)throw Error("cwise: body() block may not write to array shape");if(f<e.post.args.length&&e.post.args[f].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof g&&g.offset)e.argTypes[f]="offset",e.offsetArgs.push({array:g.array,offset:g.offset}),e.offsetArgIndex.push(f);else throw Error("cwise: Unknown argument type "+d[f]);}if(0>=e.arrayArgs.length)throw Error("cwise: No array arguments specified");if(e.pre.args.length>d.length)throw Error("cwise: Too many arguments in pre() block");if(e.body.args.length>d.length)throw Error("cwise: Too many arguments in body() block");if(e.post.args.length>d.length)throw Error("cwise: Too many arguments in post() block");
e.debug=!!b.printCode||!!b.debug;e.funcName=b.funcName||"cwise";e.blockSize=b.blockSize||64;return c(e)}},{"./lib/thunk.js":40}],39:[function(b,d,f){function a(a,c,b){var e=a.length,h=c.arrayArgs.length;c=0<c.indexArgs.length;var d=[],f=[],p=0,u=0,v,B;for(v=0;v<e;++v)f.push(["i",v,"=0"].join(""));for(B=0;B<h;++B)for(v=0;v<e;++v)u=p,p=a[v],0===v?f.push(["d",B,"s",v,"=t",B,"p",p].join("")):f.push(["d",B,"s",v,"=(t",B,"p",p,"-s",u,"*t",B,"p",u,")"].join(""));d.push("var "+f.join(","));for(v=e-1;0<=v;--v)p=
a[v],d.push(["for(i",v,"=0;i",v,"<s",p,";++i",v,"){"].join(""));d.push(b);for(v=0;v<e;++v){u=p;p=a[v];for(B=0;B<h;++B)d.push(["p",B,"+=d",B,"s",v].join(""));c&&(0<v&&d.push(["index[",u,"]-=s",u].join("")),d.push(["++index[",p,"]"].join("")));d.push("}")}return d.join("\n")}function c(c,b,e,h){for(var d=b.length,f=e.arrayArgs.length,p=e.blockSize,w=0<e.indexArgs.length,u=[],v=0;v<f;++v)u.push(["var offset",v,"=p",v].join(""));for(v=c;v<d;++v)u.push(["for(var j"+v+"=SS[",b[v],"]|0;j",v,">0;){"].join("")),
u.push(["if(j",v,"<",p,"){"].join("")),u.push(["s",b[v],"=j",v].join("")),u.push(["j",v,"=0"].join("")),u.push(["}else{s",b[v],"=",p].join("")),u.push(["j",v,"-=",p,"}"].join("")),w&&u.push(["index[",b[v],"]=j",v].join(""));for(v=0;v<f;++v){p=["offset"+v];for(w=c;w<d;++w)p.push(["j",w,"*t",v,"p",b[w]].join(""));u.push(["p",v,"=(",p.join("+"),")"].join(""))}u.push(a(b,e,h));for(v=c;v<d;++v)u.push("}");return u.join("\n")}function h(a,c,b){for(var e=a.body,h=[],d=[],f=0;f<a.args.length;++f){var p=a.args[f];
if(!(0>=p.count)){var u=new RegExp(p.name,"g"),v="",B=c.arrayArgs.indexOf(f);switch(c.argTypes[f]){case "offset":var x=c.offsetArgIndex.indexOf(f),B=c.offsetArgs[x].array,v="+q"+x;case "array":var v="p"+B+v,A="l"+f,x="a"+B;if(0===c.arrayBlockIndices[B])1===p.count?"generic"===b[B]?p.lvalue?(h.push(["var ",A,"=",x,".get(",v,")"].join("")),e=e.replace(u,A),d.push([x,".set(",v,",",A,")"].join(""))):e=e.replace(u,[x,".get(",v,")"].join("")):e=e.replace(u,[x,"[",v,"]"].join("")):"generic"===b[B]?(h.push(["var ",
A,"=",x,".get(",v,")"].join("")),e=e.replace(u,A),p.lvalue&&d.push([x,".set(",v,",",A,")"].join(""))):(h.push(["var ",A,"=",x,"[",v,"]"].join("")),e=e.replace(u,A),p.lvalue&&d.push([x,"[",v,"]=",A].join("")));else{u=[p.name];p=[v];for(v=0;v<Math.abs(c.arrayBlockIndices[B]);v++)u.push("\\s*\\[([^\\]]+)\\]"),p.push("$"+(v+1)+"*t"+B+"b"+v);u=new RegExp(u.join(""),"g");v=p.join("+");if("generic"===b[B])throw Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(u,[x,"[",
v,"]"].join(""))}break;case "scalar":e=e.replace(u,"Y"+c.scalarArgs.indexOf(f));break;case "index":e=e.replace(u,"index");break;case "shape":e=e.replace(u,"shape")}}}return[h.join("\n"),e,d.join("\n")].join("\n").trim()}function e(a){for(var c=Array(a.length),b=!0,e=0;e<a.length;++e){var h=a[e],d=h.match(/\d+/),d=d?d[0]:"";0===h.charAt(0)?c[e]="u"+h.charAt(1)+d:c[e]=h.charAt(0)+d;0<e&&(b=b&&c[e]===c[e-1])}return b?c[0]:c.join("")}var p=b("uniq");d.exports=function(b,g){for(var d=g[1].length-Math.abs(b.arrayBlockIndices[0])|
0,f=Array(b.arrayArgs.length),y=Array(b.arrayArgs.length),n=0;n<b.arrayArgs.length;++n)y[n]=g[2*n],f[n]=g[2*n+1];for(var t=[],w=[],u=[],v=[],B=[],n=0;n<b.arrayArgs.length;++n){0>b.arrayBlockIndices[n]?(u.push(0),v.push(d),t.push(d),w.push(d+b.arrayBlockIndices[n])):(u.push(b.arrayBlockIndices[n]),v.push(b.arrayBlockIndices[n]+d),t.push(0),w.push(b.arrayBlockIndices[n]));for(var x=[],A=0;A<f[n].length;A++)u[n]<=f[n][A]&&f[n][A]<v[n]&&x.push(f[n][A]-u[n]);B.push(x)}w=["SS"];v=["'use strict'"];x=[];
for(A=0;A<d;++A)x.push(["s",A,"=SS[",A,"]"].join(""));for(n=0;n<b.arrayArgs.length;++n){w.push("a"+n);w.push("t"+n);w.push("p"+n);for(A=0;A<d;++A)x.push(["t",n,"p",A,"=t",n,"[",u[n]+A,"]"].join(""));for(A=0;A<Math.abs(b.arrayBlockIndices[n]);++A)x.push(["t",n,"b",A,"=t",n,"[",t[n]+A,"]"].join(""))}for(n=0;n<b.scalarArgs.length;++n)w.push("Y"+n);0<b.shapeArgs.length&&x.push("shape=SS.slice(0)");if(0<b.indexArgs.length){A=Array(d);for(n=0;n<d;++n)A[n]="0";x.push(["index=[",A.join(","),"]"].join(""))}for(n=
0;n<b.offsetArgs.length;++n){t=b.offsetArgs[n];u=[];for(A=0;A<t.offset.length;++A)0!==t.offset[A]&&(1===t.offset[A]?u.push(["t",t.array,"p",A].join("")):u.push([t.offset[A],"*t",t.array,"p",A].join("")));0===u.length?x.push("q"+n+"=0"):x.push(["q",n,"=",u.join("+")].join(""))}n=p([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));x=x.concat(n);v.push("var "+x.join(","));for(n=0;n<b.arrayArgs.length;++n)v.push("p"+n+"|=0");3<b.pre.body.length&&v.push(h(b.pre,b,y));n=h(b.body,
b,y);a:for(A=0,x=B[0].length;A<x;){for(t=1;t<B.length;++t)if(B[t][A]!==B[0][A])break a;++A}A<d?v.push(c(A,B[0],b,n)):v.push(a(B[0],b,n));3<b.post.body.length&&v.push(h(b.post,b,y));b.debug&&console.log("-----Generated cwise routine for ",g,":\n"+v.join("\n")+"\n----------");d=[b.funcName||"unnamed","_cwise_loop_",f[0].join("s"),"m",A,e(y)].join("");return(new Function(["function ",d,"(",w.join(","),"){",v.join("\n"),"} return ",d].join("")))()}},{uniq:83}],40:[function(b,d,f){var a=b("./compile.js");
d.exports=function(c){var b=["'use strict'","var CACHED={}"],e=[];b.push(["return function ",c.funcName+"_cwise_thunk","(",c.shimArgs.join(","),"){"].join(""));for(var d=[],f=[],g=[["array",c.arrayArgs[0],".shape.slice(",Math.max(0,c.arrayBlockIndices[0]),0>c.arrayBlockIndices[0]?","+c.arrayBlockIndices[0]+")":")"].join("")],q=[],r=[],y=0;y<c.arrayArgs.length;++y){var n=c.arrayArgs[y];e.push(["t",n,"=array",n,".dtype,r",n,"=array",n,".order"].join(""));d.push("t"+n);d.push("r"+n);f.push("t"+n);f.push("r"+
n+".join()");g.push("array"+n+".data");g.push("array"+n+".stride");g.push("array"+n+".offset|0");0<y&&(q.push("array"+c.arrayArgs[0]+".shape.length===array"+n+".shape.length+"+(Math.abs(c.arrayBlockIndices[0])-Math.abs(c.arrayBlockIndices[y]))),r.push("array"+c.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,c.arrayBlockIndices[0])+"]===array"+n+".shape[shapeIndex+"+Math.max(0,c.arrayBlockIndices[y])+"]"))}1<c.arrayArgs.length&&(b.push("if (!("+q.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
b.push("for(var shapeIndex=array"+c.arrayArgs[0]+".shape.length-"+Math.abs(c.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),b.push("if (!("+r.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(y=0;y<c.scalarArgs.length;++y)g.push("scalar"+c.scalarArgs[y]);e.push(["type=[",f.join(","),"].join()"].join(""));e.push("proc=CACHED[type]");b.push("var "+e.join(","));b.push(["if(!proc){CACHED[type]=proc=compile([",d.join(","),"])}return proc(",g.join(","),
")}"].join(""));c.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");return(new Function("compile",b.join("\n")))(a.bind(void 0,c))}},{"./compile.js":39}],41:[function(b,d,f){function a(c,b,e){var d=c[e]|0;if(0>=d)return[];var f=Array(d),g;if(e===c.length-1)for(g=0;g<d;++g)f[g]=b;else for(g=0;g<d;++g)f[g]=a(c,b,e+1);return f}d.exports=function(c,b){"undefined"===typeof b&&(b=0);switch(typeof c){case "number":if(0<c){var e=c|0,d=b,f,g;f=Array(e);for(g=0;g<e;++g)f[g]=d;return f}break;
case "object":if("number"===typeof c.length)return a(c,b,0)}return[]}},{}],42:[function(b,d,f){function a(a){if(0>a)return Number("0/0");for(var c=h[0],b=h.length-1;0<b;--b)c+=h[b]/(a+b);b=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(b)-b+Math.log(c)-Math.log(a)}var c=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],h=[.9999999999999971,57.15623566586292,-59.59796035547549,
14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];d.exports=function p(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*b)*p(1-b));if(100<b)return Math.exp(a(b));--b;for(var h=c[0],d=1;9>d;d++)h+=c[d]/(b+d);d=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(d,b+.5)*Math.exp(-d)*h};d.exports.log=a},{}],43:[function(b,
d,f){d.exports=function(a,c){var b=c[0],e=c[1],d=c[2],f=c[3],g=c[4],q=c[5],r=c[6],y=c[7],n=c[8];a[0]=g*n-q*y;a[1]=d*y-e*n;a[2]=e*q-d*g;a[3]=q*r-f*n;a[4]=b*n-d*r;a[5]=d*f-b*q;a[6]=f*y-g*r;a[7]=e*r-b*y;a[8]=b*g-e*f;return a}},{}],44:[function(b,d,f){d.exports=function(a){var c=new Float32Array(9);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c}},{}],45:[function(b,d,f){d.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];
a[6]=c[6];a[7]=c[7];a[8]=c[8];return a}},{}],46:[function(b,d,f){d.exports=function(){var a=new Float32Array(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}},{}],47:[function(b,d,f){d.exports=function(a){var c=a[3],b=a[4],e=a[5],d=a[6],f=a[7],g=a[8];return a[0]*(g*b-e*f)+a[1]*(e*d-g*c)+a[2]*(f*c-b*d)}},{}],48:[function(b,d,f){d.exports=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]+a[4]*a[4]+a[5]*a[5]+a[6]*a[6]+a[7]*a[7]+a[8]*a[8])}},{}],49:[function(b,
d,f){d.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=0;a[3]=c[2];a[4]=c[3];a[5]=0;a[6]=c[4];a[7]=c[5];a[8]=1;return a}},{}],50:[function(b,d,f){d.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[4];a[4]=c[5];a[5]=c[6];a[6]=c[8];a[7]=c[9];a[8]=c[10];return a}},{}],51:[function(b,d,f){d.exports=function(a,c){var b=c[0],e=c[1],d=c[2],f=c[3],g=b+b,q=e+e,r=d+d,b=b*g,y=e*g,e=e*q,n=d*g,t=d*q,d=d*r,g=f*g,q=f*q,f=f*r;a[0]=1-e-d;a[3]=y-f;a[6]=n+q;a[1]=y+f;a[4]=1-b-d;a[7]=t-g;a[2]=n-q;a[5]=t+g;a[8]=
1-b-e;return a}},{}],52:[function(b,d,f){d.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}},{}],53:[function(b,d,f){d.exports={adjoint:b("./adjoint"),clone:b("./clone"),copy:b("./copy"),create:b("./create"),determinant:b("./determinant"),frob:b("./frob"),fromMat2:b("./from-mat2"),fromMat4:b("./from-mat4"),fromQuat:b("./from-quat"),identity:b("./identity"),invert:b("./invert"),multiply:b("./multiply"),normalFromMat4:b("./normal-from-mat4"),rotate:b("./rotate"),
scale:b("./scale"),str:b("./str"),translate:b("./translate"),transpose:b("./transpose")}},{"./adjoint":43,"./clone":44,"./copy":45,"./create":46,"./determinant":47,"./frob":48,"./from-mat2":49,"./from-mat4":50,"./from-quat":51,"./identity":52,"./invert":54,"./multiply":55,"./normal-from-mat4":56,"./rotate":57,"./scale":58,"./str":59,"./translate":60,"./transpose":61}],54:[function(b,d,f){d.exports=function(a,c){var b=c[0],e=c[1],d=c[2],f=c[3],g=c[4],q=c[5],r=c[6],y=c[7],n=c[8],t=n*g-q*y,w=-n*f+q*
r,u=y*f-g*r,v=b*t+e*w+d*u;if(!v)return null;v=1/v;a[0]=t*v;a[1]=(-n*e+d*y)*v;a[2]=(q*e-d*g)*v;a[3]=w*v;a[4]=(n*b-d*r)*v;a[5]=(-q*b+d*f)*v;a[6]=u*v;a[7]=(-y*b+e*r)*v;a[8]=(g*b-e*f)*v;return a}},{}],55:[function(b,d,f){d.exports=function(a,c,b){var e=c[0],d=c[1],f=c[2],g=c[3],q=c[4],r=c[5],y=c[6],n=c[7];c=c[8];var t=b[0],w=b[1],u=b[2],v=b[3],B=b[4],x=b[5],A=b[6],E=b[7];b=b[8];a[0]=t*e+w*g+u*y;a[1]=t*d+w*q+u*n;a[2]=t*f+w*r+u*c;a[3]=v*e+B*g+x*y;a[4]=v*d+B*q+x*n;a[5]=v*f+B*r+x*c;a[6]=A*e+E*g+b*y;a[7]=
A*d+E*q+b*n;a[8]=A*f+E*r+b*c;return a}},{}],56:[function(b,d,f){d.exports=function(a,c){var b=c[0],e=c[1],d=c[2],f=c[3],g=c[4],q=c[5],r=c[6],y=c[7],n=c[8],t=c[9],w=c[10],u=c[11],v=c[12],B=c[13],x=c[14],A=c[15],E=b*q-e*g,D=b*r-d*g,C=b*y-f*g,M=e*r-d*q,H=e*y-f*q,N=d*y-f*r,U=n*B-t*v,G=n*x-w*v,n=n*A-u*v,F=t*x-w*B,t=t*A-u*B,w=w*A-u*x,u=E*w-D*t+C*F+M*n-H*G+N*U;if(!u)return null;u=1/u;a[0]=(q*w-r*t+y*F)*u;a[1]=(r*n-g*w-y*G)*u;a[2]=(g*t-q*n+y*U)*u;a[3]=(d*t-e*w-f*F)*u;a[4]=(b*w-d*n+f*G)*u;a[5]=(e*n-b*t-f*
U)*u;a[6]=(B*N-x*H+A*M)*u;a[7]=(x*C-v*N-A*D)*u;a[8]=(v*H-B*C+A*E)*u;return a}},{}],57:[function(b,d,f){d.exports=function(a,c,b){var e=c[0],d=c[1],f=c[2],g=c[3],q=c[4],r=c[5],y=c[6],n=c[7];c=c[8];var t=Math.sin(b);b=Math.cos(b);a[0]=b*e+t*g;a[1]=b*d+t*q;a[2]=b*f+t*r;a[3]=b*g-t*e;a[4]=b*q-t*d;a[5]=b*r-t*f;a[6]=y;a[7]=n;a[8]=c;return a}},{}],58:[function(b,d,f){d.exports=function(a,c,b){var e=b[0];b=b[1];a[0]=e*c[0];a[1]=e*c[1];a[2]=e*c[2];a[3]=b*c[3];a[4]=b*c[4];a[5]=b*c[5];a[6]=c[6];a[7]=c[7];a[8]=
c[8];return a}},{}],59:[function(b,d,f){d.exports=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}},{}],60:[function(b,d,f){d.exports=function(a,c,b){var e=c[0],d=c[1],f=c[2],g=c[3],q=c[4],r=c[5],y=c[6],n=c[7];c=c[8];var t=b[0];b=b[1];a[0]=e;a[1]=d;a[2]=f;a[3]=g;a[4]=q;a[5]=r;a[6]=t*e+b*g+y;a[7]=t*d+b*q+n;a[8]=t*f+b*r+c;return a}},{}],61:[function(b,d,f){d.exports=function(a,c){if(a===c){var b=c[1],e=c[2],d=c[5];a[1]=c[3];a[2]=c[6];
a[3]=b;a[5]=c[7];a[6]=e;a[7]=d}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a}},{}],62:[function(b,d,f){d.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],63:[function(b,d,f){var a=b("./identity");d.exports=function(c,b,e,d){var f,g,q,r,y,n,t,w,u=b[0],v=b[1];b=b[2];q=d[0];r=d[1];g=d[2];t=e[0];d=e[1];f=e[2];if(1E-6>Math.abs(u-t)&&1E-6>Math.abs(v-
d)&&1E-6>Math.abs(b-f))return a(c);e=u-t;d=v-d;t=b-f;w=1/Math.sqrt(e*e+d*d+t*t);e*=w;d*=w;t*=w;f=r*t-g*d;g=g*e-q*t;q=q*d-r*e;(w=Math.sqrt(f*f+g*g+q*q))?(w=1/w,f*=w,g*=w,q*=w):q=g=f=0;r=d*q-t*g;y=t*f-e*q;n=e*g-d*f;(w=Math.sqrt(r*r+y*y+n*n))?(w=1/w,r*=w,y*=w,n*=w):n=y=r=0;c[0]=f;c[1]=r;c[2]=e;c[3]=0;c[4]=g;c[5]=y;c[6]=d;c[7]=0;c[8]=q;c[9]=n;c[10]=t;c[11]=0;c[12]=-(f*u+g*v+q*b);c[13]=-(r*u+y*v+n*b);c[14]=-(e*u+d*v+t*b);c[15]=1;return c}},{"./identity":62}],64:[function(b,d,f){d.exports=function(a,c,
b,e,d){c=1/Math.tan(c/2);var f=1/(e-d);a[0]=c/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+e)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*e*f;a[15]=0;return a}},{}],65:[function(b,d,f){f.read=function(a,c,b,e,d){var f;f=8*d-e-1;var g=(1<<f)-1,q=g>>1,r=-7;d=b?d-1:0;var y=b?-1:1,n=a[c+d];d+=y;b=n&(1<<-r)-1;n>>=-r;for(r+=f;0<r;b=256*b+a[c+d],d+=y,r-=8);f=b&(1<<-r)-1;b>>=-r;for(r+=e;0<r;f=256*f+a[c+d],d+=y,r-=8);if(0===b)b=1-q;else{if(b===g)return f?NaN:Infinity*(n?-1:1);f+=Math.pow(2,
e);b-=q}return(n?-1:1)*f*Math.pow(2,b-e)};f.write=function(a,c,b,e,d,f){var g,q=8*f-d-1,r=(1<<q)-1,y=r>>1,n=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;f=e?0:f-1;var t=e?1:-1,w=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,e=r):(e=Math.floor(Math.log(c)/Math.LN2),1>c*(g=Math.pow(2,-e))&&(e--,g*=2),c=1<=e+y?c+n/g:c+n*Math.pow(2,1-y),2<=c*g&&(e++,g/=2),e+y>=r?(c=0,e=r):1<=e+y?(c=(c*g-1)*Math.pow(2,d),e+=y):(c=c*Math.pow(2,y-1)*Math.pow(2,d),e=0));for(;8<=d;a[b+f]=c&255,f+=
t,c/=256,d-=8);e=e<<d|c;for(q+=d;0<q;a[b+f]=e&255,f+=t,e/=256,q-=8);a[b+f-t]|=128*w}},{}],66:[function(b,d,f){d.exports=function(a,c){c=c||Array(a.length);for(var b=0;b<a.length;++b)c[a[b]]=b;return c}},{}],67:[function(b,d,f){d.exports=function(a){for(var c=Array(a),b=0;b<a;++b)c[b]=b;return c}},{}],68:[function(b,d,f){function a(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}d.exports=function(c){return null!=c&&(a(c)||"function"===typeof c.readFloatLE&&
"function"===typeof c.slice&&a(c.slice(0,0))||!!c._isBuffer)}},{}],69:[function(b,d,f){var a={}.toString;d.exports=Array.isArray||function(c){return"[object Array]"==a.call(c)}},{}],70:[function(b,d,f){d.exports=function(c,b){function e(a){var c=!1;"altKey"in a&&(c=c||a.altKey!==x.alt,x.alt=!!a.altKey);"shiftKey"in a&&(c=c||a.shiftKey!==x.shift,x.shift=!!a.shiftKey);"ctrlKey"in a&&(c=c||a.ctrlKey!==x.control,x.control=!!a.ctrlKey);"metaKey"in a&&(c=c||a.metaKey!==x.meta,x.meta=!!a.metaKey);return c}
function d(c,g){var f=a.x(g),n=a.y(g);"buttons"in g&&(c=g.buttons|0);if(c!==u||f!==v||n!==B||e(g))u=c|0,v=f||0,B=n||0,b&&b(u,v,B,x)}function f(a){d(0,a)}function g(){if(u||v||B||x.shift||x.alt||x.meta||x.control)u=v=B=0,x.shift=x.alt=x.control=x.meta=!1,b&&b(0,0,0,x)}function q(a){e(a)&&b&&b(u,v,B,x)}function r(c){0===a.buttons(c)?d(0,c):d(u,c)}function y(c){d(u|a.buttons(c),c)}function n(c){d(u&~a.buttons(c),c)}function t(){A||(A=!0,c.addEventListener("mousemove",r),c.addEventListener("mousedown",
y),c.addEventListener("mouseup",n),c.addEventListener("mouseleave",f),c.addEventListener("mouseenter",f),c.addEventListener("mouseout",f),c.addEventListener("mouseover",f),c.addEventListener("blur",g),c.addEventListener("keyup",q),c.addEventListener("keydown",q),c.addEventListener("keypress",q),c!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",q),window.addEventListener("keydown",q),window.addEventListener("keypress",q)))}function w(){A&&(A=!1,c.removeEventListener("mousemove",
r),c.removeEventListener("mousedown",y),c.removeEventListener("mouseup",n),c.removeEventListener("mouseleave",f),c.removeEventListener("mouseenter",f),c.removeEventListener("mouseout",f),c.removeEventListener("mouseover",f),c.removeEventListener("blur",g),c.removeEventListener("keyup",q),c.removeEventListener("keydown",q),c.removeEventListener("keypress",q),c!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",q),window.removeEventListener("keydown",q),window.removeEventListener("keypress",
q)))}b||(b=c,c=window);var u=0,v=0,B=0,x={shift:!1,alt:!1,control:!1,meta:!1},A=!1;t();var E={element:c};Object.defineProperties(E,{enabled:{get:function(){return A},set:function(a){a?t():w},enumerable:!0},buttons:{get:function(){return u},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return B},enumerable:!0},mods:{get:function(){return x},enumerable:!0}});return E};var a=b("mouse-event")},{"mouse-event":71}],71:[function(b,d,f){function a(a){return a.target||a.srcElement||
window}f.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};f.element=a;f.x=function(c){if("object"===typeof c){if("offsetX"in c)return c.offsetX;var b=a(c).getBoundingClientRect();return c.clientX-b.left}return 0};f.y=function(c){if("object"===typeof c){if("offsetY"in c)return c.offsetY;var b=
a(c).getBoundingClientRect();return c.clientY-b.top}return 0}},{}],72:[function(b,d,f){var a=b("to-px");d.exports=function(c,b,e){"function"===typeof c&&(e=!!b,b=c,c=window);var d=a("ex",c),f=function(a){e&&a.preventDefault();var c=a.deltaX||0,f=a.deltaY||0,m=a.deltaZ||0,n=1;switch(a.deltaMode){case 1:n=d;break;case 2:n=window.innerHeight}c*=n;f*=n;m*=n;if(c||f||m)return b(c,f,m,a)};c.addEventListener("wheel",f);return f}},{"to-px":80}],73:[function(b,d,f){function a(a,c,b){for(var e=0,d=0;d<a;++d)c&
1<<d&&(e|=1<<b[d]);return e}function c(c,b,d,f,u,v){function B(a,c){H.push("for(","i"+u[a],"=",c,";","i"+u[a],"<","s"+u[a],";","++","i"+u[a],"){")}function x(a){for(var c=0;c<D;++c)H.push("p"+c,"+=","u"+c+"_"+u[a],";");H.push("}")}function A(){for(var a=1;a<1<<C;++a)H.push(r,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",r,";")}function E(a,c){if(0>a){for(var b=0;b<D;++b)v[b]?H.push("c"+b+"_0","=","d"+b,".get(","p"+b,");"):H.push("c"+b+"_0","=","d"+b,"[","p"+b,"];");for(var d=[],b=0;b<D;++b)d.push("c"+
b+"_0");for(b=0;b<f;++b)d.push("x"+b);H.push("b0","=",p,"[",q,"]=phase(",d.join(),");");for(d=1;d<1<<C;++d)H.push("b"+d,"=",p,"[",q,"+","e"+d,"];");b=[];for(d=1;d<1<<C;++d)b.push("(b0!==b"+d+")");H.push("if(",b.join("||"),"){");for(var g=[],b=0;b<C;++b)g.push("i"+b);for(b=0;b<D;++b)for(g.push("c"+b+"_0"),d=1;d<1<<C;++d)v[b]?H.push("c"+b+"_"+d,"=","d"+b,".get(","p"+b,"+","d"+b+"_"+d,");"):H.push("c"+b+"_"+d,"=","d"+b,"[","p"+b,"+","d"+b+"_"+d,"];"),g.push("c"+b+"_"+d);for(b=0;b<1<<C;++b)g.push("b"+
b);for(b=0;b<f;++b)g.push("x"+b);H.push("vertex(",g.join(),");","v0","=",e,"[",q,"]=",m,"++;");b=(1<<C)-1;g="b"+b;for(d=0;d<C;++d)if(0===(c&~(1<<d))){for(var h=b^1<<d,n="b"+h,r=[],t=h;0<t;t=t-1&h)r.push(e+"["+q+"+"+("e"+t)+"]");r.push("v0");for(t=0;t<D;++t)d&1?r.push("c"+t+"_"+b,"c"+t+"_"+h):r.push("c"+t+"_"+h,"c"+t+"_"+b);d&1?r.push(g,n):r.push(n,g);for(t=0;t<f;++t)r.push("x"+t);H.push("if(",g,"!==",n,"){","face(",r.join(),")}")}H.push("}",q,"+=1;")}else{for(d=a-1;0<=d;--d)B(d,0);b=[];for(d=0;d<
D;++d)v[d]?b.push("d"+d+".get("+("p"+d)+")"):b.push("d"+d+"["+("p"+d)+"]");for(d=0;d<f;++d)b.push("x"+d);H.push(p,"[",q,"++]=phase(",b.join(),");");for(d=0;d<a;++d)x(d);for(d=0;d<D;++d)H.push("p"+d,"+=","u"+d+"_"+u[a],";");H.push("if(","s"+u[a],">0){","i"+u[a],"=1;");E(a-1,c|1<<u[a]);for(d=0;d<D;++d)H.push("p"+d,"+=","u"+d+"_"+u[a],";");a===C-1&&(H.push(q,"=0;"),A());B(a,2);E(a-1,c);a===C-1&&(H.push("if(","i"+u[C-1],"&1){",q,"=0;}"),A());x(a);H.push("}")}}var D=v.length,C=u.length;if(2>C)throw Error("ndarray-extract-contour: Dimension must be at least 2");
for(var M="extractContour"+u.join("_"),H=[],N=[],U=[],G=0;G<D;++G)U.push("a"+G);for(G=0;G<f;++G)U.push("x"+G);for(G=0;G<C;++G)N.push("s"+G+"=a0.shape["+G+"]|0");for(G=0;G<D;++G){N.push("d"+G+"="+("a"+G)+".data","o"+G+"="+("a"+G)+".offset|0");for(var F=0;F<C;++F)N.push("t"+G+"_"+F+"="+("a"+G)+".stride["+F+"]|0")}for(G=0;G<D;++G)for(N.push("p"+G+"="+("o"+G)),N.push("c"+G+"_0"),F=1;F<1<<C;++F){for(var I=[],K=0;K<C;++K)F&1<<K&&I.push("-"+("t"+G+"_"+K));N.push("d"+G+"_"+F+"=("+I.join("")+")|0");N.push("c"+
G+"_"+F+"=0")}for(G=0;G<D;++G)for(F=0;F<C;++F)K=["t"+G+"_"+u[F]],0<F&&K.push("t"+G+"_"+u[F-1]+"*"+("s"+u[F-1])),N.push("u"+G+"_"+u[F]+"=("+K.join("-")+")|0");for(G=0;G<C;++G)N.push("i"+G+"=0");N.push(m+"=0");F=["2"];for(G=C-2;0<=G;--G)F.push("s"+u[G]);N.push(g+"=("+F.join("*")+")|0",p+"=mallocUint32("+g+")",e+"=mallocUint32("+g+")",q+"=0");N.push("b0=0");for(F=1;F<1<<C;++F){G=[];I=[];for(K=0;K<C;++K)F&1<<K&&(0===I.length?G.push("1"):G.unshift(I.join("*"))),I.push("s"+u[K]);K="";0>G[0].indexOf("s"+
u[C-2])&&(K="-");I=a(C,F,u);N.push("e"+I+"=(-"+G.join("-")+")|0","y"+I+"=("+K+G.join("-")+")|0","b"+I+"=0")}N.push("v0=0",r+"=0");E(C-1,0);H.push("freeUint32(",e,");freeUint32(",p,");");M=["'use strict';function ",M,"(",U.join(),"){var ",N.join(),";",H.join(""),"}return ",M].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",M))(c,b,d,h.mallocUint32,h.freeUint32)}var h=b("typedarray-pool");d.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);
}"object"!==typeof a&&b("Must specify arguments");var e=a.order;Array.isArray(e)||b("Must specify order");var d=a.arrayArguments||1;1>d&&b("Must have at least one array argument");var g=a.scalarArguments||0;0>g&&b("Scalar arg count must be > 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");"function"!==typeof a.cell&&b("Must specify cell creation function");"function"!==typeof a.phase&&b("Must specify phase function");for(var f=a.getters||[],h=Array(d),m=0;m<d;++m)0<=f.indexOf(m)?
h[m]=!0:h[m]=!1;return c(a.vertex,a.cell,a.phase,g,e,h)};var e="V",p="P",m="N",g="Q",q="X",r="T"},{"typedarray-pool":82}],74:[function(b,d,f){function a(a,b){return a[0]-b[0]}function c(){var b=this.stride,c=Array(b.length),e;for(e=0;e<c.length;++e)c[e]=[Math.abs(b[e]),e];c.sort(a);b=Array(c.length);for(e=0;e<b.length;++e)b[e]=c[e][1];return b}function h(a,b){var e=["View",b,"d",a].join("");0>b&&(e="View_Nil"+a);var d="generic"===a;if(-1===b){var g,e=new Function("function "+e+"(a){this.data=a;};var proto="+
e+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+e+"(a){return new "+e+"(a);}");return e()}if(0===b)return e=new Function("TrivialArray","function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+
a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+e+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+
"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),e(q[a][0]);g=["'use strict'"];var f=p(b),h=f.map(function(a){return"i"+a}),m="this.offset+"+f.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),x=f.map(function(a){return"b"+a}).join(","),A=f.map(function(a){return"c"+a}).join(",");g.push("function "+e+"(a,"+x+","+A+",d){this.data=a","this.shape=["+x+"]","this.stride=["+A+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);g.push("Object.defineProperty(proto,'size',{get:function "+
e+"_size(){return "+f.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?g.push("proto.order=[0]"):(g.push("Object.defineProperty(proto,'order',{get:"),4>b?(g.push("function "+e+"_order(){"),2===b?g.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&g.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):
g.push("ORDER})"));g.push("proto.set=function "+e+"_set("+h.join(",")+",v){");d?g.push("return this.data.set("+m+",v)}"):g.push("return this.data["+m+"]=v}");g.push("proto.get=function "+e+"_get("+h.join(",")+"){");d?g.push("return this.data.get("+m+")}"):g.push("return this.data["+m+"]}");g.push("proto.index=function "+e+"_index(",h.join(),"){return "+m+"}");g.push("proto.hi=function "+e+"_hi("+h.join(",")+"){return new "+e+"(this.data,"+f.map(function(a){return["(typeof i",a,"!=='number'||i",a,
"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+f.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");d=f.map(function(a){return"a"+a+"=this.shape["+a+"]"});m=f.map(function(a){return"c"+a+"=this.stride["+a+"]"});g.push("proto.lo=function "+e+"_lo("+h.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+m.join(","));for(d=0;d<b;++d)g.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");g.push("return new "+e+"(this.data,"+f.map(function(a){return"a"+
a}).join(",")+","+f.map(function(a){return"c"+a}).join(",")+",b)}");g.push("proto.step=function "+e+"_step("+h.join(",")+"){var "+f.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+f.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(d=0;d<b;++d)g.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");g.push("return new "+e+"(this.data,"+f.map(function(a){return"a"+
a}).join(",")+","+f.map(function(a){return"b"+a}).join(",")+",c)}");m=Array(b);x=Array(b);for(d=0;d<b;++d)m[d]="a[i"+d+"]",x[d]="b[i"+d+"]";g.push("proto.transpose=function "+e+"_transpose("+h+"){"+h.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+m.join(",")+","+x.join(",")+",this.offset)}");g.push("proto.pick=function "+e+"_pick("+h+"){var a=[],b=[],c=this.offset");for(d=0;d<b;++d)g.push("if(typeof i"+d+"==='number'&&i"+
d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");g.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");g.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+f.map(function(a){return"shape["+a+"]"}).join(",")+","+f.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");e=new Function("CTOR_LIST","ORDER",g.join("\n"));return e(q[a],c)}function e(a){if(m(a))return"buffer";if(g)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";
case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var p=b("iota-array"),m=b("is-buffer"),g="undefined"!==typeof Float64Array,q={float32:[],float64:[],int8:[],int16:[],
int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in q)q[a].push(h(a,-1))});d.exports=function(a,b,c,d){if(void 0===a){var g=q.array[0];return g([])}"number"===typeof a&&(a=[a]);void 0===b&&(b=[a.length]);g=b.length;if(void 0===c){c=Array(g);for(var f=g-1,m=1;0<=f;--f)c[f]=m,m*=b[f]}if(void 0===d)for(f=d=0;f<g;++f)0>c[f]&&(d-=(b[f]-1)*c[f]);f=e(a);for(m=q[f];m.length<=g+1;)m.push(h(f,m.length-1));g=m[g+1];return g(a,b,c,d)}},{"iota-array":67,
"is-buffer":68}],75:[function(b,d,f){d.exports=function(a,b){b||(b=[0,""]);a=String(a);var d=parseFloat(a,10);b[0]=d;b[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return b}},{}],76:[function(b,d,f){d.exports=function(b){var e=b.length;if(e<a)for(var d=1,f=0;f<e;++f)for(var g=0;g<f;++g)if(b[f]<b[g])d=-d;else{if(b[f]===b[g])return 0}else{for(var q=c.mallocUint8(e),f=0;f<e;++f)q[f]=0;d=1;for(f=0;f<e;++f)if(!q[f]){var r=1;q[f]=1;for(g=b[f];g!==f;g=b[g]){if(q[g])return c.freeUint8(q),0;r+=1;q[g]=1}r&1||(d=
-d)}c.freeUint8(q)}return d};var a=32,c=b("typedarray-pool")},{"typedarray-pool":82}],77:[function(b,d,f){var a=b("typedarray-pool"),c=b("invert-permutation");f.rank=function(b){var e=b.length;switch(e){case 0:case 1:return 0;case 2:return b[1]}var d=a.mallocUint32(e),f=a.mallocUint32(e),g=0,q;c(b,f);for(q=0;q<e;++q)d[q]=b[q];for(q=e-1;0<q;--q)e=f[q],b=d[q],d[q]=d[e],d[e]=b,f[q]=f[b],f[b]=e,g=(g+b)*q;a.freeUint32(f);a.freeUint32(d);return g};f.unrank=function(a,b,c){switch(a){case 0:return c?c:[];
case 1:return c?(c[0]=0,c):[0];case 2:return c?(b?(c[0]=0,c[1]=1):(c[0]=1,c[1]=0),c):b?[0,1]:[1,0]}c=c||Array(a);var d,f,q=1;c[0]=0;for(f=1;f<a;++f)c[f]=f,q=q*f|0;for(f=a-1;0<f;--f)a=b/q|0,b=b-a*q|0,q=q/f|0,d=c[f]|0,c[f]=c[a]|0,c[a]=d|0;return c}},{"invert-permutation":66,"typedarray-pool":82}],78:[function(b,d,f){function a(a){throw Error("resl: "+a);}function c(b,c,d){Object.keys(b).forEach(function(b){0>c.indexOf(b)&&a('invalid parameter "'+b+'" in '+d)})}function h(a,b){this.state=0;this.ready=
!1;this.progress=0;this.name=a;this.cancel=b}var e=["manifest","onDone","onProgress","onError"],p=["type","src","stream","credentials","parser"],m=["onData","onDone"];d.exports=function(b){function d(c,e){if(c in b){var f=b[c];"function"!==typeof f&&a('invalid callback "'+c+'"');return f}return null}function f(a){function b(){if(!(2>m.readyState||1===q.state||-1===q.state)){if(200!==m.status)return n('error loading resource "'+a.name+'"');if(2<m.readyState&&0===q.state){var d;d="binary"===a.type?
m.response:m.responseText;if(g.data)try{p=g.data(d)}catch(e){return n(e)}else p=d}if(3<m.readyState&&0===q.state){if(g.done)try{p=g.done()}catch(e){return n(e)}q.state=1}x[c]=p;q.progress=.75*q.progress+.25;q.ready=a.stream&&!!p||1===q.state;t()}}var c=a.name,d=a.stream,e="binary"===a.type,g=a.parser,m=new XMLHttpRequest,p=null,q=new h(c,function(){1!==q.state&&-1!==q.state&&(m.onreadystatechange=null,m.abort(),q.state=-1)});m.onreadystatechange=d?b:function(){4===m.readyState&&b()};e&&(m.responseType=
"arraybuffer");a.credentials&&(m.withCredentials=!0);m.open("GET",a.src,!0);m.send();return q}function y(a,b){function c(){if(0===q.state)if(p.data)try{r=p.data(b)}catch(a){return n(a)}else r=b}function d(a){c();x[m]=r;q.progress=a.lengthComputable?Math.max(q.progress,a.loaded/a.total):.75*q.progress+.25;t(m)}function e(){c();if(0===q.state){if(p.done)try{r=p.done()}catch(a){return n(a)}q.state=1}q.progress=1;q.ready=!0;x[m]=r;g();t("finish "+m)}function f(){n('error loading asset "'+m+'"')}function g(){a.stream&&
b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",e):b.addEventListener("canplay",e);b.removeEventListener("error",f)}var m=a.name,p=a.parser,q=new h(m,function(){1!==q.state&&-1!==q.state&&(q.state=-1,g(),b.src="")}),r=b;a.stream&&b.addEventListener("progress",d);if("image"===a.type)b.addEventListener("load",e);else{var u=!1,k=!1;b.addEventListener("loadedmetadata",function(){k=!0;u&&e()});b.addEventListener("canplay",function(){u=!0;k&&e()})}b.addEventListener("error",
f);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return q}function n(a){-1!==A&&1!==A&&(A=-1,D.forEach(function(a){a.cancel()}),B?"string"===typeof a?B(Error("resl: "+a)):B(a):console.error("resl error:",a))}function t(a){if(-1!==A&&1!==A){var b=0,c=0;D.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===D.length?(A=1,u(x)):v&&v(b/D.length,a)}}"object"===typeof b&&b||a("invalid or missing configuration");c(b,e,"config");var w=b.manifest;"object"===typeof w&&w||a("missing manifest");
var u=d("onDone");u||a("missing onDone() callback");var v=d("onProgress"),B=d("onError"),x={},A=0,E={text:f,binary:function(a){return f(a)},image:function(a){return y(a,document.createElement("img"))},video:function(a){return y(a,document.createElement("video"))},audio:function(a){return y(a,document.createElement("audio"))}},D=Object.keys(w).map(function(b){function d(b,c){if(b in e.parser){var f=e.parser[b];"function"!==typeof f&&a("invalid parser callback "+b+' for asset "'+b+'"');return f}return c}
var e=w[b];"string"===typeof e?e={src:e}:"object"===typeof e&&e||a('invalid asset definition "'+b+'"');c(e,p,'asset "'+b+'"');var f={};"parser"in e&&("function"===typeof e.parser?f={data:e.parser}:"object"===typeof e.parser&&e.parser?(c(f,m,'parser for asset "'+b+'"'),"onData"in f||a('missing onData callback for parser in asset "'+b+'"'),f={data:d("onData"),done:d("onDone")}):a('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,d,f){c in e&&(f=e[c]);0>d.indexOf(f)&&a("invalid "+c+
' "'+f+'" for asset "'+b+'", possible values: '+d);return f}("type",Object.keys(E),"text"),stream:!!e.stream,credentials:!!e.credentials,src:function(c,d,f){c in e?f=e[c]:d&&a("missing "+c+' for asset "'+b+'"');"string"!==typeof f&&a("invalid "+c+' for asset "'+b+'", must be a string');return f}("src",!0,""),parser:f}}).map(function(a){return E[a.type](a)});0===D.length&&setTimeout(function(){t("done")},1)}},{}],79:[function(b,d,f){function a(a,b){var d=a.length,e=["'use strict';"],f="surfaceNets"+
a.join("_")+"d"+b;e.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===b&&e.push("getters:[0],");for(var n=[],p=[],w=0;w<d;++w)n.push("d"+w),p.push("d"+w);for(w=0;w<1<<d;++w)n.push("v"+w),p.push("v"+w);for(w=0;w<1<<d;++w)n.push("p"+w),p.push("p"+w);n.push("a","b","c");p.push("a","c");e.push("vertex:function vertexFunc(",n.join(),"){");n=[];for(w=0;w<1<<d;++w)n.push("(p"+w+"<<"+w+")");e.push("var m=(",
n.join("+"),")|0;if(m===0||m===",(1<<(1<<d))-1,"){return}");var n=[],u=[];128>=1<<(1<<d)?(e.push("switch(m){"),u=e):e.push("switch(m>>>7){");for(w=0;w<1<<(1<<d);++w){128<1<<(1<<d)&&0===w%128&&(0<n.length&&u.push("}}"),u="vExtra"+n.length,e.push("case ",w>>>7,":",u,"(m&0x7f,",p.join(),");break;"),u=["function ",u,"(m,",p.join(),"){switch(m){"],n.push(u));u.push("case ",w&127,":");for(var v=Array(d),B=Array(d),x=Array(d),A=Array(d),E=0,D=0;D<d;++D)v[D]=[],B[D]=[],x[D]=0,A[D]=0;for(D=0;D<1<<d;++D)for(var C=
0;C<d;++C){var M=D^1<<C;if(!(M>D)&&!(w&1<<M)!==!(w&1<<D)){var H=1;w&1<<M?B[C].push("v"+M+"-v"+D):(B[C].push("v"+D+"-v"+M),H=-H);0>H?(v[C].push("-v"+D+"-v"+M),x[C]+=2):(v[C].push("v"+D+"+v"+M),x[C]-=2);E+=1;for(H=0;H<d;++H)H!==C&&(M&1<<H?A[H]+=1:--A[H])}}D=[];for(C=0;C<d;++C)0===v[C].length?D.push("d"+C+"-0.5"):(M="",0>x[C]?M=x[C]+"*c":0<x[C]&&(M="+"+x[C]+"*c"),D.push("d"+C+"-"+(.5+A[C]/E*.5)+"-"+v[C].length/E*.5+"*("+v[C].join("+")+M+")/("+B[C].join("+")+")"));u.push("a.push([",D.join(),"]);","break;")}e.push("}},");
0<n.length&&u.push("}}");p=[];for(w=0;w<1<<d-1;++w)p.push("v"+w);p.push("c0","c1","p0","p1","a","b","c");e.push("cell:function cellFunc(",p.join(),"){");d=h(d-1);e.push("if(p0){b.push(",d.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",d.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",f,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
f,";");for(w=0;w<n.length;++w)e.push(n[w].join(""));return(new Function("genContour",e.join("")))(c)}d.exports=function(b,c){if(0>=b.dimension)return{positions:[],cells:[]};if(1===b.dimension){for(var d=e(b,c),f=d.length,h=Array(f),n=Array(f),t=0;t<f;++t)h[t]=[d[t]],n[t]=[t];return{positions:h,cells:n}}d=b.order.join()+"-"+b.dtype;f=p[d];c=+c||0;f||(f=p[d]=a(b.order,b.dtype));return f(b,c)};var c=b("ndarray-extract-contour"),h=b("triangulate-hypercube"),e=b("zero-crossings"),p={}},{"ndarray-extract-contour":73,
"triangulate-hypercube":81,"zero-crossings":85}],80:[function(b,d,f){function a(a,b){var d=h(getComputedStyle(a).getPropertyValue(b));return d[0]*c(d[1],a)}function c(b,c){c=c||document.body;b=(b||"px").trim().toLowerCase();if(c===window||c===document)c=document.body;switch(b){case "%":return c.clientHeight/100;case "ch":case "ex":var d=b,f=c,h=document.createElement("div");h.style["font-size"]="128"+d;f.appendChild(h);d=a(h,"font-size")/128;f.removeChild(h);return d;case "em":return a(c,"font-size");
case "rem":return a(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return e;case "cm":return e/2.54;case "mm":return e/25.4;case "pt":return e/72;case "pc":return e/6}return 1}var h=b("parse-unit");d.exports=c;var e=96},{"parse-unit":75}],81:[function(b,d,f){d.exports=function(b){if(0>b)return[];
if(0===b)return[[0]];for(var d=Math.round(h(b+1))|0,f=[],g=0;g<d;++g){for(var q=a.unrank(b,g),r=[0],y=0,n=0;n<q.length;++n)y+=1<<q[n],r.push(y);1>c(q)&&(r[0]=y,r[b]=0);f.push(r)}return f};var a=b("permutation-rank"),c=b("permutation-parity"),h=b("gamma")},{gamma:42,"permutation-parity":76,"permutation-rank":77}],82:[function(b,d,f){(function(a,c){function d(a){if(a){var b=B.log2(a.length||a.byteLength);D[b].push(a)}}function e(a){a=B.nextPow2(a);var b=B.log2(a),b=D[b];return 0<b.length?b.pop():new ArrayBuffer(a)}
function p(a){return new Uint8Array(e(a),0,a)}function m(a){return new Uint16Array(e(2*a),0,a)}function g(a){return new Uint32Array(e(4*a),0,a)}function q(a){return new Int8Array(e(a),0,a)}function r(a){return new Int16Array(e(2*a),0,a)}function y(a){return new Int32Array(e(4*a),0,a)}function n(a){return new Float32Array(e(4*a),0,a)}function t(a){return new Float64Array(e(8*a),0,a)}function w(a){return A?new Uint8ClampedArray(e(a),0,a):p(a)}function u(a){return new DataView(e(a),0,a)}function v(a){a=
B.nextPow2(a);var b=B.log2(a),b=C[b];return 0<b.length?b.pop():new c(a)}var B=b("bit-twiddle"),x=b("dup");a.__TYPEDARRAY_POOL||(a.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var A="undefined"!==typeof Uint8ClampedArray,E=a.__TYPEDARRAY_POOL;E.UINT8C||(E.UINT8C=x([32,0]));E.BUFFER||(E.BUFFER=x([32,0]));var D=E.DATA,C=E.BUFFER;f.free=function(a){if(c.isBuffer(a))C[B.log2(a.length)].push(a);
else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=B.log2(a.length||a.byteLength)|0;D[b].push(a)}};f.freeUint8=f.freeUint16=f.freeUint32=f.freeInt8=f.freeInt16=f.freeInt32=f.freeFloat32=f.freeFloat=f.freeFloat64=f.freeDouble=f.freeUint8Clamped=f.freeDataView=function(a){d(a.buffer)};f.freeArrayBuffer=d;f.freeBuffer=function(a){C[B.log2(a.length)].push(a)};f.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return e(a);switch(b){case "uint8":return p(a);case "uint16":return m(a);
case "uint32":return g(a);case "int8":return q(a);case "int16":return r(a);case "int32":return y(a);case "float":case "float32":return n(a);case "double":case "float64":return t(a);case "uint8_clamped":return w(a);case "buffer":return v(a);case "data":case "dataview":return u(a);default:return null}};f.mallocArrayBuffer=e;f.mallocUint8=p;f.mallocUint16=m;f.mallocUint32=g;f.mallocInt8=q;f.mallocInt16=r;f.mallocInt32=y;f.mallocFloat32=f.mallocFloat=n;f.mallocFloat64=f.mallocDouble=t;f.mallocUint8Clamped=
w;f.mallocDataView=u;f.mallocBuffer=v;f.clearCache=function(){for(var a=0;32>a;++a)E.UINT8[a].length=0,E.UINT16[a].length=0,E.UINT32[a].length=0,E.INT8[a].length=0,E.INT16[a].length=0,E.INT32[a].length=0,E.FLOAT[a].length=0,E.DOUBLE[a].length=0,E.UINT8C[a].length=0,D[a].length=0,C[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":36,buffer:37,dup:41}],83:[function(b,d,f){d.exports=function(a,
b,d){if(0===a.length)return a;if(b){d||a.sort(b);d=1;for(var e=a.length,f=a[0],m=a[0],g=1;g<e;++g)m=f,f=a[g],b(f,m)&&(g===d?d++:a[d++]=f);a.length=d;return a}d||a.sort();b=1;d=a.length;e=a[0];f=a[0];for(m=1;m<d;++m)f=e,e=a[m],e!==f&&(m===b?b++:a[b++]=e);a.length=b;return a}},{}],84:[function(b,d,f){d.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":38}],85:[function(b,d,f){d.exports=function(b,d){var e=[];d=+d||0;a(b.hi(b.shape[0]-1),e,d);return e};var a=b("./lib/zc-core")},
{"./lib/zc-core":84}],86:[function(b,d,f){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var c=b("./lib/util/extend"),h=b("./lib/dynamic"),e=b("./lib/util/raf"),p=b("./lib/util/clock"),m=b("./lib/strings"),g=b("./lib/webgl"),q=b("./lib/extension"),r=b("./lib/limits"),y=b("./lib/buffer"),n=b("./lib/elements"),t=b("./lib/texture"),w=b("./lib/renderbuffer"),u=b("./lib/framebuffer"),v=b("./lib/attribute"),B=b("./lib/shader"),x=b("./lib/read"),A=b("./lib/core"),E=b("./lib/stats"),
D=b("./lib/timer");d.exports=function(b){function d(){if(0===R.length)L&&L.update(),ea=null;else{ea=e.next(d);V();for(var a=R.length-1;0<=a;--a){var b=R[a];b&&b(S,null,0)}k.flush();L&&L.update()}}function f(){!ea&&0<R.length&&(ea=e.next(d))}function N(){ea&&(e.cancel(d),ea=null)}function U(a){a.preventDefault();N();T.forEach(function(a){a()})}function G(a){k.getError();z.restore();ha.restore();ga.restore();Y.restore();oa.restore();ma.restore();L&&L.restore();Q.procs.refresh();f();W.forEach(function(a){a()})}
function F(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=a[b];h.isDynamic(e)?d[b]=h.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function d(a){for(;p.length<a;)p.push(null);return p}var e=b(a.context||{}),f=b(a.uniforms||{}),g=b(a.attributes||{}),k=b(function(a){function b(a){if(a in d){var c=d[a];delete d[a];Object.keys(c).forEach(function(b){d[a+"."+b]=c[b]})}}var d=c({},a);delete d.uniforms;delete d.attributes;delete d.context;"stencil"in d&&d.stencil.op&&(d.stencil.opBack=
d.stencil.opFront=d.stencil.op,delete d.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return d}(a));a={gpuTime:0,cpuTime:0,count:0};var e=Q.compile(k,g,f,e,a),l=e.draw,m=e.batch,n=e.scope,p=[];return c(function(a,b){var c;if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)n.call(this,null,b,c);else if(Array.isArray(a))for(c=0;c<a.length;++c)n.call(this,a[c],b,c);else return n.call(this,
a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:a})}function I(b){R.push(b);f();return{cancel:function(){function c(){var b=a(R,c);R[b]=R[R.length-1];--R.length;0>=R.length&&N()}var d=a(R,b);R[d]=c}}}function K(){var a=aa.viewport,b=aa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=a[2]=b[2]=k.drawingBufferWidth;S.viewportHeight=
S.framebufferHeight=S.drawingBufferHeight=a[3]=b[3]=k.drawingBufferHeight}function V(){S.tick+=1;S.time=X();K();Q.procs.poll()}function ba(){K();Q.procs.refresh();L&&L.update()}function X(){return(p()-ta)/1E3}b=g(b);if(!b)return null;var k=b.gl,l=k.getContextAttributes();k.isContextLost();var z=q(k,b);if(!z)return null;var J=m(),P=E(),O=z.extensions,L=D(k,O),ta=p(),la=k.drawingBufferWidth,ua=k.drawingBufferHeight,S={tick:0,time:0,viewportWidth:la,viewportHeight:ua,framebufferWidth:la,framebufferHeight:ua,
drawingBufferWidth:la,drawingBufferHeight:ua,pixelRatio:b.pixelRatio},fa=r(k,O),ga=y(k,P,b),na=n(k,O,ga,P),la=v(k,O,fa,ga,J),ha=B(k,J,P,b),Y=t(k,O,fa,function(){Q.procs.poll()},S,P,b),oa=w(k,O,fa,P,b),ma=u(k,O,fa,Y,oa,P),Q=A(k,J,O,fa,ga,na,Y,ma,{},la,ha,{elements:null,primitive:4,count:-1,offset:0,instances:-1},S,L,b),J=x(k,ma,Q.procs.poll,S,l,O),aa=Q.next,da=k.canvas,R=[],T=[],W=[],Z=[b.onDestroy],ea=null;da&&(da.addEventListener("webglcontextlost",U,!1),da.addEventListener("webglcontextrestored",
G,!1));ba();l=c(F,{clear:function(a){var b=0;Q.procs.poll();var c=a.color;c&&(k.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(k.clearDepth(+a.depth),b|=256);"stencil"in a&&(k.clearStencil(a.stencil|0),b|=1024);k.clear(b)},prop:h.define.bind(null,1),context:h.define.bind(null,2),"this":h.define.bind(null,3),draw:F({}),buffer:function(a){return ga.create(a,34962,!1,!1)},elements:function(a){return na.create(a,!1)},texture:Y.create2D,cube:Y.createCube,renderbuffer:oa.create,
framebuffer:ma.create,framebufferCube:ma.createCube,attributes:l,frame:I,on:function(a,b){var c;switch(a){case "frame":return I(b);case "lost":c=T;break;case "restore":c=W;break;case "destroy":c=Z}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:fa,hasExtension:function(a){return 0<=fa.extensions.indexOf(a.toLowerCase())},read:J,destroy:function(){R.length=0;N();da&&(da.removeEventListener("webglcontextlost",U),da.removeEventListener("webglcontextrestored",
G));ha.clear();ma.clear();oa.clear();Y.clear();na.clear();ga.clear();L&&L.clear();Z.forEach(function(a){a()})},_gl:k,_refresh:ba,poll:function(){V();L&&L.update()},now:X,stats:P});b.onDone(null,l);return l}},{"./lib/attribute":3,"./lib/buffer":4,"./lib/core":9,"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/stats":18,"./lib/strings":19,"./lib/texture":20,"./lib/timer":21,"./lib/util/clock":22,
"./lib/util/extend":24,"./lib/util/raf":30,"./lib/webgl":33}]},{},[1]);

        </script>
        </body>
      </html>