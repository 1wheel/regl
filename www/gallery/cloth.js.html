<!DOCTYPE html>
      <html>
        <head>
          <title>example/cloth.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function e$$0(h,q,d){function b(c,f){if(!q[c]){if(!h[c]){var n="function"==typeof require&&require;if(!f&&n)return n(c,!0);if(a)return a(c,!0);n=Error("Cannot find module '"+c+"'");throw n.code="MODULE_NOT_FOUND",n;}n=q[c]={exports:{}};h[c][0].call(n.exports,function(a){var f=h[c][1][a];return b(f?f:a)},n,n.exports,e$$0,h,q,d)}return q[c].exports}for(var a="function"==typeof require&&require,c=0;c<d.length;c++)b(d[c]);return b})({1:[function(e,h,q){function d(a,c){this.i0=a;this.i1=c;this.restLength=
g.distance(k[a],k[c])}h=document.body.appendChild(document.createElement("canvas"));q=e("canvas-fit");var b=e("../regl")(h),a=e("gl-mat4"),c=e("canvas-orbit-camera")(h);window.addEventListener("resize",q(h),!1);var g=e("gl-vec3");c.view(a.lookAt([],[0,3,30],[0,0,-5.5],[0,1,0]));c.rotate([0,0],[.471,0]);var f=[],n=[],k=[],l=[],p=[],m=[];for(h=0;20>=h;++h){var u=h/20*11+-5.5,r=h/20;for(q=0;20>=q;++q){var t=q/20*11+-5.5,H=q/20;k.push([t,0,u]);l.push([t,0,u]);f.push([H,r])}}for(var v=b.buffer({length:12*
k.length,type:"float",usage:"dynamic"}),x,w,y,u=0;u<k.length;++u)p.push([0,0,0]);var A=b.buffer({length:12*p.length,type:"float",usage:"dynamic"});for(h=0;19>=h;++h)for(q=0;19>=q;++q)u=21*h+q,x=u+0,w=u+1,y=u+21+0,u=u+21+1,n.push([u,w,x]),n.push([x,y,u]);for(h=0;20>=h;++h)for(q=0;20>=q;++q)u=21*h+q,x=u+0,w=u+1,y=u+21+0,u=u+21+1,20>q&&m.push(new d(x,w)),20>h&&m.push(new d(x,y)),20>q&&20>h&&m.push(new d(x,u));var z=b({cull:{enable:!1},context:{view:function(){return c.view()}},frag:"\n  precision mediump float;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform sampler2D texture;\n\n  void main () {\n    vec3 tex = texture2D(texture, vUv*1.0).xyz;\n    vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));\n\n    vec3 n = vNormal;\n\n    // for the back faces we need to use the opposite normals.\n    if(gl_FrontFacing == false) {\n      n = -n;\n    }\n\n    vec3 ambient = 0.3 * tex;\n    vec3 diffuse = 0.7 * tex * clamp( dot(n, lightDir ), 0.0, 1.0 );\n\n    gl_FragColor = vec4(ambient + diffuse, 1.0);\n  }",
vert:"\n  precision mediump float;\n\n  attribute vec3 position;\n  attribute vec3 normal;\n  attribute vec2 uv;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform mat4 projection, view;\n\n  void main() {\n    vUv = uv;\n    vNormal = normal;\n    gl_Position = projection * view * vec4(position, 1);\n  }",uniforms:{view:b.context("view"),projection:function(c){return a.perspective([],Math.PI/4,c.viewportWidth/c.viewportHeight,.01,1E3)},texture:b.prop("clothTexture")},attributes:{position:{buffer:v,
normalized:!0},uv:b.prop("uv"),normal:{buffer:A,normalized:!0}},elements:b.prop("elements")});e("resl")({manifest:{clothTexture:{type:"image",src:"assets/cloth.png",parser:function(a){return b.texture({mag:"nearest",mipmap:!0,min:"linear mipmap linear",data:a,wrap:"repeat"})}}},onDone:function(a){var d=a.clothTexture;b.frame(function(a){a=a.tick;b.clear({color:[0,0,0,255],depth:1});var u=[],e=[],r=[0,-4,0],t=[Math.sin(a/2),Math.cos(a/3),Math.sin(a/1)];g.normalize(t,t);g.scale(t,t,20.6);for(a=0;a<
k.length;++a)g.subtract(u,k[a],l[a]),u=[u[0],u[1],u[2]],e=[k[a][0],k[a][1],k[a][2]],g.add(e,e,u),g.scaleAndAdd(e,e,r,.017*.017),g.scaleAndAdd(e,e,t,.017*.017),l[a]=[k[a][0],k[a][1],k[a][2]],k[a]=[e[0],e[1],e[2]];r=[];for(a=0;15>a;++a)for(t=0;t<m.length;t++){var h=m[t],u=k[h.i0],e=k[h.i1];g.subtract(r,e,u);var B=g.length(r),h=(B-h.restLength)/B;g.scaleAndAdd(u,u,r,.5*h);g.scaleAndAdd(e,e,r,-.5*h)}for(a=0;20>=a;++a)k[a]=[l[a][0],l[a][1],l[a][2]];for(a=0;a<p.length;a++)p[a]=[0,0,0];for(a=0;a<n.length;a++)x=
n[a][0],w=n[a][1],y=n[a][2],r=k[x],e=k[w],t=k[y],u=[0,0,0],g.subtract(u,r,e),e=[0,0,0],g.subtract(e,r,t),r=[0,0,0],g.cross(r,u,e),g.normalize(r,r),g.add(p[x],p[x],r),g.add(p[w],p[w],r),g.add(p[y],p[y],r);for(a=0;a<p.length;a++)g.normalize(p[a],p[a]);v.subdata(k);A.subdata(p);z({elements:n,uv:f,clothTexture:d});c.tick()})}})},{"../regl":114,"canvas-fit":34,"canvas-orbit-camera":35,"gl-mat4":49,"gl-vec3":85,resl:110}],2:[function(e,h,q){function d(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=
null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}h.exports=function(b,a,c,g,f){b=c.maxAttributes;a=Array(b);for(c=0;c<b;++c)a[c]=new d;return{Record:d,scope:{},state:a}}},{}],3:[function(e,h,q){function d(a){return p[Object.prototype.toString.call(a)]|0}function b(a,c){for(var b=0;b<c.length;++b)a[b]=c[b]}function a(a,c,b,g,f,n,d){for(var k=0,l=0;l<b;++l)for(var p=0;p<g;++p)a[k++]=c[f*l+n*p+d]}var c=e("./util/is-typed-array"),g=e("./util/is-ndarray"),f=e("./util/values"),
n=e("./util/pool");q=e("./util/flatten");var k=q.flatten,l=q.shape,p=e("./constants/arraytypes.json"),m=e("./constants/dtypes.json"),u=e("./constants/usage.json"),r=[];r[5120]=1;r[5122]=2;r[5124]=4;r[5121]=1;r[5123]=2;r[5125]=4;r[5126]=4;h.exports=function(p,e,h){function x(a){this.id=z++;this.buffer=p.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;h.profile&&(this.stats={size:0})}function w(a,c,b){a.byteLength=c.byteLength;
p.bufferData(a.type,c,b)}function y(f,p,m,u,e,r){f.usage=m;if(Array.isArray(p)){if(f.dtype=u||5126,0<p.length)if(Array.isArray(p[0])){e=l(p);for(var t=u=1;t<e.length;++t)u*=e[t];f.dimension=u;p=k(p,e,f.dtype);w(f,p,m);r?f.persistentData=p:n.freeType(p)}else"number"===typeof p[0]?(f.dimension=e,e=n.allocType(f.dtype,p.length),b(e,p),w(f,e,m),r?f.persistentData=e:n.freeType(e)):c(p[0])&&(f.dimension=p[0].length,f.dtype=u||d(p[0])||5126,p=k(p,[p.length,p[0].length],f.dtype),w(f,p,m),r?f.persistentData=
p:n.freeType(p))}else if(c(p))f.dtype=u||d(p),f.dimension=e,w(f,p,m),r&&(f.persistentData=new Uint8Array(new Uint8Array(p.buffer)));else if(g(p)){e=p.shape;var h=p.stride,t=p.offset,B=0,v=0,x=0,z=0;1===e.length?(B=e[0],v=1,x=h[0],z=0):2===e.length&&(B=e[0],v=e[1],x=h[0],z=h[1]);f.dtype=u||d(p.data)||5126;f.dimension=v;e=n.allocType(f.dtype,B*v);a(e,p.data,B,v,x,z,t);w(f,e,m);r?f.persistentData=e:n.freeType(e)}}function A(a){e.bufferCount--;p.deleteBuffer(a.buffer);a.buffer=null;delete B[a.id]}var z=
0,B={};x.prototype.bind=function(){p.bindBuffer(this.type,this.buffer)};x.prototype.destroy=function(){A(this)};var q=[];h.profile&&(e.getTotalBufferSize=function(){var a=0;Object.keys(B).forEach(function(c){a+=B[c].stats.size});return a});return{create:function(f,z,w,q){function D(a){var b=35044,f=null,n=0,d=0,k=1;Array.isArray(a)||c(a)||g(a)?f=a:"number"===typeof a?n=a|0:a&&("data"in a&&(f=a.data),"usage"in a&&(b=u[a.usage]),"type"in a&&(d=m[a.type]),"dimension"in a&&(k=a.dimension|0),"length"in
a&&(n=a.length|0));C.bind();f?y(C,f,b,d,k,q):(p.bufferData(C.type,n,b),C.dtype=d||5121,C.usage=b,C.dimension=k,C.byteLength=n);h.profile&&(C.stats.size=C.byteLength*r[C.dtype]);return D}e.bufferCount++;var C=new x(z);B[C.id]=C;w||D(f);D._reglType="buffer";D._buffer=C;D.subdata=function(f,m){var u=(m||0)|0,e;C.bind();if(Array.isArray(f)){if(0<f.length)if("number"===typeof f[0]){var r=n.allocType(C.dtype,f.length);b(r,f);p.bufferSubData(C.type,u,r);n.freeType(r)}else if(Array.isArray(f[0])||c(f[0]))e=
l(f),r=k(f,e,C.dtype),p.bufferSubData(C.type,u,r),n.freeType(r)}else if(c(f))p.bufferSubData(C.type,u,f);else if(g(f)){e=f.shape;var h=f.stride,B=r=0,v=0,x=0;1===e.length?(r=e[0],B=1,v=h[0],x=0):2===e.length&&(r=e[0],B=e[1],v=h[0],x=h[1]);e=Array.isArray(f.data)?C.dtype:d(f.data);e=n.allocType(e,r*B);a(e,f.data,r,B,v,x,f.offset);p.bufferSubData(C.type,u,e);n.freeType(e)}return D};h.profile&&(D.stats=C.stats);D.destroy=function(){A(C)};return D},createStream:function(a,c){var b=q.pop();b||(b=new x(a));
b.bind();y(b,c,35040,0,1,!1);return b},destroyStream:function(a){q.push(a)},clear:function(){f(B).forEach(A);q.forEach(A)},getBuffer:function(a){return a&&a._buffer instanceof x?a._buffer:null},restore:function(){f(B).forEach(function(a){a.buffer=p.createBuffer();p.bindBuffer(a.type,a.buffer);p.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:y}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/flatten":24,"./util/is-ndarray":26,
"./util/is-typed-array":27,"./util/pool":29,"./util/values":32}],4:[function(e,h,q){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(e,h,q){h.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},
{}],6:[function(e,h,q){h.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(e,h,q){h.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(e,h,q){function d(a){return Array.isArray(a)||l(a)||p(a)}function b(a){return a.sort(function(a,c){return"viewport"===a?-1:"viewport"===c?1:a<c?-1:1})}function a(a,c,b,g){this.thisDep=a;this.contextDep=c;this.propDep=b;this.append=g}function c(a){return a&&
!(a.thisDep||a.contextDep||a.propDep)}function g(c){return new a(!1,!1,!1,c)}function f(c,b){var g=c.type;return 0===g?(g=c.data.length,new a(!0,1<=g,2<=g,b)):4===g?(g=c.data,new a(g.thisDep,g.contextDep,g.propDep,b)):new a(3===g,2===g,1===g,b)}var n=e("./util/codegen"),k=e("./util/loop"),l=e("./util/is-typed-array"),p=e("./util/is-ndarray"),m=e("./util/is-array-like"),u=e("./dynamic"),r=e("./constants/primitives.json"),t=e("./constants/dtypes.json"),H=["x","y","z","w"],v="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),
x={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},w={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},
y={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},A={cw:2304,ccw:2305},z=new a(!1,!1,!1,function(){});h.exports=function(l,p,e,h,q,F,J,C,N,I,U,G,Z,fa,V){function W(a){return a.replace(".","_")}function Q(a,c,b){var g=W(a);Da.push(a);ya[g]=O[g]=!!b;qa[g]=c}function L(a,c,b){var g=W(a);Da.push(a);Array.isArray(b)?(O[g]=b.slice(),ya[g]=b.slice()):O[g]=ya[g]=b;ra[g]=c}function aa(){var a=n(),c=a.link,b=a.global;a.id=Ia++;a.batchId=
"0";var g=c(Ha),f=a.shared={props:"a0"};Object.keys(Ha).forEach(function(a){f[a]=b.def(g,".",a)});var d=a.next={},k=a.current={};Object.keys(ra).forEach(function(a){Array.isArray(O[a])&&(d[a]=b.def(f.next,".",a),k[a]=b.def(f.current,".",a))});var l=a.constants={};Object.keys(Ea).forEach(function(a){l[a]=b.def(JSON.stringify(Ea[a]))});a.invoke=function(b,g){switch(g.type){case 0:var d=["this",f.context,f.props,a.batchId];return b.def(c(g.data),".call(",d.slice(0,Math.max(g.data.length+1,4)),")");case 1:return b.def(f.props,
g.data);case 2:return b.def(f.context,g.data);case 3:return b.def("this",g.data);case 4:return g.data.append(a,b),g.data.ref}};a.attribCache={};var m={};a.scopeAttrib=function(a){a=p.id(a);if(a in m)return m[a];var b=I.scope[a];b||(b=I.scope[a]=new ta);return m[a]=c(b)};return a}function ka(a){var c=a["static"];a=a.dynamic;var b;if("profile"in c){var d=!!c.profile;b=g(function(a,c){return d});b.enable=d}else if("profile"in a){var n=a.profile;b=f(n,function(a,c){return a.invoke(c,n)})}return b}function sa(a,
c){var b=a["static"],d=a.dynamic;if("framebuffer"in b){var n=b.framebuffer;return n?(n=C.getFramebuffer(n),g(function(a,c){var b=a.link(n),g=a.shared;c.set(g.framebuffer,".next",b);g=g.context;c.set(g,".framebufferWidth",b+".width");c.set(g,".framebufferHeight",b+".height");return b})):g(function(a,c){var b=a.shared;c.set(b.framebuffer,".next","null");b=b.context;c.set(b,".framebufferWidth",b+".drawingBufferWidth");c.set(b,".framebufferHeight",b+".drawingBufferHeight");return"null"})}if("framebuffer"in
d){var k=d.framebuffer;return f(k,function(a,c){var b=a.invoke(c,k),g=a.shared,f=g.framebuffer,b=c.def(f,".getFramebuffer(",b,")");c.set(f,".next",b);g=g.context;c.set(g,".framebufferWidth",b+"?"+b+".width:"+g+".drawingBufferWidth");c.set(g,".framebufferHeight",b+"?"+b+".height:"+g+".drawingBufferHeight");return b})}return null}function S(c,b,g){function d(c){if(c in n){var g=n[c];c=!0;var l=g.x|0,p=g.y|0,m,e;"width"in g?m=g.width|0:c=!1;"height"in g?e=g.height|0:c=!1;return new a(!c&&b&&b.thisDep,
!c&&b&&b.contextDep,!c&&b&&b.propDep,function(a,c){var b=a.shared.context,f=m;"width"in g||(f=c.def(b,".","framebufferWidth","-",l));var d=e;"height"in g||(d=c.def(b,".","framebufferHeight","-",p));return[l,p,f,d]})}if(c in k){var u=k[c];c=f(u,function(a,c){var b=a.invoke(c,u),g=a.shared.context,f=c.def(b,".x|0"),d=c.def(b,".y|0"),n=c.def('"width" in ',b,"?",b,".width|0:","(",g,".","framebufferWidth","-",f,")"),b=c.def('"height" in ',b,"?",b,".height|0:","(",g,".","framebufferHeight","-",d,")");return[f,
d,n,b]});b&&(c.thisDep=c.thisDep||b.thisDep,c.contextDep=c.contextDep||b.contextDep,c.propDep=c.propDep||b.propDep);return c}return b?new a(b.thisDep,b.contextDep,b.propDep,function(a,c){var b=a.shared.context;return[0,0,c.def(b,".","framebufferWidth"),c.def(b,".","framebufferHeight")]}):null}var n=c["static"],k=c.dynamic;if(c=d("viewport")){var l=c;c=new a(c.thisDep,c.contextDep,c.propDep,function(a,c){var b=l.append(a,c),g=a.shared.context;c.set(g,".viewportWidth",b[2]);c.set(g,".viewportHeight",
b[3]);return b})}return{viewport:c,scissor_box:d("scissor.box")}}function ga(b){function d(a){if(a in n){var c=p.id(n[a]);a=g(function(){return c});a.id=c;return a}if(a in k){var b=k[a];return f(b,function(a,c){var g=a.invoke(c,b);return c.def(a.shared.strings,".id(",g,")")})}return null}var n=b["static"],k=b.dynamic,l=d("frag"),m=d("vert"),e=null;c(l)&&c(m)?(e=U.program(m.id,l.id),b=g(function(a,c){return a.link(e)})):b=new a(l&&l.thisDep||m&&m.thisDep,l&&l.contextDep||m&&m.contextDep,l&&l.propDep||
m&&m.propDep,function(a,c){var b=a.shared.shader,g;g=l?l.append(a,c):c.def(b,".","frag");var f;f=m?m.append(a,c):c.def(b,".","vert");return c.def(b+".program("+f+","+g+")")});return{frag:l,vert:m,progVar:b,program:e}}function ia(b,n){function k(a,c){if(a in l){var b=l[a]|0;return g(function(a,g){c&&(a.OFFSET=b);return b})}if(a in p){var d=p[a];return f(d,function(a,b){var g=a.invoke(b,d);c&&(a.OFFSET=g);return g})}return c&&m?g(function(a,c){a.OFFSET="0";return 0}):null}var l=b["static"],p=b.dynamic,
m=function(){if("elements"in l){var a=l.elements;d(a)?a=F.getElements(F.create(a,!0)):a&&(a=F.getElements(a));var c=g(function(c,b){if(a){var g=c.link(a);return c.ELEMENTS=g}return c.ELEMENTS=null});c.value=a;return c}if("elements"in p){var b=p.elements;return f(b,function(a,c){var g=a.shared,f=g.isBufferArgs,g=g.elements,d=a.invoke(c,b),n=c.def("null"),f=c.def(f,"(",d,")"),d=a.cond(f).then(n,"=",g,".createStream(",d,");")["else"](n,"=",g,".getElements(",d,");");c.entry(d);c.exit(a.cond(f).then(g,
".destroyStream(",n,");"));return a.ELEMENTS=n})}return null}(),e=k("offset",!0);return{elements:m,primitive:function(){if("primitive"in l){var b=l.primitive;return g(function(a,c){return r[b]})}if("primitive"in p){var d=p.primitive;return f(d,function(a,c){var b=a.constants.primTypes,g=a.invoke(c,d);return c.def(b,"[",g,"]")})}return m?c(m)?m.value?g(function(a,c){return c.def(a.ELEMENTS,".primType")}):g(function(){return 4}):new a(m.thisDep,m.contextDep,m.propDep,function(a,c){var b=a.ELEMENTS;
return c.def(b,"?",b,".primType:",4)}):null}(),count:function(){if("count"in l){var b=l.count|0;return g(function(){return b})}if("count"in p){var d=p.count;return f(d,function(a,c){return a.invoke(c,d)})}return m?c(m)?m?e?new a(e.thisDep,e.contextDep,e.propDep,function(a,c){return c.def(a.ELEMENTS,".vertCount-",a.OFFSET)}):g(function(a,c){return c.def(a.ELEMENTS,".vertCount")}):g(function(){return-1}):new a(m.thisDep||e.thisDep,m.contextDep||e.contextDep,m.propDep||e.propDep,function(a,c){var b=
a.ELEMENTS;return a.OFFSET?c.def(b,"?",b,".vertCount-",a.OFFSET,":-1"):c.def(b,"?",b,".vertCount:-1")}):null}(),instances:k("instances",!1),offset:e}}function na(a,c){var b=a["static"],d=a.dynamic,n={};Da.forEach(function(a){function c(k,p){if(a in b){var m=k(b[a]);n[l]=g(function(){return m})}else if(a in d){var e=d[a];n[l]=f(e,function(a,c){return p(a,c,a.invoke(c,e))})}}var l=W(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return c(function(a){return a},
function(a,c,b){return b});case "depth.func":return c(function(a){return w[a]},function(a,c,b){return c.def(a.constants.compareFuncs,"[",b,"]")});case "depth.range":return c(function(a){return a},function(a,c,b){a=c.def("+",b,"[0]");c=c.def("+",b,"[1]");return[a,c]});case "blend.func":return c(function(a){return[x["srcRGB"in a?a.srcRGB:a.src],x["dstRGB"in a?a.dstRGB:a.dst],x["srcAlpha"in a?a.srcAlpha:a.src],x["dstAlpha"in a?a.dstAlpha:a.dst]]},function(a,c,b){function g(a,f){return c.def('"',a,f,
'" in ',b,"?",b,".",a,f,":",b,".",a)}a=a.constants.blendFuncs;var f=g("src","RGB"),d=g("dst","RGB"),f=c.def(a,"[",f,"]"),n=c.def(a,"[",g("src","Alpha"),"]"),d=c.def(a,"[",d,"]");a=c.def(a,"[",g("dst","Alpha"),"]");return[f,d,n,a]});case "blend.equation":return c(function(a){if("string"===typeof a)return[ba[a],ba[a]];if("object"===typeof a)return[ba[a.rgb],ba[a.alpha]]},function(a,c,b){var g=a.constants.blendEquations,f=c.def(),d=c.def();a=a.cond("typeof ",b,'==="string"');a.then(f,"=",d,"=",g,"[",
b,"];");a["else"](f,"=",g,"[",b,".rgb];",d,"=",g,"[",b,".alpha];");c(a);return[f,d]});case "blend.color":return c(function(a){return k(4,function(c){return+a[c]})},function(a,c,b){return k(4,function(a){return c.def("+",b,"[",a,"]")})});case "stencil.mask":return c(function(a){return a|0},function(a,c,b){return c.def(b,"|0")});case "stencil.func":return c(function(a){return[w[a.cmp||"keep"],a.ref||0,"mask"in a?a.mask:-1]},function(a,c,b){a=c.def('"cmp" in ',b,"?",a.constants.compareFuncs,"[",b,".cmp]",
":",7680);var g=c.def(b,".ref|0");c=c.def('"mask" in ',b,"?",b,".mask|0:-1");return[a,g,c]});case "stencil.opFront":case "stencil.opBack":return c(function(c){return["stencil.opBack"===a?1029:1028,y[c.fail||"keep"],y[c.zfail||"keep"],y[c.zpass||"keep"]]},function(c,b,g){function f(a){return b.def('"',a,'" in ',g,"?",d,"[",g,".",a,"]:",7680)}var d=c.constants.stencilOps;return["stencil.opBack"===a?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return c(function(a){return[a.factor|
0,a.units|0]},function(a,c,b){a=c.def(b,".factor|0");c=c.def(b,".units|0");return[a,c]});case "cull.face":return c(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);return c},function(a,c,b){return c.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return c(function(a){return a},function(a,c,b){return b});case "frontFace":return c(function(a){return A[a]},function(a,c,b){return c.def(b+'==="cw"?2304:2305')});case "colorMask":return c(function(a){return a.map(function(a){return!!a})},
function(a,c,b){return k(4,function(a){return"!!"+b+"["+a+"]"})});case "sample.coverage":return c(function(a){return["value"in a?a.value:1,!!a.invert]},function(a,c,b){a=c.def('"value" in ',b,"?+",b,".value:1");c=c.def("!!",b,".invert");return[a,c]})}});return n}function oa(a,c){var b=a["static"],d=a.dynamic,n={};Object.keys(b).forEach(function(a){var c=b[a],f;if("number"===typeof c||"boolean"===typeof c)f=g(function(){return c});else if("function"===typeof c){var d=c._reglType;if("texture2d"===d||
"textureCube"===d)f=g(function(a){return a.link(c)});else if("framebuffer"===d||"framebufferCube"===d)f=g(function(a){return a.link(c.color[0])})}else m(c)&&(f=g(function(a){return a.global.def("[",k(c.length,function(a){return c[a]}),"]")}));f.value=c;n[a]=f});Object.keys(d).forEach(function(a){var c=d[a];n[a]=f(c,function(a,b){return a.invoke(b,c)})});return n}function ca(a,c){var b=a["static"],n=a.dynamic,k={};Object.keys(b).forEach(function(a){var c=b[a],f=p.id(a),n=new ta;if(d(c))n.state=1,n.buffer=
q.getBuffer(q.create(c,34962,!1,!0)),n.type=0;else{var l=q.getBuffer(c);if(l)n.state=1,n.buffer=l,n.type=0;else if(c.constant){var m=c.constant;n.buffer="null";n.state=2;"number"===typeof m?n.x=m:H.forEach(function(a,c){c<m.length&&(n[a]=m[c])})}else{var l=d(c.buffer)?q.getBuffer(q.create(c.buffer,34962,!1,!0)):q.getBuffer(c.buffer),e=c.offset|0,u=c.stride|0,r=c.size|0,h=!!c.normalized,O=0;"type"in c&&(O=t[c.type]);c=c.divisor|0;n.buffer=l;n.state=1;n.size=r;n.normalized=h;n.type=O||l.dtype;n.offset=
e;n.stride=u;n.divisor=c}}k[a]=g(function(a,c){var b=a.attribCache;if(f in b)return b[f];var g={isStream:!1};Object.keys(n).forEach(function(a){g[a]=n[a]});n.buffer&&(g.buffer=a.link(n.buffer),g.type=g.type||g.buffer+".dtype");return b[f]=g})});Object.keys(n).forEach(function(a){var c=n[a];k[a]=f(c,function(a,b){function g(a){b(l[a],"=",f,".",a,"|0;")}var f=a.invoke(b,c),n=a.shared,d=n.isBufferArgs,k=n.buffer,l={isStream:b.def(!1)},p=new ta;p.state=1;Object.keys(p).forEach(function(a){l[a]=b.def(""+
p[a])});var m=l.buffer,e=l.type;b("if(",d,"(",f,")){",l.isStream,"=true;",m,"=",k,".createStream(",34962,",",f,");",e,"=",m,".dtype;","}else{",m,"=",k,".getBuffer(",f,");","if(",m,"){",e,"=",m,".dtype;",'}else if("constant" in ',f,"){",l.state,"=",2,";","if(typeof "+f+'.constant === "number"){',l[H[0]],"=",f,".constant;",H.slice(1).map(function(a){return l[a]}).join("="),"=0;","}else{",H.map(function(a,c){return l[a]+"="+f+".constant.length>="+c+"?"+f+".constant["+c+"]:0;"}).join(""),"}}else{","if(",
d,"(",f,".buffer)){",m,"=",k,".createStream(",34962,",",f,".buffer);","}else{",m,"=",k,".getBuffer(",f,".buffer);","}",e,'="type" in ',f,"?",n.glTypes,"[",f,".type]:",m,".dtype;",l.normalized,"=!!",f,".normalized;");g("size");g("offset");g("stride");g("divisor");b("}}");b.exit("if(",l.isStream,"){",k,".destroyStream(",m,");","}");return l})});return k}function ha(a){var c=a["static"],b=a.dynamic,n={};Object.keys(c).forEach(function(a){var b=c[a];n[a]=g(function(a,c){return"number"===typeof b||"boolean"===
typeof b?""+b:a.link(b)})});Object.keys(b).forEach(function(a){var c=b[a];n[a]=f(c,function(a,b){return a.invoke(b,c)})});return n}function ja(a,c,b,g,f){var n=sa(a,f),d=S(a,n,f),k=ia(a,f),l=na(a,f),p=ga(a,f),m=d.viewport;m&&(l.viewport=m);m=W("scissor.box");(d=d[m])&&(l[m]=d);d=0<Object.keys(l).length;n={framebuffer:n,draw:k,shader:p,state:l,dirty:d};n.profile=ka(a,f);n.uniforms=oa(b,f);n.attributes=ca(c,f);n.context=ha(g,f);return n}function da(a,c,b){var g=a.shared.context,f=a.scope();Object.keys(b).forEach(function(n){c.save(g,
"."+n);f(g,".",n,"=",b[n].append(a,c),";")});c(f)}function X(a,c,b,g){var f=a.shared,n=f.gl,d=f.framebuffer,k;la&&(k=c.def(f.extensions,".webgl_draw_buffers"));var l=a.constants,f=l.drawBuffer,l=l.backBuffer;a=b?b.append(a,c):c.def(d,".next");g||c("if(",a,"!==",d,".cur){");c("if(",a,"){",n,".bindFramebuffer(",36160,",",a,".framebuffer);");la&&c(k,".drawBuffersWEBGL(",f,"[",a,".colorAttachments.length]);");c("}else{",n,".bindFramebuffer(",36160,",null);");la&&c(k,".drawBuffersWEBGL(",l,");");c("}",
d,".cur=",a,";");g||c("}")}function ea(a,c,b){var g=a.shared,f=g.gl,n=a.current,d=a.next,l=g.current,p=g.next,m=a.cond(l,".dirty");Da.forEach(function(c){c=W(c);if(!(c in b.state)){var g,e;if(c in d){g=d[c];e=n[c];var u=k(O[c].length,function(a){return m.def(g,"[",a,"]")});m(a.cond(u.map(function(a,c){return a+"!=="+e+"["+c+"]"}).join("||")).then(f,".",ra[c],"(",u,");",u.map(function(a,c){return e+"["+c+"]="+a}).join(";"),";"))}else g=m.def(p,".",c),u=a.cond(g,"!==",l,".",c),m(u),c in qa?u(a.cond(g).then(f,
".enable(",qa[c],");")["else"](f,".disable(",qa[c],");"),l,".",c,"=",g,";"):u(f,".",ra[c],"(",g,");",l,".",c,"=",g,";")}});0===Object.keys(b.state).length&&m(l,".dirty=false;");c(m)}function P(a,g,f,n){var d=a.shared,k=a.current,l=d.current,p=d.gl;b(Object.keys(f)).forEach(function(b){var d=f[b];if(!n||n(d)){var e=d.append(a,g);if(qa[b]){var u=qa[b];c(d)?e?g(p,".enable(",u,");"):g(p,".disable(",u,");"):g(a.cond(e).then(p,".enable(",u,");")["else"](p,".disable(",u,");"));g(l,".",b,"=",e,";")}else if(m(e)){var r=
k[b];g(p,".",ra[b],"(",e,");",e.map(function(a,c){return r+"["+c+"]="+a}).join(";"),";")}else g(p,".",ra[b],"(",e,");",l,".",b,"=",e,";")}})}function ma(a,c){pa&&(a.instancing=c.def(a.shared.extensions,".angle_instanced_arrays"))}function T(a,b,g,f,n){function d(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function k(a){t=b.def();a(t,"=",d(),";");"string"===typeof n?a(e,".count+=",n,";"):a(e,".count++;");fa&&(f?(h=b.def(),a(h,"=",r,".getNumPendingQueries();")):a(r,".beginQuery(",
e,");"))}function l(a){a(e,".cpuTime+=",d(),"-",t,";");fa&&(f?a(r,".pushScopeStats(",h,",",r,".getNumPendingQueries(),",e,");"):a(r,".endQuery();"))}function p(a){var c=b.def(u,".profile");b(u,".profile=",a,";");b.exit(u,".profile=",c,";")}var m=a.shared,e=a.stats,u=m.current,r=m.timer;g=g.profile;var t,h;if(g){if(c(g)){g.enable?(k(b),l(b.exit),p("true")):p("false");return}g=g.append(a,b);p(g)}else g=b.def(u,".profile");m=a.block();k(m);b("if(",g,"){",m,"}");a=a.block();l(a);b.exit("if(",g,"){",a,
"}")}function Y(a,c,b,g,f){function n(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function d(b,g,f){function n(){c("if(!",e,".buffer){",p,".enableVertexAttribArray(",m,");}");var b=f.type,d;d=f.size?c.def(f.size,"||",g):g;c("if(",e,".type!==",b,"||",e,".size!==",d,"||",t.map(function(a){return e+"."+a+"!=="+f[a]}).join("||"),"){",p,".bindBuffer(",34962,",",u,".buffer);",p,".vertexAttribPointer(",
[m,d,b,f.normalized,f.stride,f.offset],");",e,".type=",b,";",e,".size=",d,";",t.map(function(a){return e+"."+a+"="+f[a]+";"}).join(""),"}");pa&&(b=f.divisor,c("if(",e,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,b],");",e,".divisor=",b,";}"))}function l(){c("if(",e,".buffer){",p,".disableVertexAttribArray(",m,");","}if(",H.map(function(a,c){return e+"."+a+"!=="+r[c]}).join("||"),"){",p,".vertexAttrib4f(",m,",",r,");",H.map(function(a,c){return e+"."+a+"="+r[c]+";"}).join(""),
"}")}var p=k.gl,m=c.def(b,".location"),e=c.def(k.attributes,"[",m,"]");b=f.state;var u=f.buffer,r=[f.x,f.y,f.z,f.w],t=["buffer","normalized","offset","stride"];1===b?n():2===b?l():(c("if(",b,"===",1,"){"),n(),c("}else{"),l(),c("}"))}var k=a.shared;g.forEach(function(g){var k=g.name,l=b.attributes[k],p;if(l){if(!f(l))return;p=l.append(a,c)}else{if(!f(z))return;var m=a.scopeAttrib(k);p={};Object.keys(new ta).forEach(function(a){p[a]=c.def(m,".",a)})}d(a.link(g),n(g.info.type),p)})}function R(a,b,g,
f,n){for(var d=a.shared,l=d.gl,e,u=0;u<f.length;++u){var r=f[u],t=r.name,h=r.info.type,O=g.uniforms[t],r=a.link(r)+".location",v;if(O){if(!n(O))continue;if(c(O)){t=O.value;if(35678===h||35680===h)h=a.link(t._texture||t.color[0]._texture),b(l,".uniform1i(",r,",",h+".bind());"),b.exit(h,".unbind();");else if(35674===h||35675===h||35676===h)t=a.global.def("new Float32Array(["+Array.prototype.slice.call(t)+"])"),O=2,35675===h?O=3:35676===h&&(O=4),b(l,".uniformMatrix",O,"fv(",r,",false,",t,");");else{switch(h){case 5126:e=
"1f";break;case 35664:e="2f";break;case 35665:e="3f";break;case 35666:e="4f";break;case 35670:e="1i";break;case 5124:e="1i";break;case 35671:e="2i";break;case 35667:e="2i";break;case 35672:e="3i";break;case 35668:e="3i";break;case 35673:e="4i";break;case 35669:e="4i"}b(l,".uniform",e,"(",r,",",m(t)?Array.prototype.slice.call(t):t,");")}continue}else v=O.append(a,b)}else{if(!n(z))continue;v=b.def(d.uniforms,"[",p.id(t),"]")}35678===h?b("if(",v,"&&",v,'._reglType==="framebuffer"){',v,"=",v,".color[0];",
"}"):35680===h&&b("if(",v,"&&",v,'._reglType==="framebufferCube"){',v,"=",v,".color[0];","}");t=1;switch(h){case 35678:case 35680:h=b.def(v,"._texture");b(l,".uniform1i(",r,",",h,".bind());");b.exit(h,".unbind();");continue;case 5124:case 35670:e="1i";break;case 35667:case 35671:e="2i";t=2;break;case 35668:case 35672:e="3i";t=3;break;case 35669:case 35673:e="4i";t=4;break;case 5126:e="1f";break;case 35664:e="2f";t=2;break;case 35665:e="3f";t=3;break;case 35666:e="4f";t=4;break;case 35674:e="Matrix2fv";
break;case 35675:e="Matrix3fv";break;case 35676:e="Matrix4fv"}b(l,".uniform",e,"(",r,",");if("M"===e.charAt(0)){var r=Math.pow(h-35674+2,2),x=a.global.def("new Float32Array(",r,")");b("false,(Array.isArray(",v,")||",v," instanceof Float32Array)?",v,":(",k(r,function(a){return x+"["+a+"]="+v+"["+a+"]"}),",",x,")")}else 1<t?b(k(t,function(a){return v+"["+a+"]"})):b(v);b(");")}}function za(a,b,g,f){function n(c){var d=e[c];return d?d.contextDep&&f.contextDynamic||d.propDep?d.append(a,g):d.append(a,b):
b.def(m,".",c)}function d(){function a(){g(v,".drawElementsInstancedANGLE(",[r,h,x,t+"<<(("+x+"-5121)>>1)",O],");")}function c(){g(v,".drawArraysInstancedANGLE(",[r,t,h,O],");")}u?B?a():(g("if(",u,"){"),a(),g("}else{"),c(),g("}")):c()}function k(){function a(){g(p+".drawElements("+[r,h,x,t+"<<(("+x+"-5121)>>1)"]+");")}function c(){g(p+".drawArrays("+[r,t,h]+");")}u?B?a():(g("if(",u,"){"),a(),g("}else{"),c(),g("}")):c()}var l=a.shared,p=l.gl,m=l.draw,e=f.draw,u=function(){var c=e.elements,d=b;if(c){if(c.contextDep&&
f.contextDynamic||c.propDep)d=g;c=c.append(a,d)}else c=d.def(m,".","elements");c&&d("if("+c+")"+p+".bindBuffer(34963,"+c+".buffer.buffer);");return c}(),r=n("primitive"),t=n("offset"),h=function(){var c=e.count,d=b;if(c){if(c.contextDep&&f.contextDynamic||c.propDep)d=g;c=c.append(a,d)}else c=d.def(m,".","count");return c}();if("number"===typeof h){if(0===h)return}else g("if(",h,"){"),g.exit("}");var O,v;pa&&(O=n("instances"),v=a.instancing);var x=u+".type",B=e.elements&&c(e.elements);pa&&("number"!==
typeof O||0<=O)?"string"===typeof O?(g("if(",O,">0){"),d(),g("}else if(",O,"<0){"),k(),g("}")):d():k()}function wa(a,c,b,g,f){c=aa();f=c.proc("body",f);pa&&(c.instancing=f.def(c.shared.extensions,".angle_instanced_arrays"));a(c,f,b,g);return c.compile().body}function xa(a,c,b,g){ma(a,c);Y(a,c,b,g.attributes,function(){return!0});R(a,c,b,g.uniforms,function(){return!0});za(a,c,c,b)}function Aa(a,c){var b=a.proc("draw",1);ma(a,b);da(a,b,c.context);X(a,b,c.framebuffer);ea(a,b,c);P(a,b,c.state);T(a,b,
c,!1,!0);var g=c.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",g,".program);");if(c.shader.program)xa(a,b,c,c.shader.program);else{var f=a.global.def("{}"),d=b.def(g,".id"),n=b.def(f,"[",d,"]");b(a.cond(n).then(n,".call(this,a0);")["else"](n,"=",f,"[",d,"]=",a.link(function(b){return wa(xa,a,c,b,1)}),"(",g,");",n,".call(this,a0);"))}0<Object.keys(c.state).length&&b(a.shared.current,".dirty=true;")}function Ba(a,c,b,g){function f(){return!0}a.batchId="a1";ma(a,c);Y(a,c,b,g.attributes,f);
R(a,c,b,g.uniforms,f);za(a,c,c,b)}function ua(a,c,b,g){function f(a){return a.contextDep&&n||a.propDep}function d(a){return!f(a)}ma(a,c);var n=b.contextDep,k=c.def(),l=c.def();a.shared.props=l;a.batchId=k;var p=a.scope(),m=a.scope();c(p.entry,"for(",k,"=0;",k,"<","a1",";++",k,"){",l,"=","a0","[",k,"];",m,"}",p.exit);b.needsContext&&da(a,m,b.context);b.needsFramebuffer&&X(a,m,b.framebuffer);P(a,m,b.state,f);b.profile&&f(b.profile)&&T(a,m,b,!1,!0);g?(Y(a,p,b,g.attributes,d),Y(a,m,b,g.attributes,f),
R(a,p,b,g.uniforms,d),R(a,m,b,g.uniforms,f),za(a,p,m,b)):(c=a.global.def("{}"),g=b.shader.progVar.append(a,m),l=m.def(g,".id"),p=m.def(c,"[",l,"]"),m(a.shared.gl,".useProgram(",g,".program);","if(!",p,"){",p,"=",c,"[",l,"]=",a.link(function(c){return wa(Ba,a,b,c,2)}),"(",g,");}",p,".call(this,a0[",k,"],",k,");"))}function va(a,c){function b(a){return a.contextDep&&f||a.propDep}var g=a.proc("batch",2);a.batchId="0";ma(a,g);var f=!1,d=!0;Object.keys(c.context).forEach(function(a){f=f||c.context[a].propDep});
f||(da(a,g,c.context),d=!1);var n=c.framebuffer,k=!1;n?(n.propDep?f=k=!0:n.contextDep&&f&&(k=!0),k||X(a,g,n)):X(a,g,null);c.state.viewport&&c.state.viewport.propDep&&(f=!0);ea(a,g,c);P(a,g,c.state,function(a){return!b(a)});c.profile&&b(c.profile)||T(a,g,c,!1,"a1");c.contextDep=f;c.needsContext=d;c.needsFramebuffer=k;d=c.shader.progVar;if(d.contextDep&&f||d.propDep)ua(a,g,c,null);else if(d=d.append(a,g),g(a.shared.gl,".useProgram(",d,".program);"),c.shader.program)ua(a,g,c,c.shader.program);else{var n=
a.global.def("{}"),k=g.def(d,".id"),l=g.def(n,"[",k,"]");g(a.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",n,"[",k,"]=",a.link(function(b){return wa(ua,a,c,b,2)}),"(",d,");",l,".call(this,a0,a1);"))}0<Object.keys(c.state).length&&g(a.shared.current,".dirty=true;")}function Ga(a,c){function g(b){var n=c.shader[b];n&&f.set(d.shader,"."+b,n.append(a,f))}var f=a.proc("scope",3);a.batchId="a2";var d=a.shared,n=d.current;da(a,f,c.context);c.framebuffer&&c.framebuffer.append(a,f);b(Object.keys(c.state)).forEach(function(b){var g=
c.state[b].append(a,f);m(g)?g.forEach(function(c,g){f.set(a.next[b],"["+g+"]",c)}):f.set(d.next,"."+b,g)});T(a,f,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var g=c.draw[b];g&&f.set(d.draw,"."+b,""+g.append(a,f))});Object.keys(c.uniforms).forEach(function(b){f.set(d.uniforms,"["+p.id(b)+"]",c.uniforms[b].append(a,f))});Object.keys(c.attributes).forEach(function(b){var g=c.attributes[b].append(a,f),d=a.scopeAttrib(b);Object.keys(new ta).forEach(function(a){f.set(d,
"."+a,g[a])})});g("vert");g("frag");0<Object.keys(c.state).length&&(f(n,".dirty=true;"),f.exit(n,".dirty=true;"));f("a1(",a.shared.context,",a0,",a.batchId,");")}function Fa(a){if("object"===typeof a&&!m(a)){for(var c=Object.keys(a),b=0;b<c.length;++b)if(u.isDynamic(a[c[b]]))return!0;return!1}}function Ca(a,c,b){function g(a,c){k.forEach(function(b){var g=d[b];u.isDynamic(g)&&(g=a.invoke(c,g),c(e,".",b,"=",g,";"))})}var d=c["static"][b];if(d&&Fa(d)){var n=a.global,k=Object.keys(d),l=!1,p=!1,m=!1,
e=a.global.def("{}");k.forEach(function(c){var b=d[c];if(u.isDynamic(b))"function"===typeof b&&(b=d[c]=u.unbox(b)),c=f(b,null),l=l||c.thisDep,m=m||c.propDep,p=p||c.contextDep;else{n(e,".",c,"=");switch(typeof b){case "number":n(b);break;case "string":n('"',b,'"');break;case "object":Array.isArray(b)&&n("[",b.join(),"]");break;default:n(a.link(b))}n(";")}});c.dynamic[b]=new u.DynamicVariable(4,{thisDep:l,contextDep:p,propDep:m,ref:e,append:g});delete c["static"][b]}}var ta=I.Record,ba={add:32774,subtract:32778,
"reverse subtract":32779};e.ext_blend_minmax&&(ba.min=32775,ba.max=32776);var pa=e.angle_instanced_arrays,la=e.webgl_draw_buffers,O={dirty:!0,profile:V.profile},ya={},Da=[],qa={},ra={};Q("dither",3024);Q("blend.enable",3042);L("blend.color","blendColor",[0,0,0,0]);L("blend.equation","blendEquationSeparate",[32774,32774]);L("blend.func","blendFuncSeparate",[1,0,1,0]);Q("depth.enable",2929,!0);L("depth.func","depthFunc",513);L("depth.range","depthRange",[0,1]);L("depth.mask","depthMask",!0);L("colorMask",
"colorMask",[!0,!0,!0,!0]);Q("cull.enable",2884);L("cull.face","cullFace",1029);L("frontFace","frontFace",2305);L("lineWidth","lineWidth",1);Q("polygonOffset.enable",32823);L("polygonOffset.offset","polygonOffset",[0,0]);Q("sample.alpha",32926);Q("sample.enable",32928);L("sample.coverage","sampleCoverage",[1,!1]);Q("stencil.enable",2960);L("stencil.mask","stencilMask",-1);L("stencil.func","stencilFunc",[519,0,-1]);L("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);L("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);Q("scissor.enable",3089);L("scissor.box","scissor",[0,0,l.drawingBufferWidth,l.drawingBufferHeight]);L("viewport","viewport",[0,0,l.drawingBufferWidth,l.drawingBufferHeight]);var Ha={gl:l,context:Z,strings:p,next:ya,current:O,draw:G,elements:F,buffer:q,shader:U,attributes:I.state,uniforms:N,framebuffer:C,extensions:e,timer:fa,isBufferArgs:d},Ea={primTypes:r,compareFuncs:w,blendFuncs:x,blendEquations:ba,stencilOps:y,glTypes:t,orientationType:A};la&&(Ea.backBuffer=[1029],Ea.drawBuffer=
k(h.maxDrawbuffers,function(a){return 0===a?[0]:k(a,function(a){return 36064+a})}));var Ia=0;return{next:ya,current:O,procs:function(){var a=aa(),c=a.proc("poll"),b=a.proc("refresh"),g=a.block();c(g);b(g);var f=a.shared,d=f.gl,n=f.next,p=f.current;g(p,".dirty=false;");X(a,c);X(a,b,null,!0);var e=l.getExtension("angle_instanced_arrays"),u;e&&(u=a.link(e));for(var r=0;r<h.maxAttributes;++r){var t=b.def(f.attributes,"[",r,"]"),v=a.cond(t,".buffer");v.then(d,".enableVertexAttribArray(",r,");",d,".bindBuffer(",
34962,",",t,".buffer.buffer);",d,".vertexAttribPointer(",r,",",t,".size,",t,".type,",t,".normalized,",t,".stride,",t,".offset);")["else"](d,".disableVertexAttribArray(",r,");",d,".vertexAttrib4f(",r,",",t,".x,",t,".y,",t,".z,",t,".w);",t,".buffer=null;");b(v);e&&b(u,".vertexAttribDivisorANGLE(",r,",",t,".divisor);")}Object.keys(qa).forEach(function(f){var k=qa[f],l=g.def(n,".",f),m=a.block();m("if(",l,"){",d,".enable(",k,")}else{",d,".disable(",k,")}",p,".",f,"=",l,";");b(m);c("if(",l,"!==",p,".",
f,"){",m,"}")});Object.keys(ra).forEach(function(f){var l=ra[f],e=O[f],u,r,t=a.block();t(d,".",l,"(");m(e)?(l=e.length,u=a.global.def(n,".",f),r=a.global.def(p,".",f),t(k(l,function(a){return u+"["+a+"]"}),");",k(l,function(a){return r+"["+a+"]="+u+"["+a+"];"}).join("")),c("if(",k(l,function(a){return u+"["+a+"]!=="+r+"["+a+"]"}).join("||"),"){",t,"}")):(u=g.def(n,".",f),r=g.def(p,".",f),t(u,");",p,".",f,"=",u,";"),c("if(",u,"!==",r,"){",t,"}"));b(t)});return a.compile()}(),compile:function(a,c,b,
g,f){var d=aa();d.stats=d.link(f);Object.keys(c["static"]).forEach(function(a){Ca(d,c,a)});v.forEach(function(c){Ca(d,a,c)});b=ja(a,c,b,g,d);Aa(d,b);Ga(d,b);va(d,b);return d.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/codegen":22,"./util/is-array-like":25,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/loop":28}],9:[function(e,h,q){function d(a,b){this.id=c++;this.type=a;this.data=b}function b(a){if(0===a.length)return[];var c=a.charAt(0),
d=a.charAt(a.length-1);if(1<a.length&&c===d&&('"'===c||"'"===c))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,c.index)).concat(b(c[1])).concat(b(a.substr(c.index+c[0].length)));c=a.split(".");if(1===c.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(d=0;d<c.length;++d)a=a.concat(b(c[d]));return a}function a(a){return"["+b(a).join("][")+"]"}var c=0;h.exports={DynamicVariable:d,
define:function(c,b){return new d(c,a(b+""))},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof d},unbox:function(a,c){return"function"===typeof a?new d(0,a):a},accessor:a}},{}],10:[function(e,h,q){var d=e("./util/is-typed-array"),b=e("./util/is-ndarray"),a=e("./util/values"),c=e("./constants/primitives.json"),g=e("./constants/usage.json");h.exports=function(f,n,k,l){function p(a){this.id=t++;r[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function m(a,
c,g,f,l,p,m){(p=m)||d(c)&&(!b(c)||d(c.data))||(p=n.oes_element_index_uint?5125:5123);a.buffer.bind();k._initBuffer(a.buffer,c,g,p,3);c=m;if(!m){switch(a.buffer.dtype){case 5121:case 5120:c=5121;break;case 5123:case 5122:c=5123;break;case 5125:case 5124:c=5125}a.buffer.dtype=c}a.type=c;0>l&&(l=a.buffer.byteLength,5123===c?l>>=1:5125===c&&(l>>=2));a.vertCount=l;l=f;0>f&&(l=4,f=a.buffer.dimension,1===f&&(l=0),2===f&&(l=1),3===f&&(l=4));a.primType=l}function e(a){l.elementsCount--;delete r[a.id];a.buffer.destroy();
a.buffer=null}var r={},t=0,h={uint8:5121,uint16:5123};n.oes_element_index_uint&&(h.uint32=5125);p.prototype.bind=function(){this.buffer.bind()};var v=[];return{create:function(a,n){function r(a){if(a)if("number"===typeof a)t(a),v.primType=4,v.vertCount=a|0,v.type=5121;else{var n=null,k=35044,l=-1,p=-1,e=0,u=0;Array.isArray(a)||d(a)||b(a)?n=a:("data"in a&&(n=a.data),"usage"in a&&(k=g[a.usage]),"primitive"in a&&(l=c[a.primitive]),"count"in a&&(p=a.count|0),"length"in a&&(e=a.length|0),"type"in a&&(u=
h[a.type]));n?m(v,n,k,l,p,e,u):(a=v.buffer,a.bind(),f.bufferData(34963,e,k),a.dtype=u||5121,a.usage=k,a.dimension=3,a.byteLength=e,v.primType=0>l?4:l,v.vertCount=0>p?0:p,v.type=a.dtype)}else t(),v.primType=4,v.vertCount=0,v.type=5121;return r}var t=k.create(null,34963,!0),v=new p(t._buffer);l.elementsCount++;r(a);r._reglType="elements";r._elements=v;r.subdata=function(a,c){t.subdata(a,c);return r};r.destroy=function(){e(v)};return r},createStream:function(a){var c=v.pop();c||(c=new p(k.create(null,
34963,!0,!1)._buffer));m(c,a,35040,-1,-1,0,0);return c},destroyStream:function(a){v.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof p?a._elements:null},clear:function(){a(r).forEach(e)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/values":32}],11:[function(e,h,q){h.exports=function(d,b){function a(a){a=a.toLowerCase();var b;try{b=c[a]=d.getExtension(a)}catch(g){}return!!b}for(var c={},
g=0;g<b.extensions.length;++g){var f=b.extensions[g];if(!a(f))return b.onDestroy(),b.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}b.optionalExtensions.forEach(a);return{extensions:c,restore:function(){Object.keys(c).forEach(function(c){if(!a(c))throw Error("(regl): error restoring extension "+c);})}}}},{}],12:[function(e,h,q){var d=e("./util/values"),b=e("./util/extend"),a=[];a[6408]=4;var c=[];c[5121]=1;c[5126]=4;
c[36193]=2;h.exports=function(g,f,n,k,l,p){function m(a,c,b){this.target=a;this.texture=c;this.renderbuffer=b;var g=a=0;c?(a=c.width,g=c.height):b&&(a=b.width,g=b.height);this.width=a;this.height=g}function e(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function r(a,c,b){a&&(a.texture?a.texture._texture.refCount+=1:a.renderbuffer._renderbuffer.refCount+=1)}function t(a,c){c?c.texture?g.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,
0):g.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer):g.framebufferTexture2D(36160,a,3553,null,0)}function h(a){var c=3553,b=null,g=null,f=a;"object"===typeof a&&(f=a.data,"target"in a&&(c=a.target|0));a=f._reglType;"texture2d"===a?b=f:"textureCube"===a?b=f:"renderbuffer"===a&&(g=f,c=36161);return new m(c,b,g)}function v(a,c,b,g,f){if(b)return a=k.create2D({width:a,height:c,format:g,type:f}),a._texture.refCount=0,new m(3553,a,null);a=l.create({width:a,height:c,format:g});
a._renderbuffer.refCount=0;return new m(36161,null,a)}function x(a){return a&&(a.texture||a.renderbuffer)}function w(a,c,b){a&&(a.texture?a.texture.resize(c,b):a.renderbuffer&&a.renderbuffer.resize(c,b))}function y(){this.id=J++;C[this.id]=this;this.framebuffer=g.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function q(a){a.colorAttachments.forEach(e);e(a.depthAttachment);e(a.stencilAttachment);e(a.depthStencilAttachment)}
function z(a){g.deleteFramebuffer(a.framebuffer);a.framebuffer=null;p.framebufferCount--;delete C[a.id]}function B(a){var c;g.bindFramebuffer(36160,a.framebuffer);var b=a.colorAttachments;for(c=0;c<b.length;++c)t(36064+c,b[c]);for(c=b.length;c<n.maxColorAttachments;++c)t(36064+c,null);t(36096,a.depthAttachment);t(36128,a.stencilAttachment);t(33306,a.depthStencilAttachment);g.checkFramebufferStatus(36160);g.bindFramebuffer(36160,E.next);E.cur=E.next;g.getError()}function D(g,f){function d(b,g){var f,
k=0,l=0,p=!0,m=!0;f=null;var e=!0,u="rgba",t="uint8",z=1,w=null,y=null,D=null,E=!1;if("number"===typeof b)k=b|0,l=g|0||k;else if(b){"shape"in b?(l=b.shape,k=l[0],l=l[1]):("radius"in b&&(k=l=b.radius),"width"in b&&(k=b.width),"height"in b&&(l=b.height));if("color"in b||"colors"in b)f=b.color||b.colors,Array.isArray(f);if(!f){"colorCount"in b&&(z=b.colorCount|0);"colorTexture"in b&&(e=!!b.colorTexture,u="rgba4");if("colorType"in b&&(t=b.colorType,!e))if("half float"===t||"float16"===t)u="rgba16f";else if("float"===
t||"float32"===t)u="rgba32f";"colorFormat"in b&&(u=b.colorFormat,0<=M.indexOf(u)?e=!0:0<=K.indexOf(u)&&(e=!1))}if("depthTexture"in b||"depthStencilTexture"in b)E=!(!b.depthTexture&&!b.depthStencilTexture);"depth"in b&&("boolean"===typeof b.depth?p=b.depth:(w=b.depth,m=!1));"stencil"in b&&("boolean"===typeof b.stencil?m=b.stencil:(y=b.stencil,p=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?p=m=b.depthStencil:(D=b.depthStencil,m=p=!1))}else k=l=1;var F=null,C=null,I=null,N=null;if(Array.isArray(f))F=
f.map(h);else if(f)F=[h(f)];else for(F=Array(z),f=0;f<z;++f)F[f]=v(k,l,e,u,t);k=k||F[0].width;l=l||F[0].height;w?C=h(w):p&&!m&&(C=v(k,l,E,"depth","uint32"));y?I=h(y):m&&!p&&(I=v(k,l,!1,"stencil","uint8"));D?N=h(D):!w&&!y&&m&&p&&(N=v(k,l,E,"depth stencil","depth stencil"));p=null;for(f=0;f<F.length;++f)r(F[f],k,l),F[f]&&F[f].texture&&(m=a[F[f].texture._texture.format]*c[F[f].texture._texture.type],null===p&&(p=m));r(C,k,l);r(I,k,l);r(N,k,l);q(n);n.width=k;n.height=l;n.colorAttachments=F;n.depthAttachment=
C;n.stencilAttachment=I;n.depthStencilAttachment=N;d.color=F.map(x);d.depth=x(C);d.stencil=x(I);d.depthStencil=x(N);d.width=n.width;d.height=n.height;B(n);return d}var n=new y;p.framebufferCount++;d(g,f);return b(d,{resize:function(a,c){var b=a|0,g=c|0||b;if(b===n.width&&g===n.height)return d;for(var f=n.colorAttachments,k=0;k<f.length;++k)w(f[k],b,g);w(n.depthAttachment,b,g);w(n.stencilAttachment,b,g);w(n.depthStencilAttachment,b,g);n.width=d.width=b;n.height=d.height=g;B(n);return d},_reglType:"framebuffer",
_framebuffer:n,destroy:function(){z(n);q(n)}})}var E={cur:null,next:null,dirty:!1},M=["rgba"],K=["rgba4","rgb565","rgb5 a1"];f.ext_srgb&&K.push("srgba");f.ext_color_buffer_half_float&&K.push("rgba16f","rgb16f");f.webgl_color_buffer_float&&K.push("rgba32f");var F=["uint8"];f.oes_texture_half_float&&F.push("half float","float16");f.oes_texture_float&&F.push("float","float32");var J=0,C={};return b(E,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,
a instanceof y)?a:null},create:D,createCube:function(a){function c(a){var f,d={color:null},n=0,l=null;f="rgba";var p="uint8",m=1;if("number"===typeof a)n=a|0;else if(a){"shape"in a?n=a.shape[0]:("radius"in a&&(n=a.radius|0),"width"in a?n=a.width|0:"height"in a&&(n=a.height|0));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l);l||("colorCount"in a&&(m=a.colorCount|0),"colorType"in a&&(p=a.colorType),"colorFormat"in a&&(f=a.colorFormat));"depth"in a&&(d.depth=a.depth);"stencil"in a&&
(d.stencil=a.stencil);"depthStencil"in a&&(d.depthStencil=a.depthStencil)}else n=1;if(l)if(Array.isArray(l))for(a=[],f=0;f<l.length;++f)a[f]=l[f];else a=[l];else for(a=Array(m),l={radius:n,format:f,type:p},f=0;f<m;++f)a[f]=k.createCube(l);d.color=Array(a.length);for(f=0;f<a.length;++f)m=a[f],n=n||m.width,d.color[f]={target:34069,data:a[f]};for(f=0;6>f;++f){for(m=0;m<a.length;++m)d.color[m].target=34069+f;0<f&&(d.depth=g[0].depth,d.stencil=g[0].stencil,d.depthStencil=g[0].depthStencil);if(g[f])g[f](d);
else g[f]=D(d)}return b(c,{width:n,height:n,color:a})}var g=Array(6);c(a);return b(c,{faces:g,resize:function(a){var b=a|0;if(b===c.width)return c;var f=c.color;for(a=0;a<f.length;++a)f[a].resize(b);for(a=0;6>a;++a)g[a].resize(b);c.width=c.height=b;return c},_reglType:"framebufferCube",destroy:function(){g.forEach(function(a){a.destroy()})}})},clear:function(){d(C).forEach(z)},restore:function(){d(C).forEach(function(a){a.framebuffer=g.createFramebuffer();B(a)})}})}},{"./util/extend":23,"./util/values":32}],
13:[function(e,h,q){h.exports=function(d,b){var a=1;b.ext_texture_filter_anisotropic&&(a=d.getParameter(34047));var c=1,g=1;b.webgl_draw_buffers&&(c=d.getParameter(34852),g=d.getParameter(36063));return{colorBits:[d.getParameter(3410),d.getParameter(3411),d.getParameter(3412),d.getParameter(3413)],depthBits:d.getParameter(3414),stencilBits:d.getParameter(3415),subpixelBits:d.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:a,maxDrawbuffers:c,maxColorAttachments:g,
pointSizeDims:d.getParameter(33901),lineWidthDims:d.getParameter(33902),maxViewportDims:d.getParameter(3386),maxCombinedTextureUnits:d.getParameter(35661),maxCubeMapSize:d.getParameter(34076),maxRenderbufferSize:d.getParameter(34024),maxTextureUnits:d.getParameter(34930),maxTextureSize:d.getParameter(3379),maxAttributes:d.getParameter(34921),maxVertexUniforms:d.getParameter(36347),maxVertexTextureUnits:d.getParameter(35660),maxVaryingVectors:d.getParameter(36348),maxFragmentUniforms:d.getParameter(36349),
glsl:d.getParameter(35724),renderer:d.getParameter(7937),vendor:d.getParameter(7936),version:d.getParameter(7938)}}},{}],14:[function(e,h,q){var d=e("./util/is-typed-array");h.exports=function(b,a,c,g,f,n){return function(f){var n;n=null===a.next?5121:a.next.colorAttachments[0].texture._texture.type;var p=0,m=0,e=g.framebufferWidth,r=g.framebufferHeight,t=null;d(f)?t=f:f&&(p=f.x|0,m=f.y|0,e=(f.width||g.framebufferWidth-p)|0,r=(f.height||g.framebufferHeight-m)|0,t=f.data||null);c();f=e*r*4;t||(5121===
n?t=new Uint8Array(f):5126===n&&(t=t||new Float32Array(f)));b.pixelStorei(3333,4);b.readPixels(p,m,e,r,6408,n,t);return t}}},{"./util/is-typed-array":27}],15:[function(e,h,q){var d=e("./util/values"),b=[];b[32854]=2;b[32855]=2;b[36194]=2;b[33189]=2;b[36168]=1;b[34041]=4;b[35907]=4;b[34836]=16;b[34842]=8;b[34843]=6;h.exports=function(a,c,g,f,n){function k(a){this.id=e++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;n.profile&&(this.stats={size:0})}function l(c){var b=
c.renderbuffer;a.bindRenderbuffer(36161,null);a.deleteRenderbuffer(b);c.renderbuffer=null;c.refCount=0;delete r[c.id];f.renderbufferCount--}var p={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(p.srgba=35907);c.ext_color_buffer_half_float&&(p.rgba16f=34842,p.rgb16f=34843);c.webgl_color_buffer_float&&(p.rgba32f=34836);var m=[];Object.keys(p).forEach(function(a){m[p[a]]=a});var e=0,r={};k.prototype.decRef=function(){0>=--this.refCount&&l(this)};
n.profile&&(f.getTotalRenderbufferSize=function(){var a=0;Object.keys(r).forEach(function(c){a+=r[c].stats.size});return a});return{create:function(c,g){function d(c,g){var f=0,k=0,e=32854;"object"===typeof c&&c?("shape"in c?(k=c.shape,f=k[0]|0,k=k[1]|0):("radius"in c&&(f=k=c.radius|0),"width"in c&&(f=c.width|0),"height"in c&&(k=c.height|0)),"format"in c&&(e=p[c.format])):"number"===typeof c?(f=c|0,k="number"===typeof g?g|0:f):c||(f=k=1);if(f!==l.width||k!==l.height||e!==l.format)return d.width=l.width=
f,d.height=l.height=k,l.format=e,a.bindRenderbuffer(36161,l.renderbuffer),a.renderbufferStorage(36161,e,f,k),n.profile&&(l.stats.size=b[l.format]*l.width*l.height),d.format=m[l.format],d}var l=new k(a.createRenderbuffer());r[l.id]=l;f.renderbufferCount++;d(c,g);d.resize=function(c,g){var f=c|0,k=g|0||f;if(f===l.width&&k===l.height)return d;d.width=l.width=f;d.height=l.height=k;a.bindRenderbuffer(36161,l.renderbuffer);a.renderbufferStorage(36161,l.format,f,k);n.profile&&(l.stats.size=b[l.format]*l.width*
l.height);return d};d._reglType="renderbuffer";d._renderbuffer=l;n.profile&&(d.stats=l.stats);d.destroy=function(){l.decRef()};return d},clear:function(){d(r).forEach(l)},restore:function(){d(r).forEach(function(c){c.renderbuffer=a.createRenderbuffer();a.bindRenderbuffer(36161,c.renderbuffer);a.renderbufferStorage(36161,c.format,c.width,c.height)});a.bindRenderbuffer(36161,null)}}}},{"./util/values":32}],16:[function(e,h,q){var d=e("./util/values");h.exports=function(b,a,c,g){function f(a,c,b,g){this.name=
a;this.id=c;this.location=b;this.info=g}function n(a,c){for(var b=0;b<a.length;++b)if(a[b].id===c.id){a[b].location=c.location;return}a.push(c)}function k(c,g,f){f=35632===c?m:e;var d=f[g];if(!d){var n=a.str(g),d=b.createShader(c);b.shaderSource(d,n);b.compileShader(d);f[g]=d}return d}function l(a,c){this.id=h++;this.fragId=a;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[];g.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(c,d){var l,p;l=k(35632,c.fragId);p=
k(35633,c.vertId);var m=c.program=b.createProgram();b.attachShader(m,l);b.attachShader(m,p);b.linkProgram(m);var e=b.getProgramParameter(m,35718);g.profile&&(c.stats.uniformsCount=e);var u=c.uniforms;for(l=0;l<e;++l)if(p=b.getActiveUniform(m,l))if(1<p.size)for(var r=0;r<p.size;++r){var t=p.name.replace("[0]","["+r+"]");n(u,new f(t,a.id(t),b.getUniformLocation(m,t),p))}else n(u,new f(p.name,a.id(p.name),b.getUniformLocation(m,p.name),p));e=b.getProgramParameter(m,35721);g.profile&&(c.stats.attributesCount=
e);u=c.attributes;for(l=0;l<e;++l)(p=b.getActiveAttrib(m,l))&&n(u,new f(p.name,a.id(p.name),b.getAttribLocation(m,p.name),p))}var m={},e={},r={},t=[],h=0;g.profile&&(c.getMaxUniformsCount=function(){var a=0;t.forEach(function(c){c.stats.uniformsCount>a&&(a=c.stats.uniformsCount)});return a},c.getMaxAttributesCount=function(){var a=0;t.forEach(function(c){c.stats.attributesCount>a&&(a=c.stats.attributesCount)});return a});return{clear:function(){var a=b.deleteShader.bind(b);d(m).forEach(a);m={};d(e).forEach(a);
e={};t.forEach(function(a){b.deleteProgram(a.program)});t.length=0;r={};c.shaderCount=0},program:function(a,b,g){c.shaderCount++;var f=r[b];f||(f=r[b]={});var d=f[a];d||(d=new l(b,a),p(d,g),f[a]=d,t.push(d));return d},restore:function(){m={};e={};for(var a=0;a<t.length;++a)p(t[a])},shader:k,frag:-1,vert:-1}}},{"./util/values":32}],17:[function(e,h,q){h.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},
{}],18:[function(e,h,q){h.exports=function(){var d={"":0},b=[""];return{id:function(a){var c=d[a];if(c)return c;c=d[a]=b.length;b.push(a);return c},str:function(a){return b[a]}}}},{}],19:[function(e,h,q){function d(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function b(a){return Array.isArray(a)&&0!==a.length&&r(a[0])?!0:!1}function a(a){return Object.prototype.toString.call(a)}function c(c){if(!c)return!1;var g=a(c);return 0<=y.indexOf(g)?!0:d(c)||b(c)||p(c)}function g(a,c){36193===
a.type?(a.data=u(c),m.freeType(c)):a.data=c}function f(a,c,b,g,f,d){a="undefined"!==typeof z[a]?z[a]:w[a]*A[c];d&&(a*=6);if(f){for(g=0;1<=b;)g+=a*b*b,b/=2;return g}return a*b*g}var n=e("./util/extend"),k=e("./util/values"),l=e("./util/is-typed-array"),p=e("./util/is-ndarray"),m=e("./util/pool"),u=e("./util/to-half-float"),r=e("./util/is-array-like"),t=e("./util/flatten");q=e("./constants/arraytypes.json");var H=e("./constants/arraytypes.json"),v=[9984,9986,9985,9987],x=[0,6409,6410,6407,6408],w={};
w[6409]=w[6406]=w[6402]=1;w[34041]=w[6410]=2;w[6407]=w[35904]=3;w[6408]=w[35906]=4;var y=Object.keys(q).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),A=[];A[5121]=1;A[5126]=4;A[36193]=2;A[5123]=2;A[5125]=4;var z=[];z[32854]=2;z[32855]=2;z[36194]=2;z[34041]=4;z[33776]=.5;z[33777]=.5;z[33778]=1;z[33779]=1;z[35986]=.5;z[35987]=1;z[34798]=1;z[35840]=.5;z[35841]=.25;z[35842]=.5;z[35843]=.25;z[36196]=.5;h.exports=function(e,
h,z,q,y,A,J){function C(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.channels=this.height=this.width=this.colorSpace=0}function N(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=c.unpackAlignment;a.colorSpace=c.colorSpace;a.width=c.width;a.height=c.height;a.channels=c.channels}function I(a,
c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(a.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(a.flipY=c.flipY);"alignment"in c&&(a.unpackAlignment=c.alignment);"colorSpace"in c&&(a.colorSpace=ma[c.colorSpace]);"type"in c&&(a.type=T[c.type]);var b=a.width,g=a.height,f=a.channels,d=!1;"shape"in c?(b=c.shape[0],g=c.shape[1],3===c.shape.length&&(f=c.shape[2],d=!0)):("radius"in c&&(b=g=c.radius),"width"in c&&(b=c.width),"height"in c&&(g=c.height),"channels"in c&&(f=c.channels,d=!0));a.width=
b|0;a.height=g|0;a.channels=f|0;b=!1;"format"in c&&(b=c.format,g=a.internalformat=Y[b],a.format=Ga[g],b in T&&!("type"in c)&&(a.type=T[b]),b in R&&(a.compressed=!0),b=!0);!d&&b?a.channels=w[a.format]:d&&!b&&a.channels!==x[a.format]&&(a.format=a.internalformat=x[a.channels])}}function U(a){e.pixelStorei(37440,a.flipY);e.pixelStorei(37441,a.premultiplyAlpha);e.pixelStorei(37443,a.colorSpace);e.pixelStorei(3317,a.unpackAlignment)}function G(){C.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=
!1;this.element=null;this.needsCopy=!1}function Z(f,n){var k=null;c(n)?k=n:n&&(I(f,n),"x"in n&&(f.xOffset=n.x|0),"y"in n&&(f.yOffset=n.y|0),c(n.data)&&(k=n.data));if(n.copy){var e=y.viewportWidth,h=y.viewportHeight;f.width=f.width||e-f.xOffset;f.height=f.height||h-f.yOffset;f.needsCopy=!0}else if(!k)f.width=f.width||1,f.height=f.height||1,f.channels=f.channels||4;else if(l(k))f.channels=f.channels||4,f.data=k,"type"in n||5121!==f.type||(f.type=H[Object.prototype.toString.call(k)]|0);else if(d(k)){f.channels=
f.channels||4;e=k;h=e.length;switch(f.type){case 5121:case 5123:case 5125:case 5126:h=m.allocType(f.type,h);h.set(e);f.data=h;break;case 36193:f.data=u(e)}f.alignment=1;f.needsFree=!0}else if(p(k)){e=k.data;Array.isArray(e)||5121!==f.type||(f.type=H[Object.prototype.toString.call(e)]|0);var h=k.shape,v=k.stride,z,q,w,B;3===h.length?(w=h[2],B=v[2]):B=w=1;z=h[0];q=h[1];h=v[0];v=v[1];f.alignment=1;f.width=z;f.height=q;f.channels=w;f.format=f.internalformat=x[w];f.needsFree=!0;z=B;k=k.offset;w=f.width;
B=f.height;q=f.channels;for(var A=m.allocType(36193===f.type?5126:f.type,w*B*q),D=0,F=0;F<B;++F)for(var C=0;C<w;++C)for(var E=0;E<q;++E)A[D++]=e[h*C+v*F+z*E+k];g(f,A)}else if("[object HTMLCanvasElement]"===a(k)||"[object CanvasRenderingContext2D]"===a(k))"[object HTMLCanvasElement]"===a(k)?f.element=k:f.element=k.canvas,f.width=f.element.width,f.height=f.element.height,f.channels=4;else if("[object HTMLImageElement]"===a(k))f.element=k,f.width=k.naturalWidth,f.height=k.naturalHeight,f.channels=4;
else if("[object HTMLVideoElement]"===a(k))f.element=k,f.width=k.videoWidth,f.height=k.videoHeight,f.channels=4;else if(b(k)){e=f.width||k[0].length;h=f.height||k.length;v=f.channels;v=r(k[0][0])?v||k[0][0].length:v||1;z=t.shape(k);w=1;for(B=0;B<z.length;++B)w*=z[B];w=m.allocType(36193===f.type?5126:f.type,w);t.flatten(k,z,"",w);g(f,w);f.alignment=1;f.width=e;f.height=h;f.channels=v;f.format=f.internalformat=x[v];f.needsFree=!0}}function fa(a,c,b,g,f){var d=a.element,n=a.data,k=a.internalformat,l=
a.format,p=a.type,m=a.width,u=a.height;U(a);d?e.texSubImage2D(c,f,b,g,l,p,d):a.compressed?e.compressedTexSubImage2D(c,f,b,g,k,m,u,n):a.needsCopy?(q(),e.copyTexSubImage2D(c,f,b,g,a.xOffset,a.yOffset,m,u)):e.texSubImage2D(c,f,b,g,m,u,l,p,n)}function V(){return Fa.pop()||new G}function W(a){a.needsFree&&m.freeType(a.data);G.call(a);Fa.push(a)}function Q(){C.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function L(a,c,b){var g=a.images[0]=V();a.mipmask=1;g.width=
a.width=c;g.height=a.height=b;g.channels=a.channels=4}function aa(a,b){var g=null;if(c(b))g=a.images[0]=V(),N(g,a),Z(g,b),a.mipmask=1;else if(I(a,b),Array.isArray(b.mipmap))for(var f=b.mipmap,d=0;d<f.length;++d)g=a.images[d]=V(),N(g,a),g.width>>=d,g.height>>=d,Z(g,f[d]),a.mipmask|=1<<d;else g=a.images[0]=V(),N(g,a),Z(g,b),a.mipmask=1;N(a,a.images[0])}function ka(a,c){for(var b=a.images,g=0;g<b.length&&b[g];++g){var f=b[g],d=c,n=g,k=f.element,l=f.data,p=f.internalformat,m=f.format,u=f.type,r=f.width,
h=f.height;U(f);k?e.texImage2D(d,n,m,m,u,k):f.compressed?e.compressedTexImage2D(d,n,p,r,h,0,l):f.needsCopy?(q(),e.copyTexImage2D(d,n,m,f.xOffset,f.yOffset,r,h,0)):e.texImage2D(d,n,m,r,h,0,m,u,l)}}function sa(){var a=Ca.pop()||new Q;C.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function S(a){for(var c=a.images,b=0;b<c.length;++b)c[b]&&W(c[b]),c[b]=null;Ca.push(a)}function ga(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;
this.mipmapHint=4352}function ia(a,c){"min"in c&&(a.minFilter=P[c.min],0<=v.indexOf(a.minFilter)&&(a.genMipmaps=!0));"mag"in c&&(a.magFilter=ea[c.mag]);var b=a.wrapS,g=a.wrapT;if("wrap"in c){var f=c.wrap;"string"===typeof f?b=g=X[f]:Array.isArray(f)&&(b=X[f[0]],g=X[f[1]])}else"wrapS"in c&&(b=X[c.wrapS]),"wrapT"in c&&(g=X[c.wrapT]);a.wrapS=b;a.wrapT=g;"anisotropic"in c&&(a.anisotropic=c.anisotropic);if("mipmap"in c){b=!1;switch(typeof c.mipmap){case "string":a.mipmapHint=da[c.mipmap];b=a.genMipmaps=
!0;break;case "boolean":b=a.genMipmaps=c.mipmap;break;case "object":a.genMipmaps=!1,b=!0}!b||"min"in c||(a.minFilter=9984)}}function na(a,c){e.texParameteri(c,10241,a.minFilter);e.texParameteri(c,10240,a.magFilter);e.texParameteri(c,10242,a.wrapS);e.texParameteri(c,10243,a.wrapT);h.ext_texture_filter_anisotropic&&e.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(e.hint(33170,a.mipmapHint),e.generateMipmap(c))}function oa(a){C.call(this);this.mipmask=0;this.internalformat=6408;this.id=ta++;this.refCount=
1;this.target=a;this.texture=e.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ga;J.profile&&(this.stats={size:0})}function ca(a){e.activeTexture(33984);e.bindTexture(a.target,a.texture)}function ha(){var a=la[0];a?e.bindTexture(a.target,a.texture):e.bindTexture(3553,null)}function ja(a){var c=a.texture,b=a.unit,g=a.target;0<=b&&(e.activeTexture(33984+b),e.bindTexture(g,null),la[b]=null);e.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete ba[a.id];A.textureCount--}
var da={"don't care":4352,"dont care":4352,nice:4354,fast:4353},X={repeat:10497,clamp:33071,mirror:33648},ea={nearest:9728,linear:9729},P=n({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},ea),ma={none:0,browser:37444},T={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Y={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},R={};h.ext_srgb&&(Y.srgb=35904,Y.srgba=
35906);h.oes_texture_float&&(T.float32=T["float"]=5126);h.oes_texture_half_float&&(T.float16=T["half float"]=36193);h.webgl_depth_texture&&(n(Y,{depth:6402,"depth stencil":34041}),n(T,{uint16:5123,uint32:5125,"depth stencil":34042}));h.webgl_compressed_texture_s3tc&&n(R,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});h.webgl_compressed_texture_atc&&n(R,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});h.webgl_compressed_texture_pvrtc&&
n(R,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});h.webgl_compressed_texture_etc1&&(R["rgb etc1"]=36196);var za=Array.prototype.slice.call(e.getParameter(34467));Object.keys(R).forEach(function(a){var c=R[a];0<=za.indexOf(c)&&(Y[a]=c)});var wa=Object.keys(Y);z.textureFormats=wa;var xa=[];Object.keys(Y).forEach(function(a){xa[Y[a]]=a});var Aa=[];Object.keys(T).forEach(function(a){Aa[T[a]]=a});var Ba=[];Object.keys(ea).forEach(function(a){Ba[ea[a]]=
a});var ua=[];Object.keys(P).forEach(function(a){ua[P[a]]=a});var va=[];Object.keys(X).forEach(function(a){va[X[a]]=a});var Ga=wa.reduce(function(a,c){var b=Y[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b?a[b]=b:32855===b||0<=c.indexOf("rgba")?a[b]=6408:a[b]=6407;return a},{}),Fa=[],Ca=[],ta=0,ba={},pa=z.maxTextureUnits,la=Array(pa).map(function(){return null});n(oa.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<pa;++c){var b=la[c];if(b){if(0<b.bindCount)continue;
b.unit=-1}la[c]=this;a=c;break}J.profile&&A.maxTextureUnits<a+1&&(A.maxTextureUnits=a+1);this.unit=a;e.activeTexture(33984+a);e.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ja(this)}});J.profile&&(A.getTotalTextureSize=function(){var a=0;Object.keys(ba).forEach(function(c){a+=ba[c].stats.size});return a});return{create2D:function(a,c){function b(a,c){var d=g.texInfo;ga.call(d);var n=sa();"number"===typeof a?"number"===typeof c?
L(n,a|0,c|0):L(n,a|0,a|0):a?(ia(d,a),aa(n,a)):L(n,1,1);d.genMipmaps&&(n.mipmask=(n.width<<1)-1);g.mipmask=n.mipmask;N(g,n);g.internalformat=n.internalformat;b.width=n.width;b.height=n.height;ca(g);ka(n,3553);na(d,3553);ha();S(n);J.profile&&(g.stats.size=f(g.internalformat,g.type,n.width,n.height,d.genMipmaps,!1));b.format=xa[g.internalformat];b.type=Aa[g.type];b.mag=Ba[d.magFilter];b.min=ua[d.minFilter];b.wrapS=va[d.wrapS];b.wrapT=va[d.wrapT];return b}var g=new oa(3553);ba[g.id]=g;A.textureCount++;
b(a,c);b.subimage=function(a,c,f,d){c|=0;f|=0;d|=0;var n=V();N(n,g);n.width=0;n.height=0;Z(n,a);n.width=n.width||(g.width>>d)-c;n.height=n.height||(g.height>>d)-f;ca(g);fa(n,3553,c,f,d);ha();W(n);return b};b.resize=function(a,c){var d=a|0,n=c|0||d;if(d===g.width&&n===g.height)return b;b.width=g.width=d;b.height=g.height=n;ca(g);for(var k=0;g.mipmask>>k;++k)e.texImage2D(3553,k,g.format,d>>k,n>>k,0,g.format,g.type,null);ha();J.profile&&(g.stats.size=f(g.internalformat,g.type,d,n,!1,!1));return b};b._reglType=
"texture2d";b._texture=g;J.profile&&(b.stats=g.stats);b.destroy=function(){g.decRef()};return b},createCube:function(a,c,b,g,d,n){function k(a,c,b,g,d,n){var e,m=l.texInfo;ga.call(m);for(e=0;6>e;++e)p[e]=sa();if("number"===typeof a||!a)for(a=a|0||1,e=0;6>e;++e)L(p[e],a,a);else if("object"===typeof a)if(c)aa(p[0],a),aa(p[1],c),aa(p[2],b),aa(p[3],g),aa(p[4],d),aa(p[5],n);else if(ia(m,a),I(l,a),"faces"in a)for(a=a.faces,e=0;6>e;++e)N(p[e],l),aa(p[e],a[e]);else for(e=0;6>e;++e)aa(p[e],a);N(l,p[0]);l.mipmask=
m.genMipmaps?(p[0].width<<1)-1:p[0].mipmask;l.internalformat=p[0].internalformat;k.width=p[0].width;k.height=p[0].height;ca(l);for(e=0;6>e;++e)ka(p[e],34069+e);na(m,34067);ha();J.profile&&(l.stats.size=f(l.internalformat,l.type,k.width,k.height,m.genMipmaps,!0));k.format=xa[l.internalformat];k.type=Aa[l.type];k.mag=Ba[m.magFilter];k.min=ua[m.minFilter];k.wrapS=va[m.wrapS];k.wrapT=va[m.wrapT];for(e=0;6>e;++e)S(p[e]);return k}var l=new oa(34067);ba[l.id]=l;A.cubeCount++;var p=Array(6);k(a,c,b,g,d,n);
k.subimage=function(a,c,b,g,f){b|=0;g|=0;f|=0;var d=V();N(d,l);d.width=0;d.height=0;Z(d,c);d.width=d.width||(l.width>>f)-b;d.height=d.height||(l.height>>f)-g;ca(l);fa(d,34069+a,b,g,f);ha();W(d);return k};k.resize=function(a){a|=0;if(a!==l.width){k.width=l.width=a;k.height=l.height=a;ca(l);for(var c=0;6>c;++c)for(var b=0;l.mipmask>>b;++b)e.texImage2D(34069+c,b,l.format,a>>b,a>>b,0,l.format,l.type,null);ha();J.profile&&(l.stats.size=f(l.internalformat,l.type,k.width,k.height,!1,!0));return k}};k._reglType=
"textureCube";k._texture=l;J.profile&&(k.stats=l.stats);k.destroy=function(){l.decRef()};return k},clear:function(){for(var a=0;a<pa;++a)e.activeTexture(33984+a),e.bindTexture(3553,null),la[a]=null;k(ba).forEach(ja);A.cubeCount=0;A.textureCount=0},getTexture:function(a){return null},restore:function(){k(ba).forEach(function(a){a.texture=e.createTexture();e.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)e.texImage2D(3553,c,a.internalformat,a.width>>
c,a.height>>c,0,a.internalformat,a.type,null);else for(var b=0;6>b;++b)e.texImage2D(34069+b,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);na(a.texInfo,a.target)})}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/flatten":24,"./util/is-array-like":25,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/pool":29,"./util/to-half-float":31,"./util/values":32}],20:[function(e,h,q){h.exports=function(d,b){function a(){this.endQueryIndex=this.startQueryIndex=
-1;this.sum=0;this.stats=null}function c(c,b,g){var f=k.pop()||new a;f.startQueryIndex=c;f.endQueryIndex=b;f.sum=0;f.stats=g;l.push(f)}var g=b.ext_disjoint_timer_query;if(!g)return null;var f=[],n=[],k=[],l=[],p=[],e=[];return{beginQuery:function(a){var b=f.pop()||g.createQueryEXT();g.beginQueryEXT(35007,b);n.push(b);c(n.length-1,n.length,a)},endQuery:function(){g.endQueryEXT(35007)},pushScopeStats:c,update:function(){var a,c;a=n.length;if(0!==a){e.length=Math.max(e.length,a+1);p.length=Math.max(p.length,
a+1);p[0]=0;var b=e[0]=0;for(c=a=0;c<n.length;++c){var d=n[c];g.getQueryObjectEXT(d,34919)?(b+=g.getQueryObjectEXT(d,34918),f.push(d)):n[a++]=d;p[c+1]=b;e[c+1]=a}n.length=a;for(c=a=0;c<l.length;++c){var b=l[c],h=b.startQueryIndex,d=b.endQueryIndex;b.sum+=p[d]-p[h];h=e[h];d=e[d];d===h?(b.stats.gpuTime+=b.sum/1E6,k.push(b)):(b.startQueryIndex=h,b.endQueryIndex=d,l[a++]=b)}l.length=a}},getNumPendingQueries:function(){return n.length},clear:function(){f.push.apply(f,n);for(var a=0;a<f.length;a++)g.deleteQueryEXT(f[a]);
n.length=0;f.length=0},restore:function(){n.length=0;f.length=0}}}},{}],21:[function(e,h,q){h.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(e,h,q){function d(a){return Array.prototype.slice.call(a)}function b(a){return d(a).join("")}var a=e("./extend");h.exports=function(){function c(){var c=[],g=[];return a(function(){c.push.apply(c,d(arguments))},{def:function(){var a="v"+f++;g.push(a);0<arguments.length&&
(c.push(a,"="),c.push.apply(c,d(arguments)),c.push(";"));return a},toString:function(){return b([0<g.length?"var "+g+";":"",b(c)])}})}function g(){function b(a,c){f(a,c,"=",g.def(a,c),";")}var g=c(),f=c(),n=g.toString,k=f.toString;return a(function(){g.apply(g,d(arguments))},{def:g.def,entry:g,exit:f,save:b,set:function(a,c,f){b(a,c);g(a,c,"=",f,";")},toString:function(){return n()+k()}})}var f=0,n=[],k=[],l=c(),p={};return{global:l,link:function(a){for(var c=0;c<k.length;++c)if(k[c]===a)return n[c];
c="g"+f++;n.push(c);k.push(a);return c},block:c,proc:function(c,f){function d(){var a="a"+n.length;n.push(a);return a}var n=[];f=f||0;for(var k=0;k<f;++k)d();var k=g(),l=k.toString;return p[c]=a(k,{arg:d,toString:function(){return b(["function(",n.join(),"){",l(),"}"])}})},scope:g,cond:function(){var c=b(arguments),f=g(),n=g(),k=f.toString,l=n.toString;return a(f,{then:function(){f.apply(f,d(arguments));return this},"else":function(){n.apply(n,d(arguments));return this},toString:function(){var a=
l();a&&(a="else{"+a+"}");return b(["if(",c,"){",k(),"}",a])}})},compile:function(){var a=['"use strict";',l,"return {"];Object.keys(p).forEach(function(c){a.push('"',c,'":',p[c].toString(),",")});a.push("}");var c=b(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(c)).apply(null,k)}}}},{"./extend":23}],23:[function(e,h,q){h.exports=function(d,b){for(var a=Object.keys(b),c=0;c<a.length;++c)d[a[c]]=b[a[c]];return d}},{}],24:[function(e,h,q){function d(a,
b,f,d,k,l){for(var p=0;p<b;++p)for(var e=a[p],u=0;u<f;++u)for(var r=e[u],h=0;h<d;++h)k[l++]=r[h]}function b(a,g,f,n,k){for(var l=1,p=f+1;p<g.length;++p)l*=g[p];var e=g[f];if(4===g.length-f){var u=g[f+1],r=g[f+2];g=g[f+3];for(p=0;p<e;++p)d(a[p],u,r,g,n,k),k+=l}else for(p=0;p<e;++p)b(a[p],g,f+1,n,k),k+=l}var a=e("./pool");h.exports={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);return b},flatten:function(c,g,f,n){var k=1;if(g.length)for(var l=0;l<g.length;++l)k*=g[l];else k=0;f=n||
a.allocType(f,k);switch(g.length){case 0:break;case 1:n=g[0];for(g=0;g<n;++g)f[g]=c[g];break;case 2:n=g[0];g=g[1];for(l=k=0;l<n;++l)for(var p=c[l],e=0;e<g;++e)f[k++]=p[e];break;case 3:d(c,g[0],g[1],g[2],f,0);break;default:b(c,g,0,f,0)}return f}}},{"./pool":29}],25:[function(e,h,q){var d=e("./is-typed-array");h.exports=function(b){return Array.isArray(b)||d(b)}},{"./is-typed-array":27}],26:[function(e,h,q){var d=e("./is-typed-array");h.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&
Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||d(b.data))}},{"./is-typed-array":27}],27:[function(e,h,q){var d=e("../constants/arraytypes.json");h.exports=function(b){return Object.prototype.toString.call(b)in d}},{"../constants/arraytypes.json":4}],28:[function(e,h,q){h.exports=function(d,b){for(var a=Array(d),c=0;c<d;++c)a[c]=b(c);return a}},{}],29:[function(e,h,q){function d(a){var c,b;c=(65535<a)<<4;a>>>=c;b=(255<a)<<3;a>>>=b;c|=
b;b=(15<a)<<2;a>>>=b;c|=b;b=(3<a)<<1;return c|b|a>>>b>>1}function b(a){a:{for(var b=16;268435456>=b;b*=16)if(a<=b){a=b;break a}a=0}b=c[d(a)>>2];return 0<b.length?b.pop():new ArrayBuffer(a)}function a(a){c[d(a.byteLength)>>2].push(a)}var c=e("./loop")(8,function(){return[]});h.exports={alloc:b,free:a,allocType:function(a,c){var d=null;switch(a){case 5120:d=new Int8Array(b(c),0,c);break;case 5121:d=new Uint8Array(b(c),0,c);break;case 5122:d=new Int16Array(b(2*c),0,c);break;case 5123:d=new Uint16Array(b(2*
c),0,c);break;case 5124:d=new Int32Array(b(4*c),0,c);break;case 5125:d=new Uint32Array(b(4*c),0,c);break;case 5126:d=new Float32Array(b(4*c),0,c);break;default:return null}return d.length!==c?d.subarray(0,c):d},freeType:function(c){a(c.buffer)}}},{"./loop":28}],30:[function(e,h,q){h.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(d){return requestAnimationFrame(d)},cancel:function(d){return cancelAnimationFrame(d)}}:{next:function(d){return setTimeout(d,
16)},cancel:clearTimeout}},{}],31:[function(e,h,q){var d=e("./pool"),b=new Float32Array(1),a=new Uint32Array(b.buffer);h.exports=function(c){for(var g=d.allocType(5123,c.length),f=0;f<c.length;++f)if(isNaN(c[f]))g[f]=65535;else if(Infinity===c[f])g[f]=31744;else if(-Infinity===c[f])g[f]=64512;else{b[0]=c[f];var n=a[0],k=n>>>31<<15,l=(n<<1>>>24)-127,n=n>>13&1023;g[f]=-24>l?k:-14>l?k+(n+1024>>-14-l):15<l?k+31744:k+(l+15<<10)+n}return g}},{"./pool":29}],32:[function(e,h,q){h.exports=function(d){return Object.keys(d).map(function(b){return d[b]})}},
{}],33:[function(e,h,q){function d(a,c,b){function d(){var c=window.innerWidth,n=window.innerHeight;a!==document.body&&(n=a.getBoundingClientRect(),c=n.right-n.left,n=n.top-n.bottom);p.width=b*c;p.height=b*n;g(p.style,{width:c+"px",height:n+"px"})}var p=document.createElement("canvas");g(p.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(p);a===document.body&&(p.style.position="absolute",g(a.style,{margin:0,padding:0}));window.addEventListener("resize",d,!1);d();return{canvas:p,onDestroy:function(){window.removeEventListener("resize",
d);a.removeChild(p)}}}function b(a,c){function b(g){try{return a.getContext(g,c)}catch(d){return null}}return b("webgl")||b("experimental-webgl")||b("webgl-experimental")}function a(a){return"string"===typeof a?a.split():a}function c(a){return"string"===typeof a?document.querySelector(a):a}var g=e("./util/extend");h.exports=function(g){var n=g||{},k,l,p,e;g={};var u=[],r=[],h="undefined"===typeof window?1:window.devicePixelRatio,q=!1,v=function(a){},x=function(){};"string"===typeof n?k=document.querySelector(n):
"object"===typeof n&&("string"===typeof n.nodeName&&"function"===typeof n.appendChild&&"function"===typeof n.getBoundingClientRect?k=n:"function"===typeof n.drawArrays||"function"===typeof n.drawElements?(e=n,p=e.canvas):("gl"in n?e=n.gl:"canvas"in n?p=c(n.canvas):"container"in n&&(l=c(n.container)),"attributes"in n&&(g=n.attributes),"extensions"in n&&(u=a(n.extensions)),"optionalExtensions"in n&&(r=a(n.optionalExtensions)),"onDone"in n&&(v=n.onDone),"profile"in n&&(q=!!n.profile),"pixelRatio"in n&&
(h=+n.pixelRatio)));k&&("canvas"===k.nodeName.toLowerCase()?p=k:l=k);if(!e){if(!p){k=d(l||document.body,v,h);if(!k)return null;p=k.canvas;x=k.onDestroy}e=b(p,g)}return e?{gl:e,canvas:p,container:l,extensions:u,optionalExtensions:r,pixelRatio:h,profile:q,onDone:v,onDestroy:x}:(x(),v("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/extend":23}],34:[function(e,h,q){var d=e("element-size");h.exports=function(a,c,g){function f(){var c=f.parent||
a.parentNode;if("function"===typeof c)var g=c(b)||b,c=g[0],g=g[1];else c&&c!==document.body?(g=d(c),c=g[0]|0,g=g[1]|0):(c=window.innerWidth,g=window.innerHeight);n?(a.setAttribute("width",c*f.scale+"px"),a.setAttribute("height",g*f.scale+"px")):(a.width=c*f.scale,a.height=g*f.scale);a.style.width=c+"px";a.style.height=g+"px";return f}var n="SVG"===a.nodeName.toUpperCase();a.style.position=a.style.position||"absolute";a.style.top=0;a.style.left=0;f.scale=parseFloat(g||1);f.parent=c;return f()};var b=
new Float32Array(2)},{"element-size":38}],35:[function(e,h,q){var d=e("orbit-camera"),b=e("scroll-speed"),a=e("mouse-position"),c=e("mouse-pressed"),g=e("key-pressed");h.exports=function(f,n){n=n||{};n.pan=!1!==n.pan;n.scale=!1!==n.scale;n.rotate=!1!==n.rotate;var k=b(f,n.scale),l=c(f,n.rotate),p=a(f),e=d([0,10,30],[0,0,0],[0,1,0]);e.tick=function(){var a=g("<control>")||g("<alt>"),c=g("<shift>"),b=f.height,d=f.width;n.rotate&&l.left&&!a&&!c&&e.rotate([p.x/d-.5,p.y/b-.5],[p.prevX/d-.5,p.prevY/b-.5]);
(n.pan&&l.right||l.left&&a&&!c)&&e.pan([1*(p.x-p.prevX)/d,1*(p.y-p.prevY)/b]);n.scale&&k[1]&&(e.distance*=Math.exp(k[1]/b));if(n.scale&&(l.middle||l.left&&!a&&c)){a=p.y-p.prevY;if(!a)return;e.distance*=Math.exp(a/b)}k.flush();p.flush()};return e}},{"key-pressed":107,"mouse-position":36,"mouse-pressed":37,"orbit-camera":108,"scroll-speed":111}],36:[function(e,h,q){var d=e("events/");h.exports=function(b,a){var c=new d;c.x=0;c.y=0;c.prevX=0;c.prevY=0;c.flush=function(){this.prevX=this.x;this.prevY=
this.y};if("undefined"===typeof window)return c;a=a||b||window;b=b||document.body;a.addEventListener("mousemove",b===document.body||b===window?function(a){c.prevX=c.x;c.prevY=c.y;c.x=a.clientX;c.y=a.clientY;c.emit("move",a)}:function(a){c.prevX=c.x;c.prevY=c.y;var f=b.getBoundingClientRect();c.x=a.clientX-f.left;c.y=a.clientY-f.top;c.emit("move",a)},!1);return c}},{"events/":39}],37:[function(e,h,q){var d=e("events/"),b=["left","middle","right"];h.exports=function(a,c){function g(a){n.right=!1;n[b[a.button]]=
!0;n.emit("down",a);if(c){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function f(a){n.right=!1;n[b[a.button]]=!1;n.emit("up",a);c&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}var n=new d;n.left=!1;n.right=!1;n.middle=!1;"undefined"!==typeof window&&(a=a||window,a.addEventListener("mousedown",g,!1),a.addEventListener("mouseup",f,!1),c&&a.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return n}},{"events/":39}],
38:[function(e,h,q){function d(b){return parseFloat(b)||0}h.exports=function(b){if(b===window||b===document.body)return[window.innerWidth,window.innerHeight];if(!b.parentNode){var a=!0;document.body.appendChild(b)}var c=b.getBoundingClientRect(),g=getComputedStyle(b),f=(c.height|0)+d(g.getPropertyValue("margin-top"))+d(g.getPropertyValue("margin-bottom")),c=(c.width|0)+d(g.getPropertyValue("margin-left"))+d(g.getPropertyValue("margin-right"));a&&document.body.removeChild(b);return[c,f]}},{}],39:[function(e,
h,q){function d(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function b(a){return"function"===typeof a}function a(a){return"object"===typeof a&&null!==a}h.exports=d;d.EventEmitter=d;d.prototype._events=void 0;d.prototype._maxListeners=void 0;d.defaultMaxListeners=10;d.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};d.prototype.emit=function(c){var g,f,d,k;this._events||
(this._events={});if("error"===c&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){g=arguments[1];if(g instanceof Error)throw g;f=Error('Uncaught, unspecified "error" event. ('+g+")");f.context=g;throw f;}f=this._events[c];if(void 0===f)return!1;if(b(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:g=Array.prototype.slice.call(arguments,1),f.apply(this,g)}else if(a(f))for(g=
Array.prototype.slice.call(arguments,1),k=f.slice(),f=k.length,d=0;d<f;d++)k[d].apply(this,g);return!0};d.prototype.addListener=function(c,g){var f;if(!b(g))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",c,b(g.listener)?g.listener:g);this._events[c]?a(this._events[c])?this._events[c].push(g):this._events[c]=[this._events[c],g]:this._events[c]=g;a(this._events[c])&&!this._events[c].warned&&(f=void 0!==this._maxListeners?
this._maxListeners:d.defaultMaxListeners)&&0<f&&this._events[c].length>f&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),"function"===typeof console.trace&&console.trace());return this};d.prototype.on=d.prototype.addListener;d.prototype.once=function(a,g){function f(){this.removeListener(a,f);d||(d=!0,g.apply(this,arguments))}if(!b(g))throw TypeError("listener must be a function");
var d=!1;f.listener=g;this.on(a,f);return this};d.prototype.removeListener=function(c,g){var f,d,k;if(!b(g))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;f=this._events[c];k=f.length;d=-1;if(f===g||b(f.listener)&&f.listener===g)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,g);else if(a(f)){for(;0<k--;)if(f[k]===g||f[k].listener&&f[k].listener===g){d=k;break}if(0>d)return this;1===f.length?(f.length=0,delete this._events[c]):
f.splice(d,1);this._events.removeListener&&this.emit("removeListener",c,g)}return this};d.prototype.removeAllListeners=function(a){var g;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(g in this._events)"removeListener"!==g&&this.removeAllListeners(g);this.removeAllListeners("removeListener");this._events={};return this}g=this._events[a];if(b(g))this.removeListener(a,
g);else if(g)for(;g.length;)this.removeListener(a,g[g.length-1]);delete this._events[a];return this};d.prototype.listeners=function(a){return this._events&&this._events[a]?b(this._events[a])?[this._events[a]]:this._events[a].slice():[]};d.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(b(a))return 1;if(a)return a.length}return 0};d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],40:[function(e,h,q){h.exports=function(d,b){var a=b[0],c=b[1],g=b[2],f=b[3],n=b[4],
k=b[5],l=b[6],e=b[7],m=b[8],u=b[9],r=b[10],h=b[11],q=b[12],v=b[13],x=b[14],w=b[15];d[0]=k*(r*w-h*x)-u*(l*w-e*x)+v*(l*h-e*r);d[1]=-(c*(r*w-h*x)-u*(g*w-f*x)+v*(g*h-f*r));d[2]=c*(l*w-e*x)-k*(g*w-f*x)+v*(g*e-f*l);d[3]=-(c*(l*h-e*r)-k*(g*h-f*r)+u*(g*e-f*l));d[4]=-(n*(r*w-h*x)-m*(l*w-e*x)+q*(l*h-e*r));d[5]=a*(r*w-h*x)-m*(g*w-f*x)+q*(g*h-f*r);d[6]=-(a*(l*w-e*x)-n*(g*w-f*x)+q*(g*e-f*l));d[7]=a*(l*h-e*r)-n*(g*h-f*r)+m*(g*e-f*l);d[8]=n*(u*w-h*v)-m*(k*w-e*v)+q*(k*h-e*u);d[9]=-(a*(u*w-h*v)-m*(c*w-f*v)+q*(c*h-
f*u));d[10]=a*(k*w-e*v)-n*(c*w-f*v)+q*(c*e-f*k);d[11]=-(a*(k*h-e*u)-n*(c*h-f*u)+m*(c*e-f*k));d[12]=-(n*(u*x-r*v)-m*(k*x-l*v)+q*(k*r-l*u));d[13]=a*(u*x-r*v)-m*(c*x-g*v)+q*(c*r-g*u);d[14]=-(a*(k*x-l*v)-n*(c*x-g*v)+q*(c*l-g*k));d[15]=a*(k*r-l*u)-n*(c*r-g*u)+m*(c*l-g*k);return d}},{}],41:[function(e,h,q){h.exports=function(d){var b=new Float32Array(16);b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=d[6];b[7]=d[7];b[8]=d[8];b[9]=d[9];b[10]=d[10];b[11]=d[11];b[12]=d[12];b[13]=d[13];b[14]=
d[14];b[15]=d[15];return b}},{}],42:[function(e,h,q){h.exports=function(d,b){d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=b[5];d[6]=b[6];d[7]=b[7];d[8]=b[8];d[9]=b[9];d[10]=b[10];d[11]=b[11];d[12]=b[12];d[13]=b[13];d[14]=b[14];d[15]=b[15];return d}},{}],43:[function(e,h,q){h.exports=function(){var d=new Float32Array(16);d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],44:[function(e,h,q){h.exports=function(d){var b=
d[0],a=d[1],c=d[2],g=d[3],f=d[4],n=d[5],k=d[6],l=d[7],e=d[8],m=d[9],u=d[10],r=d[11],h=d[12],q=d[13],v=d[14];d=d[15];return(b*n-a*f)*(u*d-r*v)-(b*k-c*f)*(m*d-r*q)+(b*l-g*f)*(m*v-u*q)+(a*k-c*n)*(e*d-r*h)-(a*l-g*n)*(e*v-u*h)+(c*l-g*k)*(e*q-m*h)}},{}],45:[function(e,h,q){h.exports=function(d,b){var a=b[0],c=b[1],g=b[2],f=b[3],n=a+a,k=c+c,l=g+g,a=a*n,e=c*n,c=c*k,m=g*n,u=g*k,g=g*l,n=f*n,k=f*k,f=f*l;d[0]=1-c-g;d[1]=e+f;d[2]=m-k;d[3]=0;d[4]=e-f;d[5]=1-a-g;d[6]=u+n;d[7]=0;d[8]=m+k;d[9]=u-n;d[10]=1-a-c;d[11]=
0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],46:[function(e,h,q){h.exports=function(d,b,a){var c=b[0],g=b[1],f=b[2],n=b[3],k=c+c,l=g+g,e=f+f;b=c*k;var m=c*l,c=c*e,u=g*l,g=g*e,f=f*e,k=n*k,l=n*l,n=n*e;d[0]=1-(u+f);d[1]=m+n;d[2]=c-l;d[3]=0;d[4]=m-n;d[5]=1-(b+f);d[6]=g+k;d[7]=0;d[8]=c+l;d[9]=g-k;d[10]=1-(b+u);d[11]=0;d[12]=a[0];d[13]=a[1];d[14]=a[2];d[15]=1;return d}},{}],47:[function(e,h,q){h.exports=function(d,b,a,c,g,f,n){var k=1/(a-b),l=1/(g-c),e=1/(f-n);d[0]=2*f*k;d[1]=0;d[2]=0;d[3]=0;d[4]=0;
d[5]=2*f*l;d[6]=0;d[7]=0;d[8]=(a+b)*k;d[9]=(g+c)*l;d[10]=(n+f)*e;d[11]=-1;d[12]=0;d[13]=0;d[14]=n*f*2*e;d[15]=0;return d}},{}],48:[function(e,h,q){h.exports=function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],49:[function(e,h,q){h.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),
multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotationTranslation:e("./fromRotationTranslation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":40,"./clone":41,"./copy":42,"./create":43,"./determinant":44,"./fromQuat":45,
"./fromRotationTranslation":46,"./frustum":47,"./identity":48,"./invert":50,"./lookAt":51,"./multiply":52,"./ortho":53,"./perspective":54,"./perspectiveFromFieldOfView":55,"./rotate":56,"./rotateX":57,"./rotateY":58,"./rotateZ":59,"./scale":60,"./str":61,"./translate":62,"./transpose":63}],50:[function(e,h,q){h.exports=function(d,b){var a=b[0],c=b[1],g=b[2],f=b[3],n=b[4],k=b[5],l=b[6],e=b[7],m=b[8],u=b[9],r=b[10],h=b[11],q=b[12],v=b[13],x=b[14],w=b[15],y=a*k-c*n,A=a*l-g*n,z=a*e-f*n,B=c*l-g*k,D=c*
e-f*k,E=g*e-f*l,M=m*v-u*q,K=m*x-r*q,F=m*w-h*q,J=u*x-r*v,C=u*w-h*v,N=r*w-h*x,I=y*N-A*C+z*J+B*F-D*K+E*M;if(!I)return null;I=1/I;d[0]=(k*N-l*C+e*J)*I;d[1]=(g*C-c*N-f*J)*I;d[2]=(v*E-x*D+w*B)*I;d[3]=(r*D-u*E-h*B)*I;d[4]=(l*F-n*N-e*K)*I;d[5]=(a*N-g*F+f*K)*I;d[6]=(x*z-q*E-w*A)*I;d[7]=(m*E-r*z+h*A)*I;d[8]=(n*C-k*F+e*M)*I;d[9]=(c*F-a*C-f*M)*I;d[10]=(q*D-v*z+w*y)*I;d[11]=(u*z-m*D-h*y)*I;d[12]=(k*K-n*J-l*M)*I;d[13]=(a*J-c*K+g*M)*I;d[14]=(v*A-q*B-x*y)*I;d[15]=(m*B-u*A+r*y)*I;return d}},{}],51:[function(e,h,q){var d=
e("./identity");h.exports=function(b,a,c,g){var f,n,k,l,e,m,u,h,t=a[0],q=a[1];a=a[2];k=g[0];l=g[1];n=g[2];u=c[0];g=c[1];f=c[2];if(1E-6>Math.abs(t-u)&&1E-6>Math.abs(q-g)&&1E-6>Math.abs(a-f))return d(b);c=t-u;g=q-g;u=a-f;h=1/Math.sqrt(c*c+g*g+u*u);c*=h;g*=h;u*=h;f=l*u-n*g;n=n*c-k*u;k=k*g-l*c;(h=Math.sqrt(f*f+n*n+k*k))?(h=1/h,f*=h,n*=h,k*=h):k=n=f=0;l=g*k-u*n;e=u*f-c*k;m=c*n-g*f;(h=Math.sqrt(l*l+e*e+m*m))?(h=1/h,l*=h,e*=h,m*=h):m=e=l=0;b[0]=f;b[1]=l;b[2]=c;b[3]=0;b[4]=n;b[5]=e;b[6]=g;b[7]=0;b[8]=k;b[9]=
m;b[10]=u;b[11]=0;b[12]=-(f*t+n*q+k*a);b[13]=-(l*t+e*q+m*a);b[14]=-(c*t+g*q+u*a);b[15]=1;return b}},{"./identity":48}],52:[function(e,h,q){h.exports=function(d,b,a){var c=b[0],g=b[1],f=b[2],n=b[3],k=b[4],l=b[5],e=b[6],m=b[7],u=b[8],h=b[9],t=b[10],q=b[11],v=b[12],x=b[13],w=b[14];b=b[15];var y=a[0],A=a[1],z=a[2],B=a[3];d[0]=y*c+A*k+z*u+B*v;d[1]=y*g+A*l+z*h+B*x;d[2]=y*f+A*e+z*t+B*w;d[3]=y*n+A*m+z*q+B*b;y=a[4];A=a[5];z=a[6];B=a[7];d[4]=y*c+A*k+z*u+B*v;d[5]=y*g+A*l+z*h+B*x;d[6]=y*f+A*e+z*t+B*w;d[7]=y*
n+A*m+z*q+B*b;y=a[8];A=a[9];z=a[10];B=a[11];d[8]=y*c+A*k+z*u+B*v;d[9]=y*g+A*l+z*h+B*x;d[10]=y*f+A*e+z*t+B*w;d[11]=y*n+A*m+z*q+B*b;y=a[12];A=a[13];z=a[14];B=a[15];d[12]=y*c+A*k+z*u+B*v;d[13]=y*g+A*l+z*h+B*x;d[14]=y*f+A*e+z*t+B*w;d[15]=y*n+A*m+z*q+B*b;return d}},{}],53:[function(e,h,q){h.exports=function(d,b,a,c,g,f,n){var k=1/(b-a),l=1/(c-g),e=1/(f-n);d[0]=-2*k;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=-2*l;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=2*e;d[11]=0;d[12]=(b+a)*k;d[13]=(g+c)*l;d[14]=(n+f)*e;d[15]=1;return d}},
{}],54:[function(e,h,q){h.exports=function(d,b,a,c,g){b=1/Math.tan(b/2);var f=1/(c-g);d[0]=b/a;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=b;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=(g+c)*f;d[11]=-1;d[12]=0;d[13]=0;d[14]=2*g*c*f;d[15]=0;return d}},{}],55:[function(e,h,q){h.exports=function(d,b,a,c){var g=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),n=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var k=2/(n+b),l=2/(g+f);d[0]=k;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=
l;d[6]=0;d[7]=0;d[8]=-((n-b)*k*.5);d[9]=(g-f)*l*.5;d[10]=c/(a-c);d[11]=-1;d[12]=0;d[13]=0;d[14]=c*a/(a-c);d[15]=0;return d}},{}],56:[function(e,h,q){h.exports=function(d,b,a,c){var g=c[0],f=c[1];c=c[2];var n=Math.sqrt(g*g+f*f+c*c),k,l,e,m,h,r,t,q,v,x,w,y,A,z,B,D,E,M,K,F;if(1E-6>Math.abs(n))return null;n=1/n;g*=n;f*=n;c*=n;k=Math.sin(a);l=Math.cos(a);e=1-l;a=b[0];n=b[1];m=b[2];h=b[3];r=b[4];t=b[5];q=b[6];v=b[7];x=b[8];w=b[9];y=b[10];A=b[11];z=g*g*e+l;B=f*g*e+c*k;D=c*g*e-f*k;E=g*f*e-c*k;M=f*f*e+l;K=
c*f*e+g*k;F=g*c*e+f*k;g=f*c*e-g*k;f=c*c*e+l;d[0]=a*z+r*B+x*D;d[1]=n*z+t*B+w*D;d[2]=m*z+q*B+y*D;d[3]=h*z+v*B+A*D;d[4]=a*E+r*M+x*K;d[5]=n*E+t*M+w*K;d[6]=m*E+q*M+y*K;d[7]=h*E+v*M+A*K;d[8]=a*F+r*g+x*f;d[9]=n*F+t*g+w*f;d[10]=m*F+q*g+y*f;d[11]=h*F+v*g+A*f;b!==d&&(d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);return d}},{}],57:[function(e,h,q){h.exports=function(d,b,a){var c=Math.sin(a);a=Math.cos(a);var g=b[4],f=b[5],n=b[6],k=b[7],l=b[8],e=b[9],m=b[10],h=b[11];b!==d&&(d[0]=b[0],d[1]=b[1],d[2]=b[2],d[3]=
b[3],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[4]=g*a+l*c;d[5]=f*a+e*c;d[6]=n*a+m*c;d[7]=k*a+h*c;d[8]=l*a-g*c;d[9]=e*a-f*c;d[10]=m*a-n*c;d[11]=h*a-k*c;return d}},{}],58:[function(e,h,q){h.exports=function(d,b,a){var c=Math.sin(a);a=Math.cos(a);var g=b[0],f=b[1],n=b[2],k=b[3],l=b[8],e=b[9],m=b[10],h=b[11];b!==d&&(d[4]=b[4],d[5]=b[5],d[6]=b[6],d[7]=b[7],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[0]=g*a-l*c;d[1]=f*a-e*c;d[2]=n*a-m*c;d[3]=k*a-h*c;d[8]=g*c+l*a;d[9]=f*c+e*a;d[10]=n*c+m*
a;d[11]=k*c+h*a;return d}},{}],59:[function(e,h,q){h.exports=function(d,b,a){var c=Math.sin(a);a=Math.cos(a);var g=b[0],f=b[1],n=b[2],k=b[3],l=b[4],e=b[5],m=b[6],h=b[7];b!==d&&(d[8]=b[8],d[9]=b[9],d[10]=b[10],d[11]=b[11],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[0]=g*a+l*c;d[1]=f*a+e*c;d[2]=n*a+m*c;d[3]=k*a+h*c;d[4]=l*a-g*c;d[5]=e*a-f*c;d[6]=m*a-n*c;d[7]=h*a-k*c;return d}},{}],60:[function(e,h,q){h.exports=function(d,b,a){var c=a[0],g=a[1];a=a[2];d[0]=b[0]*c;d[1]=b[1]*c;d[2]=b[2]*c;d[3]=
b[3]*c;d[4]=b[4]*g;d[5]=b[5]*g;d[6]=b[6]*g;d[7]=b[7]*g;d[8]=b[8]*a;d[9]=b[9]*a;d[10]=b[10]*a;d[11]=b[11]*a;d[12]=b[12];d[13]=b[13];d[14]=b[14];d[15]=b[15];return d}},{}],61:[function(e,h,q){h.exports=function(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"}},{}],62:[function(e,h,q){h.exports=function(d,b,a){var c=a[0],g=a[1];a=a[2];var f,n,k,l,e,m,h,r,t,q,v,x;b===d?
(d[12]=b[0]*c+b[4]*g+b[8]*a+b[12],d[13]=b[1]*c+b[5]*g+b[9]*a+b[13],d[14]=b[2]*c+b[6]*g+b[10]*a+b[14],d[15]=b[3]*c+b[7]*g+b[11]*a+b[15]):(f=b[0],n=b[1],k=b[2],l=b[3],e=b[4],m=b[5],h=b[6],r=b[7],t=b[8],q=b[9],v=b[10],x=b[11],d[0]=f,d[1]=n,d[2]=k,d[3]=l,d[4]=e,d[5]=m,d[6]=h,d[7]=r,d[8]=t,d[9]=q,d[10]=v,d[11]=x,d[12]=f*c+e*g+t*a+b[12],d[13]=n*c+m*g+q*a+b[13],d[14]=k*c+h*g+v*a+b[14],d[15]=l*c+r*g+x*a+b[15]);return d}},{}],63:[function(e,h,q){h.exports=function(d,b){if(d===b){var a=b[1],c=b[2],g=b[3],f=
b[6],n=b[7],k=b[11];d[1]=b[4];d[2]=b[8];d[3]=b[12];d[4]=a;d[6]=b[9];d[7]=b[13];d[8]=c;d[9]=f;d[11]=b[14];d[12]=g;d[13]=n;d[14]=k}else d[0]=b[0],d[1]=b[4],d[2]=b[8],d[3]=b[12],d[4]=b[1],d[5]=b[5],d[6]=b[9],d[7]=b[13],d[8]=b[2],d[9]=b[6],d[10]=b[10],d[11]=b[14],d[12]=b[3],d[13]=b[7],d[14]=b[11],d[15]=b[15];return d}},{}],64:[function(e,h,q){q.glMatrix=e("./gl-matrix/common.js");q.mat2=e("./gl-matrix/mat2.js");q.mat2d=e("./gl-matrix/mat2d.js");q.mat3=e("./gl-matrix/mat3.js");q.mat4=e("./gl-matrix/mat4.js");
q.quat=e("./gl-matrix/quat.js");q.vec2=e("./gl-matrix/vec2.js");q.vec3=e("./gl-matrix/vec3.js");q.vec4=e("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":65,"./gl-matrix/mat2.js":66,"./gl-matrix/mat2d.js":67,"./gl-matrix/mat3.js":68,"./gl-matrix/mat4.js":69,"./gl-matrix/quat.js":70,"./gl-matrix/vec2.js":71,"./gl-matrix/vec3.js":72,"./gl-matrix/vec4.js":73}],65:[function(e,h,q){var d={EPSILON:1E-6};d.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;d.RANDOM=Math.random;d.ENABLE_SIMD=
!1;d.SIMD_AVAILABLE=d.ARRAY_TYPE===Float32Array&&"SIMD"in this;d.USE_SIMD=d.ENABLE_SIMD&&d.SIMD_AVAILABLE;d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};var b=Math.PI/180;d.toRadian=function(a){return a*b};d.equals=function(a,c){return Math.abs(a-c)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};h.exports=d},{}],66:[function(e,h,q){var d=e("./common.js");e={create:function(){var b=new d.ARRAY_TYPE(4);b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},clone:function(b){var a=new d.ARRAY_TYPE(4);a[0]=b[0];a[1]=
b[1];a[2]=b[2];a[3]=b[3];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},fromValues:function(b,a,c,g){var f=new d.ARRAY_TYPE(4);f[0]=b;f[1]=a;f[2]=c;f[3]=g;return f},set:function(b,a,c,g,f){b[0]=a;b[1]=c;b[2]=g;b[3]=f;return b},transpose:function(b,a){if(b===a){var c=a[1];b[1]=a[2];b[2]=c}else b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3];return b},invert:function(b,a){var c=a[0],g=a[1],f=a[2],d=a[3],k=c*d-f*g;if(!k)return null;
k=1/k;b[0]=d*k;b[1]=-g*k;b[2]=-f*k;b[3]=c*k;return b},adjoint:function(b,a){var c=a[0];b[0]=a[3];b[1]=-a[1];b[2]=-a[2];b[3]=c;return b},determinant:function(b){return b[0]*b[3]-b[2]*b[1]},multiply:function(b,a,c){var g=a[0],f=a[1],d=a[2];a=a[3];var k=c[0],l=c[1],e=c[2];c=c[3];b[0]=g*k+d*l;b[1]=f*k+a*l;b[2]=g*e+d*c;b[3]=f*e+a*c;return b}};e.mul=e.multiply;e.rotate=function(b,a,c){var g=a[0],f=a[1],d=a[2];a=a[3];var k=Math.sin(c);c=Math.cos(c);b[0]=g*c+d*k;b[1]=f*c+a*k;b[2]=g*-k+d*c;b[3]=f*-k+a*c;return b};
e.scale=function(b,a,c){var g=a[1],f=a[2],d=a[3],k=c[0];c=c[1];b[0]=a[0]*k;b[1]=g*k;b[2]=f*c;b[3]=d*c;return b};e.fromRotation=function(b,a){var c=Math.sin(a),g=Math.cos(a);b[0]=g;b[1]=c;b[2]=-c;b[3]=g;return b};e.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];return b};e.str=function(b){return"mat2("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};e.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2))};e.LDU=function(b,a,c,g){b[2]=g[2]/g[0];
c[0]=g[0];c[1]=g[1];c[3]=g[3]-b[2]*c[1];return[b,a,c]};e.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];return b};e.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];return b};e.sub=e.subtract;e.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};e.equals=function(b,a){var c=b[0],g=b[1],f=b[2],n=b[3],k=a[0],l=a[1],e=a[2],m=a[3];return Math.abs(c-k)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(g-
l)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(f-e)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(e))&&Math.abs(n-m)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))};e.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;return b};e.multiplyScalarAndAdd=function(b,a,c,g){b[0]=a[0]+c[0]*g;b[1]=a[1]+c[1]*g;b[2]=a[2]+c[2]*g;b[3]=a[3]+c[3]*g;return b};h.exports=e},{"./common.js":65}],67:[function(e,h,q){var d=e("./common.js");e={create:function(){var b=new d.ARRAY_TYPE(6);
b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var a=new d.ARRAY_TYPE(6);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},fromValues:function(b,a,c,g,f,n){var k=new d.ARRAY_TYPE(6);k[0]=b;k[1]=a;k[2]=c;k[3]=g;k[4]=f;k[5]=n;return k},set:function(b,a,c,g,f,d,k){b[0]=a;b[1]=c;b[2]=g;b[3]=f;b[4]=d;
b[5]=k;return b},invert:function(b,a){var c=a[0],g=a[1],f=a[2],d=a[3],k=a[4],l=a[5],e=c*d-g*f;if(!e)return null;e=1/e;b[0]=d*e;b[1]=-g*e;b[2]=-f*e;b[3]=c*e;b[4]=(f*l-d*k)*e;b[5]=(g*k-c*l)*e;return b},determinant:function(b){return b[0]*b[3]-b[1]*b[2]},multiply:function(b,a,c){var g=a[0],f=a[1],d=a[2],k=a[3],l=a[4];a=a[5];var e=c[0],m=c[1],h=c[2],r=c[3],t=c[4];c=c[5];b[0]=g*e+d*m;b[1]=f*e+k*m;b[2]=g*h+d*r;b[3]=f*h+k*r;b[4]=g*t+d*c+l;b[5]=f*t+k*c+a;return b}};e.mul=e.multiply;e.rotate=function(b,a,
c){var g=a[0],f=a[1],d=a[2],k=a[3],l=a[4];a=a[5];var e=Math.sin(c);c=Math.cos(c);b[0]=g*c+d*e;b[1]=f*c+k*e;b[2]=g*-e+d*c;b[3]=f*-e+k*c;b[4]=l;b[5]=a;return b};e.scale=function(b,a,c){var g=a[1],f=a[2],d=a[3],k=a[4],l=a[5],e=c[0];c=c[1];b[0]=a[0]*e;b[1]=g*e;b[2]=f*c;b[3]=d*c;b[4]=k;b[5]=l;return b};e.translate=function(b,a,c){var g=a[0],f=a[1],d=a[2],k=a[3],l=a[4];a=a[5];var e=c[0];c=c[1];b[0]=g;b[1]=f;b[2]=d;b[3]=k;b[4]=g*e+d*c+l;b[5]=f*e+k*c+a;return b};e.fromRotation=function(b,a){var c=Math.sin(a),
g=Math.cos(a);b[0]=g;b[1]=c;b[2]=-c;b[3]=g;b[4]=0;b[5]=0;return b};e.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];b[4]=0;b[5]=0;return b};e.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=a[0];b[5]=a[1];return b};e.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};e.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+1)};e.add=function(b,a,c){b[0]=
a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];return b};e.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];return b};e.sub=e.subtract;e.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;return b};e.multiplyScalarAndAdd=function(b,a,c,g){b[0]=a[0]+c[0]*g;b[1]=a[1]+c[1]*g;b[2]=a[2]+c[2]*g;b[3]=a[3]+c[3]*g;b[4]=a[4]+c[4]*g;b[5]=a[5]+c[5]*g;return b};
e.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]};e.equals=function(b,a){var c=b[0],g=b[1],f=b[2],n=b[3],k=b[4],l=b[5],e=a[0],m=a[1],h=a[2],r=a[3],t=a[4],q=a[5];return Math.abs(c-e)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(g-m)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(f-h)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(n-r)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(k-t)<=d.EPSILON*
Math.max(1,Math.abs(k),Math.abs(t))&&Math.abs(l-q)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(q))};h.exports=e},{"./common.js":65}],68:[function(e,h,q){var d=e("./common.js");e={create:function(){var b=new d.ARRAY_TYPE(9);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},fromMat4:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},clone:function(b){var a=new d.ARRAY_TYPE(9);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];
a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},fromValues:function(b,a,c,g,f,n,k,l,e){var m=new d.ARRAY_TYPE(9);m[0]=b;m[1]=a;m[2]=c;m[3]=g;m[4]=f;m[5]=n;m[6]=k;m[7]=l;m[8]=e;return m},set:function(b,a,c,g,f,d,k,l,e,m){b[0]=a;b[1]=c;b[2]=g;b[3]=f;b[4]=d;b[5]=k;b[6]=l;b[7]=e;b[8]=m;return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;
b[8]=1;return b},transpose:function(b,a){if(b===a){var c=a[1],g=a[2],f=a[5];b[1]=a[3];b[2]=a[6];b[3]=c;b[5]=a[7];b[6]=g;b[7]=f}else b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8];return b},invert:function(b,a){var c=a[0],g=a[1],f=a[2],d=a[3],k=a[4],l=a[5],e=a[6],m=a[7],h=a[8],r=h*k-l*m,t=-h*d+l*e,q=m*d-k*e,v=c*r+g*t+f*q;if(!v)return null;v=1/v;b[0]=r*v;b[1]=(-h*g+f*m)*v;b[2]=(l*g-f*k)*v;b[3]=t*v;b[4]=(h*c-f*e)*v;b[5]=(-l*c+f*d)*v;b[6]=q*v;b[7]=(-m*c+g*e)*
v;b[8]=(k*c-g*d)*v;return b},adjoint:function(b,a){var c=a[0],g=a[1],f=a[2],d=a[3],k=a[4],l=a[5],e=a[6],m=a[7],h=a[8];b[0]=k*h-l*m;b[1]=f*m-g*h;b[2]=g*l-f*k;b[3]=l*e-d*h;b[4]=c*h-f*e;b[5]=f*d-c*l;b[6]=d*m-k*e;b[7]=g*e-c*m;b[8]=c*k-g*d;return b},determinant:function(b){var a=b[3],c=b[4],g=b[5],f=b[6],d=b[7],k=b[8];return b[0]*(k*c-g*d)+b[1]*(-k*a+g*f)+b[2]*(d*a-c*f)},multiply:function(b,a,c){var g=a[0],f=a[1],d=a[2],k=a[3],l=a[4],e=a[5],m=a[6],h=a[7];a=a[8];var r=c[0],t=c[1],q=c[2],v=c[3],x=c[4],w=
c[5],y=c[6],A=c[7];c=c[8];b[0]=r*g+t*k+q*m;b[1]=r*f+t*l+q*h;b[2]=r*d+t*e+q*a;b[3]=v*g+x*k+w*m;b[4]=v*f+x*l+w*h;b[5]=v*d+x*e+w*a;b[6]=y*g+A*k+c*m;b[7]=y*f+A*l+c*h;b[8]=y*d+A*e+c*a;return b}};e.mul=e.multiply;e.translate=function(b,a,c){var g=a[0],f=a[1],d=a[2],k=a[3],l=a[4],e=a[5],m=a[6],h=a[7];a=a[8];var r=c[0];c=c[1];b[0]=g;b[1]=f;b[2]=d;b[3]=k;b[4]=l;b[5]=e;b[6]=r*g+c*k+m;b[7]=r*f+c*l+h;b[8]=r*d+c*e+a;return b};e.rotate=function(b,a,c){var g=a[0],f=a[1],d=a[2],k=a[3],l=a[4],e=a[5],m=a[6],h=a[7];
a=a[8];var r=Math.sin(c);c=Math.cos(c);b[0]=c*g+r*k;b[1]=c*f+r*l;b[2]=c*d+r*e;b[3]=c*k-r*g;b[4]=c*l-r*f;b[5]=c*e-r*d;b[6]=m;b[7]=h;b[8]=a;return b};e.scale=function(b,a,c){var g=c[0];c=c[1];b[0]=g*a[0];b[1]=g*a[1];b[2]=g*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};e.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;return b};e.fromRotation=function(b,a){var c=Math.sin(a),g=Math.cos(a);b[0]=g;b[1]=c;b[2]=0;b[3]=-c;
b[4]=g;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};e.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};e.fromMat2d=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=0;b[3]=a[2];b[4]=a[3];b[5]=0;b[6]=a[4];b[7]=a[5];b[8]=1;return b};e.fromQuat=function(b,a){var c=a[0],g=a[1],f=a[2],d=a[3],k=c+c,l=g+g,e=f+f,c=c*k,m=g*k,g=g*l,h=f*k,r=f*l,f=f*e,k=d*k,l=d*l,d=d*e;b[0]=1-g-f;b[3]=m-d;b[6]=h+l;b[1]=m+d;b[4]=1-c-f;b[7]=r-k;b[2]=h-l;b[5]=r+k;b[8]=1-c-g;return b};e.normalFromMat4=
function(b,a){var c=a[0],g=a[1],f=a[2],d=a[3],k=a[4],l=a[5],e=a[6],m=a[7],h=a[8],r=a[9],t=a[10],q=a[11],v=a[12],x=a[13],w=a[14],y=a[15],A=c*l-g*k,z=c*e-f*k,B=c*m-d*k,D=g*e-f*l,E=g*m-d*l,M=f*m-d*e,K=h*x-r*v,F=h*w-t*v,h=h*y-q*v,J=r*w-t*x,r=r*y-q*x,t=t*y-q*w,q=A*t-z*r+B*J+D*h-E*F+M*K;if(!q)return null;q=1/q;b[0]=(l*t-e*r+m*J)*q;b[1]=(e*h-k*t-m*F)*q;b[2]=(k*r-l*h+m*K)*q;b[3]=(f*r-g*t-d*J)*q;b[4]=(c*t-f*h+d*F)*q;b[5]=(g*h-c*r-d*K)*q;b[6]=(x*M-w*E+y*D)*q;b[7]=(w*B-v*M-y*z)*q;b[8]=(v*E-x*B+y*A)*q;return b};
e.str=function(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"};e.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2))};e.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];return b};e.subtract=function(b,
a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];return b};e.sub=e.subtract;e.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;return b};e.multiplyScalarAndAdd=function(b,a,c,g){b[0]=a[0]+c[0]*g;b[1]=a[1]+c[1]*g;b[2]=a[2]+c[2]*g;b[3]=a[3]+c[3]*g;b[4]=a[4]+c[4]*g;b[5]=a[5]+c[5]*g;b[6]=a[6]+c[6]*g;b[7]=a[7]+c[7]*g;b[8]=a[8]+
c[8]*g;return b};e.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]};e.equals=function(b,a){var c=b[0],g=b[1],f=b[2],n=b[3],k=b[4],e=b[5],p=b[6],m=b[7],h=b[8],r=a[0],t=a[1],q=a[2],v=a[3],x=a[4],w=a[5],y=b[6],A=a[7],z=a[8];return Math.abs(c-r)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(r))&&Math.abs(g-t)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(t))&&Math.abs(f-q)<=d.EPSILON*Math.max(1,Math.abs(f),
Math.abs(q))&&Math.abs(n-v)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(k-x)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))&&Math.abs(e-w)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(p-y)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(y))&&Math.abs(m-A)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(h-z)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(z))};h.exports=e},{"./common.js":65}],69:[function(e,h,q){var d=e("./common.js"),b={scalar:{},SIMD:{},create:function(){var a=
new d.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var c=new d.ARRAY_TYPE(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=
c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},fromValues:function(a,c,b,f,n,k,e,p,m,h,r,t,q,v,x,w){var y=new d.ARRAY_TYPE(16);y[0]=a;y[1]=c;y[2]=b;y[3]=f;y[4]=n;y[5]=k;y[6]=e;y[7]=p;y[8]=m;y[9]=h;y[10]=r;y[11]=t;y[12]=q;y[13]=v;y[14]=x;y[15]=w;return y},set:function(a,c,b,f,d,k,e,p,m,h,r,t,q,v,x,w,y){a[0]=c;a[1]=b;a[2]=f;a[3]=d;a[4]=k;a[5]=e;a[6]=p;a[7]=m;a[8]=h;a[9]=r;a[10]=t;a[11]=q;a[12]=v;a[13]=x;a[14]=w;a[15]=y;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;
a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};b.scalar.transpose=function(a,c){if(a===c){var b=c[1],f=c[2],d=c[3],k=c[6],e=c[7],p=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=b;a[6]=c[9];a[7]=c[13];a[8]=f;a[9]=k;a[11]=c[14];a[12]=d;a[13]=e;a[14]=p}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a};b.SIMD.transpose=
function(a,c){var b,f,d,k,e,p,m;b=SIMD.Float32x4.load(c,0);f=SIMD.Float32x4.load(c,4);d=SIMD.Float32x4.load(c,8);k=SIMD.Float32x4.load(c,12);e=SIMD.Float32x4.shuffle(b,f,0,1,4,5);p=SIMD.Float32x4.shuffle(d,k,0,1,4,5);m=SIMD.Float32x4.shuffle(e,p,0,2,4,6);e=SIMD.Float32x4.shuffle(e,p,1,3,5,7);SIMD.Float32x4.store(a,0,m);SIMD.Float32x4.store(a,4,e);e=SIMD.Float32x4.shuffle(b,f,2,3,6,7);p=SIMD.Float32x4.shuffle(d,k,2,3,6,7);b=SIMD.Float32x4.shuffle(e,p,0,2,4,6);f=SIMD.Float32x4.shuffle(e,p,1,3,5,7);
SIMD.Float32x4.store(a,8,b);SIMD.Float32x4.store(a,12,f);return a};b.transpose=d.USE_SIMD?b.SIMD.transpose:b.scalar.transpose;b.scalar.invert=function(a,c){var b=c[0],f=c[1],d=c[2],k=c[3],e=c[4],p=c[5],m=c[6],h=c[7],r=c[8],t=c[9],q=c[10],v=c[11],x=c[12],w=c[13],y=c[14],A=c[15],z=b*p-f*e,B=b*m-d*e,D=b*h-k*e,E=f*m-d*p,M=f*h-k*p,K=d*h-k*m,F=r*w-t*x,J=r*y-q*x,C=r*A-v*x,N=t*y-q*w,I=t*A-v*w,U=q*A-v*y,G=z*U-B*I+D*N+E*C-M*J+K*F;if(!G)return null;G=1/G;a[0]=(p*U-m*I+h*N)*G;a[1]=(d*I-f*U-k*N)*G;a[2]=(w*K-y*
M+A*E)*G;a[3]=(q*M-t*K-v*E)*G;a[4]=(m*C-e*U-h*J)*G;a[5]=(b*U-d*C+k*J)*G;a[6]=(y*D-x*K-A*B)*G;a[7]=(r*K-q*D+v*B)*G;a[8]=(e*I-p*C+h*F)*G;a[9]=(f*C-b*I-k*F)*G;a[10]=(x*M-w*D+A*z)*G;a[11]=(t*D-r*M-v*z)*G;a[12]=(p*J-e*N-m*F)*G;a[13]=(b*N-f*J+d*F)*G;a[14]=(w*B-x*E-y*z)*G;a[15]=(r*E-t*B+q*z)*G;return a};b.SIMD.invert=function(a,c){var b,f,d,k,e,p,m,h,r;p=SIMD.Float32x4.load(c,0);m=SIMD.Float32x4.load(c,4);h=SIMD.Float32x4.load(c,8);r=SIMD.Float32x4.load(c,12);e=SIMD.Float32x4.shuffle(p,m,0,1,4,5);f=SIMD.Float32x4.shuffle(h,
r,0,1,4,5);b=SIMD.Float32x4.shuffle(e,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,e,1,3,5,7);e=SIMD.Float32x4.shuffle(p,m,2,3,6,7);k=SIMD.Float32x4.shuffle(h,r,2,3,6,7);d=SIMD.Float32x4.shuffle(e,k,0,2,4,6);k=SIMD.Float32x4.shuffle(k,e,1,3,5,7);e=SIMD.Float32x4.mul(d,k);e=SIMD.Float32x4.swizzle(e,1,0,3,2);p=SIMD.Float32x4.mul(f,e);m=SIMD.Float32x4.mul(b,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,e),p);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),m);m=SIMD.Float32x4.swizzle(m,
2,3,0,1);e=SIMD.Float32x4.mul(f,d);e=SIMD.Float32x4.swizzle(e,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),p);r=SIMD.Float32x4.mul(b,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(k,e));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);e=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,3,0,1),k);e=SIMD.Float32x4.swizzle(e,1,0,3,2);d=SIMD.Float32x4.swizzle(d,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,e),p);h=SIMD.Float32x4.mul(b,
e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(d,e));h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);e=SIMD.Float32x4.mul(b,f);e=SIMD.Float32x4.swizzle(e,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),h);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,e),r);e=SIMD.Float32x4.swizzle(e,2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,e),h);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(d,e));e=SIMD.Float32x4.mul(b,k);e=SIMD.Float32x4.swizzle(e,
1,0,3,2);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(d,e));h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),h);e=SIMD.Float32x4.swizzle(e,2,3,0,1);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,e),m);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,e));e=SIMD.Float32x4.mul(b,d);e=SIMD.Float32x4.swizzle(e,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),m);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(f,e));e=SIMD.Float32x4.swizzle(e,2,3,0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(k,e));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,
e),r);b=SIMD.Float32x4.mul(b,p);b=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,2,3,0,1),b);b=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,1,0,3,2),b);e=SIMD.Float32x4.reciprocalApproximation(b);b=SIMD.Float32x4.sub(SIMD.Float32x4.add(e,e),SIMD.Float32x4.mul(b,SIMD.Float32x4.mul(e,e)));b=SIMD.Float32x4.swizzle(b,0,0,0,0);if(!b)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(b,p));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(b,m));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(b,h));SIMD.Float32x4.store(a,
12,SIMD.Float32x4.mul(b,r));return a};b.invert=d.USE_SIMD?b.SIMD.invert:b.scalar.invert;b.scalar.adjoint=function(a,c){var b=c[0],f=c[1],d=c[2],e=c[3],l=c[4],p=c[5],m=c[6],h=c[7],r=c[8],t=c[9],q=c[10],v=c[11],x=c[12],w=c[13],y=c[14],A=c[15];a[0]=p*(q*A-v*y)-t*(m*A-h*y)+w*(m*v-h*q);a[1]=-(f*(q*A-v*y)-t*(d*A-e*y)+w*(d*v-e*q));a[2]=f*(m*A-h*y)-p*(d*A-e*y)+w*(d*h-e*m);a[3]=-(f*(m*v-h*q)-p*(d*v-e*q)+t*(d*h-e*m));a[4]=-(l*(q*A-v*y)-r*(m*A-h*y)+x*(m*v-h*q));a[5]=b*(q*A-v*y)-r*(d*A-e*y)+x*(d*v-e*q);a[6]=
-(b*(m*A-h*y)-l*(d*A-e*y)+x*(d*h-e*m));a[7]=b*(m*v-h*q)-l*(d*v-e*q)+r*(d*h-e*m);a[8]=l*(t*A-v*w)-r*(p*A-h*w)+x*(p*v-h*t);a[9]=-(b*(t*A-v*w)-r*(f*A-e*w)+x*(f*v-e*t));a[10]=b*(p*A-h*w)-l*(f*A-e*w)+x*(f*h-e*p);a[11]=-(b*(p*v-h*t)-l*(f*v-e*t)+r*(f*h-e*p));a[12]=-(l*(t*y-q*w)-r*(p*y-m*w)+x*(p*q-m*t));a[13]=b*(t*y-q*w)-r*(f*y-d*w)+x*(f*q-d*t);a[14]=-(b*(p*y-m*w)-l*(f*y-d*w)+x*(f*m-d*p));a[15]=b*(p*q-m*t)-l*(f*q-d*t)+r*(f*m-d*p);return a};b.SIMD.adjoint=function(a,c){var b,f,d,e,l,p,m,h,r;b=SIMD.Float32x4.load(c,
0);f=SIMD.Float32x4.load(c,4);d=SIMD.Float32x4.load(c,8);e=SIMD.Float32x4.load(c,12);m=SIMD.Float32x4.shuffle(b,f,0,1,4,5);p=SIMD.Float32x4.shuffle(d,e,0,1,4,5);l=SIMD.Float32x4.shuffle(m,p,0,2,4,6);p=SIMD.Float32x4.shuffle(p,m,1,3,5,7);m=SIMD.Float32x4.shuffle(b,f,2,3,6,7);f=SIMD.Float32x4.shuffle(d,e,2,3,6,7);b=SIMD.Float32x4.shuffle(m,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,m,1,3,5,7);m=SIMD.Float32x4.mul(b,f);m=SIMD.Float32x4.swizzle(m,1,0,3,2);d=SIMD.Float32x4.mul(p,m);e=SIMD.Float32x4.mul(l,m);
m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,m),d);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);m=SIMD.Float32x4.mul(p,b);m=SIMD.Float32x4.swizzle(m,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,m),d);r=SIMD.Float32x4.mul(l,m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(f,m));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);m=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,
2,3,0,1),f);m=SIMD.Float32x4.swizzle(m,1,0,3,2);b=SIMD.Float32x4.swizzle(b,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,m),d);h=SIMD.Float32x4.mul(l,m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(b,m));h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);m=SIMD.Float32x4.mul(l,p);m=SIMD.Float32x4.swizzle(m,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,m),h);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,m),r);m=SIMD.Float32x4.swizzle(m,
2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,m),h);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(b,m));m=SIMD.Float32x4.mul(l,f);m=SIMD.Float32x4.swizzle(m,1,0,3,2);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(b,m));h=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,m),h);m=SIMD.Float32x4.swizzle(m,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,m),e);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(p,m));m=SIMD.Float32x4.mul(l,b);m=SIMD.Float32x4.swizzle(m,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,m),
e);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(p,m));m=SIMD.Float32x4.swizzle(m,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(f,m));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,m),r);SIMD.Float32x4.store(a,0,d);SIMD.Float32x4.store(a,4,e);SIMD.Float32x4.store(a,8,h);SIMD.Float32x4.store(a,12,r);return a};b.adjoint=d.USE_SIMD?b.SIMD.adjoint:b.scalar.adjoint;b.determinant=function(a){var c=a[0],b=a[1],f=a[2],d=a[3],e=a[4],l=a[5],h=a[6],m=a[7],u=a[8],r=a[9],t=a[10],q=a[11],v=a[12],x=a[13],w=a[14];a=
a[15];return(c*l-b*e)*(t*a-q*w)-(c*h-f*e)*(r*a-q*x)+(c*m-d*e)*(r*w-t*x)+(b*h-f*l)*(u*a-q*v)-(b*m-d*l)*(u*w-t*v)+(f*m-d*h)*(u*x-r*v)};b.SIMD.multiply=function(a,c,b){var f=SIMD.Float32x4.load(c,0),d=SIMD.Float32x4.load(c,4),e=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);var l=SIMD.Float32x4.load(b,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,0,l);l=SIMD.Float32x4.load(b,4);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,4,l);l=SIMD.Float32x4.load(b,8);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,8,l);b=SIMD.Float32x4.load(b,12);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,2,2,2,2),
e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,3,3,3,3),c))));SIMD.Float32x4.store(a,12,f);return a};b.scalar.multiply=function(a,c,b){var f=c[0],d=c[1],e=c[2],l=c[3],h=c[4],m=c[5],u=c[6],r=c[7],q=c[8],H=c[9],v=c[10],x=c[11],w=c[12],y=c[13],A=c[14];c=c[15];var z=b[0],B=b[1],D=b[2],E=b[3];a[0]=z*f+B*h+D*q+E*w;a[1]=z*d+B*m+D*H+E*y;a[2]=z*e+B*u+D*v+E*A;a[3]=z*l+B*r+D*x+E*c;z=b[4];B=b[5];D=b[6];E=b[7];a[4]=z*f+B*h+D*q+E*w;a[5]=z*d+B*m+D*H+E*y;a[6]=z*e+B*u+D*v+E*A;a[7]=z*l+B*r+D*x+E*c;z=b[8];B=b[9];D=
b[10];E=b[11];a[8]=z*f+B*h+D*q+E*w;a[9]=z*d+B*m+D*H+E*y;a[10]=z*e+B*u+D*v+E*A;a[11]=z*l+B*r+D*x+E*c;z=b[12];B=b[13];D=b[14];E=b[15];a[12]=z*f+B*h+D*q+E*w;a[13]=z*d+B*m+D*H+E*y;a[14]=z*e+B*u+D*v+E*A;a[15]=z*l+B*r+D*x+E*c;return a};b.multiply=d.USE_SIMD?b.SIMD.multiply:b.scalar.multiply;b.mul=b.multiply;b.scalar.translate=function(a,c,b){var f=b[0],d=b[1];b=b[2];var e,l,h,m,u,r,q,H,v,x,w,y;c===a?(a[12]=c[0]*f+c[4]*d+c[8]*b+c[12],a[13]=c[1]*f+c[5]*d+c[9]*b+c[13],a[14]=c[2]*f+c[6]*d+c[10]*b+c[14],a[15]=
c[3]*f+c[7]*d+c[11]*b+c[15]):(e=c[0],l=c[1],h=c[2],m=c[3],u=c[4],r=c[5],q=c[6],H=c[7],v=c[8],x=c[9],w=c[10],y=c[11],a[0]=e,a[1]=l,a[2]=h,a[3]=m,a[4]=u,a[5]=r,a[6]=q,a[7]=H,a[8]=v,a[9]=x,a[10]=w,a[11]=y,a[12]=e*f+u*d+v*b+c[12],a[13]=l*f+r*d+x*b+c[13],a[14]=h*f+q*d+w*b+c[14],a[15]=m*f+H*d+y*b+c[15]);return a};b.SIMD.translate=function(a,c,b){var f=SIMD.Float32x4.load(c,0),d=SIMD.Float32x4.load(c,4),e=SIMD.Float32x4.load(c,8),l=SIMD.Float32x4.load(c,12);b=SIMD.Float32x4(b[0],b[1],b[2],0);c!==a&&(a[0]=
c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11]);f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(b,0,0,0,0));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(b,1,1,1,1));e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,2,2,2,2));c=SIMD.Float32x4.add(f,SIMD.Float32x4.add(d,SIMD.Float32x4.add(e,l)));SIMD.Float32x4.store(a,12,c);return a};b.translate=d.USE_SIMD?b.SIMD.translate:b.scalar.translate;b.scalar.scale=function(a,c,b){var f=b[0],
d=b[1];b=b[2];a[0]=c[0]*f;a[1]=c[1]*f;a[2]=c[2]*f;a[3]=c[3]*f;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};b.SIMD.scale=function(a,c,b){var f;b=SIMD.Float32x4(b[0],b[1],b[2],0);f=SIMD.Float32x4.load(c,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(b,0,0,0,0)));f=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(b,1,1,
1,1)));f=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(b,2,2,2,2)));a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};b.scale=d.USE_SIMD?b.SIMD.scale:b.scalar.scale;b.rotate=function(a,c,b,f){var e=f[0],k=f[1];f=f[2];var l=Math.sqrt(e*e+k*k+f*f),h,m,u,r,q,H,v,x,w,y,A,z,B,D,E,M,K,F,J,C;if(Math.abs(l)<d.EPSILON)return null;l=1/l;e*=l;k*=l;f*=l;h=Math.sin(b);m=Math.cos(b);u=1-m;b=c[0];l=c[1];r=c[2];q=c[3];H=c[4];v=c[5];x=c[6];w=c[7];y=c[8];A=c[9];
z=c[10];B=c[11];D=e*e*u+m;E=k*e*u+f*h;M=f*e*u-k*h;K=e*k*u-f*h;F=k*k*u+m;J=f*k*u+e*h;C=e*f*u+k*h;e=k*f*u-e*h;k=f*f*u+m;a[0]=b*D+H*E+y*M;a[1]=l*D+v*E+A*M;a[2]=r*D+x*E+z*M;a[3]=q*D+w*E+B*M;a[4]=b*K+H*F+y*J;a[5]=l*K+v*F+A*J;a[6]=r*K+x*F+z*J;a[7]=q*K+w*F+B*J;a[8]=b*C+H*e+y*k;a[9]=l*C+v*e+A*k;a[10]=r*C+x*e+z*k;a[11]=q*C+w*e+B*k;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};b.scalar.rotateX=function(a,c,b){var f=Math.sin(b);b=Math.cos(b);var d=c[4],e=c[5],l=c[6],h=c[7],m=c[8],u=c[9],
r=c[10],q=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=d*b+m*f;a[5]=e*b+u*f;a[6]=l*b+r*f;a[7]=h*b+q*f;a[8]=m*b-d*f;a[9]=u*b-e*f;a[10]=r*b-l*f;a[11]=q*b-h*f;return a};b.SIMD.rotateX=function(a,c,b){var f=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,4);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,
4,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,b),SIMD.Float32x4.mul(c,f)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),SIMD.Float32x4.mul(d,f)));return a};b.rotateX=d.USE_SIMD?b.SIMD.rotateX:b.scalar.rotateX;b.scalar.rotateY=function(a,c,b){var f=Math.sin(b);b=Math.cos(b);var d=c[0],e=c[1],l=c[2],h=c[3],m=c[8],u=c[9],r=c[10],q=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=d*b-m*f;a[1]=e*b-u*f;a[2]=l*b-r*f;a[3]=h*b-q*
f;a[8]=d*f+m*b;a[9]=e*f+u*b;a[10]=l*f+r*b;a[11]=h*f+q*b;return a};b.SIMD.rotateY=function(a,c,b){var f=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,b),SIMD.Float32x4.mul(c,f)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,f),SIMD.Float32x4.mul(c,
b)));return a};b.rotateY=d.USE_SIMD?b.SIMD.rotateY:b.scalar.rotateY;b.scalar.rotateZ=function(a,c,b){var f=Math.sin(b);b=Math.cos(b);var d=c[0],e=c[1],l=c[2],h=c[3],m=c[4],u=c[5],r=c[6],q=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=d*b+m*f;a[1]=e*b+u*f;a[2]=l*b+r*f;a[3]=h*b+q*f;a[4]=m*b-d*f;a[5]=u*b-e*f;a[6]=r*b-l*f;a[7]=q*b-h*f;return a};b.SIMD.rotateZ=function(a,c,b){var f=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));
c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,b),SIMD.Float32x4.mul(c,f)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),SIMD.Float32x4.mul(d,f)));return a};b.rotateZ=d.USE_SIMD?b.SIMD.rotateZ:b.scalar.rotateZ;b.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=
0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};b.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromRotation=function(a,c,b){var f=b[0],e=b[1];b=b[2];var k=Math.sqrt(f*f+e*e+b*b),l;if(Math.abs(k)<d.EPSILON)return null;k=1/k;f*=k;e*=k;b*=k;k=Math.sin(c);c=Math.cos(c);l=1-c;a[0]=f*f*l+c;a[1]=e*f*l+b*k;a[2]=b*f*l-e*k;a[3]=0;a[4]=f*e*l-b*k;a[5]=e*e*l+c;a[6]=
b*e*l+f*k;a[7]=0;a[8]=f*b*l+e*k;a[9]=e*b*l-f*k;a[10]=b*b*l+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromXRotation=function(a,c){var b=Math.sin(c),f=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=b;a[7]=0;a[8]=0;a[9]=-b;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromYRotation=function(a,c){var b=Math.sin(c),f=Math.cos(c);a[0]=f;a[1]=0;a[2]=-b;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=b;a[9]=0;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromZRotation=
function(a,c){var b=Math.sin(c),f=Math.cos(c);a[0]=f;a[1]=b;a[2]=0;a[3]=0;a[4]=-b;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromRotationTranslation=function(a,c,b){var f=c[0],d=c[1],e=c[2],l=c[3],h=f+f,m=d+d,u=e+e;c=f*h;var r=f*m,f=f*u,q=d*m,d=d*u,e=e*u,h=l*h,m=l*m,l=l*u;a[0]=1-(q+e);a[1]=r+l;a[2]=f-m;a[3]=0;a[4]=r-l;a[5]=1-(c+e);a[6]=d+h;a[7]=0;a[8]=f+m;a[9]=d-h;a[10]=1-(c+q);a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};b.getTranslation=
function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};b.getRotation=function(a,c){var b=c[0]+c[5]+c[10],f=0;0<b?(f=2*Math.sqrt(b+1),a[3]=.25*f,a[0]=(c[6]-c[9])/f,a[1]=(c[8]-c[2])/f,a[2]=(c[1]-c[4])/f):c[0]>c[5]&c[0]>c[10]?(f=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/f,a[0]=.25*f,a[1]=(c[1]+c[4])/f,a[2]=(c[8]+c[2])/f):c[5]>c[10]?(f=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/f,a[0]=(c[1]+c[4])/f,a[1]=.25*f,a[2]=(c[6]+c[9])/f):(f=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/f,a[0]=(c[8]+
c[2])/f,a[1]=(c[6]+c[9])/f,a[2]=.25*f);return a};b.fromRotationTranslationScale=function(a,c,b,f){var d=c[0],e=c[1],l=c[2],h=c[3],m=d+d,u=e+e,r=l+l;c=d*m;var q=d*u,d=d*r,H=e*u,e=e*r,l=l*r,m=h*m,u=h*u,h=h*r,r=f[0],v=f[1];f=f[2];a[0]=(1-(H+l))*r;a[1]=(q+h)*r;a[2]=(d-u)*r;a[3]=0;a[4]=(q-h)*v;a[5]=(1-(c+l))*v;a[6]=(e+m)*v;a[7]=0;a[8]=(d+u)*f;a[9]=(e-m)*f;a[10]=(1-(c+H))*f;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};b.fromRotationTranslationScaleOrigin=function(a,c,b,f,d){var e=c[0],l=c[1],
h=c[2],m=c[3],q=e+e,r=l+l,t=h+h;c=e*q;var H=e*r,e=e*t,v=l*r,l=l*t,h=h*t,q=m*q,r=m*r,m=m*t,t=f[0],x=f[1];f=f[2];var w=d[0],y=d[1];d=d[2];a[0]=(1-(v+h))*t;a[1]=(H+m)*t;a[2]=(e-r)*t;a[3]=0;a[4]=(H-m)*x;a[5]=(1-(c+h))*x;a[6]=(l+q)*x;a[7]=0;a[8]=(e+r)*f;a[9]=(l-q)*f;a[10]=(1-(c+v))*f;a[11]=0;a[12]=b[0]+w-(a[0]*w+a[4]*y+a[8]*d);a[13]=b[1]+y-(a[1]*w+a[5]*y+a[9]*d);a[14]=b[2]+d-(a[2]*w+a[6]*y+a[10]*d);a[15]=1;return a};b.fromQuat=function(a,c){var b=c[0],f=c[1],d=c[2],e=c[3],l=b+b,h=f+f,m=d+d,b=b*l,q=f*l,
f=f*h,r=d*l,t=d*h,d=d*m,l=e*l,h=e*h,e=e*m;a[0]=1-f-d;a[1]=q+e;a[2]=r-h;a[3]=0;a[4]=q-e;a[5]=1-b-d;a[6]=t+l;a[7]=0;a[8]=r+h;a[9]=t-l;a[10]=1-b-f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.frustum=function(a,c,b,f,d,e,l){var h=1/(b-c),m=1/(d-f),q=1/(e-l);a[0]=2*e*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*e*m;a[6]=0;a[7]=0;a[8]=(b+c)*h;a[9]=(d+f)*m;a[10]=(l+e)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=l*e*2*q;a[15]=0;return a};b.perspective=function(a,c,b,f,d){c=1/Math.tan(c/2);var e=1/(f-d);a[0]=c/b;a[1]=
0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+f)*e;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*f*e;a[15]=0;return a};b.perspectiveFromFieldOfView=function(a,c,b,f){var d=Math.tan(c.upDegrees*Math.PI/180),e=Math.tan(c.downDegrees*Math.PI/180),l=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var h=2/(l+c),m=2/(d+e);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=-((l-c)*h*.5);a[9]=(d-e)*m*.5;a[10]=f/(b-f);a[11]=-1;a[12]=0;a[13]=0;a[14]=f*b/(b-f);
a[15]=0;return a};b.ortho=function(a,c,b,f,d,e,l){var h=1/(c-b),m=1/(f-d),q=1/(e-l);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*q;a[11]=0;a[12]=(c+b)*h;a[13]=(d+f)*m;a[14]=(l+e)*q;a[15]=1;return a};b.lookAt=function(a,c,g,f){var e,k,l,h,m,q,r,t,H=c[0],v=c[1];c=c[2];l=f[0];h=f[1];k=f[2];r=g[0];f=g[1];e=g[2];if(Math.abs(H-r)<d.EPSILON&&Math.abs(v-f)<d.EPSILON&&Math.abs(c-e)<d.EPSILON)return b.identity(a);g=H-r;f=v-f;r=c-e;t=1/Math.sqrt(g*g+f*f+r*r);g*=t;f*=t;
r*=t;e=h*r-k*f;k=k*g-l*r;l=l*f-h*g;(t=Math.sqrt(e*e+k*k+l*l))?(t=1/t,e*=t,k*=t,l*=t):l=k=e=0;h=f*l-r*k;m=r*e-g*l;q=g*k-f*e;(t=Math.sqrt(h*h+m*m+q*q))?(t=1/t,h*=t,m*=t,q*=t):q=m=h=0;a[0]=e;a[1]=h;a[2]=g;a[3]=0;a[4]=k;a[5]=m;a[6]=f;a[7]=0;a[8]=l;a[9]=q;a[10]=r;a[11]=0;a[12]=-(e*H+k*v+l*c);a[13]=-(h*H+m*v+q*c);a[14]=-(g*H+f*v+r*c);a[15]=1;return a};b.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+
a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};b.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};b.add=function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];a[3]=c[3]+b[3];a[4]=c[4]+b[4];a[5]=c[5]+b[5];a[6]=c[6]+b[6];a[7]=c[7]+b[7];
a[8]=c[8]+b[8];a[9]=c[9]+b[9];a[10]=c[10]+b[10];a[11]=c[11]+b[11];a[12]=c[12]+b[12];a[13]=c[13]+b[13];a[14]=c[14]+b[14];a[15]=c[15]+b[15];return a};b.subtract=function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];a[3]=c[3]-b[3];a[4]=c[4]-b[4];a[5]=c[5]-b[5];a[6]=c[6]-b[6];a[7]=c[7]-b[7];a[8]=c[8]-b[8];a[9]=c[9]-b[9];a[10]=c[10]-b[10];a[11]=c[11]-b[11];a[12]=c[12]-b[12];a[13]=c[13]-b[13];a[14]=c[14]-b[14];a[15]=c[15]-b[15];return a};b.sub=b.subtract;b.multiplyScalar=function(a,c,b){a[0]=c[0]*
b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*b;a[5]=c[5]*b;a[6]=c[6]*b;a[7]=c[7]*b;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12]*b;a[13]=c[13]*b;a[14]=c[14]*b;a[15]=c[15]*b;return a};b.multiplyScalarAndAdd=function(a,c,b,f){a[0]=c[0]+b[0]*f;a[1]=c[1]+b[1]*f;a[2]=c[2]+b[2]*f;a[3]=c[3]+b[3]*f;a[4]=c[4]+b[4]*f;a[5]=c[5]+b[5]*f;a[6]=c[6]+b[6]*f;a[7]=c[7]+b[7]*f;a[8]=c[8]+b[8]*f;a[9]=c[9]+b[9]*f;a[10]=c[10]+b[10]*f;a[11]=c[11]+b[11]*f;a[12]=c[12]+b[12]*f;a[13]=c[13]+b[13]*f;a[14]=
c[14]+b[14]*f;a[15]=c[15]+b[15]*f;return a};b.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};b.equals=function(a,c){var b=a[0],f=a[1],e=a[2],k=a[3],l=a[4],h=a[5],m=a[6],q=a[7],r=a[8],t=a[9],H=a[10],v=a[11],x=a[12],w=a[13],y=a[14],A=a[15],z=c[0],B=c[1],D=c[2],E=c[3],M=c[4],K=c[5],F=c[6],J=c[7],C=
c[8],N=c[9],I=c[10],U=c[11],G=c[12],Z=c[13],fa=c[14],V=c[15];return Math.abs(b-z)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(z))&&Math.abs(f-B)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(e-D)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(D))&&Math.abs(k-E)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(E))&&Math.abs(l-M)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(h-K)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(K))&&Math.abs(m-F)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(F))&&
Math.abs(q-J)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(J))&&Math.abs(r-C)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(t-N)<=d.EPSILON*Math.max(1,Math.abs(t),Math.abs(N))&&Math.abs(H-I)<=d.EPSILON*Math.max(1,Math.abs(H),Math.abs(I))&&Math.abs(v-U)<=d.EPSILON*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(x-G)<=d.EPSILON*Math.max(1,Math.abs(x),Math.abs(G))&&Math.abs(w-Z)<=d.EPSILON*Math.max(1,Math.abs(w),Math.abs(Z))&&Math.abs(y-fa)<=d.EPSILON*Math.max(1,Math.abs(y),Math.abs(fa))&&Math.abs(A-
V)<=d.EPSILON*Math.max(1,Math.abs(A),Math.abs(V))};h.exports=b},{"./common.js":65}],70:[function(e,h,q){var d=e("./common.js"),b=e("./mat3.js"),a=e("./vec3.js");e=e("./vec4.js");var c={create:function(){var a=new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};c.rotationTo=function(){var b=a.create(),f=a.fromValues(1,0,0),d=a.fromValues(0,1,0);return function(e,l,h){var m=a.dot(l,h);if(-.999999>m)return a.cross(b,f,l),1E-6>a.length(b)&&a.cross(b,d,l),a.normalize(b,b),c.setAxisAngle(e,b,Math.PI),
e;if(.999999<m)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e;a.cross(b,l,h);e[0]=b[0];e[1]=b[1];e[2]=b[2];e[3]=1+m;return c.normalize(e,e)}}();c.setAxes=function(){var a=b.create();return function(b,d,e,l){a[0]=e[0];a[3]=e[1];a[6]=e[2];a[1]=l[0];a[4]=l[1];a[7]=l[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return c.normalize(b,c.fromMat3(b,a))}}();c.clone=e.clone;c.fromValues=e.fromValues;c.copy=e.copy;c.set=e.set;c.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};c.setAxisAngle=function(a,c,b){b*=.5;var d=
Math.sin(b);a[0]=d*c[0];a[1]=d*c[1];a[2]=d*c[2];a[3]=Math.cos(b);return a};c.getAxisAngle=function(a,c){var b=2*Math.acos(c[3]),d=Math.sin(b/2);0!=d?(a[0]=c[0]/d,a[1]=c[1]/d,a[2]=c[2]/d):(a[0]=1,a[1]=0,a[2]=0);return b};c.add=e.add;c.multiply=function(a,c,b){var d=c[0],e=c[1],h=c[2];c=c[3];var m=b[0],q=b[1],r=b[2];b=b[3];a[0]=d*b+c*m+e*r-h*q;a[1]=e*b+c*q+h*m-d*r;a[2]=h*b+c*r+d*q-e*m;a[3]=c*b-d*m-e*q-h*r;return a};c.mul=c.multiply;c.scale=e.scale;c.rotateX=function(a,c,b){b*=.5;var d=c[0],e=c[1],h=
c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=d*b+c*m;a[1]=e*b+h*m;a[2]=h*b-e*m;a[3]=c*b-d*m;return a};c.rotateY=function(a,c,b){b*=.5;var d=c[0],e=c[1],h=c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=d*b-h*m;a[1]=e*b+c*m;a[2]=h*b+d*m;a[3]=c*b-e*m;return a};c.rotateZ=function(a,c,b){b*=.5;var d=c[0],e=c[1],h=c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=d*b+e*m;a[1]=e*b-d*m;a[2]=h*b+c*m;a[3]=c*b-h*m;return a};c.calculateW=function(a,c){var b=c[0],d=c[1],e=c[2];a[0]=b;a[1]=d;a[2]=e;a[3]=Math.sqrt(Math.abs(1-
b*b-d*d-e*e));return a};c.dot=e.dot;c.lerp=e.lerp;c.slerp=function(a,c,b,d){var e=c[0],h=c[1],m=c[2];c=c[3];var q=b[0],r=b[1],t=b[2];b=b[3];var H,v,x;v=e*q+h*r+m*t+c*b;0>v&&(v=-v,q=-q,r=-r,t=-t,b=-b);1E-6<1-v?(H=Math.acos(v),x=Math.sin(H),v=Math.sin((1-d)*H)/x,d=Math.sin(d*H)/x):v=1-d;a[0]=v*e+d*q;a[1]=v*h+d*r;a[2]=v*m+d*t;a[3]=v*c+d*b;return a};c.sqlerp=function(){var a=c.create(),b=c.create();return function(d,e,l,h,m,q){c.slerp(a,e,m,q);c.slerp(b,l,h,q);c.slerp(d,a,b,2*q*(1-q));return d}}();c.invert=
function(a,c){var b=c[0],d=c[1],e=c[2],h=c[3],m=b*b+d*d+e*e+h*h,m=m?1/m:0;a[0]=-b*m;a[1]=-d*m;a[2]=-e*m;a[3]=h*m;return a};c.conjugate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=c[3];return a};c.length=e.length;c.len=c.length;c.squaredLength=e.squaredLength;c.sqrLen=c.squaredLength;c.normalize=e.normalize;c.fromMat3=function(a,c){var b=c[0]+c[4]+c[8];if(0<b)b=Math.sqrt(b+1),a[3]=.5*b,b=.5/b,a[0]=(c[5]-c[7])*b,a[1]=(c[6]-c[2])*b,a[2]=(c[1]-c[3])*b;else{var d=0;c[4]>c[0]&&(d=1);c[8]>c[3*d+
d]&&(d=2);var e=(d+1)%3,h=(d+2)%3,b=Math.sqrt(c[3*d+d]-c[3*e+e]-c[3*h+h]+1);a[d]=.5*b;b=.5/b;a[3]=(c[3*e+h]-c[3*h+e])*b;a[e]=(c[3*e+d]+c[3*d+e])*b;a[h]=(c[3*h+d]+c[3*d+h])*b}return a};c.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.exactEquals=e.exactEquals;c.equals=e.equals;h.exports=c},{"./common.js":65,"./mat3.js":68,"./vec3.js":72,"./vec4.js":73}],71:[function(e,h,q){var d=e("./common.js"),b={create:function(){var a=new d.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var c=
new d.ARRAY_TYPE(2);c[0]=a[0];c[1]=a[1];return c},fromValues:function(a,c){var b=new d.ARRAY_TYPE(2);b[0]=a;b[1]=c;return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];return a},set:function(a,c,b){a[0]=c;a[1]=b;return a},add:function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];return a},subtract:function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];return a}};b.sub=b.subtract;b.multiply=function(a,c,b){a[0]=c[0]*b[0];a[1]=c[1]*b[1];return a};b.mul=b.multiply;b.divide=function(a,c,b){a[0]=c[0]/b[0];a[1]=c[1]/b[1];return a};
b.div=b.divide;b.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);return a};b.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);return a};b.min=function(a,c,b){a[0]=Math.min(c[0],b[0]);a[1]=Math.min(c[1],b[1]);return a};b.max=function(a,c,b){a[0]=Math.max(c[0],b[0]);a[1]=Math.max(c[1],b[1]);return a};b.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);return a};b.scale=function(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;return a};b.scaleAndAdd=function(a,c,b,d){a[0]=c[0]+
b[0]*d;a[1]=c[1]+b[1]*d;return a};b.distance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1];return Math.sqrt(b*b+d*d)};b.dist=b.distance;b.squaredDistance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1];return b*b+d*d};b.sqrDist=b.squaredDistance;b.length=function(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)};b.len=b.length;b.squaredLength=function(a){var c=a[0];a=a[1];return c*c+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];return a};b.inverse=function(a,c){a[0]=1/c[0];a[1]=1/
c[1];return a};b.normalize=function(a,c){var b=c[0],d=c[1],b=b*b+d*d;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b);return a};b.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]};b.cross=function(a,c,b){c=c[0]*b[1]-c[1]*b[0];a[0]=a[1]=0;a[2]=c;return a};b.lerp=function(a,c,b,d){var e=c[0];c=c[1];a[0]=e+d*(b[0]-e);a[1]=c+d*(b[1]-c);return a};b.random=function(a,c){c=c||1;var b=2*d.RANDOM()*Math.PI;a[0]=Math.cos(b)*c;a[1]=Math.sin(b)*c;return a};b.transformMat2=function(a,c,b){var d=c[0];c=c[1];a[0]=b[0]*
d+b[2]*c;a[1]=b[1]*d+b[3]*c;return a};b.transformMat2d=function(a,c,b){var d=c[0];c=c[1];a[0]=b[0]*d+b[2]*c+b[4];a[1]=b[1]*d+b[3]*c+b[5];return a};b.transformMat3=function(a,c,b){var d=c[0];c=c[1];a[0]=b[0]*d+b[3]*c+b[6];a[1]=b[1]*d+b[4]*c+b[7];return a};b.transformMat4=function(a,c,b){var d=c[0];c=c[1];a[0]=b[0]*d+b[4]*c+b[12];a[1]=b[1]*d+b[5]*c+b[13];return a};b.forEach=function(){var a=b.create();return function(c,b,d,e,k,l){b||(b=2);d||(d=0);for(e=e?Math.min(e*b+d,c.length):c.length;d<e;d+=b)a[0]=
c[d],a[1]=c[d+1],k(a,a,l),c[d]=a[0],c[d+1]=a[1];return c}}();b.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};b.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]};b.equals=function(a,c){var b=a[0],f=a[1],e=c[0],k=c[1];return Math.abs(b-e)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))&&Math.abs(f-k)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))};h.exports=b},{"./common.js":65}],72:[function(e,h,q){var d=e("./common.js"),b={create:function(){var a=new d.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=
0;return a},clone:function(a){var c=new d.ARRAY_TYPE(3);c[0]=a[0];c[1]=a[1];c[2]=a[2];return c},fromValues:function(a,c,b){var f=new d.ARRAY_TYPE(3);f[0]=a;f[1]=c;f[2]=b;return f},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a},set:function(a,c,b,d){a[0]=c;a[1]=b;a[2]=d;return a},add:function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];return a},subtract:function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];return a}};b.sub=b.subtract;b.multiply=function(a,c,b){a[0]=c[0]*
b[0];a[1]=c[1]*b[1];a[2]=c[2]*b[2];return a};b.mul=b.multiply;b.divide=function(a,c,b){a[0]=c[0]/b[0];a[1]=c[1]/b[1];a[2]=c[2]/b[2];return a};b.div=b.divide;b.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};b.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};b.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};b.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);
a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};b.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};b.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};b.scaleAndAdd=function(a,b,d,f){a[0]=b[0]+d[0]*f;a[1]=b[1]+d[1]*f;a[2]=b[2]+d[2]*f;return a};b.distance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(d*d+f*f+e*e)};b.dist=b.distance;b.squaredDistance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1],e=b[2]-
a[2];return d*d+f*f+e*e};b.sqrDist=b.squaredDistance;b.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};b.len=b.length;b.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};b.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};b.normalize=function(a,b){var d=b[0],f=b[1],e=b[2],d=d*d+f*f+e*e;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*
d);return a};b.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};b.cross=function(a,b,d){var f=b[0],e=b[1];b=b[2];var k=d[0],l=d[1];d=d[2];a[0]=e*d-b*l;a[1]=b*k-f*d;a[2]=f*l-e*k;return a};b.lerp=function(a,b,d,f){var e=b[0],k=b[1];b=b[2];a[0]=e+f*(d[0]-e);a[1]=k+f*(d[1]-k);a[2]=b+f*(d[2]-b);return a};b.hermite=function(a,b,d,f,e,k){var l=k*k,h=l*(2*k-3)+1,m=l*(k-2)+k,q=l*(k-1);k=l*(3-2*k);a[0]=b[0]*h+d[0]*m+f[0]*q+e[0]*k;a[1]=b[1]*h+d[1]*m+f[1]*q+e[1]*k;a[2]=b[2]*h+d[2]*m+f[2]*q+e[2]*k;return a};
b.bezier=function(a,b,d,f,e,k){var l=1-k,h=l*l,m=k*k,q=h*l,h=3*k*h,l=3*m*l;k*=m;a[0]=b[0]*q+d[0]*h+f[0]*l+e[0]*k;a[1]=b[1]*q+d[1]*h+f[1]*l+e[1]*k;a[2]=b[2]*q+d[2]*h+f[2]*l+e[2]*k;return a};b.random=function(a,b){b=b||1;var e=2*d.RANDOM()*Math.PI,f=2*d.RANDOM()-1,h=Math.sqrt(1-f*f)*b;a[0]=Math.cos(e)*h;a[1]=Math.sin(e)*h;a[2]=f*b;return a};b.transformMat4=function(a,b,d){var f=b[0],e=b[1];b=b[2];var k=d[3]*f+d[7]*e+d[11]*b+d[15],k=k||1;a[0]=(d[0]*f+d[4]*e+d[8]*b+d[12])/k;a[1]=(d[1]*f+d[5]*e+d[9]*b+
d[13])/k;a[2]=(d[2]*f+d[6]*e+d[10]*b+d[14])/k;return a};b.transformMat3=function(a,b,d){var f=b[0],e=b[1];b=b[2];a[0]=f*d[0]+e*d[3]+b*d[6];a[1]=f*d[1]+e*d[4]+b*d[7];a[2]=f*d[2]+e*d[5]+b*d[8];return a};b.transformQuat=function(a,b,d){var f=b[0],e=b[1],k=b[2];b=d[0];var l=d[1],h=d[2];d=d[3];var m=d*f+l*k-h*e,q=d*e+h*f-b*k,r=d*k+b*e-l*f,f=-b*f-l*e-h*k;a[0]=m*d+f*-b+q*-h-r*-l;a[1]=q*d+f*-l+r*-b-m*-h;a[2]=r*d+f*-h+m*-l-q*-b;return a};b.rotateX=function(a,b,d,f){var e=[],k=[];e[0]=b[0]-d[0];e[1]=b[1]-d[1];
e[2]=b[2]-d[2];k[0]=e[0];k[1]=e[1]*Math.cos(f)-e[2]*Math.sin(f);k[2]=e[1]*Math.sin(f)+e[2]*Math.cos(f);a[0]=k[0]+d[0];a[1]=k[1]+d[1];a[2]=k[2]+d[2];return a};b.rotateY=function(a,b,d,f){var e=[],k=[];e[0]=b[0]-d[0];e[1]=b[1]-d[1];e[2]=b[2]-d[2];k[0]=e[2]*Math.sin(f)+e[0]*Math.cos(f);k[1]=e[1];k[2]=e[2]*Math.cos(f)-e[0]*Math.sin(f);a[0]=k[0]+d[0];a[1]=k[1]+d[1];a[2]=k[2]+d[2];return a};b.rotateZ=function(a,b,d,f){var e=[],k=[];e[0]=b[0]-d[0];e[1]=b[1]-d[1];e[2]=b[2]-d[2];k[0]=e[0]*Math.cos(f)-e[1]*
Math.sin(f);k[1]=e[0]*Math.sin(f)+e[1]*Math.cos(f);k[2]=e[2];a[0]=k[0]+d[0];a[1]=k[1]+d[1];a[2]=k[2]+d[2];return a};b.forEach=function(){var a=b.create();return function(b,d,f,e,k,l){d||(d=3);f||(f=0);for(e=e?Math.min(e*d+f,b.length):b.length;f<e;f+=d)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+2],k(a,a,l),b[f]=a[0],b[f+1]=a[1],b[f+2]=a[2];return b}}();b.angle=function(a,c){var d=b.fromValues(a[0],a[1],a[2]),f=b.fromValues(c[0],c[1],c[2]);b.normalize(d,d);b.normalize(f,f);d=b.dot(d,f);return 1<d?0:Math.acos(d)};
b.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};b.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};b.equals=function(a,b){var e=a[0],f=a[1],h=a[2],k=b[0],l=b[1],p=b[2];return Math.abs(e-k)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(h-p)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))};h.exports=b},{"./common.js":65}],73:[function(e,h,q){var d=e("./common.js"),b={create:function(){var a=
new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new d.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,e,f){var h=new d.ARRAY_TYPE(4);h[0]=a;h[1]=b;h[2]=e;h[3]=f;return h},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,d,f,e){a[0]=b;a[1]=d;a[2]=f;a[3]=e;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},subtract:function(a,b,d){a[0]=b[0]-
d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};b.sub=b.subtract;b.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};b.mul=b.multiply;b.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};b.div=b.divide;b.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};b.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);
a[3]=Math.floor(b[3]);return a};b.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};b.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};b.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};b.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};b.scaleAndAdd=
function(a,b,d,f){a[0]=b[0]+d[0]*f;a[1]=b[1]+d[1]*f;a[2]=b[2]+d[2]*f;a[3]=b[3]+d[3]*f;return a};b.distance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1],e=b[2]-a[2],k=b[3]-a[3];return Math.sqrt(d*d+f*f+e*e+k*k)};b.dist=b.distance;b.squaredDistance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1],e=b[2]-a[2],k=b[3]-a[3];return d*d+f*f+e*e+k*k};b.sqrDist=b.squaredDistance;b.length=function(a){var b=a[0],d=a[1],f=a[2];a=a[3];return Math.sqrt(b*b+d*d+f*f+a*a)};b.len=b.length;b.squaredLength=function(a){var b=a[0],
d=a[1],f=a[2];a=a[3];return b*b+d*d+f*f+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};b.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};b.normalize=function(a,b){var d=b[0],f=b[1],e=b[2],k=b[3],l=d*d+f*f+e*e+k*k;0<l&&(l=1/Math.sqrt(l),a[0]=d*l,a[1]=f*l,a[2]=e*l,a[3]=k*l);return a};b.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};b.lerp=function(a,b,d,f){var e=b[0],k=b[1],l=b[2];b=b[3];a[0]=
e+f*(d[0]-e);a[1]=k+f*(d[1]-k);a[2]=l+f*(d[2]-l);a[3]=b+f*(d[3]-b);return a};b.random=function(a,c){c=c||1;a[0]=d.RANDOM();a[1]=d.RANDOM();a[2]=d.RANDOM();a[3]=d.RANDOM();b.normalize(a,a);b.scale(a,a,c);return a};b.transformMat4=function(a,b,d){var f=b[0],e=b[1],k=b[2];b=b[3];a[0]=d[0]*f+d[4]*e+d[8]*k+d[12]*b;a[1]=d[1]*f+d[5]*e+d[9]*k+d[13]*b;a[2]=d[2]*f+d[6]*e+d[10]*k+d[14]*b;a[3]=d[3]*f+d[7]*e+d[11]*k+d[15]*b;return a};b.transformQuat=function(a,b,d){var f=b[0],e=b[1],k=b[2],l=d[0],h=d[1],m=d[2];
d=d[3];var q=d*f+h*k-m*e,r=d*e+m*f-l*k,t=d*k+l*e-h*f,f=-l*f-h*e-m*k;a[0]=q*d+f*-l+r*-m-t*-h;a[1]=r*d+f*-h+t*-l-q*-m;a[2]=t*d+f*-m+q*-h-r*-l;a[3]=b[3];return a};b.forEach=function(){var a=b.create();return function(b,d,f,e,k,l){d||(d=4);f||(f=0);for(e=e?Math.min(e*d+f,b.length):b.length;f<e;f+=d)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+2],a[3]=b[f+3],k(a,a,l),b[f]=a[0],b[f+1]=a[1],b[f+2]=a[2],b[f+3]=a[3];return b}}();b.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};b.exactEquals=function(a,
b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};b.equals=function(a,b){var e=a[0],f=a[1],h=a[2],k=a[3],l=b[0],p=b[1],m=b[2],q=b[3];return Math.abs(e-l)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(f-p)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(h-m)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(k-q)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(q))};h.exports=b},{"./common.js":65}],74:[function(e,h,q){h.exports=function(d,b,a){d[0]=b[0]+a[0];d[1]=b[1]+
a[1];d[2]=b[2]+a[2];return d}},{}],75:[function(e,h,q){h.exports=function(c,e){var f=d(c[0],c[1],c[2]),h=d(e[0],e[1],e[2]);b(f,f);b(h,h);f=a(f,h);return 1<f?0:Math.acos(f)};var d=e("./fromValues"),b=e("./normalize"),a=e("./dot")},{"./dot":82,"./fromValues":84,"./normalize":93}],76:[function(e,h,q){h.exports=function(d){var b=new Float32Array(3);b[0]=d[0];b[1]=d[1];b[2]=d[2];return b}},{}],77:[function(e,h,q){h.exports=function(d,b){d[0]=b[0];d[1]=b[1];d[2]=b[2];return d}},{}],78:[function(e,h,q){h.exports=
function(){var d=new Float32Array(3);d[0]=0;d[1]=0;d[2]=0;return d}},{}],79:[function(e,h,q){h.exports=function(d,b,a){var c=b[0],e=b[1];b=b[2];var f=a[0],h=a[1];a=a[2];d[0]=e*a-b*h;d[1]=b*f-c*a;d[2]=c*h-e*f;return d}},{}],80:[function(e,h,q){h.exports=function(d,b){var a=b[0]-d[0],c=b[1]-d[1],e=b[2]-d[2];return Math.sqrt(a*a+c*c+e*e)}},{}],81:[function(e,h,q){h.exports=function(d,b,a){d[0]=b[0]/a[0];d[1]=b[1]/a[1];d[2]=b[2]/a[2];return d}},{}],82:[function(e,h,q){h.exports=function(d,b){return d[0]*
b[0]+d[1]*b[1]+d[2]*b[2]}},{}],83:[function(e,h,q){h.exports=function(b,a,c,e,f,h){a||(a=3);c||(c=0);for(e=e?Math.min(e*a+c,b.length):b.length;c<e;c+=a)d[0]=b[c],d[1]=b[c+1],d[2]=b[c+2],f(d,d,h),b[c]=d[0],b[c+1]=d[1],b[c+2]=d[2];return b};var d=e("./create")()},{"./create":78}],84:[function(e,h,q){h.exports=function(d,b,a){var c=new Float32Array(3);c[0]=d;c[1]=b;c[2]=a;return c}},{}],85:[function(e,h,q){h.exports={create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),
copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),
transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":74,"./angle":75,"./clone":76,"./copy":77,"./create":78,"./cross":79,"./distance":80,"./divide":81,"./dot":82,"./forEach":83,"./fromValues":84,"./inverse":86,"./length":87,"./lerp":88,"./max":89,"./min":90,"./multiply":91,"./negate":92,"./normalize":93,"./random":94,"./rotateX":95,"./rotateY":96,"./rotateZ":97,"./scale":98,"./scaleAndAdd":99,"./set":100,"./squaredDistance":101,
"./squaredLength":102,"./subtract":103,"./transformMat3":104,"./transformMat4":105,"./transformQuat":106}],86:[function(e,h,q){h.exports=function(d,b){d[0]=1/b[0];d[1]=1/b[1];d[2]=1/b[2];return d}},{}],87:[function(e,h,q){h.exports=function(d){var b=d[0],a=d[1];d=d[2];return Math.sqrt(b*b+a*a+d*d)}},{}],88:[function(e,h,q){h.exports=function(d,b,a,c){var e=b[0],f=b[1];b=b[2];d[0]=e+c*(a[0]-e);d[1]=f+c*(a[1]-f);d[2]=b+c*(a[2]-b);return d}},{}],89:[function(e,h,q){h.exports=function(d,b,a){d[0]=Math.max(b[0],
a[0]);d[1]=Math.max(b[1],a[1]);d[2]=Math.max(b[2],a[2]);return d}},{}],90:[function(e,h,q){h.exports=function(d,b,a){d[0]=Math.min(b[0],a[0]);d[1]=Math.min(b[1],a[1]);d[2]=Math.min(b[2],a[2]);return d}},{}],91:[function(e,h,q){h.exports=function(d,b,a){d[0]=b[0]*a[0];d[1]=b[1]*a[1];d[2]=b[2]*a[2];return d}},{}],92:[function(e,h,q){h.exports=function(d,b){d[0]=-b[0];d[1]=-b[1];d[2]=-b[2];return d}},{}],93:[function(e,h,q){h.exports=function(d,b){var a=b[0],c=b[1],e=b[2],a=a*a+c*c+e*e;0<a&&(a=1/Math.sqrt(a),
d[0]=b[0]*a,d[1]=b[1]*a,d[2]=b[2]*a);return d}},{}],94:[function(e,h,q){h.exports=function(d,b){b=b||1;var a=2*Math.random()*Math.PI,c=2*Math.random()-1,e=Math.sqrt(1-c*c)*b;d[0]=Math.cos(a)*e;d[1]=Math.sin(a)*e;d[2]=c*b;return d}},{}],95:[function(e,h,q){h.exports=function(d,b,a,c){var e=[],f=[];e[0]=b[0]-a[0];e[1]=b[1]-a[1];e[2]=b[2]-a[2];f[0]=e[0];f[1]=e[1]*Math.cos(c)-e[2]*Math.sin(c);f[2]=e[1]*Math.sin(c)+e[2]*Math.cos(c);d[0]=f[0]+a[0];d[1]=f[1]+a[1];d[2]=f[2]+a[2];return d}},{}],96:[function(e,
h,q){h.exports=function(d,b,a,c){var e=[],f=[];e[0]=b[0]-a[0];e[1]=b[1]-a[1];e[2]=b[2]-a[2];f[0]=e[2]*Math.sin(c)+e[0]*Math.cos(c);f[1]=e[1];f[2]=e[2]*Math.cos(c)-e[0]*Math.sin(c);d[0]=f[0]+a[0];d[1]=f[1]+a[1];d[2]=f[2]+a[2];return d}},{}],97:[function(e,h,q){h.exports=function(d,b,a,c){var e=[],f=[];e[0]=b[0]-a[0];e[1]=b[1]-a[1];e[2]=b[2]-a[2];f[0]=e[0]*Math.cos(c)-e[1]*Math.sin(c);f[1]=e[0]*Math.sin(c)+e[1]*Math.cos(c);f[2]=e[2];d[0]=f[0]+a[0];d[1]=f[1]+a[1];d[2]=f[2]+a[2];return d}},{}],98:[function(e,
h,q){h.exports=function(d,b,a){d[0]=b[0]*a;d[1]=b[1]*a;d[2]=b[2]*a;return d}},{}],99:[function(e,h,q){h.exports=function(d,b,a,c){d[0]=b[0]+a[0]*c;d[1]=b[1]+a[1]*c;d[2]=b[2]+a[2]*c;return d}},{}],100:[function(e,h,q){h.exports=function(d,b,a,c){d[0]=b;d[1]=a;d[2]=c;return d}},{}],101:[function(e,h,q){h.exports=function(d,b){var a=b[0]-d[0],c=b[1]-d[1],e=b[2]-d[2];return a*a+c*c+e*e}},{}],102:[function(e,h,q){h.exports=function(d){var b=d[0],a=d[1];d=d[2];return b*b+a*a+d*d}},{}],103:[function(e,h,
q){h.exports=function(d,b,a){d[0]=b[0]-a[0];d[1]=b[1]-a[1];d[2]=b[2]-a[2];return d}},{}],104:[function(e,h,q){h.exports=function(d,b,a){var c=b[0],e=b[1];b=b[2];d[0]=c*a[0]+e*a[3]+b*a[6];d[1]=c*a[1]+e*a[4]+b*a[7];d[2]=c*a[2]+e*a[5]+b*a[8];return d}},{}],105:[function(e,h,q){h.exports=function(d,b,a){var c=b[0],e=b[1];b=b[2];var f=a[3]*c+a[7]*e+a[11]*b+a[15],f=f||1;d[0]=(a[0]*c+a[4]*e+a[8]*b+a[12])/f;d[1]=(a[1]*c+a[5]*e+a[9]*b+a[13])/f;d[2]=(a[2]*c+a[6]*e+a[10]*b+a[14])/f;return d}},{}],106:[function(e,
h,q){h.exports=function(d,b,a){var c=b[0],e=b[1],f=b[2];b=a[0];var h=a[1],k=a[2];a=a[3];var l=a*c+h*f-k*e,p=a*e+k*c-b*f,m=a*f+b*e-h*c,c=-b*c-h*e-k*f;d[0]=l*a+c*-b+p*-k-m*-h;d[1]=p*a+c*-h+m*-b-l*-k;d[2]=m*a+c*-k+l*-h-p*-b;return d}},{}],107:[function(e,h,q){(function(d){function b(){f.forEach(function(a){n[g[a]]=!1})}function a(a){n[g[a.keyCode]]=!1}function c(a){n[g[a.keyCode]]=!0}var g=e("vkey"),f=Object.keys(g),n={};b();h.exports=function(a){return a?n[a]:n};d.browser&&(window.addEventListener("keydown",
c,!1),window.addEventListener("keyup",a,!1),window.addEventListener("blur",b,!1))}).call(this,e("_process"))},{_process:109,vkey:112}],108:[function(e,h,q){function d(a,b,c){this.rotation=a;this.center=b;this.distance=c}function b(a,b){var c=b[0],d=b[1],c=c*c+d*d;1<c&&(c=1);a[0]=-b[0];a[1]=b[1];a[2]=b[2]||Math.sqrt(1-c);a[3]=0}e=e("gl-matrix");var a=e.vec3,c=e.mat3,g=e.mat4,f=e.quat,n=new Float32Array(16),k=new Float32Array(16);e=d.prototype;e.view=function(b){b||(b=g.create());k[0]=k[1]=0;k[2]=-this.distance;
g.fromRotationTranslation(b,f.conjugate(n,this.rotation),k);g.translate(b,b,a.negate(n,this.center));return b};e.lookAt=function(b,d,e){g.lookAt(n,b,d,e);c.fromMat4(n,n);f.fromMat3(this.rotation,n);a.copy(this.center,d);this.distance=a.distance(b,d)};e.pan=function(b){var c=this.distance;n[0]=-c*(b[0]||0);n[1]=c*(b[1]||0);n[2]=c*(b[2]||0);a.transformQuat(n,n,this.rotation);a.add(this.center,this.center,n)};e.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};e.rotate=function(a,
c){b(n,a);b(k,c);f.invert(k,k);f.multiply(n,n,k);1E-6>f.length(n)||(f.multiply(this.rotation,this.rotation,n),f.normalize(this.rotation,this.rotation))};h.exports=function(b,c,e){b=b||[0,0,-1];c=c||[0,0,0];e=e||[0,1,0];var g=new d(f.create(),a.create(),1);g.lookAt(b,c,e);return g}},{"gl-matrix":64}],109:[function(e,h,q){function d(a){if(n===setTimeout)return setTimeout(a,0);try{return n(a,0)}catch(b){try{return n.call(null,a,0)}catch(c){return n.call(this,a,0)}}}function b(a){if(k===clearTimeout)return clearTimeout(a);
try{return k(a)}catch(b){try{return k.call(null,a)}catch(c){return k.call(this,a)}}}function a(){p&&m&&(p=!1,m.length?l=m.concat(l):u=-1,l.length&&c())}function c(){if(!p){var c=d(a);p=!0;for(var f=l.length;f;){m=l;for(l=[];++u<f;)m&&m[u].run();u=-1;f=l.length}m=null;p=!1;b(c)}}function g(a,b){this.fun=a;this.array=b}function f(){}e=h.exports={};var n,k;(function(){try{n=setTimeout}catch(a){n=function(){throw Error("setTimeout is not defined");}}try{k=clearTimeout}catch(a){k=function(){throw Error("clearTimeout is not defined");
}}})();var l=[],p=!1,m,u=-1;e.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var f=1;f<arguments.length;f++)b[f-1]=arguments[f];l.push(new g(a,b));1!==l.length||p||d(c)};g.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=!0;e.env={};e.argv=[];e.version="";e.versions={};e.on=f;e.addListener=f;e.once=f;e.off=f;e.removeListener=f;e.removeAllListeners=f;e.emit=f;e.binding=function(a){throw Error("process.binding is not supported");};
e.cwd=function(){return"/"};e.chdir=function(a){throw Error("process.chdir is not supported");};e.umask=function(){return 0}},{}],110:[function(e,h,q){function d(a){throw Error("resl: "+a);}function b(a,b,c){Object.keys(a).forEach(function(a){0>b.indexOf(a)&&d('invalid parameter "'+a+'" in '+c)})}function a(a,b){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=b}var c=["manifest","onDone","onProgress","onError"],g=["type","src","stream","credentials","parser"],f=["onData","onDone"];
h.exports=function(e){function h(a,b){if(a in e){var c=e[a];"function"!==typeof c&&d('invalid callback "'+a+'"');return c}return null}function l(b){function c(){if(!(2>h.readyState||1===k.state||-1===k.state)){if(200!==h.status)return m('error loading resource "'+b.name+'"');if(2<h.readyState&&0===k.state){var a;a="binary"===b.type?h.response:h.responseText;if(g.data)try{l=g.data(a)}catch(f){return m(f)}else l=a}if(3<h.readyState&&0===k.state){if(g.done)try{l=g.done()}catch(f){return m(f)}k.state=
1}x[d]=l;k.progress=.75*k.progress+.25;k.ready=b.stream&&!!l||1===k.state;q()}}var d=b.name,f=b.stream,e="binary"===b.type,g=b.parser,h=new XMLHttpRequest,l=null,k=new a(d,function(){1!==k.state&&-1!==k.state&&(h.onreadystatechange=null,h.abort(),k.state=-1)});h.onreadystatechange=f?c:function(){4===h.readyState&&c()};e&&(h.responseType="arraybuffer");b.credentials&&(h.withCredentials=!0);h.open("GET",b.src,!0);h.send();return k}function p(b,c){function d(){if(0===n.state)if(l.data)try{p=l.data(c)}catch(a){return m(a)}else p=
c}function f(a){d();x[k]=p;n.progress=a.lengthComputable?Math.max(n.progress,a.loaded/a.total):.75*n.progress+.25;n.ready=b.stream;q(k)}function e(){d();if(0===n.state){if(l.done)try{p=l.done()}catch(a){return m(a)}n.state=1}n.progress=1;n.ready=!0;x[k]=p;h();q("finish "+k)}function g(){m('error loading asset "'+k+'"')}function h(){b.stream&&c.removeEventListener("progress",f);"image"===b.type?c.addEventListener("load",e):c.addEventListener("canplay",e);c.removeEventListener("error",g)}var k=b.name,
l=b.parser,n=new a(k,function(){1!==n.state&&-1!==n.state&&(n.state=-1,h(),c.src="")}),p=c;b.stream&&c.addEventListener("progress",f);if("image"===b.type)c.addEventListener("load",e);else{var r=!1,t=!1;c.addEventListener("loadedmetadata",function(){t=!0;r&&e()});c.addEventListener("canplay",function(){r=!0;t&&e()})}c.addEventListener("error",g);c.crossOrigin=b.credentials?"use-credentials":"anonymous";c.src=b.src;return n}function m(a){-1!==w&&1!==w&&(w=-1,A.forEach(function(a){a.cancel()}),v?"string"===
typeof a?v(Error("resl: "+a)):v(a):console.error("resl error:",a))}function q(a){if(-1!==w&&1!==w){var b=0,c=0;A.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===A.length?(w=1,t(x)):H&&H(b/A.length,a)}}"object"===typeof e&&e||d("invalid or missing configuration");b(e,c,"config");var r=e.manifest;"object"===typeof r&&r||d("missing manifest");var t=h("onDone");t||d("missing onDone() callback");var H=h("onProgress"),v=h("onError"),x={},w=0,y={text:l,binary:function(a){return l(a)},image:function(a){return p(a,
document.createElement("img"))},video:function(a){return p(a,document.createElement("video"))},audio:function(a){return p(a,document.createElement("audio"))}},A=Object.keys(r).map(function(a){function c(a,b){if(a in e.parser){var f=e.parser[a];"function"!==typeof f&&d("invalid parser callback "+a+' for asset "'+a+'"');return f}return b}var e=r[a];"string"===typeof e?e={src:e}:"object"===typeof e&&e||d('invalid asset definition "'+a+'"');b(e,g,'asset "'+a+'"');var h={};"parser"in e&&("function"===
typeof e.parser?h={data:e.parser}:"object"===typeof e.parser&&e.parser?(b(h,f,'parser for asset "'+a+'"'),"onData"in h||d('missing onData callback for parser in asset "'+a+'"'),h={data:c("onData"),done:c("onDone")}):d('invalid parser for asset "'+a+'"'));return{name:a,type:function(b,c,f){b in e&&(f=e[b]);0>c.indexOf(f)&&d("invalid "+b+' "'+f+'" for asset "'+a+'", possible values: '+c);return f}("type",Object.keys(y),"text"),stream:!!e.stream,credentials:!!e.credentials,src:function(b,c,f){b in e?
f=e[b]:c&&d("missing "+b+' for asset "'+a+'"');"string"!==typeof f&&d("invalid "+b+' for asset "'+a+'", must be a string');return f}("src",!0,""),parser:h}}).map(function(a){return y[a.type](a)})}},{}],111:[function(e,h,q){var d=e("events/"),b=e("wheel");h.exports=function(a,c){function e(){f[0]=f[1]=f[2]=0}var f=new d;f.flush=e;e();if("undefined"===typeof window)return f;a=a||window;b(a,function(a){var b=1===a.deltaMode?12:1;f[0]+=b*(a.deltaX||0);f[1]+=b*(a.deltaY||0);f[2]+=b*(a.deltaZ||0);f.emit("scroll",
f);c&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return f}},{"events/":39,wheel:113}],112:[function(e,h,q){var d="undefined"!==typeof window?window.navigator.userAgent:"";e=/OS X/.test(d);q=/Opera/.test(d);d=!/like Gecko/.test(d)&&!q;e=h.exports={0:e?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",
21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:e?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",
110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:e&&d?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",
182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:q?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(h=58;65>h;++h)e[h]=String.fromCharCode(h);for(h=48;58>h;++h)e[h]=h-48+"";for(h=65;91>h;++h)e[h]=String.fromCharCode(h);for(h=96;106>h;++h)e[h]="<num-"+
(h-96)+">";for(h=112;136>h;++h)e[h]="F"+(h-111)},{}],113:[function(e,h,q){function d(d,f,e,h){d[a](b+f,"wheel"==c?e:function(a){!a&&(a=window.event);var b={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==c?(b.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(b.deltaX=-.025*a.wheelDeltaX)):b.deltaY=a.detail;return e(b)},h||!1)}h.exports=function(a,
b,e){d(a,c,b,e);"DOMMouseScroll"==c&&d(a,"MozMousePixelScroll",b,e)};var b="",a,c;window.addEventListener?a="addEventListener":(a="attachEvent",b="on");c="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],114:[function(e,h,q){function d(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var b=e("./lib/util/extend"),a=e("./lib/dynamic"),c=e("./lib/util/raf"),g=e("./lib/util/clock"),f=e("./lib/strings"),n=e("./lib/webgl"),k=
e("./lib/extension"),l=e("./lib/limits"),p=e("./lib/buffer"),m=e("./lib/elements"),u=e("./lib/texture"),r=e("./lib/renderbuffer"),t=e("./lib/framebuffer"),H=e("./lib/attribute"),v=e("./lib/shader"),x=e("./lib/read"),w=e("./lib/core"),y=e("./lib/stats"),A=e("./lib/timer");h.exports=function(e){function h(){if(0===P.length)L&&L.update(),R=null;else{R=c.next(h);N();for(var a=P.length-1;0<=a;--a){var b=P[a];b&&b(S,null,0)}G.flush();L&&L.update()}}function q(){!R&&0<P.length&&(R=c.next(h))}function E(){R&&
(c.cancel(h),R=null)}function M(a){a.preventDefault();E();ma.forEach(function(a){a()})}function K(a){G.getError();fa.restore();oa.restore();ia.restore();ca.restore();ha.restore();ja.restore();L&&L.restore();da.procs.refresh();q();T.forEach(function(a){a()})}function F(c){function d(b){var c={},e={};Object.keys(b).forEach(function(d){var f=b[d];a.isDynamic(f)?e[d]=a.unbox(f,d):c[d]=f});return{dynamic:e,"static":c}}function e(a){for(;p.length<a;)p.push(null);return p}var f=d(c.context||{}),g=d(c.uniforms||
{}),h=d(c.attributes||{}),k=d(function(a){function c(a){if(a in d){var b=d[a];delete d[a];Object.keys(b).forEach(function(c){d[a+"."+c]=b[c]})}}var d=b({},a);delete d.uniforms;delete d.attributes;delete d.context;"stencil"in d&&d.stencil.op&&(d.stencil.opBack=d.stencil.opFront=d.stencil.op,delete d.stencil.op);c("blend");c("depth");c("cull");c("stencil");c("polygonOffset");c("scissor");c("sample");return d}(c));c={gpuTime:0,cpuTime:0,count:0};var f=da.compile(k,h,g,f,c),l=f.draw,m=f.batch,n=f.scope,
p=[];return b(function(a,b){var c;if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)n.call(this,null,b,c);else if(Array.isArray(a))for(c=0;c<a.length;++c)n.call(this,a[c],b,c);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:c})}function J(a){P.push(a);q();return{cancel:function(){function b(){var a=
d(P,b);P[a]=P[P.length-1];--P.length;0>=P.length&&E()}var c=d(P,a);P[c]=b}}}function C(){var a=X.viewport,b=X.scissor_box;a[0]=a[1]=b[0]=b[1]=0;S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=a[2]=b[2]=G.drawingBufferWidth;S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=a[3]=b[3]=G.drawingBufferHeight}function N(){S.tick+=1;S.time=U();C();da.procs.poll()}function I(){C();da.procs.refresh();L&&L.update()}function U(){return(g()-aa)/1E3}e=n(e);if(!e)return null;var G=e.gl,Z=G.getContextAttributes();
G.isContextLost();var fa=k(G,e);if(!fa)return null;var V=f(),W=y(),Q=fa.extensions,L=A(G,Q),aa=g(),ka=G.drawingBufferWidth,sa=G.drawingBufferHeight,S={tick:0,time:0,viewportWidth:ka,viewportHeight:sa,framebufferWidth:ka,framebufferHeight:sa,drawingBufferWidth:ka,drawingBufferHeight:sa,pixelRatio:e.pixelRatio},ga=l(G,Q),ia=p(G,W,e),na=m(G,Q,ia,W),ka=H(G,Q,ga,ia,V),oa=v(G,V,W,e),ca=u(G,Q,ga,function(){da.procs.poll()},S,W,e),ha=r(G,Q,ga,W,e),ja=t(G,Q,ga,ca,ha,W),da=w(G,V,Q,ga,ia,na,ca,ja,{},ka,oa,{elements:null,
primitive:4,count:-1,offset:0,instances:-1},S,L,e),V=x(G,ja,da.procs.poll,S,Z,Q),X=da.next,ea=G.canvas,P=[],ma=[],T=[],Y=[e.onDestroy],R=null;ea&&(ea.addEventListener("webglcontextlost",M,!1),ea.addEventListener("webglcontextrestored",K,!1));I();Z=b(F,{clear:function(a){var b=0;da.procs.poll();var c=a.color;c&&(G.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(G.clearDepth(+a.depth),b|=256);"stencil"in a&&(G.clearStencil(a.stencil|0),b|=1024);G.clear(b)},prop:a.define.bind(null,
1),context:a.define.bind(null,2),"this":a.define.bind(null,3),draw:F({}),buffer:function(a){return ia.create(a,34962,!1,!1)},elements:function(a){return na.create(a,!1)},texture:ca.create2D,cube:ca.createCube,renderbuffer:ha.create,framebuffer:ja.create,framebufferCube:ja.createCube,attributes:Z,frame:J,on:function(a,b){var c;switch(a){case "frame":return J(b);case "lost":c=ma;break;case "restore":c=T;break;case "destroy":c=Y}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===
b){c[a]=c[c.length-1];c.pop();break}}}},limits:ga,hasExtension:function(a){return 0<=ga.extensions.indexOf(a.toLowerCase())},read:V,destroy:function(){P.length=0;E();ea&&(ea.removeEventListener("webglcontextlost",M),ea.removeEventListener("webglcontextrestored",K));oa.clear();ja.clear();ha.clear();ca.clear();na.clear();ia.clear();L&&L.clear();Y.forEach(function(a){a()})},_gl:G,_refresh:I,poll:function(){N();L&&L.update()},now:U,stats:W});e.onDone(null,Z);return Z}},{"./lib/attribute":2,"./lib/buffer":3,
"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":30,"./lib/webgl":33}]},{},[1]);

        </script>
        </body>
      </html>