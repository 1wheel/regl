<!DOCTYPE html>
      <html>
        <head>
          <title>example/metaball.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return"jscomp_symbol_"+b+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();if(b[$jscomp.global.Symbol.iterator])return b[$jscomp.global.Symbol.iterator]();var d=0;return{next:function(){return d==b.length?{done:!0}:{done:!1,value:b[d++]}}}};
$jscomp.arrayFromIterator=function(b){for(var d,f=[];!(d=b.next()).done;)f.push(d.value);return f};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.inherits=function(b,d){function f(){}f.prototype=d.prototype;b.prototype=new f;b.prototype.constructor=b;for(var a in d)if($jscomp.global.Object.defineProperties){var c=$jscomp.global.Object.getOwnPropertyDescriptor(d,a);c&&$jscomp.global.Object.defineProperty(b,a,c)}else b[a]=d[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(b,d){b instanceof String&&(b=String(b));var f=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},c=(a.next=function(){if(f<b.length){var a=f++;return{value:d(a,b[a]),done:!1}}c.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return c},a);return c};
$jscomp.array.findInternal_=function(b,d,f){b instanceof String&&(b=String(b));for(var a=b.length,c=0;c<a;c++){var l=b[c];if(d.call(f,l,c,b))return{i:c,v:l}}return{i:-1,v:void 0}};
$jscomp.array.from=function(b,d,f){d=void 0===d?function(a){return a}:d;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(b[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();b=b[Symbol.iterator]();for(var c;!(c=b.next()).done;)a.push(d.call(f,c.value))}else{c=b.length;for(var l=0;l<c;l++)a.push(d.call(f,b[l]))}return a};$jscomp.array.of=function(b){for(var d=[],f=0;f<arguments.length;++f)d[f-0]=arguments[f];return $jscomp.array.from(d)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(b,d){return[b,d]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(b){return b})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(b,d){return d})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(b,d,f){var a=this.length;b=Number(b);d=Number(d);f=Number(null!=f?f:a);if(b<d)for(f=Math.min(f,a);d<f;)d in this?this[b++]=this[d++]:(delete this[b++],d++);else for(f=Math.min(f,a+d-b),b+=f-d;f>d;)--f in this?this[--b]=this[f]:delete this[b];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(b,d,f){null!=f&&b.length||(f=this.length||0);f=Number(f);for(d=Number((void 0===d?0:d)||0);d<f;d++)this[d]=b;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(b,d){return $jscomp.array.findInternal_(this,b,d).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(b,d){return $jscomp.array.findInternal_(this,b,d).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(b){b=void 0===b?[]:b;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next())d=d.value,this.set(d[0],d[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var b=$jscomp.global.Map;if(!b||!b.prototype.entries||!Object.seal)return!1;try{var d=Object.seal({x:4}),f=new b($jscomp.makeIterator([[d,"s"]]));if("s"!=f.get(d)||1!=f.size||f.get({x:4})||f.set({x:4},"t")!=f||2!=f.size)return!1;var a=f.entries(),c=a.next();if(c.done||c.value[0]!=d||"s"!=c.value[1])return!1;c=a.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!a.next().done?!1:!0}catch(l){return!1}};
$jscomp.Map.createHead_=function(){var b={};return b.previous=b.next=b.head=b};$jscomp.Map.getId_=function(b){if(!(b instanceof Object))return String(b);$jscomp.Map.key_ in b||b instanceof Object&&Object.isExtensible&&Object.isExtensible(b)&&$jscomp.Map.defineProperty_(b,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in b?b[$jscomp.Map.key_]:" "+b};
$jscomp.Map.prototype.set=function(b,d){var f=this.maybeGetEntry_(b),a=f.id,c=f.list,f=f.entry;c||(c=this.data_[a]=[]);f?f.value=d:(f={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:d},c.push(f),this.head_.previous.next=f,this.head_.previous=f,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(b){var d=this.maybeGetEntry_(b);b=d.id;var f=d.list,a=d.index;return(d=d.entry)&&f?(f.splice(a,1),f.length||delete this.data_[b],d.previous.next=d.next,d.next.previous=d.previous,d.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(b){return!!this.maybeGetEntry_(b).entry};
$jscomp.Map.prototype.get=function(b){return(b=this.maybeGetEntry_(b).entry)&&b.value};$jscomp.Map.prototype.maybeGetEntry_=function(b){var d=$jscomp.Map.getId_(b),f=this.data_[d];if(f)for(var a=0;a<f.length;a++){var c=f[a];if(b!==b&&c.key!==c.key||b===c.key)return{id:d,list:f,index:a,entry:c}}return{id:d,list:f,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(b){return[b.key,b.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(b){return b.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(b){return b.value})};$jscomp.Map.prototype.forEach=function(b,d){for(var f=$jscomp.makeIterator(this.entries()),a=f.next();!a.done;a=f.next())a=a.value,b.call(d,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(b){var d=this,f=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(f){for(;f.head!=d.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:b(f)};f=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(b,d,f){Object.defineProperty(b,d,{value:String(f)})}:function(b,d,f){b[d]=String(f)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(b){b=Number(b)>>>0;if(0===b)return 32;var d=0;0===(b&4294901760)&&(b<<=16,d+=16);0===(b&4278190080)&&(b<<=8,d+=8);0===(b&4026531840)&&(b<<=4,d+=4);0===(b&3221225472)&&(b<<=2,d+=2);0===(b&2147483648)&&d++;return d};$jscomp.math.imul=function(b,d){b=Number(b);d=Number(d);var f=b&65535,a=d&65535;return f*a+((b>>>16&65535)*a+f*(d>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1};
$jscomp.math.log10=function(b){return Math.log(b)/Math.LN10};$jscomp.math.log2=function(b){return Math.log(b)/Math.LN2};$jscomp.math.log1p=function(b){b=Number(b);if(.25>b&&-.25<b){for(var d=b,f=1,a=b,c=0,l=1;c!=a;)d*=b,l*=-1,a=(c=a)+l*d/++f;return a}return Math.log(1+b)};$jscomp.math.expm1=function(b){b=Number(b);if(.25>b&&-.25<b){for(var d=b,f=1,a=b,c=0;c!=a;)d*=b/++f,a=(c=a)+d;return a}return Math.exp(b)-1};$jscomp.math.cosh=function(b){b=Number(b);return(Math.exp(b)+Math.exp(-b))/2};
$jscomp.math.sinh=function(b){b=Number(b);return 0===b?b:(Math.exp(b)-Math.exp(-b))/2};$jscomp.math.tanh=function(b){b=Number(b);if(0===b)return b;var d=Math.exp(2*-Math.abs(b)),d=(1-d)/(1+d);return 0>b?-d:d};$jscomp.math.acosh=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};$jscomp.math.asinh=function(b){b=Number(b);if(0===b)return b;var d=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return 0>b?-d:d};
$jscomp.math.atanh=function(b){b=Number(b);return($jscomp.math.log1p(b)-$jscomp.math.log1p(-b))/2};
$jscomp.math.hypot=function(b,d,f){for(var a=[],c=2;c<arguments.length;++c)a[c-2]=arguments[c];b=Number(b);d=Number(d);for(var l=Math.max(Math.abs(b),Math.abs(d)),e=$jscomp.makeIterator(a),c=e.next();!c.done;c=e.next())l=Math.max(l,Math.abs(c.value));if(1E100<l||1E-100>l){b/=l;d/=l;e=b*b+d*d;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c)/l,e+=c*c;return Math.sqrt(e)*l}l=b*b+d*d;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c),l+=
c*c;return Math.sqrt(l)};$jscomp.math.trunc=function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var d=Math.floor(Math.abs(b));return 0>b?-d:d};$jscomp.math.cbrt=function(b){if(0===b)return b;b=Number(b);var d=Math.pow(Math.abs(b),1/3);return 0>b?-d:d};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b};
$jscomp.number.isInteger=function(b){return $jscomp.number.isFinite(b)?b===Math.floor(b):!1};$jscomp.number.isNaN=function(b){return"number"===typeof b&&isNaN(b)};$jscomp.number.isSafeInteger=function(b){return $jscomp.number.isInteger(b)&&Math.abs(b)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(b,d){for(var f=[],a=1;a<arguments.length;++a)f[a-1]=arguments[a];f=$jscomp.makeIterator(f);for(a=f.next();!a.done;a=f.next())if(a=a.value)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b};$jscomp.object.is=function(b,d){return b===d?0!==b||1/b===1/d:b!==b&&d!==d};$jscomp.Set=function(b){b=void 0===b?[]:b;this.map_=new $jscomp.Map;if(b){b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next())this.add(d.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var b=$jscomp.global.Set;if(!b||!b.prototype.entries||!Object.seal)return!1;var d=Object.seal({x:4}),b=new b($jscomp.makeIterator([d]));if(b.has(d)||1!=b.size||b.add(d)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var b=b.entries(),f=b.next();if(f.done||f.value[0]!=d||f.value[1]!=d)return!1;f=b.next();return f.done||f.value[0]==d||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:b.next().done};
$jscomp.Set.prototype.add=function(b){this.map_.set(b,b);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(b){b=this.map_["delete"](b);this.size=this.map_.size;return b};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(b){return this.map_.has(b)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(b,d){var f=this;this.map_.forEach(function(a){return b.call(d,a,a,f)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(b,d){if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(b){for(var d=[],f=0;f<arguments.length;++f)d[f-0]=arguments[f];for(var f="",d=$jscomp.makeIterator(d),a=d.next();!a.done;a=d.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?f+=String.fromCharCode(a):(a-=65536,f+=String.fromCharCode(a>>>10&1023|55296),f+=String.fromCharCode(a&1023|56320))}return f};
$jscomp.string.repeat=function(b){var d=this.toString();if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var f="";b;)if(b&1&&(f+=d),b>>>=1)d+=d;return f};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(b){var d=this.toString(),f=d.length;b=Number(b)||0;if(0<=b&&b<f){b|=0;var a=d.charCodeAt(b);if(55296>a||56319<a||b+1===f)return a;b=d.charCodeAt(b+1);return 56320>b||57343<b?a:1024*(a-55296)+b+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(b,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(b,"includes");return-1!==this.toString().indexOf(b,d)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(b,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(b,"startsWith");var f=this.toString();b+="";for(var a=f.length,c=b.length,l=Math.max(0,Math.min(d|0,f.length)),e=0;e<c&&l<a;)if(f[l++]!=b[e++])return!1;return e>=c};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(b,d){$jscomp.string.noRegExp_(b,"endsWith");var f=this.toString();b+="";void 0===d&&(d=f.length);for(var a=Math.max(0,Math.min(d|0,f.length)),c=b.length;0<c&&0<a;)if(f[--a]!=b[--c])return!1;return 0>=c};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(d,f,a){function c(e,h){if(!f[e]){if(!d[e]){var k="function"==typeof require&&require;if(!h&&k)return k(e,!0);if(l)return l(e,!0);k=Error("Cannot find module '"+e+"'");throw k.code="MODULE_NOT_FOUND",k;}k=f[e]={exports:{}};d[e][0].call(k.exports,function(a){var l=d[e][1][a];return c(l?l:a)},k,k.exports,e$$0,d,f,a)}return f[e].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c})({1:[function(b,d,f){var a=b("../regl")(),c=b("surface-nets"),l=b("ndarray"),
e=b("angle-normals"),m=b("gl-mat3"),h=b("./util/camera")(a,{distance:1.5,maxDistance:3,minDistance:.5,center:[1,1,1],theta:1}),k=a.buffer({length:49152,type:"float",usage:"dynamic"}),r=a.buffer({length:49152,type:"float",usage:"dynamic"}),v=a.elements({length:221184,count:36864,type:"uint16",usage:"dynamic",primitive:"triangles"}),p=a({vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n      gl_Position = vec4(position, 0., 1.);\n    }",frag:"\n    precision mediump float;\n    uniform vec3 color;\n    uniform float noise, width, height;\n\n    #define VIG_REDUCTION_POWER 1.\n    #define VIG_BOOST 1.\n\n    float random(vec3 scale,float seed) {\n      return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);\n    }\n\n    void main () {\n      vec2 resolution = vec2(width, height);\n      vec2 center = resolution * 0.5;\n      float vignette = distance( center, gl_FragCoord.xy ) / resolution.x;\n      vignette = VIG_BOOST - vignette * VIG_REDUCTION_POWER;\n\n      float n = noise * (.5 - random(vec3(1.), length(gl_FragCoord)));\n\n      float v = .5 * length(vec2(gl_FragCoord.y / resolution.y, (1. - abs(.5 - gl_FragCoord.x / resolution.x))));\n      vec3 base = color;\n      base += vec3(pow(v, 2.));\n\n      gl_FragColor = vec4(base * vec3(vignette) + vec3(n), 1.);\n    }",
uniforms:{color:[36/255,70/255,106/255],width:a.context("viewportWidth"),height:a.context("viewportHeight"),noise:.05},attributes:{position:[-4,-4,4,-4,0,4]},count:3}),q=a({vert:"\n    precision mediump float;\n    uniform mat4 projection, view;\n    uniform mat3 normalMatrix;\n\n    attribute vec3 position, normal;\n\n    varying vec3 vNormal, vONormal, vU;\n    varying vec4 vPosition, vOPosition;\n\n    void main () {\n      vNormal = normalMatrix * normal;\n      vONormal = normal;\n      vPosition = vec4(position, 1.0);\n      vOPosition = view * vPosition;\n      vU = normalize(vec3(vOPosition));\n      gl_Position = projection * vOPosition;\n    }",
frag:"\n    precision mediump float;\n    uniform sampler2D textureMap, normalMap;\n    uniform float normalScale, texScale;\n    uniform vec3 color, eye;\n\n    varying vec3 vNormal, vONormal, vU;\n    varying vec4 vPosition, vOPosition;\n\n    float random(vec3 scale, float seed) {\n      return fract(sin(dot(gl_FragCoord.xyz + seed,scale)) * 43758.5453 + seed);\n    }\n\n    vec3 spherical_environment_map(vec3 ray, vec3 normal) {\n      vec3 r = reflect(normalize(ray), normalize(normal));\n      float m = 2.0 * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.0) * (r.z + 1.0));\n      vec2 calculatedNormal = vec2(r.x / m + 0.5, r.y / m + 0.5);\n      return texture2D(textureMap, calculatedNormal).rgb;\n    }\n\n    mat3 tangent_space_basis(vec3 blend_weights) {\n      vec3 tanX = vec3(vNormal.x, -vNormal.z, vNormal.y);\n      vec3 tanY = vec3(vNormal.z, vNormal.y, -vNormal.x);\n      vec3 tanZ = vec3(-vNormal.y, vNormal.x, vNormal.z);\n      vec3 blended_tangent = tanX * blend_weights.xxx +\n                             tanY * blend_weights.yyy +\n                             tanZ * blend_weights.zzz;\n\n      return mat3(\n        normalize(blended_tangent),\n        normalize(cross(vNormal, blended_tangent)),\n        normalize(vNormal)\n      );\n    }\n\n    vec3 blended_bump(vec3 blend_weights) {\n      vec2 coord1 = vPosition.yz * texScale;\n      vec2 coord2 = vPosition.zx * texScale;\n      vec2 coord3 = vPosition.xy * texScale;\n\n      vec3 bump1 = texture2D(normalMap, coord1).rgb;\n      vec3 bump2 = texture2D(normalMap, coord2).rgb;\n      vec3 bump3 = texture2D(normalMap, coord3).rgb;\n\n      return bump1 * blend_weights.xxx +\n             bump2 * blend_weights.yyy +\n             bump3 * blend_weights.zzz;\n    }\n\n    void main() {\n      // Using triplanar texturing, as in http://http.developer.nvidia.com/GPUGems3/gpugems3_ch01.html\n      vec3 blend_weights = abs(normalize(vONormal.xyz));\n      blend_weights = (blend_weights - 0.2) * 7.;\n      blend_weights = max(blend_weights, 0.);\n      blend_weights /= (blend_weights.x + blend_weights.y + blend_weights.z);\n\n      mat3 tsb = tangent_space_basis(blend_weights);\n      vec3 bump = blended_bump(blend_weights);\n\n      vec3 normalTex = bump * 2.0 - 1.0;\n      normalTex.xy *= normalScale;\n      normalTex.y *= -1.;\n      normalTex = normalize(normalTex);\n      vec3 finalNormal = tsb * normalTex;\n      vec3 base = spherical_environment_map(vU, finalNormal);\n\n      float rim = 1.75 * max(0., abs(dot(normalize(vNormal), normalize(-vOPosition.xyz))));\n      base += 10. * base * color * clamp(1. - rim, 0., .15);\n\n      base = vec3(1.) - (vec3(1.) - base) * (vec3(1.) - base);\n\n      float dither = .05 * random(vec3(1.), length(gl_FragCoord));\n      base += vec3(dither);\n\n      gl_FragColor = vec4(base.rgb, 1.);\n    }",
attributes:{position:{buffer:k},normal:{buffer:r}},uniforms:{color:[36/255,70/255,106/255],sphereColor:[36/255,70/255,106/255],normalScale:1,texScale:10,normalMatrix:function(a){var c=m.create();m.normalFromMat4(c,a.view);return c},textureMap:a.prop("textureMap"),normalMap:a.prop("normalMap")},elements:v}),x=1.2/((Math.sqrt(20)-1)/4+1),u=[.5,.5,.5],t=[1.5,1.5,1.5],w=[0,1,2].map(function(a){return(t[a]-u[a])/50}),C=50*Math.sqrt(x/12),y=function(a){a*=.5;for(var e=new Float32Array(125E3),b=0;20>b;b++){var h=
void 0,m,k,q,r,d;k=$jscomp.makeIterator([.27*Math.sin(b+1.26*a*(1.03+.5*Math.cos(.21*b)))+.5,.27*Math.cos(b+1.12*a*.21*Math.sin(.72+.83*b))+.5,.27*Math.cos(b+.132*a*Math.sin(.92+.53*b))+.5]);h=k.next().value;m=k.next().value;k=k.next().value;d=[h,m,k].map(function(g){g*=50;return[Math.max(Math.floor(g-C),1),Math.min(Math.floor(g+C),49)]});q=d[0];r=d[1];d=d[2];for(var f=d[0];f<d[1];f++)for(var v=2500*f,p=r[0];p<r[1];p++)for(var t=50*p,y=q[0];y<q[1];y++){var Y=y/50-h,g=p/50-m,n=f/50-k,Y=x/(1E-6+Y*Y+
g*g+n*n)-12;0<Y&&(e[v+t+y]+=Y)}}a=c(l(e,[50,50,50]),80);e=Array(a.positions.length);for(b=0;b<a.positions.length;b++){h=a.positions[b];m=Array(3);for(k=0;3>k;k++)m[k]=u[k]+h[k]*w[k];e[b]=m}return{positions:e,cells:a.cells}};b("resl")({manifest:{sphereTexture:{type:"image",src:"assets/spheretexture.jpg",parser:function(c){return a.texture({data:c,mag:"linear",min:"linear"})}},normalTexture:{type:"image",src:"assets/normaltexture.jpg",parser:function(c){return a.texture({data:c,wrapT:"repeat",wrapS:"repeat",
min:"linear mipmap linear",mag:"linear"})}}},onDone:function(c){var b=c.sphereTexture,l=c.normalTexture;a.frame(function(c){c=y(c.time);k({data:c.positions});v({data:c.cells});r({data:e(c.cells,c.positions)});h(function(){p({depth:{enable:!1,mask:!1}});a.clear({depth:1});q({textureMap:b,normalMap:l})})})}})},{"../regl":87,"./util/camera":2,"angle-normals":35,"gl-mat3":54,ndarray:75,resl:79,"surface-nets":80}],2:[function(b,d,f){var a=b("mouse-change"),c=b("mouse-wheel"),l=b("gl-mat4/identity"),e=
b("gl-mat4/perspective"),m=b("gl-mat4/lookAt");d.exports=function(b,k){function d(a){a*=.9;return.1>a?0:a}function f(a){var c=p.center,b=p.eye,e=p.up;p.theta+=w;p.phi=Math.min(Math.max(p.phi+C,-Math.PI/2),Math.PI/2);p.distance=Math.min(Math.max(p.distance+y,u),t);w=d(w);C=d(C);y=d(y);for(var l=p.theta,h=p.phi,k=Math.exp(p.distance),v=k*Math.sin(l)*Math.cos(h),l=k*Math.cos(l)*Math.cos(h),h=k*Math.sin(h),k=0;3>k;++k)b[k]=c[k]+v*x[k]+l*q[k]+h*e[k];m(p.view,b,c,e);E(a)}var p={view:l(new Float32Array(16)),
projection:l(new Float32Array(16)),center:new Float32Array(k.center||3),theta:k.theta||0,phi:k.phi||0,distance:Math.log(k.distance||10),eye:new Float32Array(3),up:new Float32Array(k.up||[0,1,0])},q=new Float32Array([1,0,0]),x=new Float32Array([0,0,1]),u=Math.log("minDistance"in k?k.minDistance:.1),t=Math.log("maxDistance"in k?k.maxDistance:1E3),w=0,C=0,y=0,A=0,D=0;a(function(a,c,b){if(a&1){a=(b-D)/window.innerHeight;var e=Math.max(p.distance,.5);w+=(c-A)/window.innerWidth*e;C+=e*a}A=c;D=b});c(function(a,
c){y+=c/window.innerHeight});var E=b({context:Object.assign({},p,{projection:function(a){return e(p.projection,Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)}}),uniforms:Object.keys(p).reduce(function(a,c){a[c]=b.context(c);return a},{})});Object.keys(p).forEach(function(a){f[a]=p[a]});return f}},{"gl-mat4/identity":63,"gl-mat4/lookAt":64,"gl-mat4/perspective":65,"mouse-change":71,"mouse-wheel":73}],3:[function(b,d,f){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=
0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}d.exports=function(c,b,e,m,h){c=e.maxAttributes;b=Array(c);for(e=0;e<c;++e)b[e]=new a;return{Record:a,scope:{},state:b}}},{}],4:[function(b,d,f){function a(a){return p[Object.prototype.toString.call(a)]|0}function c(a,c){for(var b=0;b<c.length;++b)a[b]=c[b]}function l(a,c,b,e,l,h,m){for(var k=0,q=0;q<b;++q)for(var d=0;d<e;++d)a[k++]=c[l*q+h*d+m]}var e=b("./util/is-typed-array"),m=b("./util/is-ndarray"),h=b("./util/values"),
k=b("./util/pool");f=b("./util/flatten");var r=f.flatten,v=f.shape,p=b("./constants/arraytypes.json"),q=b("./constants/dtypes.json"),x=b("./constants/usage.json"),u=[];u[5120]=1;u[5122]=2;u[5124]=4;u[5121]=1;u[5123]=2;u[5125]=4;u[5126]=4;d.exports=function(b,d,f){function p(a){this.id=B++;this.buffer=b.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;f.profile&&(this.stats={size:0})}function A(a,c,e){a.byteLength=c.byteLength;
b.bufferData(a.type,c,e)}function D(b,h,q,d,f,p){b.usage=q;if(Array.isArray(h)){if(b.dtype=d||5126,0<h.length)if(Array.isArray(h[0])){f=v(h);for(var K=d=1;K<f.length;++K)d*=f[K];b.dimension=d;h=r(h,f,b.dtype);A(b,h,q);p?b.persistentData=h:k.freeType(h)}else"number"===typeof h[0]?(b.dimension=f,f=k.allocType(b.dtype,h.length),c(f,h),A(b,f,q),p?b.persistentData=f:k.freeType(f)):e(h[0])&&(b.dimension=h[0].length,b.dtype=d||a(h[0])||5126,h=r(h,[h.length,h[0].length],b.dtype),A(b,h,q),p?b.persistentData=
h:k.freeType(h))}else if(e(h))b.dtype=d||a(h),b.dimension=f,A(b,h,q),p&&(b.persistentData=new Uint8Array(new Uint8Array(h.buffer)));else if(m(h)){f=h.shape;var x=h.stride,K=h.offset,u=0,g=0,n=0,z=0;1===f.length?(u=f[0],g=1,n=x[0],z=0):2===f.length&&(u=f[0],g=f[1],n=x[0],z=x[1]);b.dtype=d||a(h.data)||5126;b.dimension=g;f=k.allocType(b.dtype,u*g);l(f,h.data,u,g,n,z,K);A(b,f,q);p?b.persistentData=f:k.freeType(f)}}function E(a){d.bufferCount--;b.deleteBuffer(a.buffer);a.buffer=null;delete K[a.id]}var B=
0,K={};p.prototype.bind=function(){b.bindBuffer(this.type,this.buffer)};p.prototype.destroy=function(){E(this)};var H=[];f.profile&&(d.getTotalBufferSize=function(){var a=0;Object.keys(K).forEach(function(c){a+=K[c].stats.size});return a});return{create:function(h,B,A,H){function L(a){var c=35044,l=null,g=0,n=0,h=1;Array.isArray(a)||e(a)||m(a)?l=a:"number"===typeof a?g=a|0:a&&("data"in a&&(l=a.data),"usage"in a&&(c=x[a.usage]),"type"in a&&(n=q[a.type]),"dimension"in a&&(h=a.dimension|0),"length"in
a&&(g=a.length|0));F.bind();l?D(F,l,c,n,h,H):(b.bufferData(F.type,g,c),F.dtype=n||5121,F.usage=c,F.dimension=h,F.byteLength=g);f.profile&&(F.stats.size=F.byteLength*u[F.dtype]);return L}d.bufferCount++;var F=new p(B);K[F.id]=F;A||L(h);L._reglType="buffer";L._buffer=F;L.subdata=function(h,q){var d=(q||0)|0,g;F.bind();if(Array.isArray(h)){if(0<h.length)if("number"===typeof h[0]){var n=k.allocType(F.dtype,h.length);c(n,h);b.bufferSubData(F.type,d,n);k.freeType(n)}else if(Array.isArray(h[0])||e(h[0]))g=
v(h),n=r(h,g,F.dtype),b.bufferSubData(F.type,d,n),k.freeType(n)}else if(e(h))b.bufferSubData(F.type,d,h);else if(m(h)){g=h.shape;var z=h.stride,f=n=0,p=0,K=0;1===g.length?(n=g[0],f=1,p=z[0],K=0):2===g.length&&(n=g[0],f=g[1],p=z[0],K=z[1]);g=Array.isArray(h.data)?F.dtype:a(h.data);g=k.allocType(g,n*f);l(g,h.data,n,f,p,K,h.offset);b.bufferSubData(F.type,d,g);k.freeType(g)}return L};f.profile&&(L.stats=F.stats);L.destroy=function(){E(F)};return L},createStream:function(a,c){var b=H.pop();b||(b=new p(a));
b.bind();D(b,c,35040,0,1,!1);return b},destroyStream:function(a){H.push(a)},clear:function(){h(K).forEach(E);H.forEach(E)},getBuffer:function(a){return a&&a._buffer instanceof p?a._buffer:null},restore:function(){h(K).forEach(function(a){a.buffer=b.createBuffer();b.bindBuffer(a.type,a.buffer);b.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:D}}},{"./constants/arraytypes.json":5,"./constants/dtypes.json":6,"./constants/usage.json":8,"./util/flatten":25,"./util/is-ndarray":27,
"./util/is-typed-array":28,"./util/pool":30,"./util/values":33}],5:[function(b,d,f){d.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(b,d,f){d.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},
{}],7:[function(b,d,f){d.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(b,d,f){d.exports={"static":35044,dynamic:35048,stream:35040}},{}],9:[function(b,d,f){function a(a){return Array.isArray(a)||v(a)||p(a)}function c(a){return a.sort(function(a,c){return"viewport"===a?-1:"viewport"===c?1:a<c?-1:1})}function l(a,c,b,e){this.thisDep=a;this.contextDep=c;this.propDep=b;this.append=e}function e(a){return a&&
!(a.thisDep||a.contextDep||a.propDep)}function m(a){return new l(!1,!1,!1,a)}function h(a,c){var b=a.type;return 0===b?(b=a.data.length,new l(!0,1<=b,2<=b,c)):4===b?(b=a.data,new l(b.thisDep,b.contextDep,b.propDep,c)):new l(3===b,2===b,1===b,c)}var k=b("./util/codegen"),r=b("./util/loop"),v=b("./util/is-typed-array"),p=b("./util/is-ndarray"),q=b("./util/is-array-like"),x=b("./dynamic"),u=b("./constants/primitives.json"),t=b("./constants/dtypes.json"),w=["x","y","z","w"],C="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),
y={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},A={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},
D={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},E={cw:2304,ccw:2305},B=new l(!1,!1,!1,function(){});d.exports=function(b,d,f,p,v,I,L,F,V,da,Y,g,n,z,J){function P(a){return a.replace(".","_")}function Q(a,g,c){var b=P(a);Da.push(a);ya[b]=pa[b]=!!c;qa[b]=g}function M(a,g,c){var b=P(a);Da.push(a);Array.isArray(c)?(pa[b]=c.slice(),ya[b]=c.slice()):pa[b]=ya[b]=c;ra[b]=g}function Z(){var a=k(),g=a.link,c=a.global;a.id=Ia++;a.batchId=
"0";var b=g(Ha),n=a.shared={props:"a0"};Object.keys(Ha).forEach(function(a){n[a]=c.def(b,".",a)});var e=a.next={},l=a.current={};Object.keys(ra).forEach(function(a){Array.isArray(pa[a])&&(e[a]=c.def(n.next,".",a),l[a]=c.def(n.current,".",a))});var h=a.constants={};Object.keys(Ea).forEach(function(a){h[a]=c.def(JSON.stringify(Ea[a]))});a.invoke=function(c,b){switch(b.type){case 0:var e=["this",n.context,n.props,a.batchId];return c.def(g(b.data),".call(",e.slice(0,Math.max(b.data.length+1,4)),")");
case 1:return c.def(n.props,b.data);case 2:return c.def(n.context,b.data);case 3:return c.def("this",b.data);case 4:return b.data.append(a,c),b.data.ref}};a.attribCache={};var m={};a.scopeAttrib=function(a){a=d.id(a);if(a in m)return m[a];var c=da.scope[a];c||(c=da.scope[a]=new ta);return m[a]=g(c)};return a}function ja(a){var g=a["static"];a=a.dynamic;var c;if("profile"in g){var b=!!g.profile;c=m(function(a,g){return b});c.enable=b}else if("profile"in a){var n=a.profile;c=h(n,function(a,g){return a.invoke(g,
n)})}return c}function sa(a,g){var c=a["static"],b=a.dynamic;if("framebuffer"in c){var n=c.framebuffer;return n?(n=F.getFramebuffer(n),m(function(a,g){var c=a.link(n),b=a.shared;g.set(b.framebuffer,".next",c);b=b.context;g.set(b,".framebufferWidth",c+".width");g.set(b,".framebufferHeight",c+".height");return c})):m(function(a,g){var c=a.shared;g.set(c.framebuffer,".next","null");c=c.context;g.set(c,".framebufferWidth",c+".drawingBufferWidth");g.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in b){var e=b.framebuffer;return h(e,function(a,g){var c=a.invoke(g,e),b=a.shared,n=b.framebuffer,c=g.def(n,".getFramebuffer(",c,")");g.set(n,".next",c);b=b.context;g.set(b,".framebufferWidth",c+"?"+c+".width:"+b+".drawingBufferWidth");g.set(b,".framebufferHeight",c+"?"+c+".height:"+b+".drawingBufferHeight");return c})}return null}function S(a,g,c){function b(a){if(a in n){var c=n[a];a=!0;var m=c.x|0,k=c.y|0,z,d;"width"in c?z=c.width|0:a=!1;"height"in c?d=c.height|0:
a=!1;return new l(!a&&g&&g.thisDep,!a&&g&&g.contextDep,!a&&g&&g.propDep,function(a,g){var b=a.shared.context,n=z;"width"in c||(n=g.def(b,".","framebufferWidth","-",m));var e=d;"height"in c||(e=g.def(b,".","framebufferHeight","-",k));return[m,k,n,e]})}if(a in e){var q=e[a];a=h(q,function(a,g){var c=a.invoke(g,q),b=a.shared.context,n=g.def(c,".x|0"),e=g.def(c,".y|0"),l=g.def('"width" in ',c,"?",c,".width|0:","(",b,".","framebufferWidth","-",n,")"),c=g.def('"height" in ',c,"?",c,".height|0:","(",b,".",
"framebufferHeight","-",e,")");return[n,e,l,c]});g&&(a.thisDep=a.thisDep||g.thisDep,a.contextDep=a.contextDep||g.contextDep,a.propDep=a.propDep||g.propDep);return a}return g?new l(g.thisDep,g.contextDep,g.propDep,function(a,g){var c=a.shared.context;return[0,0,g.def(c,".","framebufferWidth"),g.def(c,".","framebufferHeight")]}):null}var n=a["static"],e=a.dynamic;if(a=b("viewport")){var m=a;a=new l(a.thisDep,a.contextDep,a.propDep,function(a,g){var c=m.append(a,g),b=a.shared.context;g.set(b,".viewportWidth",
c[2]);g.set(b,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:b("scissor.box")}}function fa(a){function g(a){if(a in c){var n=d.id(c[a]);a=m(function(){return n});a.id=n;return a}if(a in b){var e=b[a];return h(e,function(a,g){var c=a.invoke(g,e);return g.def(a.shared.strings,".id(",c,")")})}return null}var c=a["static"],b=a.dynamic,n=g("frag"),k=g("vert"),z=null;e(n)&&e(k)?(z=Y.program(k.id,n.id),a=m(function(a,g){return a.link(z)})):a=new l(n&&n.thisDep||k&&k.thisDep,n&&n.contextDep||
k&&k.contextDep,n&&n.propDep||k&&k.propDep,function(a,g){var c=a.shared.shader,b;b=n?n.append(a,g):g.def(c,".","frag");var e;e=k?k.append(a,g):g.def(c,".","vert");return g.def(c+".program("+e+","+b+")")});return{frag:n,vert:k,progVar:a,program:z}}function ha(g,c){function b(a,g){if(a in n){var c=n[a]|0;return m(function(a,b){g&&(a.OFFSET=c);return c})}if(a in k){var e=k[a];return h(e,function(a,c){var b=a.invoke(c,e);g&&(a.OFFSET=b);return b})}return g&&z?m(function(a,g){a.OFFSET="0";return 0}):null}
var n=g["static"],k=g.dynamic,z=function(){if("elements"in n){var g=n.elements;a(g)?g=I.getElements(I.create(g,!0)):g&&(g=I.getElements(g));var c=m(function(a,c){if(g){var b=a.link(g);return a.ELEMENTS=b}return a.ELEMENTS=null});c.value=g;return c}if("elements"in k){var b=k.elements;return h(b,function(a,g){var c=a.shared,n=c.isBufferArgs,c=c.elements,e=a.invoke(g,b),l=g.def("null"),n=g.def(n,"(",e,")"),e=a.cond(n).then(l,"=",c,".createStream(",e,");")["else"](l,"=",c,".getElements(",e,");");g.entry(e);
g.exit(a.cond(n).then(c,".destroyStream(",l,");"));return a.ELEMENTS=l})}return null}(),d=b("offset",!0);return{elements:z,primitive:function(){if("primitive"in n){var a=n.primitive;return m(function(g,c){return u[a]})}if("primitive"in k){var g=k.primitive;return h(g,function(a,c){var b=a.constants.primTypes,n=a.invoke(c,g);return c.def(b,"[",n,"]")})}return z?e(z)?z.value?m(function(a,g){return g.def(a.ELEMENTS,".primType")}):m(function(){return 4}):new l(z.thisDep,z.contextDep,z.propDep,function(a,
g){var c=a.ELEMENTS;return g.def(c,"?",c,".primType:",4)}):null}(),count:function(){if("count"in n){var a=n.count|0;return m(function(){return a})}if("count"in k){var g=k.count;return h(g,function(a,c){return a.invoke(c,g)})}return z?e(z)?z?d?new l(d.thisDep,d.contextDep,d.propDep,function(a,g){return g.def(a.ELEMENTS,".vertCount-",a.OFFSET)}):m(function(a,g){return g.def(a.ELEMENTS,".vertCount")}):m(function(){return-1}):new l(z.thisDep||d.thisDep,z.contextDep||d.contextDep,z.propDep||d.propDep,
function(a,g){var c=a.ELEMENTS;return a.OFFSET?g.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):g.def(c,"?",c,".vertCount:-1")}):null}(),instances:b("instances",!1),offset:d}}function ma(a,g){var c=a["static"],b=a.dynamic,n={};Da.forEach(function(a){function g(l,k){if(a in c){var z=l(c[a]);n[e]=m(function(){return z})}else if(a in b){var d=b[a];n[e]=h(d,function(a,g){return k(a,g,a.invoke(g,d))})}}var e=P(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return g(function(a){return a},
function(a,g,c){return c});case "depth.func":return g(function(a){return A[a]},function(a,g,c){return g.def(a.constants.compareFuncs,"[",c,"]")});case "depth.range":return g(function(a){return a},function(a,g,c){a=g.def("+",c,"[0]");g=g.def("+",c,"[1]");return[a,g]});case "blend.func":return g(function(a){return[y["srcRGB"in a?a.srcRGB:a.src],y["dstRGB"in a?a.dstRGB:a.dst],y["srcAlpha"in a?a.srcAlpha:a.src],y["dstAlpha"in a?a.dstAlpha:a.dst]]},function(a,g,c){function b(a,n){return g.def('"',a,n,
'" in ',c,"?",c,".",a,n,":",c,".",a)}a=a.constants.blendFuncs;var n=b("src","RGB"),e=b("dst","RGB"),n=g.def(a,"[",n,"]"),l=g.def(a,"[",b("src","Alpha"),"]"),e=g.def(a,"[",e,"]");a=g.def(a,"[",b("dst","Alpha"),"]");return[n,e,l,a]});case "blend.equation":return g(function(a){if("string"===typeof a)return[aa[a],aa[a]];if("object"===typeof a)return[aa[a.rgb],aa[a.alpha]]},function(a,g,c){var b=a.constants.blendEquations,n=g.def(),e=g.def();a=a.cond("typeof ",c,'==="string"');a.then(n,"=",e,"=",b,"[",
c,"];");a["else"](n,"=",b,"[",c,".rgb];",e,"=",b,"[",c,".alpha];");g(a);return[n,e]});case "blend.color":return g(function(a){return r(4,function(g){return+a[g]})},function(a,g,c){return r(4,function(a){return g.def("+",c,"[",a,"]")})});case "stencil.mask":return g(function(a){return a|0},function(a,g,c){return g.def(c,"|0")});case "stencil.func":return g(function(a){return[A[a.cmp||"keep"],a.ref||0,"mask"in a?a.mask:-1]},function(a,g,c){a=g.def('"cmp" in ',c,"?",a.constants.compareFuncs,"[",c,".cmp]",
":",7680);var b=g.def(c,".ref|0");g=g.def('"mask" in ',c,"?",c,".mask|0:-1");return[a,b,g]});case "stencil.opFront":case "stencil.opBack":return g(function(g){return["stencil.opBack"===a?1029:1028,D[g.fail||"keep"],D[g.zfail||"keep"],D[g.zpass||"keep"]]},function(g,c,b){function n(a){return c.def('"',a,'" in ',b,"?",e,"[",b,".",a,"]:",7680)}var e=g.constants.stencilOps;return["stencil.opBack"===a?1029:1028,n("fail"),n("zfail"),n("zpass")]});case "polygonOffset.offset":return g(function(a){return[a.factor|
0,a.units|0]},function(a,g,c){a=g.def(c,".factor|0");g=g.def(c,".units|0");return[a,g]});case "cull.face":return g(function(a){var g=0;"front"===a?g=1028:"back"===a&&(g=1029);return g},function(a,g,c){return g.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return g(function(a){return a},function(a,g,c){return c});case "frontFace":return g(function(a){return E[a]},function(a,g,c){return g.def(c+'==="cw"?2304:2305')});case "colorMask":return g(function(a){return a.map(function(a){return!!a})},
function(a,g,c){return r(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return g(function(a){return["value"in a?a.value:1,!!a.invert]},function(a,g,c){a=g.def('"value" in ',c,"?+",c,".value:1");g=g.def("!!",c,".invert");return[a,g]})}});return n}function na(a,g){var c=a["static"],b=a.dynamic,n={};Object.keys(c).forEach(function(a){var g=c[a],b;if("number"===typeof g||"boolean"===typeof g)b=m(function(){return g});else if("function"===typeof g){var e=g._reglType;if("texture2d"===e||
"textureCube"===e)b=m(function(a){return a.link(g)});else if("framebuffer"===e||"framebufferCube"===e)b=m(function(a){return a.link(g.color[0])})}else q(g)&&(b=m(function(a){return a.global.def("[",r(g.length,function(a){return g[a]}),"]")}));b.value=g;n[a]=b});Object.keys(b).forEach(function(a){var g=b[a];n[a]=h(g,function(a,c){return a.invoke(c,g)})});return n}function ba(g,c){var b=g["static"],n=g.dynamic,e={};Object.keys(b).forEach(function(g){var c=b[g],n=d.id(g),l=new ta;if(a(c))l.state=1,l.buffer=
v.getBuffer(v.create(c,34962,!1,!0)),l.type=0;else{var h=v.getBuffer(c);if(h)l.state=1,l.buffer=h,l.type=0;else if(c.constant){var k=c.constant;l.buffer="null";l.state=2;"number"===typeof k?l.x=k:w.forEach(function(a,g){g<k.length&&(l[a]=k[g])})}else{var h=a(c.buffer)?v.getBuffer(v.create(c.buffer,34962,!1,!0)):v.getBuffer(c.buffer),z=c.offset|0,q=c.stride|0,r=c.size|0,f=!!c.normalized,p=0;"type"in c&&(p=t[c.type]);c=c.divisor|0;l.buffer=h;l.state=1;l.size=r;l.normalized=f;l.type=p||h.dtype;l.offset=
z;l.stride=q;l.divisor=c}}e[g]=m(function(a,g){var c=a.attribCache;if(n in c)return c[n];var b={isStream:!1};Object.keys(l).forEach(function(a){b[a]=l[a]});l.buffer&&(b.buffer=a.link(l.buffer),b.type=b.type||b.buffer+".dtype");return c[n]=b})});Object.keys(n).forEach(function(a){var g=n[a];e[a]=h(g,function(a,c){function b(a){c(m[a],"=",n,".",a,"|0;")}var n=a.invoke(c,g),e=a.shared,l=e.isBufferArgs,h=e.buffer,m={isStream:c.def(!1)},k=new ta;k.state=1;Object.keys(k).forEach(function(a){m[a]=c.def(""+
k[a])});var z=m.buffer,d=m.type;c("if(",l,"(",n,")){",m.isStream,"=true;",z,"=",h,".createStream(",34962,",",n,");",d,"=",z,".dtype;","}else{",z,"=",h,".getBuffer(",n,");","if(",z,"){",d,"=",z,".dtype;",'}else if("constant" in ',n,"){",m.state,"=",2,";","if(typeof "+n+'.constant === "number"){',m[w[0]],"=",n,".constant;",w.slice(1).map(function(a){return m[a]}).join("="),"=0;","}else{",w.map(function(a,g){return m[a]+"="+n+".constant.length>="+g+"?"+n+".constant["+g+"]:0;"}).join(""),"}}else{","if(",
l,"(",n,".buffer)){",z,"=",h,".createStream(",34962,",",n,".buffer);","}else{",z,"=",h,".getBuffer(",n,".buffer);","}",d,'="type" in ',n,"?",e.glTypes,"[",n,".type]:",z,".dtype;",m.normalized,"=!!",n,".normalized;");b("size");b("offset");b("stride");b("divisor");c("}}");c.exit("if(",m.isStream,"){",h,".destroyStream(",z,");","}");return m})});return e}function ga(a){var g=a["static"],c=a.dynamic,b={};Object.keys(g).forEach(function(a){var c=g[a];b[a]=m(function(a,g){return"number"===typeof c||"boolean"===
typeof c?""+c:a.link(c)})});Object.keys(c).forEach(function(a){var g=c[a];b[a]=h(g,function(a,c){return a.invoke(c,g)})});return b}function ia(a,g,c,b,n){var e=sa(a,n),l=S(a,e,n),h=ha(a,n),m=ma(a,n),k=fa(a,n),z=l.viewport;z&&(m.viewport=z);z=P("scissor.box");(l=l[z])&&(m[z]=l);l=0<Object.keys(m).length;e={framebuffer:e,draw:h,shader:k,state:m,dirty:l};e.profile=ja(a,n);e.uniforms=na(c,n);e.attributes=ba(g,n);e.context=ga(b,n);return e}function ca(a,g,c){var b=a.shared.context,n=a.scope();Object.keys(c).forEach(function(e){g.save(b,
"."+e);n(b,".",e,"=",c[e].append(a,g),";")});g(n)}function W(a,g,c,b){var n=a.shared,e=n.gl,l=n.framebuffer,h;ka&&(h=g.def(n.extensions,".webgl_draw_buffers"));var m=a.constants,n=m.drawBuffer,m=m.backBuffer;a=c?c.append(a,g):g.def(l,".next");b||g("if(",a,"!==",l,".cur){");g("if(",a,"){",e,".bindFramebuffer(",36160,",",a,".framebuffer);");ka&&g(h,".drawBuffersWEBGL(",n,"[",a,".colorAttachments.length]);");g("}else{",e,".bindFramebuffer(",36160,",null);");ka&&g(h,".drawBuffersWEBGL(",m,");");g("}",
l,".cur=",a,";");b||g("}")}function ea(a,g,c){var b=a.shared,n=b.gl,e=a.current,l=a.next,h=b.current,m=b.next,k=a.cond(h,".dirty");Da.forEach(function(g){g=P(g);if(!(g in c.state)){var b,z;if(g in l){b=l[g];z=e[g];var d=r(pa[g].length,function(a){return k.def(b,"[",a,"]")});k(a.cond(d.map(function(a,g){return a+"!=="+z+"["+g+"]"}).join("||")).then(n,".",ra[g],"(",d,");",d.map(function(a,g){return z+"["+g+"]="+a}).join(";"),";"))}else b=k.def(m,".",g),d=a.cond(b,"!==",h,".",g),k(d),g in qa?d(a.cond(b).then(n,
".enable(",qa[g],");")["else"](n,".disable(",qa[g],");"),h,".",g,"=",b,";"):d(n,".",ra[g],"(",b,");",h,".",g,"=",b,";")}});0===Object.keys(c.state).length&&k(h,".dirty=false;");g(k)}function O(a,g,b,n){var l=a.shared,h=a.current,m=l.current,k=l.gl;c(Object.keys(b)).forEach(function(c){var l=b[c];if(!n||n(l)){var z=l.append(a,g);if(qa[c]){var d=qa[c];e(l)?z?g(k,".enable(",d,");"):g(k,".disable(",d,");"):g(a.cond(z).then(k,".enable(",d,");")["else"](k,".disable(",d,");"));g(m,".",c,"=",z,";")}else if(q(z)){var r=
h[c];g(k,".",ra[c],"(",z,");",z.map(function(a,g){return r+"["+g+"]="+a}).join(";"),";")}else g(k,".",ra[c],"(",z,");",m,".",c,"=",z,";")}})}function la(a,g){oa&&(a.instancing=g.def(a.shared.extensions,".angle_instanced_arrays"))}function T(a,g,c,b,n){function l(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function h(a){p=g.def();a(p,"=",l(),";");"string"===typeof n?a(q,".count+=",n,";"):a(q,".count++;");z&&(b?(v=g.def(),a(v,"=",f,".getNumPendingQueries();")):a(f,".beginQuery(",
q,");"))}function m(a){a(q,".cpuTime+=",l(),"-",p,";");z&&(b?a(f,".pushScopeStats(",v,",",f,".getNumPendingQueries(),",q,");"):a(f,".endQuery();"))}function k(a){var c=g.def(r,".profile");g(r,".profile=",a,";");g.exit(r,".profile=",c,";")}var d=a.shared,q=a.stats,r=d.current,f=d.timer;c=c.profile;var p,v;if(c){if(e(c)){c.enable?(h(g),m(g.exit),k("true")):k("false");return}c=c.append(a,g);k(c)}else c=g.def(r,".profile");d=a.block();h(d);g("if(",c,"){",d,"}");a=a.block();m(a);g.exit("if(",c,"){",a,
"}")}function X(a,g,c,b,n){function e(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function l(c,b,n){function e(){g("if(!",d,".buffer){",k,".enableVertexAttribArray(",z,");}");var c=n.type,l;l=n.size?g.def(n.size,"||",b):b;g("if(",d,".type!==",c,"||",d,".size!==",l,"||",f.map(function(a){return d+"."+a+"!=="+n[a]}).join("||"),"){",k,".bindBuffer(",34962,",",q,".buffer);",k,".vertexAttribPointer(",
[z,l,c,n.normalized,n.stride,n.offset],");",d,".type=",c,";",d,".size=",l,";",f.map(function(a){return d+"."+a+"="+n[a]+";"}).join(""),"}");oa&&(c=n.divisor,g("if(",d,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[z,c],");",d,".divisor=",c,";}"))}function m(){g("if(",d,".buffer){",k,".disableVertexAttribArray(",z,");","}if(",w.map(function(a,g){return d+"."+a+"!=="+r[g]}).join("||"),"){",k,".vertexAttrib4f(",z,",",r,");",w.map(function(a,g){return d+"."+a+"="+r[g]+";"}).join(""),
"}")}var k=h.gl,z=g.def(c,".location"),d=g.def(h.attributes,"[",z,"]");c=n.state;var q=n.buffer,r=[n.x,n.y,n.z,n.w],f=["buffer","normalized","offset","stride"];1===c?e():2===c?m():(g("if(",c,"===",1,"){"),e(),g("}else{"),m(),g("}"))}var h=a.shared;b.forEach(function(b){var h=b.name,m=c.attributes[h],k;if(m){if(!n(m))return;k=m.append(a,g)}else{if(!n(B))return;var z=a.scopeAttrib(h);k={};Object.keys(new ta).forEach(function(a){k[a]=g.def(z,".",a)})}l(a.link(b),e(b.info.type),k)})}function R(a,g,c,
b,n){for(var l=a.shared,h=l.gl,m,k=0;k<b.length;++k){var z=b[k],f=z.name,p=z.info.type,v=c.uniforms[f],z=a.link(z)+".location",J;if(v){if(!n(v))continue;if(e(v)){f=v.value;if(35678===p||35680===p)p=a.link(f._texture||f.color[0]._texture),g(h,".uniform1i(",z,",",p+".bind());"),g.exit(p,".unbind();");else if(35674===p||35675===p||35676===p)f=a.global.def("new Float32Array(["+Array.prototype.slice.call(f)+"])"),v=2,35675===p?v=3:35676===p&&(v=4),g(h,".uniformMatrix",v,"fv(",z,",false,",f,");");else{switch(p){case 5126:m=
"1f";break;case 35664:m="2f";break;case 35665:m="3f";break;case 35666:m="4f";break;case 35670:m="1i";break;case 5124:m="1i";break;case 35671:m="2i";break;case 35667:m="2i";break;case 35672:m="3i";break;case 35668:m="3i";break;case 35673:m="4i";break;case 35669:m="4i"}g(h,".uniform",m,"(",z,",",q(f)?Array.prototype.slice.call(f):f,");")}continue}else J=v.append(a,g)}else{if(!n(B))continue;J=g.def(l.uniforms,"[",d.id(f),"]")}35678===p?g("if(",J,"&&",J,'._reglType==="framebuffer"){',J,"=",J,".color[0];",
"}"):35680===p&&g("if(",J,"&&",J,'._reglType==="framebufferCube"){',J,"=",J,".color[0];","}");f=1;switch(p){case 35678:case 35680:p=g.def(J,"._texture");g(h,".uniform1i(",z,",",p,".bind());");g.exit(p,".unbind();");continue;case 5124:case 35670:m="1i";break;case 35667:case 35671:m="2i";f=2;break;case 35668:case 35672:m="3i";f=3;break;case 35669:case 35673:m="4i";f=4;break;case 5126:m="1f";break;case 35664:m="2f";f=2;break;case 35665:m="3f";f=3;break;case 35666:m="4f";f=4;break;case 35674:m="Matrix2fv";
break;case 35675:m="Matrix3fv";break;case 35676:m="Matrix4fv"}g(h,".uniform",m,"(",z,",");if("M"===m.charAt(0)){var z=Math.pow(p-35674+2,2),x=a.global.def("new Float32Array(",z,")");g("false,(Array.isArray(",J,")||",J," instanceof Float32Array)?",J,":(",r(z,function(a){return x+"["+a+"]="+J+"["+a+"]"}),",",x,")")}else 1<f?g(r(f,function(a){return J+"["+a+"]"})):g(J);g(");")}}function za(a,g,c,b){function n(e){var l=d[e];return l?l.contextDep&&b.contextDynamic||l.propDep?l.append(a,c):l.append(a,g):
g.def(z,".",e)}function l(){function a(){c(J,".drawElementsInstancedANGLE(",[f,p,x,r+"<<(("+x+"-5121)>>1)",v],");")}function g(){c(J,".drawArraysInstancedANGLE(",[f,r,p,v],");")}q?u?a():(c("if(",q,"){"),a(),c("}else{"),g(),c("}")):g()}function h(){function a(){c(k+".drawElements("+[f,p,x,r+"<<(("+x+"-5121)>>1)"]+");")}function g(){c(k+".drawArrays("+[f,r,p]+");")}q?u?a():(c("if(",q,"){"),a(),c("}else{"),g(),c("}")):g()}var m=a.shared,k=m.gl,z=m.draw,d=b.draw,q=function(){var n=d.elements,e=g;if(n){if(n.contextDep&&
b.contextDynamic||n.propDep)e=c;n=n.append(a,e)}else n=e.def(z,".","elements");n&&e("if("+n+")"+k+".bindBuffer(34963,"+n+".buffer.buffer);");return n}(),f=n("primitive"),r=n("offset"),p=function(){var n=d.count,e=g;if(n){if(n.contextDep&&b.contextDynamic||n.propDep)e=c;n=n.append(a,e)}else n=e.def(z,".","count");return n}();if("number"===typeof p){if(0===p)return}else c("if(",p,"){"),c.exit("}");var v,J;oa&&(v=n("instances"),J=a.instancing);var x=q+".type",u=d.elements&&e(d.elements);oa&&("number"!==
typeof v||0<=v)?"string"===typeof v?(c("if(",v,">0){"),l(),c("}else if(",v,"<0){"),h(),c("}")):l():h()}function wa(a,g,c,b,n){g=Z();n=g.proc("body",n);oa&&(g.instancing=n.def(g.shared.extensions,".angle_instanced_arrays"));a(g,n,c,b);return g.compile().body}function xa(a,g,c,b){la(a,g);X(a,g,c,b.attributes,function(){return!0});R(a,g,c,b.uniforms,function(){return!0});za(a,g,g,c)}function Aa(a,g){var c=a.proc("draw",1);la(a,c);ca(a,c,g.context);W(a,c,g.framebuffer);ea(a,c,g);O(a,c,g.state);T(a,c,
g,!1,!0);var b=g.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",b,".program);");if(g.shader.program)xa(a,c,g,g.shader.program);else{var n=a.global.def("{}"),e=c.def(b,".id"),l=c.def(n,"[",e,"]");c(a.cond(l).then(l,".call(this,a0);")["else"](l,"=",n,"[",e,"]=",a.link(function(c){return wa(xa,a,g,c,1)}),"(",b,");",l,".call(this,a0);"))}0<Object.keys(g.state).length&&c(a.shared.current,".dirty=true;")}function Ba(a,g,c,b){function n(){return!0}a.batchId="a1";la(a,g);X(a,g,c,b.attributes,n);
R(a,g,c,b.uniforms,n);za(a,g,g,c)}function ua(a,g,c,b){function n(a){return a.contextDep&&l||a.propDep}function e(a){return!n(a)}la(a,g);var l=c.contextDep,h=g.def(),m=g.def();a.shared.props=m;a.batchId=h;var k=a.scope(),z=a.scope();g(k.entry,"for(",h,"=0;",h,"<","a1",";++",h,"){",m,"=","a0","[",h,"];",z,"}",k.exit);c.needsContext&&ca(a,z,c.context);c.needsFramebuffer&&W(a,z,c.framebuffer);O(a,z,c.state,n);c.profile&&n(c.profile)&&T(a,z,c,!1,!0);b?(X(a,k,c,b.attributes,e),X(a,z,c,b.attributes,n),
R(a,k,c,b.uniforms,e),R(a,z,c,b.uniforms,n),za(a,k,z,c)):(g=a.global.def("{}"),b=c.shader.progVar.append(a,z),m=z.def(b,".id"),k=z.def(g,"[",m,"]"),z(a.shared.gl,".useProgram(",b,".program);","if(!",k,"){",k,"=",g,"[",m,"]=",a.link(function(g){return wa(Ba,a,c,g,2)}),"(",b,");}",k,".call(this,a0[",h,"],",h,");"))}function va(a,g){function c(a){return a.contextDep&&n||a.propDep}var b=a.proc("batch",2);a.batchId="0";la(a,b);var n=!1,e=!0;Object.keys(g.context).forEach(function(a){n=n||g.context[a].propDep});
n||(ca(a,b,g.context),e=!1);var l=g.framebuffer,h=!1;l?(l.propDep?n=h=!0:l.contextDep&&n&&(h=!0),h||W(a,b,l)):W(a,b,null);g.state.viewport&&g.state.viewport.propDep&&(n=!0);ea(a,b,g);O(a,b,g.state,function(a){return!c(a)});g.profile&&c(g.profile)||T(a,b,g,!1,"a1");g.contextDep=n;g.needsContext=e;g.needsFramebuffer=h;e=g.shader.progVar;if(e.contextDep&&n||e.propDep)ua(a,b,g,null);else if(e=e.append(a,b),b(a.shared.gl,".useProgram(",e,".program);"),g.shader.program)ua(a,b,g,g.shader.program);else{var l=
a.global.def("{}"),h=b.def(e,".id"),m=b.def(l,"[",h,"]");b(a.cond(m).then(m,".call(this,a0,a1);")["else"](m,"=",l,"[",h,"]=",a.link(function(c){return wa(ua,a,g,c,2)}),"(",e,");",m,".call(this,a0,a1);"))}0<Object.keys(g.state).length&&b(a.shared.current,".dirty=true;")}function Ga(a,g){function b(c){var l=g.shader[c];l&&n.set(e.shader,"."+c,l.append(a,n))}var n=a.proc("scope",3);a.batchId="a2";var e=a.shared,l=e.current;ca(a,n,g.context);g.framebuffer&&g.framebuffer.append(a,n);c(Object.keys(g.state)).forEach(function(c){var b=
g.state[c].append(a,n);q(b)?b.forEach(function(g,b){n.set(a.next[c],"["+b+"]",g)}):n.set(e.next,"."+c,b)});T(a,n,g,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var b=g.draw[c];b&&n.set(e.draw,"."+c,""+b.append(a,n))});Object.keys(g.uniforms).forEach(function(c){n.set(e.uniforms,"["+d.id(c)+"]",g.uniforms[c].append(a,n))});Object.keys(g.attributes).forEach(function(c){var b=g.attributes[c].append(a,n),e=a.scopeAttrib(c);Object.keys(new ta).forEach(function(a){n.set(e,
"."+a,b[a])})});b("vert");b("frag");0<Object.keys(g.state).length&&(n(l,".dirty=true;"),n.exit(l,".dirty=true;"));n("a1(",a.shared.context,",a0,",a.batchId,");")}function Fa(a){if("object"===typeof a&&!q(a)){for(var g=Object.keys(a),c=0;c<g.length;++c)if(x.isDynamic(a[g[c]]))return!0;return!1}}function Ca(a,g,c){function b(a,g){l.forEach(function(c){var b=n[c];x.isDynamic(b)&&(b=a.invoke(g,b),g(d,".",c,"=",b,";"))})}var n=g["static"][c];if(n&&Fa(n)){var e=a.global,l=Object.keys(n),m=!1,k=!1,z=!1,
d=a.global.def("{}");l.forEach(function(g){var c=n[g];if(x.isDynamic(c))"function"===typeof c&&(c=n[g]=x.unbox(c)),g=h(c,null),m=m||g.thisDep,z=z||g.propDep,k=k||g.contextDep;else{e(d,".",g,"=");switch(typeof c){case "number":e(c);break;case "string":e('"',c,'"');break;case "object":Array.isArray(c)&&e("[",c.join(),"]");break;default:e(a.link(c))}e(";")}});g.dynamic[c]=new x.DynamicVariable(4,{thisDep:m,contextDep:k,propDep:z,ref:d,append:b});delete g["static"][c]}}var ta=da.Record,aa={add:32774,
subtract:32778,"reverse subtract":32779};f.ext_blend_minmax&&(aa.min=32775,aa.max=32776);var oa=f.angle_instanced_arrays,ka=f.webgl_draw_buffers,pa={dirty:!0,profile:J.profile},ya={},Da=[],qa={},ra={};Q("dither",3024);Q("blend.enable",3042);M("blend.color","blendColor",[0,0,0,0]);M("blend.equation","blendEquationSeparate",[32774,32774]);M("blend.func","blendFuncSeparate",[1,0,1,0]);Q("depth.enable",2929,!0);M("depth.func","depthFunc",513);M("depth.range","depthRange",[0,1]);M("depth.mask","depthMask",
!0);M("colorMask","colorMask",[!0,!0,!0,!0]);Q("cull.enable",2884);M("cull.face","cullFace",1029);M("frontFace","frontFace",2305);M("lineWidth","lineWidth",1);Q("polygonOffset.enable",32823);M("polygonOffset.offset","polygonOffset",[0,0]);Q("sample.alpha",32926);Q("sample.enable",32928);M("sample.coverage","sampleCoverage",[1,!1]);Q("stencil.enable",2960);M("stencil.mask","stencilMask",-1);M("stencil.func","stencilFunc",[519,0,-1]);M("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);M("stencil.opBack",
"stencilOpSeparate",[1029,7680,7680,7680]);Q("scissor.enable",3089);M("scissor.box","scissor",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);M("viewport","viewport",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);var Ha={gl:b,context:n,strings:d,next:ya,current:pa,draw:g,elements:I,buffer:v,shader:Y,attributes:da.state,uniforms:V,framebuffer:F,extensions:f,timer:z,isBufferArgs:a},Ea={primTypes:u,compareFuncs:A,blendFuncs:y,blendEquations:aa,stencilOps:D,glTypes:t,orientationType:E};ka&&(Ea.backBuffer=
[1029],Ea.drawBuffer=r(p.maxDrawbuffers,function(a){return 0===a?[0]:r(a,function(a){return 36064+a})}));var Ia=0;return{next:ya,current:pa,procs:function(){var a=Z(),g=a.proc("poll"),c=a.proc("refresh"),n=a.block();g(n);c(n);var e=a.shared,l=e.gl,h=e.next,m=e.current;n(m,".dirty=false;");W(a,g);W(a,c,null,!0);var k=b.getExtension("angle_instanced_arrays"),z;k&&(z=a.link(k));for(var d=0;d<p.maxAttributes;++d){var f=c.def(e.attributes,"[",d,"]"),v=a.cond(f,".buffer");v.then(l,".enableVertexAttribArray(",
d,");",l,".bindBuffer(",34962,",",f,".buffer.buffer);",l,".vertexAttribPointer(",d,",",f,".size,",f,".type,",f,".normalized,",f,".stride,",f,".offset);")["else"](l,".disableVertexAttribArray(",d,");",l,".vertexAttrib4f(",d,",",f,".x,",f,".y,",f,".z,",f,".w);",f,".buffer=null;");c(v);k&&c(z,".vertexAttribDivisorANGLE(",d,",",f,".divisor);")}Object.keys(qa).forEach(function(b){var e=qa[b],k=n.def(h,".",b),z=a.block();z("if(",k,"){",l,".enable(",e,")}else{",l,".disable(",e,")}",m,".",b,"=",k,";");c(z);
g("if(",k,"!==",m,".",b,"){",z,"}")});Object.keys(ra).forEach(function(b){var e=ra[b],k=pa[b],z,d,f=a.block();f(l,".",e,"(");q(k)?(e=k.length,z=a.global.def(h,".",b),d=a.global.def(m,".",b),f(r(e,function(a){return z+"["+a+"]"}),");",r(e,function(a){return d+"["+a+"]="+z+"["+a+"];"}).join("")),g("if(",r(e,function(a){return z+"["+a+"]!=="+d+"["+a+"]"}).join("||"),"){",f,"}")):(z=n.def(h,".",b),d=n.def(m,".",b),f(z,");",m,".",b,"=",z,";"),g("if(",z,"!==",d,"){",f,"}"));c(f)});return a.compile()}(),
compile:function(a,g,c,b,n){var e=Z();e.stats=e.link(n);Object.keys(g["static"]).forEach(function(a){Ca(e,g,a)});C.forEach(function(g){Ca(e,a,g)});c=ia(a,g,c,b,e);Aa(e,c);Ga(e,c);va(e,c);return e.compile()}}}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./dynamic":10,"./util/codegen":23,"./util/is-array-like":26,"./util/is-ndarray":27,"./util/is-typed-array":28,"./util/loop":29}],10:[function(b,d,f){function a(a,c){this.id=e++;this.type=a;this.data=c}function c(a){if(0===a.length)return[];
var b=a.charAt(0),e=a.charAt(a.length-1);if(1<a.length&&b===e&&('"'===b||"'"===b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return c(a.substr(0,b.index)).concat(c(b[1])).concat(c(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(e=0;e<b.length;++e)a=a.concat(c(b[e]));return a}function l(a){return"["+c(a).join("][")+"]"}var e=
0;d.exports={DynamicVariable:a,define:function(c,b){return new a(c,l(b+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||c instanceof a},unbox:function(c,b){return"function"===typeof c?new a(0,c):c},accessor:l}},{}],11:[function(b,d,f){var a=b("./util/is-typed-array"),c=b("./util/is-ndarray"),l=b("./util/values"),e=b("./constants/primitives.json"),m=b("./constants/usage.json");d.exports=function(b,k,d,f){function p(a){this.id=t++;u[this.id]=this;this.buffer=a;this.primType=4;
this.type=this.vertCount=0}function q(b,e,l,h,m,q,f){(q=f)||a(e)&&(!c(e)||a(e.data))||(q=k.oes_element_index_uint?5125:5123);b.buffer.bind();d._initBuffer(b.buffer,e,l,q,3);e=f;if(!f){switch(b.buffer.dtype){case 5121:case 5120:e=5121;break;case 5123:case 5122:e=5123;break;case 5125:case 5124:e=5125}b.buffer.dtype=e}b.type=e;0>m&&(m=b.buffer.byteLength,5123===e?m>>=1:5125===e&&(m>>=2));b.vertCount=m;m=h;0>h&&(m=4,h=b.buffer.dimension,1===h&&(m=0),2===h&&(m=1),3===h&&(m=4));b.primType=m}function x(a){f.elementsCount--;
delete u[a.id];a.buffer.destroy();a.buffer=null}var u={},t=0,w={uint8:5121,uint16:5123};k.oes_element_index_uint&&(w.uint32=5125);p.prototype.bind=function(){this.buffer.bind()};var C=[];return{create:function(l,k){function u(l){if(l)if("number"===typeof l)t(l),B.primType=4,B.vertCount=l|0,B.type=5121;else{var k=null,d=35044,f=-1,r=-1,p=0,v=0;Array.isArray(l)||a(l)||c(l)?k=l:("data"in l&&(k=l.data),"usage"in l&&(d=m[l.usage]),"primitive"in l&&(f=e[l.primitive]),"count"in l&&(r=l.count|0),"length"in
l&&(p=l.length|0),"type"in l&&(v=w[l.type]));k?q(B,k,d,f,r,p,v):(l=B.buffer,l.bind(),b.bufferData(34963,p,d),l.dtype=v||5121,l.usage=d,l.dimension=3,l.byteLength=p,B.primType=0>f?4:f,B.vertCount=0>r?0:r,B.type=l.dtype)}else t(),B.primType=4,B.vertCount=0,B.type=5121;return u}var t=d.create(null,34963,!0),B=new p(t._buffer);f.elementsCount++;u(l);u._reglType="elements";u._elements=B;u.subdata=function(a,c){t.subdata(a,c);return u};u.destroy=function(){x(B)};return u},createStream:function(a){var c=
C.pop();c||(c=new p(d.create(null,34963,!0,!1)._buffer));q(c,a,35040,-1,-1,0,0);return c},destroyStream:function(a){C.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof p?a._elements:null},clear:function(){l(u).forEach(x)}}}},{"./constants/primitives.json":7,"./constants/usage.json":8,"./util/is-ndarray":27,"./util/is-typed-array":28,"./util/values":33}],12:[function(b,d,f){d.exports=function(a,c){function b(c){c=c.toLowerCase();var l;try{l=e[c]=a.getExtension(c)}catch(h){}return!!l}
for(var e={},m=0;m<c.extensions.length;++m){var h=c.extensions[m];if(!b(h))return c.onDestroy(),c.onDone('"'+h+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}c.optionalExtensions.forEach(b);return{extensions:e,restore:function(){Object.keys(e).forEach(function(a){if(!b(a))throw Error("(regl): error restoring extension "+a);})}}}},{}],13:[function(b,d,f){var a=b("./util/values"),c=b("./util/extend"),l=[];l[6408]=4;var e=[];e[5121]=
1;e[5126]=4;e[36193]=2;d.exports=function(b,h,k,d,f,p){function q(a,c,b){this.target=a;this.texture=c;this.renderbuffer=b;var g=a=0;c?(a=c.width,g=c.height):b&&(a=b.width,g=b.height);this.width=a;this.height=g}function x(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function u(a,c,b){a&&(a.texture?a.texture._texture.refCount+=1:a.renderbuffer._renderbuffer.refCount+=1)}function t(a,c){c?c.texture?b.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,
0):b.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer):b.framebufferTexture2D(36160,a,3553,null,0)}function w(a){var c=3553,b=null,g=null,n=a;"object"===typeof a&&(n=a.data,"target"in a&&(c=a.target|0));a=n._reglType;"texture2d"===a?b=n:"textureCube"===a?b=n:"renderbuffer"===a&&(g=n,c=36161);return new q(c,b,g)}function C(a,c,b,g,n){if(b)return a=d.create2D({width:a,height:c,format:g,type:n}),a._texture.refCount=0,new q(3553,a,null);a=f.create({width:a,height:c,format:g});
a._renderbuffer.refCount=0;return new q(36161,null,a)}function y(a){return a&&(a.texture||a.renderbuffer)}function A(a,c,b){a&&(a.texture?a.texture.resize(c,b):a.renderbuffer&&a.renderbuffer.resize(c,b))}function D(){this.id=L++;F[this.id]=this;this.framebuffer=b.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function E(a){a.colorAttachments.forEach(x);x(a.depthAttachment);x(a.stencilAttachment);x(a.depthStencilAttachment)}
function B(a){b.deleteFramebuffer(a.framebuffer);a.framebuffer=null;p.framebufferCount--;delete F[a.id]}function K(a){var c;b.bindFramebuffer(36160,a.framebuffer);var e=a.colorAttachments;for(c=0;c<e.length;++c)t(36064+c,e[c]);for(c=e.length;c<k.maxColorAttachments;++c)t(36064+c,null);t(36096,a.depthAttachment);t(36128,a.stencilAttachment);t(33306,a.depthStencilAttachment);b.checkFramebufferStatus(36160);b.bindFramebuffer(36160,N.next);N.cur=N.next;b.getError()}function H(a,b){function h(a,c){var b,
m=0,k=0,d=!0,f=!0;b=null;var q=!0,r="rgba",p="uint8",v=1,x=null,t=null,B=null,A=!1;if("number"===typeof a)m=a|0,k=c|0||m;else if(a){"shape"in a?(k=a.shape,m=k[0],k=k[1]):("radius"in a&&(m=k=a.radius),"width"in a&&(m=a.width),"height"in a&&(k=a.height));if("color"in a||"colors"in a)b=a.color||a.colors,Array.isArray(b);if(!b){"colorCount"in a&&(v=a.colorCount|0);"colorTexture"in a&&(q=!!a.colorTexture,r="rgba4");if("colorType"in a&&(p=a.colorType,!q))if("half float"===p||"float16"===p)r="rgba16f";else if("float"===
p||"float32"===p)r="rgba32f";"colorFormat"in a&&(r=a.colorFormat,0<=U.indexOf(r)?q=!0:0<=G.indexOf(r)&&(q=!1))}if("depthTexture"in a||"depthStencilTexture"in a)A=!(!a.depthTexture&&!a.depthStencilTexture);"depth"in a&&("boolean"===typeof a.depth?d=a.depth:(x=a.depth,f=!1));"stencil"in a&&("boolean"===typeof a.stencil?f=a.stencil:(t=a.stencil,d=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?d=f=a.depthStencil:(B=a.depthStencil,f=d=!1))}else m=k=1;var D=null,H=null,I=null,F=null;if(Array.isArray(b))D=
b.map(w);else if(b)D=[w(b)];else for(D=Array(v),b=0;b<v;++b)D[b]=C(m,k,q,r,p);m=m||D[0].width;k=k||D[0].height;x?H=w(x):d&&!f&&(H=C(m,k,A,"depth","uint32"));t?I=w(t):f&&!d&&(I=C(m,k,!1,"stencil","uint8"));B?F=w(B):!x&&!t&&f&&d&&(F=C(m,k,A,"depth stencil","depth stencil"));d=null;for(b=0;b<D.length;++b)u(D[b],m,k),D[b]&&D[b].texture&&(f=l[D[b].texture._texture.format]*e[D[b].texture._texture.type],null===d&&(d=f));u(H,m,k);u(I,m,k);u(F,m,k);E(g);g.width=m;g.height=k;g.colorAttachments=D;g.depthAttachment=
H;g.stencilAttachment=I;g.depthStencilAttachment=F;h.color=D.map(y);h.depth=y(H);h.stencil=y(I);h.depthStencil=y(F);h.width=g.width;h.height=g.height;K(g);return h}var g=new D;p.framebufferCount++;h(a,b);return c(h,{resize:function(a,c){var b=a|0,e=c|0||b;if(b===g.width&&e===g.height)return h;for(var l=g.colorAttachments,m=0;m<l.length;++m)A(l[m],b,e);A(g.depthAttachment,b,e);A(g.stencilAttachment,b,e);A(g.depthStencilAttachment,b,e);g.width=h.width=b;g.height=h.height=e;K(g);return h},_reglType:"framebuffer",
_framebuffer:g,destroy:function(){B(g);E(g)}})}var N={cur:null,next:null,dirty:!1},U=["rgba"],G=["rgba4","rgb565","rgb5 a1"];h.ext_srgb&&G.push("srgba");h.ext_color_buffer_half_float&&G.push("rgba16f","rgb16f");h.webgl_color_buffer_float&&G.push("rgba32f");var I=["uint8"];h.oes_texture_half_float&&I.push("half float","float16");h.oes_texture_float&&I.push("float","float32");var L=0,F={};return c(N,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,
a instanceof D)?a:null},create:H,createCube:function(a){function b(a){var n,l={color:null},h=0,m=null;n="rgba";var k="uint8",f=1;if("number"===typeof a)h=a|0;else if(a){"shape"in a?h=a.shape[0]:("radius"in a&&(h=a.radius|0),"width"in a?h=a.width|0:"height"in a&&(h=a.height|0));if("color"in a||"colors"in a)m=a.color||a.colors,Array.isArray(m);m||("colorCount"in a&&(f=a.colorCount|0),"colorType"in a&&(k=a.colorType),"colorFormat"in a&&(n=a.colorFormat));"depth"in a&&(l.depth=a.depth);"stencil"in a&&
(l.stencil=a.stencil);"depthStencil"in a&&(l.depthStencil=a.depthStencil)}else h=1;if(m)if(Array.isArray(m))for(a=[],n=0;n<m.length;++n)a[n]=m[n];else a=[m];else for(a=Array(f),m={radius:h,format:n,type:k},n=0;n<f;++n)a[n]=d.createCube(m);l.color=Array(a.length);for(n=0;n<a.length;++n)f=a[n],h=h||f.width,l.color[n]={target:34069,data:a[n]};for(n=0;6>n;++n){for(f=0;f<a.length;++f)l.color[f].target=34069+n;0<n&&(l.depth=e[0].depth,l.stencil=e[0].stencil,l.depthStencil=e[0].depthStencil);if(e[n])e[n](l);
else e[n]=H(l)}return c(b,{width:h,height:h,color:a})}var e=Array(6);b(a);return c(b,{faces:e,resize:function(a){var c=a|0;if(c===b.width)return b;var l=b.color;for(a=0;a<l.length;++a)l[a].resize(c);for(a=0;6>a;++a)e[a].resize(c);b.width=b.height=c;return b},_reglType:"framebufferCube",destroy:function(){e.forEach(function(a){a.destroy()})}})},clear:function(){a(F).forEach(B)},restore:function(){a(F).forEach(function(a){a.framebuffer=b.createFramebuffer();K(a)})}})}},{"./util/extend":24,"./util/values":33}],
14:[function(b,d,f){d.exports=function(a,c){var b=1;c.ext_texture_filter_anisotropic&&(b=a.getParameter(34047));var e=1,m=1;c.webgl_draw_buffers&&(e=a.getParameter(34852),m=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(c).filter(function(a){return!!c[a]}),maxAnisotropic:b,maxDrawbuffers:e,maxColorAttachments:m,
pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),
glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],15:[function(b,d,f){var a=b("./util/is-typed-array");d.exports=function(c,b,e,m,h,k){return function(h){var k;k=null===b.next?5121:b.next.colorAttachments[0].texture._texture.type;var d=0,f=0,x=m.framebufferWidth,u=m.framebufferHeight,t=null;a(h)?t=h:h&&(d=h.x|0,f=h.y|0,x=(h.width||m.framebufferWidth-d)|0,u=(h.height||m.framebufferHeight-f)|0,t=h.data||null);e();h=x*u*4;t||(5121===
k?t=new Uint8Array(h):5126===k&&(t=t||new Float32Array(h)));c.pixelStorei(3333,4);c.readPixels(d,f,x,u,6408,k,t);return t}}},{"./util/is-typed-array":28}],16:[function(b,d,f){var a=b("./util/values"),c=[];c[32854]=2;c[32855]=2;c[36194]=2;c[33189]=2;c[36168]=1;c[34041]=4;c[35907]=4;c[34836]=16;c[34842]=8;c[34843]=6;d.exports=function(b,e,m,h,k){function d(a){this.id=x++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;k.profile&&(this.stats={size:0})}function f(a){var c=
a.renderbuffer;b.bindRenderbuffer(36161,null);b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete u[a.id];h.renderbufferCount--}var p={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(p.srgba=35907);e.ext_color_buffer_half_float&&(p.rgba16f=34842,p.rgb16f=34843);e.webgl_color_buffer_float&&(p.rgba32f=34836);var q=[];Object.keys(p).forEach(function(a){q[p[a]]=a});var x=0,u={};d.prototype.decRef=function(){0>=--this.refCount&&f(this)};
k.profile&&(h.getTotalRenderbufferSize=function(){var a=0;Object.keys(u).forEach(function(c){a+=u[c].stats.size});return a});return{create:function(a,e){function m(a,e){var h=0,d=0,r=32854;"object"===typeof a&&a?("shape"in a?(d=a.shape,h=d[0]|0,d=d[1]|0):("radius"in a&&(h=d=a.radius|0),"width"in a&&(h=a.width|0),"height"in a&&(d=a.height|0)),"format"in a&&(r=p[a.format])):"number"===typeof a?(h=a|0,d="number"===typeof e?e|0:h):a||(h=d=1);if(h!==f.width||d!==f.height||r!==f.format)return m.width=f.width=
h,m.height=f.height=d,f.format=r,b.bindRenderbuffer(36161,f.renderbuffer),b.renderbufferStorage(36161,r,h,d),k.profile&&(f.stats.size=c[f.format]*f.width*f.height),m.format=q[f.format],m}var f=new d(b.createRenderbuffer());u[f.id]=f;h.renderbufferCount++;m(a,e);m.resize=function(a,e){var h=a|0,d=e|0||h;if(h===f.width&&d===f.height)return m;m.width=f.width=h;m.height=f.height=d;b.bindRenderbuffer(36161,f.renderbuffer);b.renderbufferStorage(36161,f.format,h,d);k.profile&&(f.stats.size=c[f.format]*f.width*
f.height);return m};m._reglType="renderbuffer";m._renderbuffer=f;k.profile&&(m.stats=f.stats);m.destroy=function(){f.decRef()};return m},clear:function(){a(u).forEach(f)},restore:function(){a(u).forEach(function(a){a.renderbuffer=b.createRenderbuffer();b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)});b.bindRenderbuffer(36161,null)}}}},{"./util/values":33}],17:[function(b,d,f){var a=b("./util/values");d.exports=function(c,b,e,m){function h(a,c,b,e){this.name=
a;this.id=c;this.location=b;this.info=e}function k(a,c){for(var b=0;b<a.length;++b)if(a[b].id===c.id){a[b].location=c.location;return}a.push(c)}function d(a,e,h){h=35632===a?q:x;var m=h[e];if(!m){var k=b.str(e),m=c.createShader(a);c.shaderSource(m,k);c.compileShader(m);h[e]=m}return m}function f(a,c){this.id=w++;this.fragId=a;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[];m.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(a,e){var f,q;f=d(35632,a.fragId);q=
d(35633,a.vertId);var p=a.program=c.createProgram();c.attachShader(p,f);c.attachShader(p,q);c.linkProgram(p);var v=c.getProgramParameter(p,35718);m.profile&&(a.stats.uniformsCount=v);var x=a.uniforms;for(f=0;f<v;++f)if(q=c.getActiveUniform(p,f))if(1<q.size)for(var u=0;u<q.size;++u){var t=q.name.replace("[0]","["+u+"]");k(x,new h(t,b.id(t),c.getUniformLocation(p,t),q))}else k(x,new h(q.name,b.id(q.name),c.getUniformLocation(p,q.name),q));v=c.getProgramParameter(p,35721);m.profile&&(a.stats.attributesCount=
v);x=a.attributes;for(f=0;f<v;++f)(q=c.getActiveAttrib(p,f))&&k(x,new h(q.name,b.id(q.name),c.getAttribLocation(p,q.name),q))}var q={},x={},u={},t=[],w=0;m.profile&&(e.getMaxUniformsCount=function(){var a=0;t.forEach(function(c){c.stats.uniformsCount>a&&(a=c.stats.uniformsCount)});return a},e.getMaxAttributesCount=function(){var a=0;t.forEach(function(c){c.stats.attributesCount>a&&(a=c.stats.attributesCount)});return a});return{clear:function(){var b=c.deleteShader.bind(c);a(q).forEach(b);q={};a(x).forEach(b);
x={};t.forEach(function(a){c.deleteProgram(a.program)});t.length=0;u={};e.shaderCount=0},program:function(a,c,b){e.shaderCount++;var l=u[c];l||(l=u[c]={});var h=l[a];h||(h=new f(c,a),p(h,b),l[a]=h,t.push(h));return h},restore:function(){q={};x={};for(var a=0;a<t.length;++a)p(t[a])},shader:d,frag:-1,vert:-1}}},{"./util/values":33}],18:[function(b,d,f){d.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},
{}],19:[function(b,d,f){d.exports=function(){var a={"":0},c=[""];return{id:function(b){var e=a[b];if(e)return e;e=a[b]=c.length;c.push(b);return e},str:function(a){return c[a]}}}},{}],20:[function(b,d,f){function a(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function c(a){return Array.isArray(a)&&0!==a.length&&u(a[0])?!0:!1}function l(a){return Object.prototype.toString.call(a)}function e(b){if(!b)return!1;var e=l(b);return 0<=D.indexOf(e)?!0:a(b)||c(b)||p(b)}function m(a,c){36193===
a.type?(a.data=x(c),q.freeType(c)):a.data=c}function h(a,c,b,e,l,h){a="undefined"!==typeof B[a]?B[a]:A[a]*E[c];h&&(a*=6);if(l){for(e=0;1<=b;)e+=a*b*b,b/=2;return e}return a*b*e}var k=b("./util/extend"),r=b("./util/values"),v=b("./util/is-typed-array"),p=b("./util/is-ndarray"),q=b("./util/pool"),x=b("./util/to-half-float"),u=b("./util/is-array-like"),t=b("./util/flatten");f=b("./constants/arraytypes.json");var w=b("./constants/arraytypes.json"),C=[9984,9986,9985,9987],y=[0,6409,6410,6407,6408],A={};
A[6409]=A[6406]=A[6402]=1;A[34041]=A[6410]=2;A[6407]=A[35904]=3;A[6408]=A[35906]=4;var D=Object.keys(f).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),E=[];E[5121]=1;E[5126]=4;E[36193]=2;E[5123]=2;E[5125]=4;var B=[];B[32854]=2;B[32855]=2;B[36194]=2;B[34041]=4;B[33776]=.5;B[33777]=.5;B[33778]=1;B[33779]=1;B[35986]=.5;B[35987]=1;B[34798]=1;B[35840]=.5;B[35841]=.25;B[35842]=.5;B[35843]=.25;B[36196]=.5;d.exports=function(b,
d,f,B,D,E,L){function F(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.channels=this.height=this.width=this.colorSpace=0}function V(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=c.unpackAlignment;a.colorSpace=c.colorSpace;a.width=c.width;a.height=c.height;a.channels=c.channels}function da(a,
c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(a.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(a.flipY=c.flipY);"alignment"in c&&(a.unpackAlignment=c.alignment);"colorSpace"in c&&(a.colorSpace=la[c.colorSpace]);"type"in c&&(a.type=T[c.type]);var g=a.width,b=a.height,n=a.channels,e=!1;"shape"in c?(g=c.shape[0],b=c.shape[1],3===c.shape.length&&(n=c.shape[2],e=!0)):("radius"in c&&(g=b=c.radius),"width"in c&&(g=c.width),"height"in c&&(b=c.height),"channels"in c&&(n=c.channels,e=!0));a.width=
g|0;a.height=b|0;a.channels=n|0;g=!1;"format"in c&&(g=c.format,b=a.internalformat=X[g],a.format=Ga[b],g in T&&!("type"in c)&&(a.type=T[g]),g in R&&(a.compressed=!0),g=!0);!e&&g?a.channels=A[a.format]:e&&!g&&a.channels!==y[a.format]&&(a.format=a.internalformat=y[a.channels])}}function Y(a){b.pixelStorei(37440,a.flipY);b.pixelStorei(37441,a.premultiplyAlpha);b.pixelStorei(37443,a.colorSpace);b.pixelStorei(3317,a.unpackAlignment)}function g(){F.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=
!1;this.element=null;this.needsCopy=!1}function n(g,b){var n=null;e(b)?n=b:b&&(da(g,b),"x"in b&&(g.xOffset=b.x|0),"y"in b&&(g.yOffset=b.y|0),e(b.data)&&(n=b.data));if(b.copy){var h=D.viewportWidth,k=D.viewportHeight;g.width=g.width||h-g.xOffset;g.height=g.height||k-g.yOffset;g.needsCopy=!0}else if(!n)g.width=g.width||1,g.height=g.height||1,g.channels=g.channels||4;else if(v(n))g.channels=g.channels||4,g.data=n,"type"in b||5121!==g.type||(g.type=w[Object.prototype.toString.call(n)]|0);else if(a(n)){g.channels=
g.channels||4;h=n;k=h.length;switch(g.type){case 5121:case 5123:case 5125:case 5126:k=q.allocType(g.type,k);k.set(h);g.data=k;break;case 36193:g.data=x(h)}g.alignment=1;g.needsFree=!0}else if(p(n)){h=n.data;Array.isArray(h)||5121!==g.type||(g.type=w[Object.prototype.toString.call(h)]|0);var k=n.shape,d=n.stride,z,f,r,J;3===k.length?(r=k[2],J=d[2]):J=r=1;z=k[0];f=k[1];k=d[0];d=d[1];g.alignment=1;g.width=z;g.height=f;g.channels=r;g.format=g.internalformat=y[r];g.needsFree=!0;z=J;n=n.offset;r=g.width;
J=g.height;f=g.channels;for(var B=q.allocType(36193===g.type?5126:g.type,r*J*f),K=0,P=0;P<J;++P)for(var A=0;A<r;++A)for(var C=0;C<f;++C)B[K++]=h[k*A+d*P+z*C+n];m(g,B)}else if("[object HTMLCanvasElement]"===l(n)||"[object CanvasRenderingContext2D]"===l(n))"[object HTMLCanvasElement]"===l(n)?g.element=n:g.element=n.canvas,g.width=g.element.width,g.height=g.element.height,g.channels=4;else if("[object HTMLImageElement]"===l(n))g.element=n,g.width=n.naturalWidth,g.height=n.naturalHeight,g.channels=4;
else if("[object HTMLVideoElement]"===l(n))g.element=n,g.width=n.videoWidth,g.height=n.videoHeight,g.channels=4;else if(c(n)){h=g.width||n[0].length;k=g.height||n.length;d=g.channels;d=u(n[0][0])?d||n[0][0].length:d||1;z=t.shape(n);r=1;for(J=0;J<z.length;++J)r*=z[J];r=q.allocType(36193===g.type?5126:g.type,r);t.flatten(n,z,"",r);m(g,r);g.alignment=1;g.width=h;g.height=k;g.channels=d;g.format=g.internalformat=y[d];g.needsFree=!0}}function z(a,g,c,n,e){var l=a.element,h=a.data,m=a.internalformat,k=
a.format,d=a.type,z=a.width,f=a.height;Y(a);l?b.texSubImage2D(g,e,c,n,k,d,l):a.compressed?b.compressedTexSubImage2D(g,e,c,n,m,z,f,h):a.needsCopy?(B(),b.copyTexSubImage2D(g,e,c,n,a.xOffset,a.yOffset,z,f)):b.texSubImage2D(g,e,c,n,z,f,k,d,h)}function J(){return Fa.pop()||new g}function P(a){a.needsFree&&q.freeType(a.data);g.call(a);Fa.push(a)}function Q(){F.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function M(a,g,c){var b=a.images[0]=J();a.mipmask=1;b.width=
a.width=g;b.height=a.height=c;b.channels=a.channels=4}function Z(a,g){var c=null;if(e(g))c=a.images[0]=J(),V(c,a),n(c,g),a.mipmask=1;else if(da(a,g),Array.isArray(g.mipmap))for(var b=g.mipmap,l=0;l<b.length;++l)c=a.images[l]=J(),V(c,a),c.width>>=l,c.height>>=l,n(c,b[l]),a.mipmask|=1<<l;else c=a.images[0]=J(),V(c,a),n(c,g),a.mipmask=1;V(a,a.images[0])}function ja(a,g){for(var c=a.images,n=0;n<c.length&&c[n];++n){var e=c[n],l=g,h=n,m=e.element,k=e.data,d=e.internalformat,z=e.format,f=e.type,q=e.width,
r=e.height;Y(e);m?b.texImage2D(l,h,z,z,f,m):e.compressed?b.compressedTexImage2D(l,h,d,q,r,0,k):e.needsCopy?(B(),b.copyTexImage2D(l,h,z,e.xOffset,e.yOffset,q,r,0)):b.texImage2D(l,h,z,q,r,0,z,f,k)}}function sa(){var a=Ca.pop()||new Q;F.call(a);for(var g=a.mipmask=0;16>g;++g)a.images[g]=null;return a}function S(a){for(var g=a.images,c=0;c<g.length;++c)g[c]&&P(g[c]),g[c]=null;Ca.push(a)}function fa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;
this.mipmapHint=4352}function ha(a,g){"min"in g&&(a.minFilter=O[g.min],0<=C.indexOf(a.minFilter)&&(a.genMipmaps=!0));"mag"in g&&(a.magFilter=ea[g.mag]);var c=a.wrapS,b=a.wrapT;if("wrap"in g){var n=g.wrap;"string"===typeof n?c=b=W[n]:Array.isArray(n)&&(c=W[n[0]],b=W[n[1]])}else"wrapS"in g&&(c=W[g.wrapS]),"wrapT"in g&&(b=W[g.wrapT]);a.wrapS=c;a.wrapT=b;"anisotropic"in g&&(a.anisotropic=g.anisotropic);if("mipmap"in g){c=!1;switch(typeof g.mipmap){case "string":a.mipmapHint=ca[g.mipmap];c=a.genMipmaps=
!0;break;case "boolean":c=a.genMipmaps=g.mipmap;break;case "object":a.genMipmaps=!1,c=!0}!c||"min"in g||(a.minFilter=9984)}}function ma(a,g){b.texParameteri(g,10241,a.minFilter);b.texParameteri(g,10240,a.magFilter);b.texParameteri(g,10242,a.wrapS);b.texParameteri(g,10243,a.wrapT);d.ext_texture_filter_anisotropic&&b.texParameteri(g,34046,a.anisotropic);a.genMipmaps&&(b.hint(33170,a.mipmapHint),b.generateMipmap(g))}function na(a){F.call(this);this.mipmask=0;this.internalformat=6408;this.id=ta++;this.refCount=
1;this.target=a;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new fa;L.profile&&(this.stats={size:0})}function ba(a){b.activeTexture(33984);b.bindTexture(a.target,a.texture)}function ga(){var a=ka[0];a?b.bindTexture(a.target,a.texture):b.bindTexture(3553,null)}function ia(a){var g=a.texture,c=a.unit,n=a.target;0<=c&&(b.activeTexture(33984+c),b.bindTexture(n,null),ka[c]=null);b.deleteTexture(g);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete aa[a.id];E.textureCount--}
var ca={"don't care":4352,"dont care":4352,nice:4354,fast:4353},W={repeat:10497,clamp:33071,mirror:33648},ea={nearest:9728,linear:9729},O=k({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},ea),la={none:0,browser:37444},T={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},X={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},R={};d.ext_srgb&&(X.srgb=35904,X.srgba=
35906);d.oes_texture_float&&(T.float32=T["float"]=5126);d.oes_texture_half_float&&(T.float16=T["half float"]=36193);d.webgl_depth_texture&&(k(X,{depth:6402,"depth stencil":34041}),k(T,{uint16:5123,uint32:5125,"depth stencil":34042}));d.webgl_compressed_texture_s3tc&&k(R,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});d.webgl_compressed_texture_atc&&k(R,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});d.webgl_compressed_texture_pvrtc&&
k(R,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});d.webgl_compressed_texture_etc1&&(R["rgb etc1"]=36196);var za=Array.prototype.slice.call(b.getParameter(34467));Object.keys(R).forEach(function(a){var g=R[a];0<=za.indexOf(g)&&(X[a]=g)});var wa=Object.keys(X);f.textureFormats=wa;var xa=[];Object.keys(X).forEach(function(a){xa[X[a]]=a});var Aa=[];Object.keys(T).forEach(function(a){Aa[T[a]]=a});var Ba=[];Object.keys(ea).forEach(function(a){Ba[ea[a]]=
a});var ua=[];Object.keys(O).forEach(function(a){ua[O[a]]=a});var va=[];Object.keys(W).forEach(function(a){va[W[a]]=a});var Ga=wa.reduce(function(a,g){var c=X[g];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=g.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),Fa=[],Ca=[],ta=0,aa={},oa=f.maxTextureUnits,ka=Array(oa).map(function(){return null});k(na.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var g=0;g<oa;++g){var c=ka[g];if(c){if(0<c.bindCount)continue;
c.unit=-1}ka[g]=this;a=g;break}L.profile&&E.maxTextureUnits<a+1&&(E.maxTextureUnits=a+1);this.unit=a;b.activeTexture(33984+a);b.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ia(this)}});L.profile&&(E.getTotalTextureSize=function(){var a=0;Object.keys(aa).forEach(function(g){a+=aa[g].stats.size});return a});return{create2D:function(a,g){function c(a,g){var b=e.texInfo;fa.call(b);var n=sa();"number"===typeof a?"number"===typeof g?
M(n,a|0,g|0):M(n,a|0,a|0):a?(ha(b,a),Z(n,a)):M(n,1,1);b.genMipmaps&&(n.mipmask=(n.width<<1)-1);e.mipmask=n.mipmask;V(e,n);e.internalformat=n.internalformat;c.width=n.width;c.height=n.height;ba(e);ja(n,3553);ma(b,3553);ga();S(n);L.profile&&(e.stats.size=h(e.internalformat,e.type,n.width,n.height,b.genMipmaps,!1));c.format=xa[e.internalformat];c.type=Aa[e.type];c.mag=Ba[b.magFilter];c.min=ua[b.minFilter];c.wrapS=va[b.wrapS];c.wrapT=va[b.wrapT];return c}var e=new na(3553);aa[e.id]=e;E.textureCount++;
c(a,g);c.subimage=function(a,g,b,l){g|=0;b|=0;l|=0;var h=J();V(h,e);h.width=0;h.height=0;n(h,a);h.width=h.width||(e.width>>l)-g;h.height=h.height||(e.height>>l)-b;ba(e);z(h,3553,g,b,l);ga();P(h);return c};c.resize=function(a,g){var n=a|0,l=g|0||n;if(n===e.width&&l===e.height)return c;c.width=e.width=n;c.height=e.height=l;ba(e);for(var m=0;e.mipmask>>m;++m)b.texImage2D(3553,m,e.format,n>>m,l>>m,0,e.format,e.type,null);ga();L.profile&&(e.stats.size=h(e.internalformat,e.type,n,l,!1,!1));return c};c._reglType=
"texture2d";c._texture=e;L.profile&&(c.stats=e.stats);c.destroy=function(){e.decRef()};return c},createCube:function(a,g,c,e,l,m){function k(a,g,c,b,n,e){var l,m=d.texInfo;fa.call(m);for(l=0;6>l;++l)f[l]=sa();if("number"===typeof a||!a)for(a=a|0||1,l=0;6>l;++l)M(f[l],a,a);else if("object"===typeof a)if(g)Z(f[0],a),Z(f[1],g),Z(f[2],c),Z(f[3],b),Z(f[4],n),Z(f[5],e);else if(ha(m,a),da(d,a),"faces"in a)for(a=a.faces,l=0;6>l;++l)V(f[l],d),Z(f[l],a[l]);else for(l=0;6>l;++l)Z(f[l],a);V(d,f[0]);d.mipmask=
m.genMipmaps?(f[0].width<<1)-1:f[0].mipmask;d.internalformat=f[0].internalformat;k.width=f[0].width;k.height=f[0].height;ba(d);for(l=0;6>l;++l)ja(f[l],34069+l);ma(m,34067);ga();L.profile&&(d.stats.size=h(d.internalformat,d.type,k.width,k.height,m.genMipmaps,!0));k.format=xa[d.internalformat];k.type=Aa[d.type];k.mag=Ba[m.magFilter];k.min=ua[m.minFilter];k.wrapS=va[m.wrapS];k.wrapT=va[m.wrapT];for(l=0;6>l;++l)S(f[l]);return k}var d=new na(34067);aa[d.id]=d;E.cubeCount++;var f=Array(6);k(a,g,c,e,l,m);
k.subimage=function(a,g,c,b,e){c|=0;b|=0;e|=0;var l=J();V(l,d);l.width=0;l.height=0;n(l,g);l.width=l.width||(d.width>>e)-c;l.height=l.height||(d.height>>e)-b;ba(d);z(l,34069+a,c,b,e);ga();P(l);return k};k.resize=function(a){a|=0;if(a!==d.width){k.width=d.width=a;k.height=d.height=a;ba(d);for(var g=0;6>g;++g)for(var c=0;d.mipmask>>c;++c)b.texImage2D(34069+g,c,d.format,a>>c,a>>c,0,d.format,d.type,null);ga();L.profile&&(d.stats.size=h(d.internalformat,d.type,k.width,k.height,!1,!0));return k}};k._reglType=
"textureCube";k._texture=d;L.profile&&(k.stats=d.stats);k.destroy=function(){d.decRef()};return k},clear:function(){for(var a=0;a<oa;++a)b.activeTexture(33984+a),b.bindTexture(3553,null),ka[a]=null;r(aa).forEach(ia);E.cubeCount=0;E.textureCount=0},getTexture:function(a){return null},restore:function(){r(aa).forEach(function(a){a.texture=b.createTexture();b.bindTexture(a.target,a.texture);for(var g=0;32>g;++g)if(0!==(a.mipmask&1<<g))if(3553===a.target)b.texImage2D(3553,g,a.internalformat,a.width>>
g,a.height>>g,0,a.internalformat,a.type,null);else for(var c=0;6>c;++c)b.texImage2D(34069+c,g,a.internalformat,a.width>>g,a.height>>g,0,a.internalformat,a.type,null);ma(a.texInfo,a.target)})}}}},{"./constants/arraytypes.json":5,"./util/extend":24,"./util/flatten":25,"./util/is-array-like":26,"./util/is-ndarray":27,"./util/is-typed-array":28,"./util/pool":30,"./util/to-half-float":32,"./util/values":33}],21:[function(b,d,f){d.exports=function(a,c){function b(){this.endQueryIndex=this.startQueryIndex=
-1;this.sum=0;this.stats=null}function e(a,c,e){var h=d.pop()||new b;h.startQueryIndex=a;h.endQueryIndex=c;h.sum=0;h.stats=e;f.push(h)}var m=c.ext_disjoint_timer_query;if(!m)return null;var h=[],k=[],d=[],f=[],p=[],q=[];return{beginQuery:function(a){var c=h.pop()||m.createQueryEXT();m.beginQueryEXT(35007,c);k.push(c);e(k.length-1,k.length,a)},endQuery:function(){m.endQueryEXT(35007)},pushScopeStats:e,update:function(){var a,c;a=k.length;if(0!==a){q.length=Math.max(q.length,a+1);p.length=Math.max(p.length,
a+1);p[0]=0;var b=q[0]=0;for(c=a=0;c<k.length;++c){var e=k[c];m.getQueryObjectEXT(e,34919)?(b+=m.getQueryObjectEXT(e,34918),h.push(e)):k[a++]=e;p[c+1]=b;q[c+1]=a}k.length=a;for(c=a=0;c<f.length;++c){var b=f[c],l=b.startQueryIndex,e=b.endQueryIndex;b.sum+=p[e]-p[l];l=q[l];e=q[e];e===l?(b.stats.gpuTime+=b.sum/1E6,d.push(b)):(b.startQueryIndex=l,b.endQueryIndex=e,f[a++]=b)}f.length=a}},getNumPendingQueries:function(){return k.length},clear:function(){h.push.apply(h,k);for(var a=0;a<h.length;a++)m.deleteQueryEXT(h[a]);
k.length=0;h.length=0},restore:function(){k.length=0;h.length=0}}}},{}],22:[function(b,d,f){d.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(b,d,f){function a(a){return Array.prototype.slice.call(a)}function c(c){return a(c).join("")}var l=b("./extend");d.exports=function(){function b(){var e=[],m=[];return l(function(){e.push.apply(e,a(arguments))},{def:function(){var c="v"+h++;m.push(c);0<arguments.length&&
(e.push(c,"="),e.push.apply(e,a(arguments)),e.push(";"));return c},toString:function(){return c([0<m.length?"var "+m+";":"",c(e)])}})}function m(){function c(a,b){m(a,b,"=",h.def(a,b),";")}var h=b(),m=b(),k=h.toString,d=m.toString;return l(function(){h.apply(h,a(arguments))},{def:h.def,entry:h,exit:m,save:c,set:function(a,b,e){c(a,b);h(a,b,"=",e,";")},toString:function(){return k()+d()}})}var h=0,k=[],d=[],f=b(),p={};return{global:f,link:function(a){for(var c=0;c<d.length;++c)if(d[c]===a)return k[c];
c="g"+h++;k.push(c);d.push(a);return c},block:b,proc:function(a,b){function e(){var a="a"+h.length;h.push(a);return a}var h=[];b=b||0;for(var k=0;k<b;++k)e();var k=m(),d=k.toString;return p[a]=l(k,{arg:e,toString:function(){return c(["function(",h.join(),"){",d(),"}"])}})},scope:m,cond:function(){var b=c(arguments),e=m(),h=m(),k=e.toString,d=h.toString;return l(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){h.apply(h,a(arguments));return this},toString:function(){var a=
d();a&&(a="else{"+a+"}");return c(["if(",b,"){",k(),"}",a])}})},compile:function(){var a=['"use strict";',f,"return {"];Object.keys(p).forEach(function(c){a.push('"',c,'":',p[c].toString(),",")});a.push("}");var b=c(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,k.concat(b)).apply(null,d)}}}},{"./extend":24}],24:[function(b,d,f){d.exports=function(a,c){for(var b=Object.keys(c),e=0;e<b.length;++e)a[b[e]]=c[b[e]];return a}},{}],25:[function(b,d,f){function a(a,
c,b,l,d,f){for(var p=0;p<c;++p)for(var q=a[p],x=0;x<b;++x)for(var u=q[x],t=0;t<l;++t)d[f++]=u[t]}function c(b,l,h,k,d){for(var f=1,p=h+1;p<l.length;++p)f*=l[p];var q=l[h];if(4===l.length-h){var x=l[h+1],u=l[h+2];l=l[h+3];for(p=0;p<q;++p)a(b[p],x,u,l,k,d),d+=f}else for(p=0;p<q;++p)c(b[p],l,h+1,k,d),d+=f}var l=b("./pool");d.exports={shape:function(a){for(var c=[];a.length;a=a[0])c.push(a.length);return c},flatten:function(b,m,h,k){var d=1;if(m.length)for(var f=0;f<m.length;++f)d*=m[f];else d=0;h=k||
l.allocType(h,d);switch(m.length){case 0:break;case 1:k=m[0];for(m=0;m<k;++m)h[m]=b[m];break;case 2:k=m[0];m=m[1];for(f=d=0;f<k;++f)for(var p=b[f],q=0;q<m;++q)h[d++]=p[q];break;case 3:a(b,m[0],m[1],m[2],h,0);break;default:c(b,m,0,h,0)}return h}}},{"./pool":30}],26:[function(b,d,f){var a=b("./is-typed-array");d.exports=function(c){return Array.isArray(c)||a(c)}},{"./is-typed-array":28}],27:[function(b,d,f){var a=b("./is-typed-array");d.exports=function(c){return!!c&&"object"===typeof c&&Array.isArray(c.shape)&&
Array.isArray(c.stride)&&"number"===typeof c.offset&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||a(c.data))}},{"./is-typed-array":28}],28:[function(b,d,f){var a=b("../constants/arraytypes.json");d.exports=function(c){return Object.prototype.toString.call(c)in a}},{"../constants/arraytypes.json":5}],29:[function(b,d,f){d.exports=function(a,c){for(var b=Array(a),e=0;e<a;++e)b[e]=c(e);return b}},{}],30:[function(b,d,f){function a(a){var c,b;c=(65535<a)<<4;a>>>=c;b=(255<a)<<3;a>>>=b;c|=
b;b=(15<a)<<2;a>>>=b;c|=b;b=(3<a)<<1;return c|b|a>>>b>>1}function c(c){a:{for(var b=16;268435456>=b;b*=16)if(c<=b){c=b;break a}c=0}b=e[a(c)>>2];return 0<b.length?b.pop():new ArrayBuffer(c)}function l(c){e[a(c.byteLength)>>2].push(c)}var e=b("./loop")(8,function(){return[]});d.exports={alloc:c,free:l,allocType:function(a,b){var e=null;switch(a){case 5120:e=new Int8Array(c(b),0,b);break;case 5121:e=new Uint8Array(c(b),0,b);break;case 5122:e=new Int16Array(c(2*b),0,b);break;case 5123:e=new Uint16Array(c(2*
b),0,b);break;case 5124:e=new Int32Array(c(4*b),0,b);break;case 5125:e=new Uint32Array(c(4*b),0,b);break;case 5126:e=new Float32Array(c(4*b),0,b);break;default:return null}return e.length!==b?e.subarray(0,b):e},freeType:function(a){l(a.buffer)}}},{"./loop":29}],31:[function(b,d,f){d.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){return setTimeout(a,
16)},cancel:clearTimeout}},{}],32:[function(b,d,f){var a=b("./pool"),c=new Float32Array(1),l=new Uint32Array(c.buffer);d.exports=function(b){for(var d=a.allocType(5123,b.length),h=0;h<b.length;++h)if(isNaN(b[h]))d[h]=65535;else if(Infinity===b[h])d[h]=31744;else if(-Infinity===b[h])d[h]=64512;else{c[0]=b[h];var k=l[0],f=k>>>31<<15,v=(k<<1>>>24)-127,k=k>>13&1023;d[h]=-24>v?f:-14>v?f+(k+1024>>-14-v):15<v?f+31744:f+(v+15<<10)+k}return d}},{"./pool":30}],33:[function(b,d,f){d.exports=function(a){return Object.keys(a).map(function(c){return a[c]})}},
{}],34:[function(b,d,f){function a(a,c,b){function e(){var c=window.innerWidth,d=window.innerHeight;a!==document.body&&(d=a.getBoundingClientRect(),c=d.right-d.left,d=d.top-d.bottom);l.width=b*c;l.height=b*d;m(l.style,{width:c+"px",height:d+"px"})}var l=document.createElement("canvas");m(l.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(l);a===document.body&&(l.style.position="absolute",m(a.style,{margin:0,padding:0}));window.addEventListener("resize",e,!1);e();return{canvas:l,onDestroy:function(){window.removeEventListener("resize",
e);a.removeChild(l)}}}function c(a,c){function b(e){try{return a.getContext(e,c)}catch(l){return null}}return b("webgl")||b("experimental-webgl")||b("webgl-experimental")}function l(a){return"string"===typeof a?a.split():a}function e(a){return"string"===typeof a?document.querySelector(a):a}var m=b("./util/extend");d.exports=function(b){var d=b||{},m,f,p,q;b={};var x=[],u=[],t="undefined"===typeof window?1:window.devicePixelRatio,w=!1,C=function(a){},y=function(){};"string"===typeof d?m=document.querySelector(d):
"object"===typeof d&&("string"===typeof d.nodeName&&"function"===typeof d.appendChild&&"function"===typeof d.getBoundingClientRect?m=d:"function"===typeof d.drawArrays||"function"===typeof d.drawElements?(q=d,p=q.canvas):("gl"in d?q=d.gl:"canvas"in d?p=e(d.canvas):"container"in d&&(f=e(d.container)),"attributes"in d&&(b=d.attributes),"extensions"in d&&(x=l(d.extensions)),"optionalExtensions"in d&&(u=l(d.optionalExtensions)),"onDone"in d&&(C=d.onDone),"profile"in d&&(w=!!d.profile),"pixelRatio"in d&&
(t=+d.pixelRatio)));m&&("canvas"===m.nodeName.toLowerCase()?p=m:f=m);if(!q){if(!p){m=a(f||document.body,C,t);if(!m)return null;p=m.canvas;y=m.onDestroy}q=c(p,b)}return q?{gl:q,canvas:p,container:f,extensions:x,optionalExtensions:u,pixelRatio:t,profile:w,onDone:C,onDestroy:y}:(y(),C("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/extend":24}],35:[function(b,d,f){function a(a,b,e){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(e,2))}
d.exports=function(c,b){for(var e=b.length,d=c.length,h=Array(e),k=0;k<e;++k)h[k]=[0,0,0];for(k=0;k<d;++k){var f=c[k],v=b[f[0]],p=b[f[1]],q=b[f[2]],x=v[0]-p[0],u=v[1]-p[1],t=v[2]-p[2],w=a(x,u,t),C=p[0]-q[0],y=p[1]-q[1],A=p[2]-q[2],D=a(C,y,A),E=a(q[0]-v[0],q[1]-v[1],q[2]-v[2]);1E-6>Math.min(w,D,E)||(q=.5*(w+D+E),p=Math.sqrt((q-w)*(q-D)*(q-E)/q),v=u*A-t*y,t=t*C-x*A,x=x*y-u*C,u=a(v,t,x),v/=u,t/=u,x/=u,u=h[f[0]],D=Math.atan2(p,q-D),C=t,y=x,u[0]+=D*v,u[1]+=D*C,u[2]+=D*y,D=h[f[1]],E=Math.atan2(p,q-E),u=
t,C=x,D[0]+=E*v,D[1]+=E*u,D[2]+=E*C,f=h[f[2]],w=Math.atan2(p,q-w),q=t,p=x,f[0]+=w*v,f[1]+=w*q,f[2]+=w*p)}for(k=0;k<e;++k)d=h[k],w=Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)),1E-8>w?(d[0]=1,d[1]=0,d[2]=0):(d[0]/=w,d[1]/=w,d[2]/=w);return h}},{}],36:[function(b,d,f){function a(a,b,e){for(var l=[],d=b;d<e;d+=3)b=(a[d]<<16)+(a[d+1]<<8)+a[d+2],l.push(c[b>>18&63]+c[b>>12&63]+c[b>>6&63]+c[b&63]);return l.join("")}f.toByteArray=function(a){var c,b,d,f,p;c=a.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");
f="="===a[c-2]?2:"="===a[c-1]?1:0;p=new e(3*c/4-f);b=0<f?c-4:c;var q=0;for(c=0;c<b;c+=4)d=l[a.charCodeAt(c)]<<18|l[a.charCodeAt(c+1)]<<12|l[a.charCodeAt(c+2)]<<6|l[a.charCodeAt(c+3)],p[q++]=d>>16&255,p[q++]=d>>8&255,p[q++]=d&255;2===f?(d=l[a.charCodeAt(c)]<<2|l[a.charCodeAt(c+1)]>>4,p[q++]=d&255):1===f&&(d=l[a.charCodeAt(c)]<<10|l[a.charCodeAt(c+1)]<<4|l[a.charCodeAt(c+2)]>>2,p[q++]=d>>8&255,p[q++]=d&255);return p};f.fromByteArray=function(b){for(var e=b.length,l=e%3,d="",f=[],p=0,q=e-l;p<q;p+=16383)f.push(a(b,
p,p+16383>q?q:p+16383));1===l?(b=b[e-1],d+=c[b>>2],d+=c[b<<4&63],d+="=="):2===l&&(b=(b[e-2]<<8)+b[e-1],d+=c[b>>10],d+=c[b>>4&63],d+=c[b<<2&63],d+="=");f.push(d);return f.join("")};var c=[],l=[],e="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var a=0;64>a;++a)c[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],l["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;l[45]=62;l[95]=63})()},{}],37:[function(b,d,f){function a(a){var c=
32;(a&=-a)&&c--;a&65535&&(c-=16);a&16711935&&(c-=8);a&252645135&&(c-=4);a&858993459&&(c-=2);a&1431655765&&--c;return c}"use restrict";f.INT_BITS=32;f.INT_MAX=2147483647;f.INT_MIN=-2147483648;f.sign=function(a){return(0<a)-(0>a)};f.abs=function(a){var c=a>>31;return(a^c)-c};f.min=function(a,c){return c^(a^c)&-(a<c)};f.max=function(a,c){return a^(a^c)&-(a<c)};f.isPow2=function(a){return!(a&a-1)&&!!a};f.log2=function(a){var c,b;c=(65535<a)<<4;a>>>=c;b=(255<a)<<3;a>>>=b;c|=b;b=(15<a)<<2;a>>>=b;c|=b;b=
(3<a)<<1;return c|b|a>>>b>>1};f.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};f.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};f.countTrailingZeros=a;f.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};f.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};f.parity=function(a){a^=a>>>16;a^=a>>>
8;a=(a^a>>>4)&15;return 27030>>>a&1};var c=Array(256);(function(a){for(var c=0;256>c;++c){for(var b=c,d=c,f=7,b=b>>>1;b;b>>>=1)d<<=1,d|=b&1,--f;a[c]=d<<f&255}})(c);f.reverse=function(a){return c[a&255]<<24|c[a>>>8&255]<<16|c[a>>>16&255]<<8|c[a>>>24&255]};f.interleave2=function(a,c){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;c&=65535;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|a<<1)&1431655765|((c|c<<1)&1431655765)<<1};f.deinterleave2=function(a,
c){a=a>>>c&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};f.interleave3=function(a,c,b){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;a=(a|a<<2)&1227133513|((c|c<<2)&1227133513)<<1;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;return a|((b|b<<2)&1227133513)<<2};f.deinterleave3=function(a,c){a=a>>>c&1227133513;
a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};f.nextCombination=function(c){var b=c|c-1;return b+1|(~b&-~b)-1>>>a(c)+1}},{}],38:[function(b,d,f){(function(a){function c(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()&&"function"===typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(c){return!1}}function d(a,c){if((e.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");
e.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(c),a.__proto__=e.prototype):(null===a&&(a=new e(c)),a.length=c);return a}function e(a,c,b){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(a,c,b);if("number"===typeof a){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return k(this,a)}return m(this,a,c,b)}function m(a,c,b,h){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&
c instanceof ArrayBuffer){c.byteLength;if(0>b||c.byteLength<b)throw new RangeError("'offset' is out of bounds");if(c.byteLength<b+(h||0))throw new RangeError("'length' is out of bounds");c=void 0===b&&void 0===h?new Uint8Array(c):void 0===h?new Uint8Array(c,b):new Uint8Array(c,b,h);e.TYPED_ARRAY_SUPPORT?(a=c,a.__proto__=e.prototype):a=r(a,c);return a}if("string"===typeof c){h=a;a=b;if("string"!==typeof a||""===a)a="utf8";if(!e.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');
b=q(c,a)|0;h=d(h,b);c=h.write(c,a);c!==b&&(h=h.slice(0,c));return h}return v(a,c)}function h(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function k(a,c){h(c);a=d(a,0>c?0:p(c)|0);if(!e.TYPED_ARRAY_SUPPORT)for(var b=0;b<c;++b)a[b]=0;return a}function r(a,c){var b=0>c.length?0:p(c.length)|0;a=d(a,b);for(var e=0;e<b;e+=1)a[e]=c[e]&255;return a}function v(a,c){if(e.isBuffer(c)){var b=p(c.length)|
0;a=d(a,b);if(0===a.length)return a;c.copy(a,0,0,b);return a}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(b="number"!==typeof c.length)||(b=c.length,b=b!==b),b?d(a,0):r(a,c);if("Buffer"===c.type&&V(c.data))return r(a,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function p(a){if(a>=(e.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(e.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function q(a,c){if(e.isBuffer(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var b=a.length;if(0===b)return 0;for(var d=!1;;)switch(c){case "ascii":case "latin1":case "binary":return b;case "utf8":case "utf-8":case void 0:return U(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
b;case "hex":return b>>>1;case "base64":return L.toByteArray(N(a)).length;default:if(d)return U(a).length;c=(""+c).toLowerCase();d=!0}}function x(a,c,b){var e=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===b||b>this.length)b=this.length;if(0>=b)return"";b>>>=0;c>>>=0;if(b<=c)return"";for(a||(a="utf8");;)switch(a){case "hex":a=c;c=b;b=this.length;if(!a||0>a)a=0;if(!c||0>c||c>b)c=b;e="";for(b=a;b<c;++b)a=e,e=this[b],e=16>e?"0"+e.toString(16):e.toString(16),e=a+e;return e;case "utf8":case "utf-8":return C(this,
c,b);case "ascii":a="";for(b=Math.min(this.length,b);c<b;++c)a+=String.fromCharCode(this[c]&127);return a;case "latin1":case "binary":a="";for(b=Math.min(this.length,b);c<b;++c)a+=String.fromCharCode(this[c]);return a;case "base64":return c=0===c&&b===this.length?L.fromByteArray(this):L.fromByteArray(this.slice(c,b)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,b);b="";for(a=0;a<c.length;a+=2)b+=String.fromCharCode(c[a]+256*c[a+1]);return b;default:if(e)throw new TypeError("Unknown encoding: "+
a);a=(a+"").toLowerCase();e=!0}}function u(a,c,b){var e=a[c];a[c]=a[b];a[b]=e}function t(a,c,b,d,h){if(0===a.length)return-1;"string"===typeof b?(d=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b=+b;isNaN(b)&&(b=h?0:a.length-1);0>b&&(b=a.length+b);if(b>=a.length){if(h)return-1;b=a.length-1}else if(0>b)if(h)b=0;else return-1;"string"===typeof c&&(c=e.from(c,d));if(e.isBuffer(c))return 0===c.length?-1:w(a,c,b,d,h);if("number"===typeof c)return c&=255,e.TYPED_ARRAY_SUPPORT&&"function"===
typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(a,c,b):Uint8Array.prototype.lastIndexOf.call(a,c,b):w(a,[c],b,d,h);throw new TypeError("val must be string, number or Buffer");}function w(a,c,b,e,d){function h(a,c){return 1===l?a[c]:a.readUInt16BE(c*l)}var l=1,f=a.length,k=c.length;if(void 0!==e&&(e=String(e).toLowerCase(),"ucs2"===e||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>a.length||2>c.length)return-1;l=2;f/=2;k/=2;b/=2}if(d)for(e=-1;b<f;b++)if(h(a,b)===h(c,-1===
e?0:b-e)){if(-1===e&&(e=b),b-e+1===k)return e*l}else-1!==e&&(b-=b-e),e=-1;else for(b+k>f&&(b=f-k);0<=b;b--){f=!0;for(e=0;e<k;e++)if(h(a,b+e)!==h(c,e)){f=!1;break}if(f)return b}return-1}function C(a,c,b){b=Math.min(a.length,b);for(var e=[];c<b;){var d=a[c],h=null,l=239<d?4:223<d?3:191<d?2:1;if(c+l<=b){var f,k,m;switch(l){case 1:128>d&&(h=d);break;case 2:f=a[c+1];128===(f&192)&&(d=(d&31)<<6|f&63,127<d&&(h=d));break;case 3:f=a[c+1];k=a[c+2];128===(f&192)&&128===(k&192)&&(d=(d&15)<<12|(f&63)<<6|k&63,
2047<d&&(55296>d||57343<d)&&(h=d));break;case 4:f=a[c+1],k=a[c+2],m=a[c+3],128===(f&192)&&128===(k&192)&&128===(m&192)&&(d=(d&15)<<18|(f&63)<<12|(k&63)<<6|m&63,65535<d&&1114112>d&&(h=d))}}null===h?(h=65533,l=1):65535<h&&(h-=65536,e.push(h>>>10&1023|55296),h=56320|h&1023);e.push(h);c+=l}a=e.length;if(a<=da)e=String.fromCharCode.apply(String,e);else{b="";for(c=0;c<a;)b+=String.fromCharCode.apply(String,e.slice(c,c+=da));e=b}return e}function y(a,c,b){if(0!==a%1||0>a)throw new RangeError("offset is not uint");
if(a+c>b)throw new RangeError("Trying to access beyond buffer length");}function A(a,c,b,d,h,l){if(!e.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>h||c<l)throw new RangeError('"value" argument is out of bounds');if(b+d>a.length)throw new RangeError("Index out of range");}function D(a,c,b,e){0>c&&(c=65535+c+1);for(var d=0,h=Math.min(a.length-b,2);d<h;++d)a[b+d]=(c&255<<8*(e?d:1-d))>>>8*(e?d:1-d)}function E(a,c,b,e){0>c&&(c=4294967295+c+1);for(var d=0,h=Math.min(a.length-
b,4);d<h;++d)a[b+d]=c>>>8*(e?d:3-d)&255}function B(a,c,b,e,d,h){if(b+e>a.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("Index out of range");}function K(a,c,b,e,d){d||B(a,c,b,4,3.4028234663852886E38,-3.4028234663852886E38);F.write(a,c,b,e,23,4);return b+4}function H(a,c,b,e,d){d||B(a,c,b,8,1.7976931348623157E308,-1.7976931348623157E308);F.write(a,c,b,e,52,8);return b+8}function N(a){a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");a=a.replace(Y,"");if(2>a.length)return"";
for(;0!==a.length%4;)a+="=";return a}function U(a,c){c=c||Infinity;for(var b,e=a.length,d=null,h=[],l=0;l<e;++l){b=a.charCodeAt(l);if(55295<b&&57344>b){if(!d){if(56319<b){-1<(c-=3)&&h.push(239,191,189);continue}else if(l+1===e){-1<(c-=3)&&h.push(239,191,189);continue}d=b;continue}if(56320>b){-1<(c-=3)&&h.push(239,191,189);d=b;continue}b=(d-55296<<10|b-56320)+65536}else d&&-1<(c-=3)&&h.push(239,191,189);d=null;if(128>b){if(0>--c)break;h.push(b)}else if(2048>b){if(0>(c-=2))break;h.push(b>>6|192,b&63|
128)}else if(65536>b){if(0>(c-=3))break;h.push(b>>12|224,b>>6&63|128,b&63|128)}else if(1114112>b){if(0>(c-=4))break;h.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw Error("Invalid code point");}return h}function G(a){for(var c=[],b=0;b<a.length;++b)c.push(a.charCodeAt(b)&255);return c}function I(a,c,b,e){for(var d=0;d<e&&!(d+b>=c.length||d>=a.length);++d)c[d+b]=a[d];return d}var L=b("base64-js"),F=b("ieee754"),V=b("isarray");f.Buffer=e;f.SlowBuffer=function(a){+a!=a&&(a=0);return e.alloc(+a)};
f.INSPECT_MAX_BYTES=50;e.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:c();f.kMaxLength=e.TYPED_ARRAY_SUPPORT?2147483647:1073741823;e.poolSize=8192;e._augment=function(a){a.__proto__=e.prototype;return a};e.from=function(a,c,b){return m(null,a,c,b)};e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&($jscomp.initSymbol(),
Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})));e.alloc=function(a,c,b){h(a);a=0>=a?d(null,a):void 0!==c?"string"===typeof b?d(null,a).fill(c,b):d(null,a).fill(c):d(null,a);return a};e.allocUnsafe=function(a){return k(null,a)};e.allocUnsafeSlow=function(a){return k(null,a)};e.isBuffer=function(a){return!(null==a||!a._isBuffer)};e.compare=function(a,c){if(!e.isBuffer(a)||!e.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(a===c)return 0;for(var b=a.length,d=c.length,
h=0,l=Math.min(b,d);h<l;++h)if(a[h]!==c[h]){b=a[h];d=c[h];break}return b<d?-1:d<b?1:0};e.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};e.concat=function(a,c){if(!V(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return e.alloc(0);var b;if(void 0===c)for(b=c=0;b<a.length;++b)c+=a[b].length;
var d=e.allocUnsafe(c),h=0;for(b=0;b<a.length;++b){var l=a[b];if(!e.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(d,h);h+=l.length}return d};e.byteLength=q;e.prototype._isBuffer=!0;e.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<a;c+=2)u(this,c,c+1);return this};e.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var c=0;c<a;c+=4)u(this,c,c+3),u(this,c+1,c+2);return this};e.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<a;c+=8)u(this,c,c+7),u(this,c+1,c+6),u(this,c+2,c+5),u(this,c+3,c+4);return this};e.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?C(this,0,a):x.apply(this,arguments)};e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");
return this===a?!0:0===e.compare(this,a)};e.prototype.inspect=function(){var a="",c=f.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(a+=" ... "));return"<Buffer "+a+">"};e.prototype.compare=function(a,c,b,d,h){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===b&&(b=a?a.length:0);void 0===d&&(d=0);void 0===h&&(h=this.length);if(0>c||b>a.length||0>d||h>this.length)throw new RangeError("out of range index");
if(d>=h&&c>=b)return 0;if(d>=h)return-1;if(c>=b)return 1;c>>>=0;b>>>=0;d>>>=0;h>>>=0;if(this===a)return 0;var l=h-d,f=b-c,k=Math.min(l,f);d=this.slice(d,h);a=a.slice(c,b);for(c=0;c<k;++c)if(d[c]!==a[c]){l=d[c];f=a[c];break}return l<f?-1:f<l?1:0};e.prototype.includes=function(a,c,b){return-1!==this.indexOf(a,c,b)};e.prototype.indexOf=function(a,c,b){return t(this,a,c,b,!0)};e.prototype.lastIndexOf=function(a,c,b){return t(this,a,c,b,!1)};e.prototype.write=function(a,c,b,e){if(void 0===c)e="utf8",b=
this.length,c=0;else if(void 0===b&&"string"===typeof c)e=c,b=this.length,c=0;else if(isFinite(c))c|=0,isFinite(b)?(b|=0,void 0===e&&(e="utf8")):(e=b,b=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-c;if(void 0===b||b>d)b=d;if(0<a.length&&(0>b||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");e||(e="utf8");for(d=!1;;)switch(e){case "hex":a:{c=Number(c)||0;e=this.length-c;b?(b=Number(b),b>e&&(b=
e)):b=e;e=a.length;if(0!==e%2)throw new TypeError("Invalid hex string");b>e/2&&(b=e/2);for(e=0;e<b;++e){d=parseInt(a.substr(2*e,2),16);if(isNaN(d)){a=e;break a}this[c+e]=d}a=e}return a;case "utf8":case "utf-8":return I(U(a,this.length-c),this,c,b);case "ascii":return I(G(a),this,c,b);case "latin1":case "binary":return I(G(a),this,c,b);case "base64":return I(L.toByteArray(N(a)),this,c,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.length-c;for(var h=void 0,h=d=void 0,l=[],f=0;f<
a.length&&!(0>(e-=2));++f)h=a.charCodeAt(f),d=h>>8,h%=256,l.push(h),l.push(d);return I(l,this,c,b);default:if(d)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase();d=!0}};e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var da=4096;e.prototype.slice=function(a,c){var b=this.length;a=~~a;c=void 0===c?b:~~c;0>a?(a+=b,0>a&&(a=0)):a>b&&(a=b);0>c?(c+=b,0>c&&(c=0)):c>b&&(c=b);c<a&&(c=a);if(e.TYPED_ARRAY_SUPPORT)b=this.subarray(a,c),b.__proto__=
e.prototype;else for(var d=c-a,b=new e(d,void 0),h=0;h<d;++h)b[h]=this[h+a];return b};e.prototype.readUIntLE=function(a,c,b){a|=0;c|=0;b||y(a,c,this.length);b=this[a];for(var e=1,d=0;++d<c&&(e*=256);)b+=this[a+d]*e;return b};e.prototype.readUIntBE=function(a,c,b){a|=0;c|=0;b||y(a,c,this.length);b=this[a+--c];for(var e=1;0<c&&(e*=256);)b+=this[a+--c]*e;return b};e.prototype.readUInt8=function(a,c){c||y(a,1,this.length);return this[a]};e.prototype.readUInt16LE=function(a,c){c||y(a,2,this.length);return this[a]|
this[a+1]<<8};e.prototype.readUInt16BE=function(a,c){c||y(a,2,this.length);return this[a]<<8|this[a+1]};e.prototype.readUInt32LE=function(a,c){c||y(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};e.prototype.readUInt32BE=function(a,c){c||y(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};e.prototype.readIntLE=function(a,c,b){a|=0;c|=0;b||y(a,c,this.length);b=this[a];for(var e=1,d=0;++d<c&&(e*=256);)b+=this[a+d]*e;b>=128*e&&(b-=Math.pow(2,
8*c));return b};e.prototype.readIntBE=function(a,c,b){a|=0;c|=0;b||y(a,c,this.length);b=c;for(var e=1,d=this[a+--b];0<b&&(e*=256);)d+=this[a+--b]*e;d>=128*e&&(d-=Math.pow(2,8*c));return d};e.prototype.readInt8=function(a,c){c||y(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};e.prototype.readInt16LE=function(a,c){c||y(a,2,this.length);var b=this[a]|this[a+1]<<8;return b&32768?b|4294901760:b};e.prototype.readInt16BE=function(a,c){c||y(a,2,this.length);var b=this[a+1]|this[a]<<8;return b&
32768?b|4294901760:b};e.prototype.readInt32LE=function(a,c){c||y(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};e.prototype.readInt32BE=function(a,c){c||y(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};e.prototype.readFloatLE=function(a,c){c||y(a,4,this.length);return F.read(this,a,!0,23,4)};e.prototype.readFloatBE=function(a,c){c||y(a,4,this.length);return F.read(this,a,!1,23,4)};e.prototype.readDoubleLE=function(a,c){c||y(a,8,this.length);return F.read(this,
a,!0,52,8)};e.prototype.readDoubleBE=function(a,c){c||y(a,8,this.length);return F.read(this,a,!1,52,8)};e.prototype.writeUIntLE=function(a,c,b,e){a=+a;c|=0;b|=0;e||A(this,a,c,b,Math.pow(2,8*b)-1,0);e=1;var d=0;for(this[c]=a&255;++d<b&&(e*=256);)this[c+d]=a/e&255;return c+b};e.prototype.writeUIntBE=function(a,c,b,e){a=+a;c|=0;b|=0;e||A(this,a,c,b,Math.pow(2,8*b)-1,0);e=b-1;var d=1;for(this[c+e]=a&255;0<=--e&&(d*=256);)this[c+e]=a/d&255;return c+b};e.prototype.writeUInt8=function(a,c,b){a=+a;c|=0;b||
A(this,a,c,1,255,0);e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[c]=a&255;return c+1};e.prototype.writeUInt16LE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,2,65535,0);e.TYPED_ARRAY_SUPPORT?(this[c]=a&255,this[c+1]=a>>>8):D(this,a,c,!0);return c+2};e.prototype.writeUInt16BE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,2,65535,0);e.TYPED_ARRAY_SUPPORT?(this[c]=a>>>8,this[c+1]=a&255):D(this,a,c,!1);return c+2};e.prototype.writeUInt32LE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,4,4294967295,0);e.TYPED_ARRAY_SUPPORT?
(this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255):E(this,a,c,!0);return c+4};e.prototype.writeUInt32BE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,4,4294967295,0);e.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255):E(this,a,c,!1);return c+4};e.prototype.writeIntLE=function(a,c,b,e){a=+a;c|=0;e||(e=Math.pow(2,8*b-1),A(this,a,c,b,e-1,-e));e=0;var d=1,h=0;for(this[c]=a&255;++e<b&&(d*=256);)0>a&&0===h&&0!==this[c+e-1]&&(h=1),this[c+e]=(a/d>>0)-h&255;return c+
b};e.prototype.writeIntBE=function(a,c,b,e){a=+a;c|=0;e||(e=Math.pow(2,8*b-1),A(this,a,c,b,e-1,-e));e=b-1;var d=1,h=0;for(this[c+e]=a&255;0<=--e&&(d*=256);)0>a&&0===h&&0!==this[c+e+1]&&(h=1),this[c+e]=(a/d>>0)-h&255;return c+b};e.prototype.writeInt8=function(a,c,b){a=+a;c|=0;b||A(this,a,c,1,127,-128);e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[c]=a&255;return c+1};e.prototype.writeInt16LE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,2,32767,-32768);e.TYPED_ARRAY_SUPPORT?(this[c]=a&255,
this[c+1]=a>>>8):D(this,a,c,!0);return c+2};e.prototype.writeInt16BE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,2,32767,-32768);e.TYPED_ARRAY_SUPPORT?(this[c]=a>>>8,this[c+1]=a&255):D(this,a,c,!1);return c+2};e.prototype.writeInt32LE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,4,2147483647,-2147483648);e.TYPED_ARRAY_SUPPORT?(this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24):E(this,a,c,!0);return c+4};e.prototype.writeInt32BE=function(a,c,b){a=+a;c|=0;b||A(this,a,c,4,2147483647,-2147483648);
0>a&&(a=4294967295+a+1);e.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255):E(this,a,c,!1);return c+4};e.prototype.writeFloatLE=function(a,c,b){return K(this,a,c,!0,b)};e.prototype.writeFloatBE=function(a,c,b){return K(this,a,c,!1,b)};e.prototype.writeDoubleLE=function(a,c,b){return H(this,a,c,!0,b)};e.prototype.writeDoubleBE=function(a,c,b){return H(this,a,c,!1,b)};e.prototype.copy=function(a,c,b,d){b||(b=0);d||0===d||(d=this.length);c>=a.length&&(c=a.length);
c||(c=0);0<d&&d<b&&(d=b);if(d===b||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>b||b>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-c<d-b&&(d=a.length-c+b);var h=d-b;if(this===a&&b<c&&c<d)for(d=h-1;0<=d;--d)a[d+c]=this[d+b];else if(1E3>h||!e.TYPED_ARRAY_SUPPORT)for(d=0;d<h;++d)a[d+c]=this[d+b];else Uint8Array.prototype.set.call(a,this.subarray(b,
b+h),c);return h};e.prototype.fill=function(a,c,b,d){if("string"===typeof a){"string"===typeof c?(d=c,c=0,b=this.length):"string"===typeof b&&(d=b,b=this.length);if(1===a.length){var h=a.charCodeAt(0);256>h&&(a=h)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!e.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof a&&(a&=255);if(0>c||this.length<c||this.length<b)throw new RangeError("Out of range index");if(b<=
c)return this;c>>>=0;b=void 0===b?this.length:b>>>0;a||(a=0);if("number"===typeof a)for(d=c;d<b;++d)this[d]=a;else for(a=e.isBuffer(a)?a:U((new e(a,d)).toString()),h=a.length,d=0;d<b-c;++d)this[d+c]=a[d%h];return this};var Y=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":36,ieee754:66,isarray:70}],39:[function(b,d,f){function a(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=
[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var c=b("./lib/thunk.js");d.exports=function(b){var e=new a;e.pre=b.pre;e.body=b.body;e.post=b.post;var d=b.args.slice(0);e.argTypes=d;for(var h=0;h<d.length;++h){var f=d[h];if("array"===f||"object"===typeof f&&f.blockIndices){e.argTypes[h]="array";e.arrayArgs.push(h);e.arrayBlockIndices.push(f.blockIndices?f.blockIndices:0);e.shimArgs.push("array"+
h);if(h<e.pre.args.length&&0<e.pre.args[h].count)throw Error("cwise: pre() block may not reference array args");if(h<e.post.args.length&&0<e.post.args[h].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===f)e.scalarArgs.push(h),e.shimArgs.push("scalar"+h);else if("index"===f){e.indexArgs.push(h);if(h<e.pre.args.length&&0<e.pre.args[h].count)throw Error("cwise: pre() block may not reference array index");if(h<e.body.args.length&&e.body.args[h].lvalue)throw Error("cwise: body() block may not write to array index");
if(h<e.post.args.length&&0<e.post.args[h].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===f){e.shapeArgs.push(h);if(h<e.pre.args.length&&e.pre.args[h].lvalue)throw Error("cwise: pre() block may not write to array shape");if(h<e.body.args.length&&e.body.args[h].lvalue)throw Error("cwise: body() block may not write to array shape");if(h<e.post.args.length&&e.post.args[h].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof f&&f.offset)e.argTypes[h]="offset",e.offsetArgs.push({array:f.array,offset:f.offset}),e.offsetArgIndex.push(h);else throw Error("cwise: Unknown argument type "+d[h]);}if(0>=e.arrayArgs.length)throw Error("cwise: No array arguments specified");if(e.pre.args.length>d.length)throw Error("cwise: Too many arguments in pre() block");if(e.body.args.length>d.length)throw Error("cwise: Too many arguments in body() block");if(e.post.args.length>d.length)throw Error("cwise: Too many arguments in post() block");
e.debug=!!b.printCode||!!b.debug;e.funcName=b.funcName||"cwise";e.blockSize=b.blockSize||64;return c(e)}},{"./lib/thunk.js":41}],40:[function(b,d,f){function a(a,c,b){var e=a.length,d=c.arrayArgs.length;c=0<c.indexArgs.length;var l=[],f=[],m=0,t=0,w,C;for(w=0;w<e;++w)f.push(["i",w,"=0"].join(""));for(C=0;C<d;++C)for(w=0;w<e;++w)t=m,m=a[w],0===w?f.push(["d",C,"s",w,"=t",C,"p",m].join("")):f.push(["d",C,"s",w,"=(t",C,"p",m,"-s",t,"*t",C,"p",t,")"].join(""));l.push("var "+f.join(","));for(w=e-1;0<=w;--w)m=
a[w],l.push(["for(i",w,"=0;i",w,"<s",m,";++i",w,"){"].join(""));l.push(b);for(w=0;w<e;++w){t=m;m=a[w];for(C=0;C<d;++C)l.push(["p",C,"+=d",C,"s",w].join(""));c&&(0<w&&l.push(["index[",t,"]-=s",t].join("")),l.push(["++index[",m,"]"].join("")));l.push("}")}return l.join("\n")}function c(c,b,e,d){for(var l=b.length,f=e.arrayArgs.length,m=e.blockSize,u=0<e.indexArgs.length,t=[],w=0;w<f;++w)t.push(["var offset",w,"=p",w].join(""));for(w=c;w<l;++w)t.push(["for(var j"+w+"=SS[",b[w],"]|0;j",w,">0;){"].join("")),
t.push(["if(j",w,"<",m,"){"].join("")),t.push(["s",b[w],"=j",w].join("")),t.push(["j",w,"=0"].join("")),t.push(["}else{s",b[w],"=",m].join("")),t.push(["j",w,"-=",m,"}"].join("")),u&&t.push(["index[",b[w],"]=j",w].join(""));for(w=0;w<f;++w){m=["offset"+w];for(u=c;u<l;++u)m.push(["j",u,"*t",w,"p",b[u]].join(""));t.push(["p",w,"=(",m.join("+"),")"].join(""))}t.push(a(b,e,d));for(w=c;w<l;++w)t.push("}");return t.join("\n")}function l(a,c,b){for(var e=a.body,d=[],l=[],f=0;f<a.args.length;++f){var m=a.args[f];
if(!(0>=m.count)){var t=new RegExp(m.name,"g"),w="",C=c.arrayArgs.indexOf(f);switch(c.argTypes[f]){case "offset":var y=c.offsetArgIndex.indexOf(f),C=c.offsetArgs[y].array,w="+q"+y;case "array":var w="p"+C+w,A="l"+f,y="a"+C;if(0===c.arrayBlockIndices[C])1===m.count?"generic"===b[C]?m.lvalue?(d.push(["var ",A,"=",y,".get(",w,")"].join("")),e=e.replace(t,A),l.push([y,".set(",w,",",A,")"].join(""))):e=e.replace(t,[y,".get(",w,")"].join("")):e=e.replace(t,[y,"[",w,"]"].join("")):"generic"===b[C]?(d.push(["var ",
A,"=",y,".get(",w,")"].join("")),e=e.replace(t,A),m.lvalue&&l.push([y,".set(",w,",",A,")"].join(""))):(d.push(["var ",A,"=",y,"[",w,"]"].join("")),e=e.replace(t,A),m.lvalue&&l.push([y,"[",w,"]=",A].join("")));else{t=[m.name];m=[w];for(w=0;w<Math.abs(c.arrayBlockIndices[C]);w++)t.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(w+1)+"*t"+C+"b"+w);t=new RegExp(t.join(""),"g");w=m.join("+");if("generic"===b[C])throw Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(t,[y,"[",
w,"]"].join(""))}break;case "scalar":e=e.replace(t,"Y"+c.scalarArgs.indexOf(f));break;case "index":e=e.replace(t,"index");break;case "shape":e=e.replace(t,"shape")}}}return[d.join("\n"),e,l.join("\n")].join("\n").trim()}function e(a){for(var c=Array(a.length),b=!0,e=0;e<a.length;++e){var d=a[e],l=d.match(/\d+/),l=l?l[0]:"";0===d.charAt(0)?c[e]="u"+d.charAt(1)+l:c[e]=d.charAt(0)+l;0<e&&(b=b&&c[e]===c[e-1])}return b?c[0]:c.join("")}var m=b("uniq");d.exports=function(b,d){for(var f=d[1].length-Math.abs(b.arrayBlockIndices[0])|
0,v=Array(b.arrayArgs.length),p=Array(b.arrayArgs.length),q=0;q<b.arrayArgs.length;++q)p[q]=d[2*q],v[q]=d[2*q+1];for(var x=[],u=[],t=[],w=[],C=[],q=0;q<b.arrayArgs.length;++q){0>b.arrayBlockIndices[q]?(t.push(0),w.push(f),x.push(f),u.push(f+b.arrayBlockIndices[q])):(t.push(b.arrayBlockIndices[q]),w.push(b.arrayBlockIndices[q]+f),x.push(0),u.push(b.arrayBlockIndices[q]));for(var y=[],A=0;A<v[q].length;A++)t[q]<=v[q][A]&&v[q][A]<w[q]&&y.push(v[q][A]-t[q]);C.push(y)}u=["SS"];w=["'use strict'"];y=[];
for(A=0;A<f;++A)y.push(["s",A,"=SS[",A,"]"].join(""));for(q=0;q<b.arrayArgs.length;++q){u.push("a"+q);u.push("t"+q);u.push("p"+q);for(A=0;A<f;++A)y.push(["t",q,"p",A,"=t",q,"[",t[q]+A,"]"].join(""));for(A=0;A<Math.abs(b.arrayBlockIndices[q]);++A)y.push(["t",q,"b",A,"=t",q,"[",x[q]+A,"]"].join(""))}for(q=0;q<b.scalarArgs.length;++q)u.push("Y"+q);0<b.shapeArgs.length&&y.push("shape=SS.slice(0)");if(0<b.indexArgs.length){A=Array(f);for(q=0;q<f;++q)A[q]="0";y.push(["index=[",A.join(","),"]"].join(""))}for(q=
0;q<b.offsetArgs.length;++q){x=b.offsetArgs[q];t=[];for(A=0;A<x.offset.length;++A)0!==x.offset[A]&&(1===x.offset[A]?t.push(["t",x.array,"p",A].join("")):t.push([x.offset[A],"*t",x.array,"p",A].join("")));0===t.length?y.push("q"+q+"=0"):y.push(["q",q,"=",t.join("+")].join(""))}q=m([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));y=y.concat(q);w.push("var "+y.join(","));for(q=0;q<b.arrayArgs.length;++q)w.push("p"+q+"|=0");3<b.pre.body.length&&w.push(l(b.pre,b,p));q=l(b.body,
b,p);a:for(A=0,y=C[0].length;A<y;){for(x=1;x<C.length;++x)if(C[x][A]!==C[0][A])break a;++A}A<f?w.push(c(A,C[0],b,q)):w.push(a(C[0],b,q));3<b.post.body.length&&w.push(l(b.post,b,p));b.debug&&console.log("-----Generated cwise routine for ",d,":\n"+w.join("\n")+"\n----------");f=[b.funcName||"unnamed","_cwise_loop_",v[0].join("s"),"m",A,e(p)].join("");return(new Function(["function ",f,"(",u.join(","),"){",w.join("\n"),"} return ",f].join("")))()}},{uniq:84}],41:[function(b,d,f){var a=b("./compile.js");
d.exports=function(c){var b=["'use strict'","var CACHED={}"],e=[];b.push(["return function ",c.funcName+"_cwise_thunk","(",c.shimArgs.join(","),"){"].join(""));for(var d=[],h=[],f=[["array",c.arrayArgs[0],".shape.slice(",Math.max(0,c.arrayBlockIndices[0]),0>c.arrayBlockIndices[0]?","+c.arrayBlockIndices[0]+")":")"].join("")],r=[],v=[],p=0;p<c.arrayArgs.length;++p){var q=c.arrayArgs[p];e.push(["t",q,"=array",q,".dtype,r",q,"=array",q,".order"].join(""));d.push("t"+q);d.push("r"+q);h.push("t"+q);h.push("r"+
q+".join()");f.push("array"+q+".data");f.push("array"+q+".stride");f.push("array"+q+".offset|0");0<p&&(r.push("array"+c.arrayArgs[0]+".shape.length===array"+q+".shape.length+"+(Math.abs(c.arrayBlockIndices[0])-Math.abs(c.arrayBlockIndices[p]))),v.push("array"+c.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,c.arrayBlockIndices[0])+"]===array"+q+".shape[shapeIndex+"+Math.max(0,c.arrayBlockIndices[p])+"]"))}1<c.arrayArgs.length&&(b.push("if (!("+r.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
b.push("for(var shapeIndex=array"+c.arrayArgs[0]+".shape.length-"+Math.abs(c.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),b.push("if (!("+v.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(p=0;p<c.scalarArgs.length;++p)f.push("scalar"+c.scalarArgs[p]);e.push(["type=[",h.join(","),"].join()"].join(""));e.push("proc=CACHED[type]");b.push("var "+e.join(","));b.push(["if(!proc){CACHED[type]=proc=compile([",d.join(","),"])}return proc(",f.join(","),
")}"].join(""));c.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");return(new Function("compile",b.join("\n")))(a.bind(void 0,c))}},{"./compile.js":40}],42:[function(b,d,f){function a(c,b,e){var d=c[e]|0;if(0>=d)return[];var h=Array(d),f;if(e===c.length-1)for(f=0;f<d;++f)h[f]=b;else for(f=0;f<d;++f)h[f]=a(c,b,e+1);return h}d.exports=function(c,b){"undefined"===typeof b&&(b=0);switch(typeof c){case "number":if(0<c){var e=c|0,d=b,h,f;h=Array(e);for(f=0;f<e;++f)h[f]=d;return h}break;
case "object":if("number"===typeof c.length)return a(c,b,0)}return[]}},{}],43:[function(b,d,f){function a(a){if(0>a)return Number("0/0");for(var c=l[0],b=l.length-1;0<b;--b)c+=l[b]/(a+b);b=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(b)-b+Math.log(c)-Math.log(a)}var c=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],l=[.9999999999999971,57.15623566586292,-59.59796035547549,
14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];d.exports=function m(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*b)*m(1-b));if(100<b)return Math.exp(a(b));--b;for(var d=c[0],f=1;9>f;f++)d+=c[f]/(b+f);f=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(f,b+.5)*Math.exp(-f)*d};d.exports.log=a},{}],44:[function(b,
d,f){d.exports=function(a,c){var b=c[0],e=c[1],d=c[2],f=c[3],k=c[4],r=c[5],v=c[6],p=c[7],q=c[8];a[0]=k*q-r*p;a[1]=d*p-e*q;a[2]=e*r-d*k;a[3]=r*v-f*q;a[4]=b*q-d*v;a[5]=d*f-b*r;a[6]=f*p-k*v;a[7]=e*v-b*p;a[8]=b*k-e*f;return a}},{}],45:[function(b,d,f){d.exports=function(a){var c=new Float32Array(9);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c}},{}],46:[function(b,d,f){d.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];
a[6]=c[6];a[7]=c[7];a[8]=c[8];return a}},{}],47:[function(b,d,f){d.exports=function(){var a=new Float32Array(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}},{}],48:[function(b,d,f){d.exports=function(a){var c=a[3],b=a[4],e=a[5],d=a[6],f=a[7],k=a[8];return a[0]*(k*b-e*f)+a[1]*(e*d-k*c)+a[2]*(f*c-b*d)}},{}],49:[function(b,d,f){d.exports=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]+a[4]*a[4]+a[5]*a[5]+a[6]*a[6]+a[7]*a[7]+a[8]*a[8])}},{}],50:[function(b,
d,f){d.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=0;a[3]=c[2];a[4]=c[3];a[5]=0;a[6]=c[4];a[7]=c[5];a[8]=1;return a}},{}],51:[function(b,d,f){d.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[4];a[4]=c[5];a[5]=c[6];a[6]=c[8];a[7]=c[9];a[8]=c[10];return a}},{}],52:[function(b,d,f){d.exports=function(a,c){var b=c[0],e=c[1],d=c[2],f=c[3],k=b+b,r=e+e,v=d+d,b=b*k,p=e*k,e=e*r,q=d*k,x=d*r,d=d*v,k=f*k,r=f*r,f=f*v;a[0]=1-e-d;a[3]=p-f;a[6]=q+r;a[1]=p+f;a[4]=1-b-d;a[7]=x-k;a[2]=q-r;a[5]=x+k;a[8]=
1-b-e;return a}},{}],53:[function(b,d,f){d.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}},{}],54:[function(b,d,f){d.exports={adjoint:b("./adjoint"),clone:b("./clone"),copy:b("./copy"),create:b("./create"),determinant:b("./determinant"),frob:b("./frob"),fromMat2:b("./from-mat2"),fromMat4:b("./from-mat4"),fromQuat:b("./from-quat"),identity:b("./identity"),invert:b("./invert"),multiply:b("./multiply"),normalFromMat4:b("./normal-from-mat4"),rotate:b("./rotate"),
scale:b("./scale"),str:b("./str"),translate:b("./translate"),transpose:b("./transpose")}},{"./adjoint":44,"./clone":45,"./copy":46,"./create":47,"./determinant":48,"./frob":49,"./from-mat2":50,"./from-mat4":51,"./from-quat":52,"./identity":53,"./invert":55,"./multiply":56,"./normal-from-mat4":57,"./rotate":58,"./scale":59,"./str":60,"./translate":61,"./transpose":62}],55:[function(b,d,f){d.exports=function(a,c){var b=c[0],e=c[1],d=c[2],f=c[3],k=c[4],r=c[5],v=c[6],p=c[7],q=c[8],x=q*k-r*p,u=-q*f+r*
v,t=p*f-k*v,w=b*x+e*u+d*t;if(!w)return null;w=1/w;a[0]=x*w;a[1]=(-q*e+d*p)*w;a[2]=(r*e-d*k)*w;a[3]=u*w;a[4]=(q*b-d*v)*w;a[5]=(-r*b+d*f)*w;a[6]=t*w;a[7]=(-p*b+e*v)*w;a[8]=(k*b-e*f)*w;return a}},{}],56:[function(b,d,f){d.exports=function(a,c,b){var e=c[0],d=c[1],f=c[2],k=c[3],r=c[4],v=c[5],p=c[6],q=c[7];c=c[8];var x=b[0],u=b[1],t=b[2],w=b[3],C=b[4],y=b[5],A=b[6],D=b[7];b=b[8];a[0]=x*e+u*k+t*p;a[1]=x*d+u*r+t*q;a[2]=x*f+u*v+t*c;a[3]=w*e+C*k+y*p;a[4]=w*d+C*r+y*q;a[5]=w*f+C*v+y*c;a[6]=A*e+D*k+b*p;a[7]=
A*d+D*r+b*q;a[8]=A*f+D*v+b*c;return a}},{}],57:[function(b,d,f){d.exports=function(a,c){var b=c[0],e=c[1],d=c[2],f=c[3],k=c[4],r=c[5],v=c[6],p=c[7],q=c[8],x=c[9],u=c[10],t=c[11],w=c[12],C=c[13],y=c[14],A=c[15],D=b*r-e*k,E=b*v-d*k,B=b*p-f*k,K=e*v-d*r,H=e*p-f*r,N=d*p-f*v,U=q*C-x*w,G=q*y-u*w,q=q*A-t*w,I=x*y-u*C,x=x*A-t*C,u=u*A-t*y,t=D*u-E*x+B*I+K*q-H*G+N*U;if(!t)return null;t=1/t;a[0]=(r*u-v*x+p*I)*t;a[1]=(v*q-k*u-p*G)*t;a[2]=(k*x-r*q+p*U)*t;a[3]=(d*x-e*u-f*I)*t;a[4]=(b*u-d*q+f*G)*t;a[5]=(e*q-b*x-f*
U)*t;a[6]=(C*N-y*H+A*K)*t;a[7]=(y*B-w*N-A*E)*t;a[8]=(w*H-C*B+A*D)*t;return a}},{}],58:[function(b,d,f){d.exports=function(a,c,b){var e=c[0],d=c[1],f=c[2],k=c[3],r=c[4],v=c[5],p=c[6],q=c[7];c=c[8];var x=Math.sin(b);b=Math.cos(b);a[0]=b*e+x*k;a[1]=b*d+x*r;a[2]=b*f+x*v;a[3]=b*k-x*e;a[4]=b*r-x*d;a[5]=b*v-x*f;a[6]=p;a[7]=q;a[8]=c;return a}},{}],59:[function(b,d,f){d.exports=function(a,c,b){var e=b[0];b=b[1];a[0]=e*c[0];a[1]=e*c[1];a[2]=e*c[2];a[3]=b*c[3];a[4]=b*c[4];a[5]=b*c[5];a[6]=c[6];a[7]=c[7];a[8]=
c[8];return a}},{}],60:[function(b,d,f){d.exports=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}},{}],61:[function(b,d,f){d.exports=function(a,c,b){var e=c[0],d=c[1],f=c[2],k=c[3],r=c[4],v=c[5],p=c[6],q=c[7];c=c[8];var x=b[0];b=b[1];a[0]=e;a[1]=d;a[2]=f;a[3]=k;a[4]=r;a[5]=v;a[6]=x*e+b*k+p;a[7]=x*d+b*r+q;a[8]=x*f+b*v+c;return a}},{}],62:[function(b,d,f){d.exports=function(a,c){if(a===c){var b=c[1],e=c[2],d=c[5];a[1]=c[3];a[2]=c[6];
a[3]=b;a[5]=c[7];a[6]=e;a[7]=d}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a}},{}],63:[function(b,d,f){d.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],64:[function(b,d,f){var a=b("./identity");d.exports=function(c,b,e,d){var f,k,r,v,p,q,x,u,t=b[0],w=b[1];b=b[2];r=d[0];v=d[1];k=d[2];x=e[0];d=e[1];f=e[2];if(1E-6>Math.abs(t-x)&&1E-6>Math.abs(w-
d)&&1E-6>Math.abs(b-f))return a(c);e=t-x;d=w-d;x=b-f;u=1/Math.sqrt(e*e+d*d+x*x);e*=u;d*=u;x*=u;f=v*x-k*d;k=k*e-r*x;r=r*d-v*e;(u=Math.sqrt(f*f+k*k+r*r))?(u=1/u,f*=u,k*=u,r*=u):r=k=f=0;v=d*r-x*k;p=x*f-e*r;q=e*k-d*f;(u=Math.sqrt(v*v+p*p+q*q))?(u=1/u,v*=u,p*=u,q*=u):q=p=v=0;c[0]=f;c[1]=v;c[2]=e;c[3]=0;c[4]=k;c[5]=p;c[6]=d;c[7]=0;c[8]=r;c[9]=q;c[10]=x;c[11]=0;c[12]=-(f*t+k*w+r*b);c[13]=-(v*t+p*w+q*b);c[14]=-(e*t+d*w+x*b);c[15]=1;return c}},{"./identity":63}],65:[function(b,d,f){d.exports=function(a,c,
b,d,f){c=1/Math.tan(c/2);var h=1/(d-f);a[0]=c/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+d)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*d*h;a[15]=0;return a}},{}],66:[function(b,d,f){f.read=function(a,c,b,d,f){var h;h=8*f-d-1;var k=(1<<h)-1,r=k>>1,v=-7;f=b?f-1:0;var p=b?-1:1,q=a[c+f];f+=p;b=q&(1<<-v)-1;q>>=-v;for(v+=h;0<v;b=256*b+a[c+f],f+=p,v-=8);h=b&(1<<-v)-1;b>>=-v;for(v+=d;0<v;h=256*h+a[c+f],f+=p,v-=8);if(0===b)b=1-r;else{if(b===k)return h?NaN:Infinity*(q?-1:1);h+=Math.pow(2,
d);b-=r}return(q?-1:1)*h*Math.pow(2,b-d)};f.write=function(a,c,b,d,f,h){var k,r=8*h-f-1,v=(1<<r)-1,p=v>>1,q=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;h=d?0:h-1;var x=d?1:-1,u=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,d=v):(d=Math.floor(Math.log(c)/Math.LN2),1>c*(k=Math.pow(2,-d))&&(d--,k*=2),c=1<=d+p?c+q/k:c+q*Math.pow(2,1-p),2<=c*k&&(d++,k/=2),d+p>=v?(c=0,d=v):1<=d+p?(c=(c*k-1)*Math.pow(2,f),d+=p):(c=c*Math.pow(2,p-1)*Math.pow(2,f),d=0));for(;8<=f;a[b+h]=c&255,h+=
x,c/=256,f-=8);d=d<<f|c;for(r+=f;0<r;a[b+h]=d&255,h+=x,d/=256,r-=8);a[b+h-x]|=128*u}},{}],67:[function(b,d,f){d.exports=function(a,c){c=c||Array(a.length);for(var b=0;b<a.length;++b)c[a[b]]=b;return c}},{}],68:[function(b,d,f){d.exports=function(a){for(var c=Array(a),b=0;b<a;++b)c[b]=b;return c}},{}],69:[function(b,d,f){function a(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}d.exports=function(c){return null!=c&&(a(c)||"function"===typeof c.readFloatLE&&
"function"===typeof c.slice&&a(c.slice(0,0))||!!c._isBuffer)}},{}],70:[function(b,d,f){var a={}.toString;d.exports=Array.isArray||function(c){return"[object Array]"==a.call(c)}},{}],71:[function(b,d,f){d.exports=function(c,b){function d(a){var c=!1;"altKey"in a&&(c=c||a.altKey!==y.alt,y.alt=!!a.altKey);"shiftKey"in a&&(c=c||a.shiftKey!==y.shift,y.shift=!!a.shiftKey);"ctrlKey"in a&&(c=c||a.ctrlKey!==y.control,y.control=!!a.ctrlKey);"metaKey"in a&&(c=c||a.metaKey!==y.meta,y.meta=!!a.metaKey);return c}
function f(c,h){var k=a.x(h),m=a.y(h);"buttons"in h&&(c=h.buttons|0);if(c!==t||k!==w||m!==C||d(h))t=c|0,w=k||0,C=m||0,b&&b(t,w,C,y)}function h(a){f(0,a)}function k(){if(t||w||C||y.shift||y.alt||y.meta||y.control)t=w=C=0,y.shift=y.alt=y.control=y.meta=!1,b&&b(0,0,0,y)}function r(a){d(a)&&b&&b(t,w,C,y)}function v(c){0===a.buttons(c)?f(0,c):f(t,c)}function p(c){f(t|a.buttons(c),c)}function q(c){f(t&~a.buttons(c),c)}function x(){A||(A=!0,c.addEventListener("mousemove",v),c.addEventListener("mousedown",
p),c.addEventListener("mouseup",q),c.addEventListener("mouseleave",h),c.addEventListener("mouseenter",h),c.addEventListener("mouseout",h),c.addEventListener("mouseover",h),c.addEventListener("blur",k),c.addEventListener("keyup",r),c.addEventListener("keydown",r),c.addEventListener("keypress",r),c!==window&&(window.addEventListener("blur",k),window.addEventListener("keyup",r),window.addEventListener("keydown",r),window.addEventListener("keypress",r)))}function u(){A&&(A=!1,c.removeEventListener("mousemove",
v),c.removeEventListener("mousedown",p),c.removeEventListener("mouseup",q),c.removeEventListener("mouseleave",h),c.removeEventListener("mouseenter",h),c.removeEventListener("mouseout",h),c.removeEventListener("mouseover",h),c.removeEventListener("blur",k),c.removeEventListener("keyup",r),c.removeEventListener("keydown",r),c.removeEventListener("keypress",r),c!==window&&(window.removeEventListener("blur",k),window.removeEventListener("keyup",r),window.removeEventListener("keydown",r),window.removeEventListener("keypress",
r)))}b||(b=c,c=window);var t=0,w=0,C=0,y={shift:!1,alt:!1,control:!1,meta:!1},A=!1;x();var D={element:c};Object.defineProperties(D,{enabled:{get:function(){return A},set:function(a){a?x():u},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return w},enumerable:!0},y:{get:function(){return C},enumerable:!0},mods:{get:function(){return y},enumerable:!0}});return D};var a=b("mouse-event")},{"mouse-event":72}],72:[function(b,d,f){function a(a){return a.target||a.srcElement||
window}f.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};f.element=a;f.x=function(c){if("object"===typeof c){if("offsetX"in c)return c.offsetX;var b=a(c).getBoundingClientRect();return c.clientX-b.left}return 0};f.y=function(c){if("object"===typeof c){if("offsetY"in c)return c.offsetY;var b=
a(c).getBoundingClientRect();return c.clientY-b.top}return 0}},{}],73:[function(b,d,f){var a=b("to-px");d.exports=function(c,b,d){"function"===typeof c&&(d=!!b,b=c,c=window);var f=a("ex",c),h=function(a){d&&a.preventDefault();var c=a.deltaX||0,h=a.deltaY||0,p=a.deltaZ||0,q=1;switch(a.deltaMode){case 1:q=f;break;case 2:q=window.innerHeight}c*=q;h*=q;p*=q;if(c||h||p)return b(c,h,p,a)};c.addEventListener("wheel",h);return h}},{"to-px":81}],74:[function(b,d,f){function a(a,c,b){for(var d=0,e=0;e<a;++e)c&
1<<e&&(d|=1<<b[e]);return d}function c(c,b,d,f,t,w){function C(a,c){H.push("for(","i"+t[a],"=",c,";","i"+t[a],"<","s"+t[a],";","++","i"+t[a],"){")}function y(a){for(var c=0;c<E;++c)H.push("p"+c,"+=","u"+c+"_"+t[a],";");H.push("}")}function A(){for(var a=1;a<1<<B;++a)H.push(v,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",v,";")}function D(a,c){if(0>a){for(var b=0;b<E;++b)w[b]?H.push("c"+b+"_0","=","d"+b,".get(","p"+b,");"):H.push("c"+b+"_0","=","d"+b,"[","p"+b,"];");for(var d=[],b=0;b<E;++b)d.push("c"+
b+"_0");for(b=0;b<f;++b)d.push("x"+b);H.push("b0","=",m,"[",r,"]=phase(",d.join(),");");for(d=1;d<1<<B;++d)H.push("b"+d,"=",m,"[",r,"+","e"+d,"];");b=[];for(d=1;d<1<<B;++d)b.push("(b0!==b"+d+")");H.push("if(",b.join("||"),"){");for(var l=[],b=0;b<B;++b)l.push("i"+b);for(b=0;b<E;++b)for(l.push("c"+b+"_0"),d=1;d<1<<B;++d)w[b]?H.push("c"+b+"_"+d,"=","d"+b,".get(","p"+b,"+","d"+b+"_"+d,");"):H.push("c"+b+"_"+d,"=","d"+b,"[","p"+b,"+","d"+b+"_"+d,"];"),l.push("c"+b+"_"+d);for(b=0;b<1<<B;++b)l.push("b"+
b);for(b=0;b<f;++b)l.push("x"+b);H.push("vertex(",l.join(),");","v0","=",e,"[",r,"]=",h,"++;");b=(1<<B)-1;l="b"+b;for(d=0;d<B;++d)if(0===(c&~(1<<d))){for(var k=b^1<<d,q="b"+k,p=[],v=k;0<v;v=v-1&k)p.push(e+"["+r+"+"+("e"+v)+"]");p.push("v0");for(v=0;v<E;++v)d&1?p.push("c"+v+"_"+b,"c"+v+"_"+k):p.push("c"+v+"_"+k,"c"+v+"_"+b);d&1?p.push(l,q):p.push(q,l);for(v=0;v<f;++v)p.push("x"+v);H.push("if(",l,"!==",q,"){","face(",p.join(),")}")}H.push("}",r,"+=1;")}else{for(d=a-1;0<=d;--d)C(d,0);b=[];for(d=0;d<
E;++d)w[d]?b.push("d"+d+".get("+("p"+d)+")"):b.push("d"+d+"["+("p"+d)+"]");for(d=0;d<f;++d)b.push("x"+d);H.push(m,"[",r,"++]=phase(",b.join(),");");for(d=0;d<a;++d)y(d);for(d=0;d<E;++d)H.push("p"+d,"+=","u"+d+"_"+t[a],";");H.push("if(","s"+t[a],">0){","i"+t[a],"=1;");D(a-1,c|1<<t[a]);for(d=0;d<E;++d)H.push("p"+d,"+=","u"+d+"_"+t[a],";");a===B-1&&(H.push(r,"=0;"),A());C(a,2);D(a-1,c);a===B-1&&(H.push("if(","i"+t[B-1],"&1){",r,"=0;}"),A());y(a);H.push("}")}}var E=w.length,B=t.length;if(2>B)throw Error("ndarray-extract-contour: Dimension must be at least 2");
for(var K="extractContour"+t.join("_"),H=[],N=[],U=[],G=0;G<E;++G)U.push("a"+G);for(G=0;G<f;++G)U.push("x"+G);for(G=0;G<B;++G)N.push("s"+G+"=a0.shape["+G+"]|0");for(G=0;G<E;++G){N.push("d"+G+"="+("a"+G)+".data","o"+G+"="+("a"+G)+".offset|0");for(var I=0;I<B;++I)N.push("t"+G+"_"+I+"="+("a"+G)+".stride["+I+"]|0")}for(G=0;G<E;++G)for(N.push("p"+G+"="+("o"+G)),N.push("c"+G+"_0"),I=1;I<1<<B;++I){for(var L=[],F=0;F<B;++F)I&1<<F&&L.push("-"+("t"+G+"_"+F));N.push("d"+G+"_"+I+"=("+L.join("")+")|0");N.push("c"+
G+"_"+I+"=0")}for(G=0;G<E;++G)for(I=0;I<B;++I)F=["t"+G+"_"+t[I]],0<I&&F.push("t"+G+"_"+t[I-1]+"*"+("s"+t[I-1])),N.push("u"+G+"_"+t[I]+"=("+F.join("-")+")|0");for(G=0;G<B;++G)N.push("i"+G+"=0");N.push(h+"=0");I=["2"];for(G=B-2;0<=G;--G)I.push("s"+t[G]);N.push(k+"=("+I.join("*")+")|0",m+"=mallocUint32("+k+")",e+"=mallocUint32("+k+")",r+"=0");N.push("b0=0");for(I=1;I<1<<B;++I){G=[];L=[];for(F=0;F<B;++F)I&1<<F&&(0===L.length?G.push("1"):G.unshift(L.join("*"))),L.push("s"+t[F]);F="";0>G[0].indexOf("s"+
t[B-2])&&(F="-");L=a(B,I,t);N.push("e"+L+"=(-"+G.join("-")+")|0","y"+L+"=("+F+G.join("-")+")|0","b"+L+"=0")}N.push("v0=0",v+"=0");D(B-1,0);H.push("freeUint32(",e,");freeUint32(",m,");");K=["'use strict';function ",K,"(",U.join(),"){var ",N.join(),";",H.join(""),"}return ",K].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",K))(c,b,d,l.mallocUint32,l.freeUint32)}var l=b("typedarray-pool");d.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);
}"object"!==typeof a&&b("Must specify arguments");var d=a.order;Array.isArray(d)||b("Must specify order");var e=a.arrayArguments||1;1>e&&b("Must have at least one array argument");var f=a.scalarArguments||0;0>f&&b("Scalar arg count must be > 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");"function"!==typeof a.cell&&b("Must specify cell creation function");"function"!==typeof a.phase&&b("Must specify phase function");for(var h=a.getters||[],l=Array(e),k=0;k<e;++k)0<=h.indexOf(k)?
l[k]=!0:l[k]=!1;return c(a.vertex,a.cell,a.phase,f,d,l)};var e="V",m="P",h="N",k="Q",r="X",v="T"},{"typedarray-pool":83}],75:[function(b,d,f){function a(a,c){return a[0]-c[0]}function c(){var c=this.stride,b=Array(c.length),d;for(d=0;d<b.length;++d)b[d]=[Math.abs(c[d]),d];b.sort(a);c=Array(b.length);for(d=0;d<c.length;++d)c[d]=b[d][1];return c}function l(a,b){var d=["View",b,"d",a].join("");0>b&&(d="View_Nil"+a);var e="generic"===a;if(-1===b){var f,d=new Function("function "+d+"(a){this.data=a;};var proto="+
d+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+d+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+d+"(a){return new "+d+"(a);}");return d()}if(0===b)return d=new Function("TrivialArray","function "+d+"(a,d) {this.data = a;this.offset = d};var proto="+d+".prototype;proto.dtype='"+
a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick=function "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+d+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+d+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+
"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),d(r[a][0]);f=["'use strict'"];var h=m(b),l=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),y=h.map(function(a){return"b"+a}).join(","),A=h.map(function(a){return"c"+a}).join(",");f.push("function "+d+"(a,"+y+","+A+",d){this.data=a","this.shape=["+y+"]","this.stride=["+A+"]","this.offset=d|0}","var proto="+d+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);f.push("Object.defineProperty(proto,'size',{get:function "+
d+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>b?(f.push("function "+d+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):
f.push("ORDER})"));f.push("proto.set=function "+d+"_set("+l.join(",")+",v){");e?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}");f.push("proto.get=function "+d+"_get("+l.join(",")+"){");e?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}");f.push("proto.index=function "+d+"_index(",l.join(),"){return "+k+"}");f.push("proto.hi=function "+d+"_hi("+l.join(",")+"){return new "+d+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,
"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");e=h.map(function(a){return"a"+a+"=this.shape["+a+"]"});k=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+d+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+e.join(",")+","+k.join(","));for(e=0;e<b;++e)f.push("if(typeof i"+e+"==='number'&&i"+e+">=0){d=i"+e+"|0;b+=c"+e+"*d;a"+e+"-=d}");f.push("return new "+d+"(this.data,"+h.map(function(a){return"a"+
a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}");f.push("proto.step=function "+d+"_step("+l.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(e=0;e<b;++e)f.push("if(typeof i"+e+"==='number'){d=i"+e+"|0;if(d<0){c+=b"+e+"*(a"+e+"-1);a"+e+"=ceil(-a"+e+"/d)}else{a"+e+"=ceil(a"+e+"/d)}b"+e+"*=d}");f.push("return new "+d+"(this.data,"+h.map(function(a){return"a"+
a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");k=Array(b);y=Array(b);for(e=0;e<b;++e)k[e]="a[i"+e+"]",y[e]="b[i"+e+"]";f.push("proto.transpose=function "+d+"_transpose("+l+"){"+l.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+d+"(this.data,"+k.join(",")+","+y.join(",")+",this.offset)}");f.push("proto.pick=function "+d+"_pick("+l+"){var a=[],b=[],c=this.offset");for(e=0;e<b;++e)f.push("if(typeof i"+e+"==='number'&&i"+
e+">=0){c=(c+this.stride["+e+"]*i"+e+")|0}else{a.push(this.shape["+e+"]);b.push(this.stride["+e+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");f.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");d=new Function("CTOR_LIST","ORDER",f.join("\n"));return d(r[a],c)}function e(a){if(h(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";
case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var m=b("iota-array"),h=b("is-buffer"),k="undefined"!==typeof Float64Array,r={float32:[],float64:[],int8:[],int16:[],
int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in r)r[a].push(l(a,-1))});d.exports=function(a,b,c,d){if(void 0===a){var f=r.array[0];return f([])}"number"===typeof a&&(a=[a]);void 0===b&&(b=[a.length]);f=b.length;if(void 0===c){c=Array(f);for(var h=f-1,k=1;0<=h;--h)c[h]=k,k*=b[h]}if(void 0===d)for(h=d=0;h<f;++h)0>c[h]&&(d-=(b[h]-1)*c[h]);h=e(a);for(k=r[h];k.length<=f+1;)k.push(l(h,k.length-1));f=k[f+1];return f(a,b,c,d)}},{"iota-array":68,
"is-buffer":69}],76:[function(b,d,f){d.exports=function(a,b){b||(b=[0,""]);a=String(a);var d=parseFloat(a,10);b[0]=d;b[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return b}},{}],77:[function(b,d,f){d.exports=function(b){var d=b.length;if(d<a)for(var f=1,h=0;h<d;++h)for(var k=0;k<h;++k)if(b[h]<b[k])f=-f;else{if(b[h]===b[k])return 0}else{for(var r=c.mallocUint8(d),h=0;h<d;++h)r[h]=0;f=1;for(h=0;h<d;++h)if(!r[h]){var v=1;r[h]=1;for(k=b[h];k!==h;k=b[k]){if(r[k])return c.freeUint8(r),0;v+=1;r[k]=1}v&1||(f=
-f)}c.freeUint8(r)}return f};var a=32,c=b("typedarray-pool")},{"typedarray-pool":83}],78:[function(b,d,f){var a=b("typedarray-pool"),c=b("invert-permutation");f.rank=function(b){var d=b.length;switch(d){case 0:case 1:return 0;case 2:return b[1]}var f=a.mallocUint32(d),h=a.mallocUint32(d),k=0,r;c(b,h);for(r=0;r<d;++r)f[r]=b[r];for(r=d-1;0<r;--r)d=h[r],b=f[r],f[r]=f[d],f[d]=b,h[r]=h[b],h[b]=d,k=(k+b)*r;a.freeUint32(h);a.freeUint32(f);return k};f.unrank=function(a,b,c){switch(a){case 0:return c?c:[];
case 1:return c?(c[0]=0,c):[0];case 2:return c?(b?(c[0]=0,c[1]=1):(c[0]=1,c[1]=0),c):b?[0,1]:[1,0]}c=c||Array(a);var d,f,r=1;c[0]=0;for(f=1;f<a;++f)c[f]=f,r=r*f|0;for(f=a-1;0<f;--f)a=b/r|0,b=b-a*r|0,r=r/f|0,d=c[f]|0,c[f]=c[a]|0,c[a]=d|0;return c}},{"invert-permutation":67,"typedarray-pool":83}],79:[function(b,d,f){function a(a){throw Error("resl: "+a);}function c(b,c,d){Object.keys(b).forEach(function(b){0>c.indexOf(b)&&a('invalid parameter "'+b+'" in '+d)})}function l(a,b){this.state=0;this.ready=
!1;this.progress=0;this.name=a;this.cancel=b}var e=["manifest","onDone","onProgress","onError"],m=["type","src","stream","credentials","parser"],h=["onData","onDone"];d.exports=function(b){function d(c,e){if(c in b){var f=b[c];"function"!==typeof f&&a('invalid callback "'+c+'"');return f}return null}function f(a){function b(){if(!(2>k.readyState||1===p.state||-1===p.state)){if(200!==k.status)return q('error loading resource "'+a.name+'"');if(2<k.readyState&&0===p.state){var d;d="binary"===a.type?
k.response:k.responseText;if(h.data)try{m=h.data(d)}catch(e){return q(e)}else m=d}if(3<k.readyState&&0===p.state){if(h.done)try{m=h.done()}catch(e){return q(e)}p.state=1}y[c]=m;p.progress=.75*p.progress+.25;p.ready=a.stream&&!!m||1===p.state;x()}}var c=a.name,d=a.stream,e="binary"===a.type,h=a.parser,k=new XMLHttpRequest,m=null,p=new l(c,function(){1!==p.state&&-1!==p.state&&(k.onreadystatechange=null,k.abort(),p.state=-1)});k.onreadystatechange=d?b:function(){4===k.readyState&&b()};e&&(k.responseType=
"arraybuffer");a.credentials&&(k.withCredentials=!0);k.open("GET",a.src,!0);k.send();return p}function p(a,b){function c(){if(0===p.state)if(m.data)try{r=m.data(b)}catch(a){return q(a)}else r=b}function d(b){c();y[k]=r;p.progress=b.lengthComputable?Math.max(p.progress,b.loaded/b.total):.75*p.progress+.25;p.ready=a.stream;x(k)}function e(){c();if(0===p.state){if(m.done)try{r=m.done()}catch(a){return q(a)}p.state=1}p.progress=1;p.ready=!0;y[k]=r;h();x("finish "+k)}function f(){q('error loading asset "'+
k+'"')}function h(){a.stream&&b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",e):b.addEventListener("canplay",e);b.removeEventListener("error",f)}var k=a.name,m=a.parser,p=new l(k,function(){1!==p.state&&-1!==p.state&&(p.state=-1,h(),b.src="")}),r=b;a.stream&&b.addEventListener("progress",d);if("image"===a.type)b.addEventListener("load",e);else{var v=!1,g=!1;b.addEventListener("loadedmetadata",function(){g=!0;v&&e()});b.addEventListener("canplay",function(){v=!0;g&&
e()})}b.addEventListener("error",f);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return p}function q(a){-1!==A&&1!==A&&(A=-1,E.forEach(function(a){a.cancel()}),C?"string"===typeof a?C(Error("resl: "+a)):C(a):console.error("resl error:",a))}function x(a){if(-1!==A&&1!==A){var b=0,c=0;E.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===E.length?(A=1,t(y)):w&&w(b/E.length,a)}}"object"===typeof b&&b||a("invalid or missing configuration");c(b,e,"config");var u=b.manifest;
"object"===typeof u&&u||a("missing manifest");var t=d("onDone");t||a("missing onDone() callback");var w=d("onProgress"),C=d("onError"),y={},A=0,D={text:f,binary:function(a){return f(a)},image:function(a){return p(a,document.createElement("img"))},video:function(a){return p(a,document.createElement("video"))},audio:function(a){return p(a,document.createElement("audio"))}},E=Object.keys(u).map(function(b){function d(b,c){if(b in e.parser){var f=e.parser[b];"function"!==typeof f&&a("invalid parser callback "+
b+' for asset "'+b+'"');return f}return c}var e=u[b];"string"===typeof e?e={src:e}:"object"===typeof e&&e||a('invalid asset definition "'+b+'"');c(e,m,'asset "'+b+'"');var f={};"parser"in e&&("function"===typeof e.parser?f={data:e.parser}:"object"===typeof e.parser&&e.parser?(c(f,h,'parser for asset "'+b+'"'),"onData"in f||a('missing onData callback for parser in asset "'+b+'"'),f={data:d("onData"),done:d("onDone")}):a('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,d,f){c in e&&
(f=e[c]);0>d.indexOf(f)&&a("invalid "+c+' "'+f+'" for asset "'+b+'", possible values: '+d);return f}("type",Object.keys(D),"text"),stream:!!e.stream,credentials:!!e.credentials,src:function(c,d,f){c in e?f=e[c]:d&&a("missing "+c+' for asset "'+b+'"');"string"!==typeof f&&a("invalid "+c+' for asset "'+b+'", must be a string');return f}("src",!0,""),parser:f}}).map(function(a){return D[a.type](a)})}},{}],80:[function(b,d,f){function a(a,b){var d=a.length,e=["'use strict';"],f="surfaceNets"+a.join("_")+
"d"+b;e.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===b&&e.push("getters:[0],");for(var m=[],x=[],u=0;u<d;++u)m.push("d"+u),x.push("d"+u);for(u=0;u<1<<d;++u)m.push("v"+u),x.push("v"+u);for(u=0;u<1<<d;++u)m.push("p"+u),x.push("p"+u);m.push("a","b","c");x.push("a","c");e.push("vertex:function vertexFunc(",m.join(),"){");m=[];for(u=0;u<1<<d;++u)m.push("(p"+u+"<<"+u+")");e.push("var m=(",m.join("+"),
")|0;if(m===0||m===",(1<<(1<<d))-1,"){return}");var m=[],t=[];128>=1<<(1<<d)?(e.push("switch(m){"),t=e):e.push("switch(m>>>7){");for(u=0;u<1<<(1<<d);++u){128<1<<(1<<d)&&0===u%128&&(0<m.length&&t.push("}}"),t="vExtra"+m.length,e.push("case ",u>>>7,":",t,"(m&0x7f,",x.join(),");break;"),t=["function ",t,"(m,",x.join(),"){switch(m){"],m.push(t));t.push("case ",u&127,":");for(var w=Array(d),C=Array(d),y=Array(d),A=Array(d),D=0,E=0;E<d;++E)w[E]=[],C[E]=[],y[E]=0,A[E]=0;for(E=0;E<1<<d;++E)for(var B=0;B<
d;++B){var K=E^1<<B;if(!(K>E)&&!(u&1<<K)!==!(u&1<<E)){var H=1;u&1<<K?C[B].push("v"+K+"-v"+E):(C[B].push("v"+E+"-v"+K),H=-H);0>H?(w[B].push("-v"+E+"-v"+K),y[B]+=2):(w[B].push("v"+E+"+v"+K),y[B]-=2);D+=1;for(H=0;H<d;++H)H!==B&&(K&1<<H?A[H]+=1:--A[H])}}E=[];for(B=0;B<d;++B)0===w[B].length?E.push("d"+B+"-0.5"):(K="",0>y[B]?K=y[B]+"*c":0<y[B]&&(K="+"+y[B]+"*c"),E.push("d"+B+"-"+(.5+A[B]/D*.5)+"-"+w[B].length/D*.5+"*("+w[B].join("+")+K+")/("+C[B].join("+")+")"));t.push("a.push([",E.join(),"]);","break;")}e.push("}},");
0<m.length&&t.push("}}");x=[];for(u=0;u<1<<d-1;++u)x.push("v"+u);x.push("c0","c1","p0","p1","a","b","c");e.push("cell:function cellFunc(",x.join(),"){");d=l(d-1);e.push("if(p0){b.push(",d.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",d.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",f,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
f,";");for(u=0;u<m.length;++u)e.push(m[u].join(""));return(new Function("genContour",e.join("")))(c)}d.exports=function(b,c){if(0>=b.dimension)return{positions:[],cells:[]};if(1===b.dimension){for(var d=e(b,c),f=d.length,l=Array(f),q=Array(f),x=0;x<f;++x)l[x]=[d[x]],q[x]=[x];return{positions:l,cells:q}}d=b.order.join()+"-"+b.dtype;f=m[d];c=+c||0;f||(f=m[d]=a(b.order,b.dtype));return f(b,c)};var c=b("ndarray-extract-contour"),l=b("triangulate-hypercube"),e=b("zero-crossings"),m={}},{"ndarray-extract-contour":74,
"triangulate-hypercube":82,"zero-crossings":86}],81:[function(b,d,f){function a(a,b){var d=l(getComputedStyle(a).getPropertyValue(b));return d[0]*c(d[1],a)}function c(b,c){c=c||document.body;b=(b||"px").trim().toLowerCase();if(c===window||c===document)c=document.body;switch(b){case "%":return c.clientHeight/100;case "ch":case "ex":var d=b,f=c,l=document.createElement("div");l.style["font-size"]="128"+d;f.appendChild(l);d=a(l,"font-size")/128;f.removeChild(l);return d;case "em":return a(c,"font-size");
case "rem":return a(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return e;case "cm":return e/2.54;case "mm":return e/25.4;case "pt":return e/72;case "pc":return e/6}return 1}var l=b("parse-unit");d.exports=c;var e=96},{"parse-unit":76}],82:[function(b,d,f){d.exports=function(b){if(0>b)return[];
if(0===b)return[[0]];for(var d=Math.round(l(b+1))|0,f=[],k=0;k<d;++k){for(var r=a.unrank(b,k),v=[0],p=0,q=0;q<r.length;++q)p+=1<<r[q],v.push(p);1>c(r)&&(v[0]=p,v[b]=0);f.push(v)}return f};var a=b("permutation-rank"),c=b("permutation-parity"),l=b("gamma")},{gamma:43,"permutation-parity":77,"permutation-rank":78}],83:[function(b,d,f){(function(a,c){function d(a){if(a){var b=C.log2(a.length||a.byteLength);E[b].push(a)}}function e(a){a=C.nextPow2(a);var b=C.log2(a),b=E[b];return 0<b.length?b.pop():new ArrayBuffer(a)}
function m(a){return new Uint8Array(e(a),0,a)}function h(a){return new Uint16Array(e(2*a),0,a)}function k(a){return new Uint32Array(e(4*a),0,a)}function r(a){return new Int8Array(e(a),0,a)}function v(a){return new Int16Array(e(2*a),0,a)}function p(a){return new Int32Array(e(4*a),0,a)}function q(a){return new Float32Array(e(4*a),0,a)}function x(a){return new Float64Array(e(8*a),0,a)}function u(a){return A?new Uint8ClampedArray(e(a),0,a):m(a)}function t(a){return new DataView(e(a),0,a)}function w(a){a=
C.nextPow2(a);var b=C.log2(a),b=B[b];return 0<b.length?b.pop():new c(a)}var C=b("bit-twiddle"),y=b("dup");a.__TYPEDARRAY_POOL||(a.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),BUFFER:y([32,0])});var A="undefined"!==typeof Uint8ClampedArray,D=a.__TYPEDARRAY_POOL;D.UINT8C||(D.UINT8C=y([32,0]));D.BUFFER||(D.BUFFER=y([32,0]));var E=D.DATA,B=D.BUFFER;f.free=function(a){if(c.isBuffer(a))B[C.log2(a.length)].push(a);
else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=C.log2(a.length||a.byteLength)|0;E[b].push(a)}};f.freeUint8=f.freeUint16=f.freeUint32=f.freeInt8=f.freeInt16=f.freeInt32=f.freeFloat32=f.freeFloat=f.freeFloat64=f.freeDouble=f.freeUint8Clamped=f.freeDataView=function(a){d(a.buffer)};f.freeArrayBuffer=d;f.freeBuffer=function(a){B[C.log2(a.length)].push(a)};f.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return e(a);switch(b){case "uint8":return m(a);case "uint16":return h(a);
case "uint32":return k(a);case "int8":return r(a);case "int16":return v(a);case "int32":return p(a);case "float":case "float32":return q(a);case "double":case "float64":return x(a);case "uint8_clamped":return u(a);case "buffer":return w(a);case "data":case "dataview":return t(a);default:return null}};f.mallocArrayBuffer=e;f.mallocUint8=m;f.mallocUint16=h;f.mallocUint32=k;f.mallocInt8=r;f.mallocInt16=v;f.mallocInt32=p;f.mallocFloat32=f.mallocFloat=q;f.mallocFloat64=f.mallocDouble=x;f.mallocUint8Clamped=
u;f.mallocDataView=t;f.mallocBuffer=w;f.clearCache=function(){for(var a=0;32>a;++a)D.UINT8[a].length=0,D.UINT16[a].length=0,D.UINT32[a].length=0,D.INT8[a].length=0,D.INT16[a].length=0,D.INT32[a].length=0,D.FLOAT[a].length=0,D.DOUBLE[a].length=0,D.UINT8C[a].length=0,E[a].length=0,B[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":37,buffer:38,dup:42}],84:[function(b,d,f){d.exports=function(a,
b,d){if(0===a.length)return a;if(b){d||a.sort(b);d=1;for(var e=a.length,f=a[0],h=a[0],k=1;k<e;++k)h=f,f=a[k],b(f,h)&&(k===d?d++:a[d++]=f);a.length=d;return a}d||a.sort();b=1;d=a.length;e=a[0];f=a[0];for(h=1;h<d;++h)f=e,e=a[h],e!==f&&(h===b?b++:a[b++]=e);a.length=b;return a}},{}],85:[function(b,d,f){d.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":39}],86:[function(b,d,f){d.exports=function(b,d){var e=[];d=+d||0;a(b.hi(b.shape[0]-1),e,d);return e};var a=b("./lib/zc-core")},
{"./lib/zc-core":85}],87:[function(b,d,f){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var c=b("./lib/util/extend"),l=b("./lib/dynamic"),e=b("./lib/util/raf"),m=b("./lib/util/clock"),h=b("./lib/strings"),k=b("./lib/webgl"),r=b("./lib/extension"),v=b("./lib/limits"),p=b("./lib/buffer"),q=b("./lib/elements"),x=b("./lib/texture"),u=b("./lib/renderbuffer"),t=b("./lib/framebuffer"),w=b("./lib/attribute"),C=b("./lib/shader"),y=b("./lib/read"),A=b("./lib/core"),D=b("./lib/stats"),
E=b("./lib/timer");d.exports=function(b){function d(){if(0===O.length)M&&M.update(),R=null;else{R=e.next(d);V();for(var a=O.length-1;0<=a;--a){var b=O[a];b&&b(S,null,0)}g.flush();M&&M.update()}}function f(){!R&&0<O.length&&(R=e.next(d))}function N(){R&&(e.cancel(d),R=null)}function U(a){a.preventDefault();N();la.forEach(function(a){a()})}function G(a){g.getError();z.restore();na.restore();ha.restore();ba.restore();ga.restore();ia.restore();M&&M.restore();ca.procs.refresh();f();T.forEach(function(a){a()})}
function I(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=a[b];l.isDynamic(e)?d[b]=l.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function d(a){for(;p.length<a;)p.push(null);return p}var e=b(a.context||{}),f=b(a.uniforms||{}),g=b(a.attributes||{}),h=b(function(a){function b(a){if(a in d){var c=d[a];delete d[a];Object.keys(c).forEach(function(b){d[a+"."+b]=c[b]})}}var d=c({},a);delete d.uniforms;delete d.attributes;delete d.context;"stencil"in d&&d.stencil.op&&(d.stencil.opBack=
d.stencil.opFront=d.stencil.op,delete d.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return d}(a));a={gpuTime:0,cpuTime:0,count:0};var e=ca.compile(h,g,f,e,a),k=e.draw,m=e.batch,n=e.scope,p=[];return c(function(a,b){var c;if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)n.call(this,null,b,c);else if(Array.isArray(a))for(c=0;c<a.length;++c)n.call(this,a[c],b,c);else return n.call(this,
a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return k.call(this,a)},{stats:a})}function L(b){O.push(b);f();return{cancel:function(){function c(){var b=a(O,c);O[b]=O[O.length-1];--O.length;0>=O.length&&N()}var d=a(O,b);O[d]=c}}}function F(){var a=W.viewport,b=W.scissor_box;a[0]=a[1]=b[0]=b[1]=0;S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=a[2]=b[2]=g.drawingBufferWidth;S.viewportHeight=
S.framebufferHeight=S.drawingBufferHeight=a[3]=b[3]=g.drawingBufferHeight}function V(){S.tick+=1;S.time=Y();F();ca.procs.poll()}function da(){F();ca.procs.refresh();M&&M.update()}function Y(){return(m()-Z)/1E3}b=k(b);if(!b)return null;var g=b.gl,n=g.getContextAttributes();g.isContextLost();var z=r(g,b);if(!z)return null;var J=h(),P=D(),Q=z.extensions,M=E(g,Q),Z=m(),ja=g.drawingBufferWidth,sa=g.drawingBufferHeight,S={tick:0,time:0,viewportWidth:ja,viewportHeight:sa,framebufferWidth:ja,framebufferHeight:sa,
drawingBufferWidth:ja,drawingBufferHeight:sa,pixelRatio:b.pixelRatio},fa=v(g,Q),ha=p(g,P,b),ma=q(g,Q,ha,P),ja=w(g,Q,fa,ha,J),na=C(g,J,P,b),ba=x(g,Q,fa,function(){ca.procs.poll()},S,P,b),ga=u(g,Q,fa,P,b),ia=t(g,Q,fa,ba,ga,P),ca=A(g,J,Q,fa,ha,ma,ba,ia,{},ja,na,{elements:null,primitive:4,count:-1,offset:0,instances:-1},S,M,b),J=y(g,ia,ca.procs.poll,S,n,Q),W=ca.next,ea=g.canvas,O=[],la=[],T=[],X=[b.onDestroy],R=null;ea&&(ea.addEventListener("webglcontextlost",U,!1),ea.addEventListener("webglcontextrestored",
G,!1));da();n=c(I,{clear:function(a){var b=0;ca.procs.poll();var c=a.color;c&&(g.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(g.clearDepth(+a.depth),b|=256);"stencil"in a&&(g.clearStencil(a.stencil|0),b|=1024);g.clear(b)},prop:l.define.bind(null,1),context:l.define.bind(null,2),"this":l.define.bind(null,3),draw:I({}),buffer:function(a){return ha.create(a,34962,!1,!1)},elements:function(a){return ma.create(a,!1)},texture:ba.create2D,cube:ba.createCube,renderbuffer:ga.create,
framebuffer:ia.create,framebufferCube:ia.createCube,attributes:n,frame:L,on:function(a,b){var c;switch(a){case "frame":return L(b);case "lost":c=la;break;case "restore":c=T;break;case "destroy":c=X}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:fa,hasExtension:function(a){return 0<=fa.extensions.indexOf(a.toLowerCase())},read:J,destroy:function(){O.length=0;N();ea&&(ea.removeEventListener("webglcontextlost",U),ea.removeEventListener("webglcontextrestored",
G));na.clear();ia.clear();ga.clear();ba.clear();ma.clear();ha.clear();M&&M.clear();X.forEach(function(a){a()})},_gl:g,_refresh:da,poll:function(){V();M&&M.update()},now:Y,stats:P});b.onDone(null,n);return n}},{"./lib/attribute":3,"./lib/buffer":4,"./lib/core":9,"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/stats":18,"./lib/strings":19,"./lib/texture":20,"./lib/timer":21,"./lib/util/clock":22,
"./lib/util/extend":24,"./lib/util/raf":31,"./lib/webgl":34}]},{},[1]);

        </script>
        </body>
      </html>