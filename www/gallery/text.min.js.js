var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var h=0;return{next:function(){return h==a.length?{done:!0}:{done:!1,value:a[h++]}}}};
$jscomp.arrayFromIterator=function(a){for(var h,n=[];!(h=a.next()).done;)n.push(h.value);return n};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,h){function n(){}n.prototype=h.prototype;a.prototype=new n;a.prototype.constructor=a;for(var t in h)if($jscomp.global.Object.defineProperties){var p=$jscomp.global.Object.getOwnPropertyDescriptor(h,t);p&&$jscomp.global.Object.defineProperty(a,t,p)}else a[t]=h[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,h){a instanceof String&&(a=String(a));var n=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},p=(t.next=function(){if(n<a.length){var f=n++;return{value:h(f,a[f]),done:!1}}p.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return p},t);return p};
$jscomp.array.findInternal_=function(a,h,n){a instanceof String&&(a=String(a));for(var t=a.length,p=0;p<t;p++){var f=a[p];if(h.call(n,f,p,a))return{i:p,v:f}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,h,n){h=void 0===h?function(d){return d}:h;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var p;!(p=a.next()).done;)t.push(h.call(n,p.value))}else{p=a.length;for(var f=0;f<p;f++)t.push(h.call(n,a[f]))}return t};$jscomp.array.of=function(a){for(var h=[],n=0;n<arguments.length;++n)h[n-0]=arguments[n];return $jscomp.array.from(h)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,h){return[a,h]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,h){return h})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,h,n){var t=this.length;a=Number(a);h=Number(h);n=Number(null!=n?n:t);if(a<h)for(n=Math.min(n,t);h<n;)h in this?this[a++]=this[h++]:(delete this[a++],h++);else for(n=Math.min(n,t+h-a),a+=n-h;n>h;)--n in this?this[--a]=this[n]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,h,n){null!=n&&a.length||(n=this.length||0);n=Number(n);for(h=Number((void 0===h?0:h)||0);h<n;h++)this[h]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,h){return $jscomp.array.findInternal_(this,a,h).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,h){return $jscomp.array.findInternal_(this,a,h).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())h=h.value,this.set(h[0],h[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var h=Object.seal({x:4}),n=new a($jscomp.makeIterator([[h,"s"]]));if("s"!=n.get(h)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var t=n.entries(),p=t.next();if(p.done||p.value[0]!=h||"s"!=p.value[1])return!1;p=t.next();return p.done||4!=p.value[0].x||"t"!=p.value[1]||!t.next().done?!1:!0}catch(f){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,h){var n=this.maybeGetEntry_(a),t=n.id,p=n.list,n=n.entry;p||(p=this.data_[t]=[]);n?n.value=h:(n={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:h},p.push(n),this.head_.previous.next=n,this.head_.previous=n,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var h=this.maybeGetEntry_(a);a=h.id;var n=h.list,t=h.index;return(h=h.entry)&&n?(n.splice(t,1),n.length||delete this.data_[a],h.previous.next=h.next,h.next.previous=h.previous,h.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var h=$jscomp.Map.getId_(a),n=this.data_[h];if(n)for(var t=0;t<n.length;t++){var p=n[t];if(a!==a&&p.key!==p.key||a===p.key)return{id:h,list:n,index:t,entry:p}}return{id:h,list:n,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,h){for(var n=$jscomp.makeIterator(this.entries()),t=n.next();!t.done;t=n.next())t=t.value,a.call(h,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(a){var h=this,n=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(n){for(;n.head!=h.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:a(n)};n=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,h,n){Object.defineProperty(a,h,{value:String(n)})}:function(a,h,n){a[h]=String(n)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var h=0;0===(a&4294901760)&&(a<<=16,h+=16);0===(a&4278190080)&&(a<<=8,h+=8);0===(a&4026531840)&&(a<<=4,h+=4);0===(a&3221225472)&&(a<<=2,h+=2);0===(a&2147483648)&&h++;return h};$jscomp.math.imul=function(a,h){a=Number(a);h=Number(h);var n=a&65535,t=h&65535;return n*t+((a>>>16&65535)*t+n*(h>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var h=a,n=1,t=a,p=0,f=1;p!=t;)h*=a,f*=-1,t=(p=t)+f*h/++n;return t}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var h=a,n=1,t=a,p=0;p!=t;)h*=a/++n,t=(p=t)+h;return t}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var h=Math.exp(2*-Math.abs(a)),h=(1-h)/(1+h);return 0>a?-h:h};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var h=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-h:h};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,h,n){for(var t=[],p=2;p<arguments.length;++p)t[p-2]=arguments[p];a=Number(a);h=Number(h);for(var f=Math.max(Math.abs(a),Math.abs(h)),d=$jscomp.makeIterator(t),p=d.next();!p.done;p=d.next())f=Math.max(f,Math.abs(p.value));if(1E100<f||1E-100>f){a/=f;h/=f;d=a*a+h*h;t=$jscomp.makeIterator(t);for(p=t.next();!p.done;p=t.next())p=p.value,p=Number(p)/f,d+=p*p;return Math.sqrt(d)*f}f=a*a+h*h;t=$jscomp.makeIterator(t);for(p=t.next();!p.done;p=t.next())p=p.value,p=Number(p),f+=
p*p;return Math.sqrt(f)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var h=Math.floor(Math.abs(a));return 0>a?-h:h};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var h=Math.pow(Math.abs(a),1/3);return 0>a?-h:h};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,h){for(var n=[],t=1;t<arguments.length;++t)n[t-1]=arguments[t];n=$jscomp.makeIterator(n);for(t=n.next();!t.done;t=n.next())if(t=t.value)for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&(a[p]=t[p]);return a};$jscomp.object.is=function(a,h){return a===h?0!==a||1/a===1/h:a!==a&&h!==h};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())this.add(h.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var h=Object.seal({x:4}),a=new a($jscomp.makeIterator([h]));if(a.has(h)||1!=a.size||a.add(h)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),n=a.next();if(n.done||n.value[0]!=h||n.value[1]!=h)return!1;n=a.next();return n.done||n.value[0]==h||4!=n.value[0].x||n.value[1]!=n.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,h){var n=this;this.map_.forEach(function(t){return a.call(h,t,t,n)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,h){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var h=[],n=0;n<arguments.length;++n)h[n-0]=arguments[n];for(var n="",h=$jscomp.makeIterator(h),t=h.next();!t.done;t=h.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?n+=String.fromCharCode(t):(t-=65536,n+=String.fromCharCode(t>>>10&1023|55296),n+=String.fromCharCode(t&1023|56320))}return n};
$jscomp.string.repeat=function(a){var h=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var n="";a;)if(a&1&&(n+=h),a>>>=1)h+=h;return n};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var h=this.toString(),n=h.length;a=Number(a)||0;if(0<=a&&a<n){a|=0;var t=h.charCodeAt(a);if(55296>t||56319<t||a+1===n)return t;a=h.charCodeAt(a+1);return 56320>a||57343<a?t:1024*(t-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,h)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(a,"startsWith");var n=this.toString();a+="";for(var t=n.length,p=a.length,f=Math.max(0,Math.min(h|0,n.length)),d=0;d<p&&f<t;)if(n[f++]!=a[d++])return!1;return d>=p};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,h){$jscomp.string.noRegExp_(a,"endsWith");var n=this.toString();a+="";void 0===h&&(h=n.length);for(var t=Math.max(0,Math.min(h|0,n.length)),p=a.length;0<p&&0<t;)if(n[--t]!=a[--p])return!1;return 0>=p};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(h,n,t){function p(d,k){if(!n[d]){if(!h[d]){var y="function"==typeof require&&require;if(!k&&y)return y(d,!0);if(f)return f(d,!0);y=Error("Cannot find module '"+d+"'");throw y.code="MODULE_NOT_FOUND",y;}y=n[d]={exports:{}};h[d][0].call(y.exports,function(f){var k=h[d][1][f];return p(k?k:f)},y,y.exports,e$$0,h,n,t)}return n[d].exports}for(var f="function"==typeof require&&require,d=0;d<t.length;d++)p(t[d]);return p})({1:[function(a,h,n){h=a("../regl")();n=a("vectorize-text");var t=a("gl-mat4/perspective"),
p=a("gl-mat4/lookAt");a=n("hello regl!",{textAlign:"center",textBaseline:"middle"});var f=h.texture({copy:!0,min:"linear",mag:"linear"}),d=h({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:f,t:function(d){return.001*d.tick}},depth:{enable:!1},count:3}),g=h({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(d){return.01*d.tick},view:function(d){d=.01*d.tick;return p([],[5*Math.sin(d),0,-5*Math.cos(d)],[0,0,0],[0,-1,0])},projection:function(d){return t([],Math.PI/4,d.viewportWidth/d.viewportHeight,.01,1E3)}},depth:{enable:!1}});h.frame(function(){d();g();f({copy:!0,min:"linear",mag:"linear"})})},{"../regl":129,"gl-mat4/lookAt":81,"gl-mat4/perspective":82,"vectorize-text":125}],2:[function(a,h,n){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}h.exports=function(a,f,d,g,k){a=d.maxAttributes;f=Array(a);for(d=0;d<a;++d)f[d]=new t;return{Record:t,scope:{},state:f}}},{}],3:[function(a,h,n){function t(c){return u[Object.prototype.toString.call(c)]|0}function p(c,d){for(var e=0;e<d.length;++e)c[e]=d[e]}function f(c,d,e,f,g,b,l){for(var k=0,a=0;a<e;++a)for(var q=0;q<f;++q)c[k++]=d[g*a+b*q+l]}var d=a("./util/is-typed-array"),g=a("./util/is-ndarray"),k=a("./util/values"),
y=a("./util/pool");n=a("./util/flatten");var v=n.flatten,w=n.shape,u=a("./constants/arraytypes.json"),q=a("./constants/dtypes.json"),l=a("./constants/usage.json"),e=[];e[5120]=1;e[5122]=2;e[5124]=4;e[5121]=1;e[5123]=2;e[5125]=4;e[5126]=4;h.exports=function(c,m,r){function a(b){this.id=F++;this.buffer=c.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;r.profile&&(this.stats={size:0})}function u(b,d,e){b.byteLength=d.byteLength;
c.bufferData(b.type,d,e)}function b(b,c,e,l,m,k){b.usage=e;if(Array.isArray(c)){if(b.dtype=l||5126,0<c.length)if(Array.isArray(c[0])){m=w(c);for(var a=l=1;a<m.length;++a)l*=m[a];b.dimension=l;c=v(c,m,b.dtype);u(b,c,e);k?b.persistentData=c:y.freeType(c)}else"number"===typeof c[0]?(b.dimension=m,m=y.allocType(b.dtype,c.length),p(m,c),u(b,m,e),k?b.persistentData=m:y.freeType(m)):d(c[0])&&(b.dimension=c[0].length,b.dtype=l||t(c[0])||5126,c=v(c,[c.length,c[0].length],b.dtype),u(b,c,e),k?b.persistentData=
c:y.freeType(c))}else if(d(c))b.dtype=l||t(c),b.dimension=m,u(b,c,e),k&&(b.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(g(c)){m=c.shape;var r=c.stride,a=c.offset,x=0,A=0,q=0,z=0;1===m.length?(x=m[0],A=1,q=r[0],z=0):2===m.length&&(x=m[0],A=m[1],q=r[0],z=r[1]);b.dtype=l||t(c.data)||5126;b.dimension=A;m=y.allocType(b.dtype,x*A);f(m,c.data,x,A,q,z,a);u(b,m,e);k?b.persistentData=m:y.freeType(m)}}function x(b){m.bufferCount--;c.deleteBuffer(b.buffer);b.buffer=null;delete G[b.id]}var F=
0,G={};a.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)};a.prototype.destroy=function(){x(this)};var C=[];r.profile&&(m.getTotalBufferSize=function(){var b=0;Object.keys(G).forEach(function(c){b+=G[c].stats.size});return b});return{create:function(k,u,F,C){function D(f){var m=35044,k=null,a=0,x=0,p=1;Array.isArray(f)||d(f)||g(f)?k=f:"number"===typeof f?a=f|0:f&&("data"in f&&(k=f.data),"usage"in f&&(m=l[f.usage]),"type"in f&&(x=q[f.type]),"dimension"in f&&(p=f.dimension|0),"length"in
f&&(a=f.length|0));h.bind();k?b(h,k,m,x,p,C):(c.bufferData(h.type,a,m),h.dtype=x||5121,h.usage=m,h.dimension=p,h.byteLength=a);r.profile&&(h.stats.size=h.byteLength*e[h.dtype]);return D}m.bufferCount++;var h=new a(u);G[h.id]=h;F||D(k);D._reglType="buffer";D._buffer=h;D.subdata=function(b,e){var m=(e||0)|0,l;h.bind();if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var k=y.allocType(h.dtype,b.length);p(k,b);c.bufferSubData(h.type,m,k);y.freeType(k)}else if(Array.isArray(b[0])||d(b[0]))l=
w(b),k=v(b,l,h.dtype),c.bufferSubData(h.type,m,k),y.freeType(k)}else if(d(b))c.bufferSubData(h.type,m,b);else if(g(b)){l=b.shape;var a=b.stride,r=k=0,x=0,q=0;1===l.length?(k=l[0],r=1,x=a[0],q=0):2===l.length&&(k=l[0],r=l[1],x=a[0],q=a[1]);l=Array.isArray(b.data)?h.dtype:t(b.data);l=y.allocType(l,k*r);f(l,b.data,k,r,x,q,b.offset);c.bufferSubData(h.type,m,l);y.freeType(l)}return D};r.profile&&(D.stats=h.stats);D.destroy=function(){x(h)};return D},createStream:function(c,e){var d=C.pop();d||(d=new a(c));
d.bind();b(d,e,35040,0,1,!1);return d},destroyStream:function(b){C.push(b)},clear:function(){k(G).forEach(x);C.forEach(x)},getBuffer:function(b){return b&&b._buffer instanceof a?b._buffer:null},restore:function(){k(G).forEach(function(b){b.buffer=c.createBuffer();c.bindBuffer(b.type,b.buffer);c.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:b}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/flatten":24,"./util/is-ndarray":26,
"./util/is-typed-array":27,"./util/pool":29,"./util/values":32}],4:[function(a,h,n){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(a,h,n){h.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},
{}],6:[function(a,h,n){h.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(a,h,n){h.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(a,h,n){function t(b){return Array.isArray(b)||w(b)||u(b)}function p(b){return b.sort(function(b,c){return"viewport"===b?-1:"viewport"===c?1:b<c?-1:1})}function f(b,c,e,d){this.thisDep=b;this.contextDep=c;this.propDep=e;this.append=d}function d(b){return b&&
!(b.thisDep||b.contextDep||b.propDep)}function g(b){return new f(!1,!1,!1,b)}function k(b,c){var e=b.type;return 0===e?(e=b.data.length,new f(!0,1<=e,2<=e,c)):4===e?(e=b.data,new f(e.thisDep,e.contextDep,e.propDep,c)):new f(3===e,2===e,1===e,c)}var y=a("./util/codegen"),v=a("./util/loop"),w=a("./util/is-typed-array"),u=a("./util/is-ndarray"),q=a("./util/is-array-like"),l=a("./dynamic"),e=a("./constants/primitives.json"),c=a("./constants/dtypes.json"),m=["x","y","z","w"],r="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),
z={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},D={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},
b={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},x={cw:2304,ccw:2305},F=new f(!1,!1,!1,function(){});h.exports=function(a,u,w,h,n,E,O,J,I,Q,L,A,K,P,U){function Y(b){return b.replace(".","_")}function V(b,c,e){var d=Y(b);Da.push(b);ya[d]=qa[d]=!!e;ra[d]=c}function M(b,c,e){var d=Y(b);Da.push(b);Array.isArray(e)?(qa[d]=e.slice(),ya[d]=e.slice()):qa[d]=ya[d]=e;sa[d]=c}function W(){var b=y(),c=b.link,e=b.global;b.id=Ia++;b.batchId=
"0";var d=c(Ha),f=b.shared={props:"a0"};Object.keys(Ha).forEach(function(b){f[b]=e.def(d,".",b)});var m=b.next={},l=b.current={};Object.keys(sa).forEach(function(b){Array.isArray(qa[b])&&(m[b]=e.def(f.next,".",b),l[b]=e.def(f.current,".",b))});var g=b.constants={};Object.keys(Ea).forEach(function(b){g[b]=e.def(JSON.stringify(Ea[b]))});b.invoke=function(e,d){switch(d.type){case 0:var m=["this",f.context,f.props,b.batchId];return e.def(c(d.data),".call(",m.slice(0,Math.max(d.data.length+1,4)),")");
case 1:return e.def(f.props,d.data);case 2:return e.def(f.context,d.data);case 3:return e.def("this",d.data);case 4:return d.data.append(b,e),d.data.ref}};b.attribCache={};var k={};b.scopeAttrib=function(b){b=u.id(b);if(b in k)return k[b];var e=Q.scope[b];e||(e=Q.scope[b]=new ta);return k[b]=c(e)};return b}function T(b){var c=b["static"];b=b.dynamic;var e;if("profile"in c){var d=!!c.profile;e=g(function(b,c){return d});e.enable=d}else if("profile"in b){var f=b.profile;e=k(f,function(b,c){return b.invoke(c,
f)})}return e}function X(b,c){var e=b["static"],d=b.dynamic;if("framebuffer"in e){var f=e.framebuffer;return f?(f=J.getFramebuffer(f),g(function(b,c){var e=b.link(f),d=b.shared;c.set(d.framebuffer,".next",e);d=d.context;c.set(d,".framebufferWidth",e+".width");c.set(d,".framebufferHeight",e+".height");return e})):g(function(b,c){var e=b.shared;c.set(e.framebuffer,".next","null");e=e.context;c.set(e,".framebufferWidth",e+".drawingBufferWidth");c.set(e,".framebufferHeight",e+".drawingBufferHeight");
return"null"})}if("framebuffer"in d){var m=d.framebuffer;return k(m,function(b,c){var e=b.invoke(c,m),d=b.shared,f=d.framebuffer,e=c.def(f,".getFramebuffer(",e,")");c.set(f,".next",e);d=d.context;c.set(d,".framebufferWidth",e+"?"+e+".width:"+d+".drawingBufferWidth");c.set(d,".framebufferHeight",e+"?"+e+".height:"+d+".drawingBufferHeight");return e})}return null}function S(b,c,e){function d(b){if(b in m){var e=m[b];b=!0;var g=e.x|0,a=e.y|0,r,x;"width"in e?r=e.width|0:b=!1;"height"in e?x=e.height|0:
b=!1;return new f(!b&&c&&c.thisDep,!b&&c&&c.contextDep,!b&&c&&c.propDep,function(b,c){var d=b.shared.context,f=r;"width"in e||(f=c.def(d,".","framebufferWidth","-",g));var m=x;"height"in e||(m=c.def(d,".","framebufferHeight","-",a));return[g,a,f,m]})}if(b in l){var A=l[b];b=k(A,function(b,c){var e=b.invoke(c,A),d=b.shared.context,f=c.def(e,".x|0"),m=c.def(e,".y|0"),g=c.def('"width" in ',e,"?",e,".width|0:","(",d,".","framebufferWidth","-",f,")"),e=c.def('"height" in ',e,"?",e,".height|0:","(",d,".",
"framebufferHeight","-",m,")");return[f,m,g,e]});c&&(b.thisDep=b.thisDep||c.thisDep,b.contextDep=b.contextDep||c.contextDep,b.propDep=b.propDep||c.propDep);return b}return c?new f(c.thisDep,c.contextDep,c.propDep,function(b,c){var e=b.shared.context;return[0,0,c.def(e,".","framebufferWidth"),c.def(e,".","framebufferHeight")]}):null}var m=b["static"],l=b.dynamic;if(b=d("viewport")){var g=b;b=new f(b.thisDep,b.contextDep,b.propDep,function(b,c){var e=g.append(b,c),d=b.shared.context;c.set(d,".viewportWidth",
e[2]);c.set(d,".viewportHeight",e[3]);return e})}return{viewport:b,scissor_box:d("scissor.box")}}function R(b){function c(b){if(b in e){var d=u.id(e[b]);b=g(function(){return d});b.id=d;return b}if(b in m){var f=m[b];return k(f,function(b,c){var e=b.invoke(c,f);return c.def(b.shared.strings,".id(",e,")")})}return null}var e=b["static"],m=b.dynamic,l=c("frag"),a=c("vert"),r=null;d(l)&&d(a)?(r=L.program(a.id,l.id),b=g(function(b,c){return b.link(r)})):b=new f(l&&l.thisDep||a&&a.thisDep,l&&l.contextDep||
a&&a.contextDep,l&&l.propDep||a&&a.propDep,function(b,c){var e=b.shared.shader,d;d=l?l.append(b,c):c.def(e,".","frag");var f;f=a?a.append(b,c):c.def(e,".","vert");return c.def(e+".program("+f+","+d+")")});return{frag:l,vert:a,progVar:b,program:r}}function aa(b,c){function m(b,c){if(b in l){var e=l[b]|0;return g(function(b,d){c&&(b.OFFSET=e);return e})}if(b in a){var d=a[b];return k(d,function(b,e){var f=b.invoke(e,d);c&&(b.OFFSET=f);return f})}return c&&r?g(function(b,c){b.OFFSET="0";return 0}):null}
var l=b["static"],a=b.dynamic,r=function(){if("elements"in l){var b=l.elements;t(b)?b=E.getElements(E.create(b,!0)):b&&(b=E.getElements(b));var c=g(function(c,e){if(b){var d=c.link(b);return c.ELEMENTS=d}return c.ELEMENTS=null});c.value=b;return c}if("elements"in a){var e=a.elements;return k(e,function(b,c){var d=b.shared,f=d.isBufferArgs,d=d.elements,m=b.invoke(c,e),l=c.def("null"),f=c.def(f,"(",m,")"),m=b.cond(f).then(l,"=",d,".createStream(",m,");")["else"](l,"=",d,".getElements(",m,");");c.entry(m);
c.exit(b.cond(f).then(d,".destroyStream(",l,");"));return b.ELEMENTS=l})}return null}(),x=m("offset",!0);return{elements:r,primitive:function(){if("primitive"in l){var b=l.primitive;return g(function(c,d){return e[b]})}if("primitive"in a){var c=a.primitive;return k(c,function(b,e){var d=b.constants.primTypes,f=b.invoke(e,c);return e.def(d,"[",f,"]")})}return r?d(r)?r.value?g(function(b,c){return c.def(b.ELEMENTS,".primType")}):g(function(){return 4}):new f(r.thisDep,r.contextDep,r.propDep,function(b,
c){var e=b.ELEMENTS;return c.def(e,"?",e,".primType:",4)}):null}(),count:function(){if("count"in l){var b=l.count|0;return g(function(){return b})}if("count"in a){var c=a.count;return k(c,function(b,e){return b.invoke(e,c)})}return r?d(r)?r?x?new f(x.thisDep,x.contextDep,x.propDep,function(b,c){return c.def(b.ELEMENTS,".vertCount-",b.OFFSET)}):g(function(b,c){return c.def(b.ELEMENTS,".vertCount")}):g(function(){return-1}):new f(r.thisDep||x.thisDep,r.contextDep||x.contextDep,r.propDep||x.propDep,
function(b,c){var e=b.ELEMENTS;return b.OFFSET?c.def(e,"?",e,".vertCount-",b.OFFSET,":-1"):c.def(e,"?",e,".vertCount:-1")}):null}(),instances:m("instances",!1),offset:x}}function ca(c,e){var d=c["static"],f=c.dynamic,m={};Da.forEach(function(c){function e(b,a){if(c in d){var r=b(d[c]);m[l]=g(function(){return r})}else if(c in f){var x=f[c];m[l]=k(x,function(b,c){return a(b,c,b.invoke(c,x))})}}var l=Y(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return e(function(b){return b},
function(b,c,e){return e});case "depth.func":return e(function(b){return D[b]},function(b,c,e){return c.def(b.constants.compareFuncs,"[",e,"]")});case "depth.range":return e(function(b){return b},function(b,c,e){b=c.def("+",e,"[0]");c=c.def("+",e,"[1]");return[b,c]});case "blend.func":return e(function(b){return[z["srcRGB"in b?b.srcRGB:b.src],z["dstRGB"in b?b.dstRGB:b.dst],z["srcAlpha"in b?b.srcAlpha:b.src],z["dstAlpha"in b?b.dstAlpha:b.dst]]},function(b,c,e){function d(b,f){return c.def('"',b,f,
'" in ',e,"?",e,".",b,f,":",e,".",b)}b=b.constants.blendFuncs;var f=d("src","RGB"),m=d("dst","RGB"),f=c.def(b,"[",f,"]"),l=c.def(b,"[",d("src","Alpha"),"]"),m=c.def(b,"[",m,"]");b=c.def(b,"[",d("dst","Alpha"),"]");return[f,m,l,b]});case "blend.equation":return e(function(b){if("string"===typeof b)return[ga[b],ga[b]];if("object"===typeof b)return[ga[b.rgb],ga[b.alpha]]},function(b,c,e){var d=b.constants.blendEquations,f=c.def(),m=c.def();b=b.cond("typeof ",e,'==="string"');b.then(f,"=",m,"=",d,"[",
e,"];");b["else"](f,"=",d,"[",e,".rgb];",m,"=",d,"[",e,".alpha];");c(b);return[f,m]});case "blend.color":return e(function(b){return v(4,function(c){return+b[c]})},function(b,c,e){return v(4,function(b){return c.def("+",e,"[",b,"]")})});case "stencil.mask":return e(function(b){return b|0},function(b,c,e){return c.def(e,"|0")});case "stencil.func":return e(function(b){return[D[b.cmp||"keep"],b.ref||0,"mask"in b?b.mask:-1]},function(b,c,e){b=c.def('"cmp" in ',e,"?",b.constants.compareFuncs,"[",e,".cmp]",
":",7680);var d=c.def(e,".ref|0");c=c.def('"mask" in ',e,"?",e,".mask|0:-1");return[b,d,c]});case "stencil.opFront":case "stencil.opBack":return e(function(e){return["stencil.opBack"===c?1029:1028,b[e.fail||"keep"],b[e.zfail||"keep"],b[e.zpass||"keep"]]},function(b,e,d){function f(b){return e.def('"',b,'" in ',d,"?",m,"[",d,".",b,"]:",7680)}var m=b.constants.stencilOps;return["stencil.opBack"===c?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return e(function(b){return[b.factor|
0,b.units|0]},function(b,c,e){b=c.def(e,".factor|0");c=c.def(e,".units|0");return[b,c]});case "cull.face":return e(function(b){var c=0;"front"===b?c=1028:"back"===b&&(c=1029);return c},function(b,c,e){return c.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return e(function(b){return b},function(b,c,e){return e});case "frontFace":return e(function(b){return x[b]},function(b,c,e){return c.def(e+'==="cw"?2304:2305')});case "colorMask":return e(function(b){return b.map(function(b){return!!b})},
function(b,c,e){return v(4,function(b){return"!!"+e+"["+b+"]"})});case "sample.coverage":return e(function(b){return["value"in b?b.value:1,!!b.invert]},function(b,c,e){b=c.def('"value" in ',e,"?+",e,".value:1");c=c.def("!!",e,".invert");return[b,c]})}});return m}function la(b,c){var e=b["static"],d=b.dynamic,f={};Object.keys(e).forEach(function(b){var c=e[b],d;if("number"===typeof c||"boolean"===typeof c)d=g(function(){return c});else if("function"===typeof c){var m=c._reglType;if("texture2d"===m||
"textureCube"===m)d=g(function(b){return b.link(c)});else if("framebuffer"===m||"framebufferCube"===m)d=g(function(b){return b.link(c.color[0])})}else q(c)&&(d=g(function(b){return b.global.def("[",v(c.length,function(b){return c[b]}),"]")}));d.value=c;f[b]=d});Object.keys(d).forEach(function(b){var c=d[b];f[b]=k(c,function(b,e){return b.invoke(e,c)})});return f}function ha(b,e){var d=b["static"],f=b.dynamic,l={};Object.keys(d).forEach(function(b){var e=d[b],f=u.id(b),a=new ta;if(t(e))a.state=1,a.buffer=
n.getBuffer(n.create(e,34962,!1,!0)),a.type=0;else{var k=n.getBuffer(e);if(k)a.state=1,a.buffer=k,a.type=0;else if(e.constant){var r=e.constant;a.buffer="null";a.state=2;"number"===typeof r?a.x=r:m.forEach(function(b,c){c<r.length&&(a[b]=r[c])})}else{var k=t(e.buffer)?n.getBuffer(n.create(e.buffer,34962,!1,!0)):n.getBuffer(e.buffer),x=e.offset|0,A=e.stride|0,q=e.size|0,p=!!e.normalized,z=0;"type"in e&&(z=c[e.type]);e=e.divisor|0;a.buffer=k;a.state=1;a.size=q;a.normalized=p;a.type=z||k.dtype;a.offset=
x;a.stride=A;a.divisor=e}}l[b]=g(function(b,c){var e=b.attribCache;if(f in e)return e[f];var d={isStream:!1};Object.keys(a).forEach(function(b){d[b]=a[b]});a.buffer&&(d.buffer=b.link(a.buffer),d.type=d.type||d.buffer+".dtype");return e[f]=d})});Object.keys(f).forEach(function(b){var c=f[b];l[b]=k(c,function(b,e){function d(b){e(k[b],"=",f,".",b,"|0;")}var f=b.invoke(e,c),l=b.shared,g=l.isBufferArgs,a=l.buffer,k={isStream:e.def(!1)},r=new ta;r.state=1;Object.keys(r).forEach(function(b){k[b]=e.def(""+
r[b])});var x=k.buffer,A=k.type;e("if(",g,"(",f,")){",k.isStream,"=true;",x,"=",a,".createStream(",34962,",",f,");",A,"=",x,".dtype;","}else{",x,"=",a,".getBuffer(",f,");","if(",x,"){",A,"=",x,".dtype;",'}else if("constant" in ',f,"){",k.state,"=",2,";","if(typeof "+f+'.constant === "number"){',k[m[0]],"=",f,".constant;",m.slice(1).map(function(b){return k[b]}).join("="),"=0;","}else{",m.map(function(b,c){return k[b]+"="+f+".constant.length>="+c+"?"+f+".constant["+c+"]:0;"}).join(""),"}}else{","if(",
g,"(",f,".buffer)){",x,"=",a,".createStream(",34962,",",f,".buffer);","}else{",x,"=",a,".getBuffer(",f,".buffer);","}",A,'="type" in ',f,"?",l.glTypes,"[",f,".type]:",x,".dtype;",k.normalized,"=!!",f,".normalized;");d("size");d("offset");d("stride");d("divisor");e("}}");e.exit("if(",k.isStream,"){",a,".destroyStream(",x,");","}");return k})});return l}function ka(b){var c=b["static"],e=b.dynamic,d={};Object.keys(c).forEach(function(b){var e=c[b];d[b]=g(function(b,c){return"number"===typeof e||"boolean"===
typeof e?""+e:b.link(e)})});Object.keys(e).forEach(function(b){var c=e[b];d[b]=k(c,function(b,e){return b.invoke(e,c)})});return d}function ma(b,c,e,d,f){var m=X(b,f),l=S(b,m,f),g=aa(b,f),a=ca(b,f),k=R(b,f),r=l.viewport;r&&(a.viewport=r);r=Y("scissor.box");(l=l[r])&&(a[r]=l);l=0<Object.keys(a).length;m={framebuffer:m,draw:g,shader:k,state:a,dirty:l};m.profile=T(b,f);m.uniforms=la(e,f);m.attributes=ha(c,f);m.context=ka(d,f);return m}function ia(b,c,e){var d=b.shared.context,f=b.scope();Object.keys(e).forEach(function(m){c.save(d,
"."+m);f(d,".",m,"=",e[m].append(b,c),";")});c(f)}function ea(b,c,e,d){var f=b.shared,m=f.gl,l=f.framebuffer,g;na&&(g=c.def(f.extensions,".webgl_draw_buffers"));var a=b.constants,f=a.drawBuffer,a=a.backBuffer;b=e?e.append(b,c):c.def(l,".next");d||c("if(",b,"!==",l,".cur){");c("if(",b,"){",m,".bindFramebuffer(",36160,",",b,".framebuffer);");na&&c(g,".drawBuffersWEBGL(",f,"[",b,".colorAttachments.length]);");c("}else{",m,".bindFramebuffer(",36160,",null);");na&&c(g,".drawBuffersWEBGL(",a,");");c("}",
l,".cur=",b,";");d||c("}")}function ja(b,c,e){var d=b.shared,f=d.gl,m=b.current,l=b.next,g=d.current,a=d.next,k=b.cond(g,".dirty");Da.forEach(function(c){c=Y(c);if(!(c in e.state)){var d,r;if(c in l){d=l[c];r=m[c];var x=v(qa[c].length,function(b){return k.def(d,"[",b,"]")});k(b.cond(x.map(function(b,c){return b+"!=="+r+"["+c+"]"}).join("||")).then(f,".",sa[c],"(",x,");",x.map(function(b,c){return r+"["+c+"]="+b}).join(";"),";"))}else d=k.def(a,".",c),x=b.cond(d,"!==",g,".",c),k(x),c in ra?x(b.cond(d).then(f,
".enable(",ra[c],");")["else"](f,".disable(",ra[c],");"),g,".",c,"=",d,";"):x(f,".",sa[c],"(",d,");",g,".",c,"=",d,";")}});0===Object.keys(e.state).length&&k(g,".dirty=false;");c(k)}function Z(b,c,e,f){var m=b.shared,l=b.current,g=m.current,a=m.gl;p(Object.keys(e)).forEach(function(m){var k=e[m];if(!f||f(k)){var r=k.append(b,c);if(ra[m]){var x=ra[m];d(k)?r?c(a,".enable(",x,");"):c(a,".disable(",x,");"):c(b.cond(r).then(a,".enable(",x,");")["else"](a,".disable(",x,");"));c(g,".",m,"=",r,";")}else if(q(r)){var A=
l[m];c(a,".",sa[m],"(",r,");",r.map(function(b,c){return A+"["+c+"]="+b}).join(";"),";")}else c(a,".",sa[m],"(",r,");",g,".",m,"=",r,";")}})}function oa(b,c){pa&&(b.instancing=c.def(b.shared.extensions,".angle_instanced_arrays"))}function da(b,c,e,f,m){function l(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(b){p=c.def();b(p,"=",l(),";");"string"===typeof m?b(x,".count+=",m,";"):b(x,".count++;");P&&(f?(u=c.def(),b(u,"=",q,".getNumPendingQueries();")):b(q,".beginQuery(",
x,");"))}function a(b){b(x,".cpuTime+=",l(),"-",p,";");P&&(f?b(q,".pushScopeStats(",u,",",q,".getNumPendingQueries(),",x,");"):b(q,".endQuery();"))}function k(b){var e=c.def(A,".profile");c(A,".profile=",b,";");c.exit(A,".profile=",e,";")}var r=b.shared,x=b.stats,A=r.current,q=r.timer;e=e.profile;var p,u;if(e){if(d(e)){e.enable?(g(c),a(c.exit),k("true")):k("false");return}e=e.append(b,c);k(e)}else e=c.def(A,".profile");r=b.block();g(r);c("if(",e,"){",r,"}");b=b.block();a(b);c.exit("if(",e,"){",b,
"}")}function fa(b,c,e,d,f){function l(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(e,d,f){function l(){c("if(!",A,".buffer){",r,".enableVertexAttribArray(",x,");}");var e=f.type,m;m=f.size?c.def(f.size,"||",d):d;c("if(",A,".type!==",e,"||",A,".size!==",m,"||",u.map(function(b){return A+"."+b+"!=="+f[b]}).join("||"),"){",r,".bindBuffer(",34962,",",q,".buffer);",r,".vertexAttribPointer(",
[x,m,e,f.normalized,f.stride,f.offset],");",A,".type=",e,";",A,".size=",m,";",u.map(function(b){return A+"."+b+"="+f[b]+";"}).join(""),"}");pa&&(e=f.divisor,c("if(",A,".divisor!==",e,"){",b.instancing,".vertexAttribDivisorANGLE(",[x,e],");",A,".divisor=",e,";}"))}function k(){c("if(",A,".buffer){",r,".disableVertexAttribArray(",x,");","}if(",m.map(function(b,c){return A+"."+b+"!=="+p[c]}).join("||"),"){",r,".vertexAttrib4f(",x,",",p,");",m.map(function(b,c){return A+"."+b+"="+p[c]+";"}).join(""),
"}")}var r=a.gl,x=c.def(e,".location"),A=c.def(a.attributes,"[",x,"]");e=f.state;var q=f.buffer,p=[f.x,f.y,f.z,f.w],u=["buffer","normalized","offset","stride"];1===e?l():2===e?k():(c("if(",e,"===",1,"){"),l(),c("}else{"),k(),c("}"))}var a=b.shared;d.forEach(function(d){var m=d.name,a=e.attributes[m],k;if(a){if(!f(a))return;k=a.append(b,c)}else{if(!f(F))return;var r=b.scopeAttrib(m);k={};Object.keys(new ta).forEach(function(b){k[b]=c.def(r,".",b)})}g(b.link(d),l(d.info.type),k)})}function ba(b,c,e,
f,m){for(var l=b.shared,a=l.gl,g,k=0;k<f.length;++k){var r=f[k],x=r.name,A=r.info.type,p=e.uniforms[x],r=b.link(r)+".location",z;if(p){if(!m(p))continue;if(d(p)){x=p.value;if(35678===A||35680===A)A=b.link(x._texture||x.color[0]._texture),c(a,".uniform1i(",r,",",A+".bind());"),c.exit(A,".unbind();");else if(35674===A||35675===A||35676===A)x=b.global.def("new Float32Array(["+Array.prototype.slice.call(x)+"])"),p=2,35675===A?p=3:35676===A&&(p=4),c(a,".uniformMatrix",p,"fv(",r,",false,",x,");");else{switch(A){case 5126:g=
"1f";break;case 35664:g="2f";break;case 35665:g="3f";break;case 35666:g="4f";break;case 35670:g="1i";break;case 5124:g="1i";break;case 35671:g="2i";break;case 35667:g="2i";break;case 35672:g="3i";break;case 35668:g="3i";break;case 35673:g="4i";break;case 35669:g="4i"}c(a,".uniform",g,"(",r,",",q(x)?Array.prototype.slice.call(x):x,");")}continue}else z=p.append(b,c)}else{if(!m(F))continue;z=c.def(l.uniforms,"[",u.id(x),"]")}35678===A?c("if(",z,"&&",z,'._reglType==="framebuffer"){',z,"=",z,".color[0];",
"}"):35680===A&&c("if(",z,"&&",z,'._reglType==="framebufferCube"){',z,"=",z,".color[0];","}");x=1;switch(A){case 35678:case 35680:A=c.def(z,"._texture");c(a,".uniform1i(",r,",",A,".bind());");c.exit(A,".unbind();");continue;case 5124:case 35670:g="1i";break;case 35667:case 35671:g="2i";x=2;break;case 35668:case 35672:g="3i";x=3;break;case 35669:case 35673:g="4i";x=4;break;case 5126:g="1f";break;case 35664:g="2f";x=2;break;case 35665:g="3f";x=3;break;case 35666:g="4f";x=4;break;case 35674:g="Matrix2fv";
break;case 35675:g="Matrix3fv";break;case 35676:g="Matrix4fv"}c(a,".uniform",g,"(",r,",");if("M"===g.charAt(0)){var r=Math.pow(A-35674+2,2),y=b.global.def("new Float32Array(",r,")");c("false,(Array.isArray(",z,")||",z," instanceof Float32Array)?",z,":(",v(r,function(b){return y+"["+b+"]="+z+"["+b+"]"}),",",y,")")}else 1<x?c(v(x,function(b){return z+"["+b+"]"})):c(z);c(");")}}function za(b,c,e,f){function m(d){var l=x[d];return l?l.contextDep&&f.contextDynamic||l.propDep?l.append(b,e):l.append(b,c):
c.def(r,".",d)}function l(){function b(){e(v,".drawElementsInstancedANGLE(",[q,z,y,p+"<<(("+y+"-5121)>>1)",u],");")}function c(){e(v,".drawArraysInstancedANGLE(",[q,p,z,u],");")}A?K?b():(e("if(",A,"){"),b(),e("}else{"),c(),e("}")):c()}function g(){function b(){e(k+".drawElements("+[q,z,y,p+"<<(("+y+"-5121)>>1)"]+");")}function c(){e(k+".drawArrays("+[q,p,z]+");")}A?K?b():(e("if(",A,"){"),b(),e("}else{"),c(),e("}")):c()}var a=b.shared,k=a.gl,r=a.draw,x=f.draw,A=function(){var d=x.elements,m=c;if(d){if(d.contextDep&&
f.contextDynamic||d.propDep)m=e;d=d.append(b,m)}else d=m.def(r,".","elements");d&&m("if("+d+")"+k+".bindBuffer(34963,"+d+".buffer.buffer);");return d}(),q=m("primitive"),p=m("offset"),z=function(){var d=x.count,m=c;if(d){if(d.contextDep&&f.contextDynamic||d.propDep)m=e;d=d.append(b,m)}else d=m.def(r,".","count");return d}();if("number"===typeof z){if(0===z)return}else e("if(",z,"){"),e.exit("}");var u,v;pa&&(u=m("instances"),v=b.instancing);var y=A+".type",K=x.elements&&d(x.elements);pa&&("number"!==
typeof u||0<=u)?"string"===typeof u?(e("if(",u,">0){"),l(),e("}else if(",u,"<0){"),g(),e("}")):l():g()}function wa(b,c,e,d,f){c=W();f=c.proc("body",f);pa&&(c.instancing=f.def(c.shared.extensions,".angle_instanced_arrays"));b(c,f,e,d);return c.compile().body}function xa(b,c,e,d){oa(b,c);fa(b,c,e,d.attributes,function(){return!0});ba(b,c,e,d.uniforms,function(){return!0});za(b,c,c,e)}function Aa(b,c){var e=b.proc("draw",1);oa(b,e);ia(b,e,c.context);ea(b,e,c.framebuffer);ja(b,e,c);Z(b,e,c.state);da(b,
e,c,!1,!0);var d=c.shader.progVar.append(b,e);e(b.shared.gl,".useProgram(",d,".program);");if(c.shader.program)xa(b,e,c,c.shader.program);else{var f=b.global.def("{}"),m=e.def(d,".id"),l=e.def(f,"[",m,"]");e(b.cond(l).then(l,".call(this,a0);")["else"](l,"=",f,"[",m,"]=",b.link(function(e){return wa(xa,b,c,e,1)}),"(",d,");",l,".call(this,a0);"))}0<Object.keys(c.state).length&&e(b.shared.current,".dirty=true;")}function Ba(b,c,e,d){function f(){return!0}b.batchId="a1";oa(b,c);fa(b,c,e,d.attributes,
f);ba(b,c,e,d.uniforms,f);za(b,c,c,e)}function ua(b,c,e,d){function f(b){return b.contextDep&&l||b.propDep}function m(b){return!f(b)}oa(b,c);var l=e.contextDep,g=c.def(),a=c.def();b.shared.props=a;b.batchId=g;var k=b.scope(),r=b.scope();c(k.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",a,"=","a0","[",g,"];",r,"}",k.exit);e.needsContext&&ia(b,r,e.context);e.needsFramebuffer&&ea(b,r,e.framebuffer);Z(b,r,e.state,f);e.profile&&f(e.profile)&&da(b,r,e,!1,!0);d?(fa(b,k,e,d.attributes,m),fa(b,r,e,d.attributes,
f),ba(b,k,e,d.uniforms,m),ba(b,r,e,d.uniforms,f),za(b,k,r,e)):(c=b.global.def("{}"),d=e.shader.progVar.append(b,r),a=r.def(d,".id"),k=r.def(c,"[",a,"]"),r(b.shared.gl,".useProgram(",d,".program);","if(!",k,"){",k,"=",c,"[",a,"]=",b.link(function(c){return wa(Ba,b,e,c,2)}),"(",d,");}",k,".call(this,a0[",g,"],",g,");"))}function va(b,c){function e(b){return b.contextDep&&f||b.propDep}var d=b.proc("batch",2);b.batchId="0";oa(b,d);var f=!1,m=!0;Object.keys(c.context).forEach(function(b){f=f||c.context[b].propDep});
f||(ia(b,d,c.context),m=!1);var l=c.framebuffer,g=!1;l?(l.propDep?f=g=!0:l.contextDep&&f&&(g=!0),g||ea(b,d,l)):ea(b,d,null);c.state.viewport&&c.state.viewport.propDep&&(f=!0);ja(b,d,c);Z(b,d,c.state,function(b){return!e(b)});c.profile&&e(c.profile)||da(b,d,c,!1,"a1");c.contextDep=f;c.needsContext=m;c.needsFramebuffer=g;m=c.shader.progVar;if(m.contextDep&&f||m.propDep)ua(b,d,c,null);else if(m=m.append(b,d),d(b.shared.gl,".useProgram(",m,".program);"),c.shader.program)ua(b,d,c,c.shader.program);else{var l=
b.global.def("{}"),g=d.def(m,".id"),a=d.def(l,"[",g,"]");d(b.cond(a).then(a,".call(this,a0,a1);")["else"](a,"=",l,"[",g,"]=",b.link(function(e){return wa(ua,b,c,e,2)}),"(",m,");",a,".call(this,a0,a1);"))}0<Object.keys(c.state).length&&d(b.shared.current,".dirty=true;")}function Ga(b,c){function e(m){var l=c.shader[m];l&&d.set(f.shader,"."+m,l.append(b,d))}var d=b.proc("scope",3);b.batchId="a2";var f=b.shared,m=f.current;ia(b,d,c.context);c.framebuffer&&c.framebuffer.append(b,d);p(Object.keys(c.state)).forEach(function(e){var m=
c.state[e].append(b,d);q(m)?m.forEach(function(c,f){d.set(b.next[e],"["+f+"]",c)}):d.set(f.next,"."+e,m)});da(b,d,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(e){var m=c.draw[e];m&&d.set(f.draw,"."+e,""+m.append(b,d))});Object.keys(c.uniforms).forEach(function(e){d.set(f.uniforms,"["+u.id(e)+"]",c.uniforms[e].append(b,d))});Object.keys(c.attributes).forEach(function(e){var f=c.attributes[e].append(b,d),m=b.scopeAttrib(e);Object.keys(new ta).forEach(function(b){d.set(m,
"."+b,f[b])})});e("vert");e("frag");0<Object.keys(c.state).length&&(d(m,".dirty=true;"),d.exit(m,".dirty=true;"));d("a1(",b.shared.context,",a0,",b.batchId,");")}function Fa(b){if("object"===typeof b&&!q(b)){for(var c=Object.keys(b),e=0;e<c.length;++e)if(l.isDynamic(b[c[e]]))return!0;return!1}}function Ca(b,c,e){function d(b,c){g.forEach(function(e){var d=f[e];l.isDynamic(d)&&(d=b.invoke(c,d),c(A,".",e,"=",d,";"))})}var f=c["static"][e];if(f&&Fa(f)){var m=b.global,g=Object.keys(f),a=!1,r=!1,x=!1,
A=b.global.def("{}");g.forEach(function(c){var e=f[c];if(l.isDynamic(e))"function"===typeof e&&(e=f[c]=l.unbox(e)),c=k(e,null),a=a||c.thisDep,x=x||c.propDep,r=r||c.contextDep;else{m(A,".",c,"=");switch(typeof e){case "number":m(e);break;case "string":m('"',e,'"');break;case "object":Array.isArray(e)&&m("[",e.join(),"]");break;default:m(b.link(e))}m(";")}});c.dynamic[e]=new l.DynamicVariable(4,{thisDep:a,contextDep:r,propDep:x,ref:A,append:d});delete c["static"][e]}}var ta=Q.Record,ga={add:32774,subtract:32778,
"reverse subtract":32779};w.ext_blend_minmax&&(ga.min=32775,ga.max=32776);var pa=w.angle_instanced_arrays,na=w.webgl_draw_buffers,qa={dirty:!0,profile:U.profile},ya={},Da=[],ra={},sa={};V("dither",3024);V("blend.enable",3042);M("blend.color","blendColor",[0,0,0,0]);M("blend.equation","blendEquationSeparate",[32774,32774]);M("blend.func","blendFuncSeparate",[1,0,1,0]);V("depth.enable",2929,!0);M("depth.func","depthFunc",513);M("depth.range","depthRange",[0,1]);M("depth.mask","depthMask",!0);M("colorMask",
"colorMask",[!0,!0,!0,!0]);V("cull.enable",2884);M("cull.face","cullFace",1029);M("frontFace","frontFace",2305);M("lineWidth","lineWidth",1);V("polygonOffset.enable",32823);M("polygonOffset.offset","polygonOffset",[0,0]);V("sample.alpha",32926);V("sample.enable",32928);M("sample.coverage","sampleCoverage",[1,!1]);V("stencil.enable",2960);M("stencil.mask","stencilMask",-1);M("stencil.func","stencilFunc",[519,0,-1]);M("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);M("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);V("scissor.enable",3089);M("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);M("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var Ha={gl:a,context:K,strings:u,next:ya,current:qa,draw:A,elements:E,buffer:n,shader:L,attributes:Q.state,uniforms:I,framebuffer:J,extensions:w,timer:P,isBufferArgs:t},Ea={primTypes:e,compareFuncs:D,blendFuncs:z,blendEquations:ga,stencilOps:b,glTypes:c,orientationType:x};na&&(Ea.backBuffer=[1029],Ea.drawBuffer=
v(h.maxDrawbuffers,function(b){return 0===b?[0]:v(b,function(b){return 36064+b})}));var Ia=0;return{next:ya,current:qa,procs:function(){var b=W(),c=b.proc("poll"),e=b.proc("refresh"),d=b.block();c(d);e(d);var f=b.shared,m=f.gl,l=f.next,g=f.current;d(g,".dirty=false;");ea(b,c);ea(b,e,null,!0);var k=a.getExtension("angle_instanced_arrays"),r;k&&(r=b.link(k));for(var x=0;x<h.maxAttributes;++x){var A=e.def(f.attributes,"[",x,"]"),p=b.cond(A,".buffer");p.then(m,".enableVertexAttribArray(",x,");",m,".bindBuffer(",
34962,",",A,".buffer.buffer);",m,".vertexAttribPointer(",x,",",A,".size,",A,".type,",A,".normalized,",A,".stride,",A,".offset);")["else"](m,".disableVertexAttribArray(",x,");",m,".vertexAttrib4f(",x,",",A,".x,",A,".y,",A,".z,",A,".w);",A,".buffer=null;");e(p);k&&e(r,".vertexAttribDivisorANGLE(",x,",",A,".divisor);")}Object.keys(ra).forEach(function(f){var a=ra[f],k=d.def(l,".",f),r=b.block();r("if(",k,"){",m,".enable(",a,")}else{",m,".disable(",a,")}",g,".",f,"=",k,";");e(r);c("if(",k,"!==",g,".",
f,"){",r,"}")});Object.keys(sa).forEach(function(f){var a=sa[f],k=qa[f],r,x,A=b.block();A(m,".",a,"(");q(k)?(a=k.length,r=b.global.def(l,".",f),x=b.global.def(g,".",f),A(v(a,function(b){return r+"["+b+"]"}),");",v(a,function(b){return x+"["+b+"]="+r+"["+b+"];"}).join("")),c("if(",v(a,function(b){return r+"["+b+"]!=="+x+"["+b+"]"}).join("||"),"){",A,"}")):(r=d.def(l,".",f),x=d.def(g,".",f),A(r,");",g,".",f,"=",r,";"),c("if(",r,"!==",x,"){",A,"}"));e(A)});return b.compile()}(),compile:function(b,c,
e,d,f){var m=W();m.stats=m.link(f);Object.keys(c["static"]).forEach(function(b){Ca(m,c,b)});r.forEach(function(c){Ca(m,b,c)});e=ma(b,c,e,d,m);Aa(m,e);Ga(m,e);va(m,e);return m.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/codegen":22,"./util/is-array-like":25,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/loop":28}],9:[function(a,h,n){function t(f,a){this.id=d++;this.type=f;this.data=a}function p(d){if(0===d.length)return[];var f=d.charAt(0),
a=d.charAt(d.length-1);if(1<d.length&&f===a&&('"'===f||"'"===f))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return p(d.substr(0,f.index)).concat(p(f[1])).concat(p(d.substr(f.index+f[0].length)));f=d.split(".");if(1===f.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];d=[];for(a=0;a<f.length;++a)d=d.concat(p(f[a]));return d}function f(d){return"["+p(d).join("][")+"]"}var d=0;h.exports={DynamicVariable:t,
define:function(d,a){return new t(d,f(a+""))},isDynamic:function(d){return"function"===typeof d&&!d._reglType||d instanceof t},unbox:function(d,f){return"function"===typeof d?new t(0,d):d},accessor:f}},{}],10:[function(a,h,n){var t=a("./util/is-typed-array"),p=a("./util/is-ndarray"),f=a("./util/values"),d=a("./constants/primitives.json"),g=a("./constants/usage.json");h.exports=function(a,y,v,w){function u(d){this.id=c++;e[this.id]=this;this.buffer=d;this.primType=4;this.type=this.vertCount=0}function q(c,
e,b,d,f,m,l){(m=l)||t(e)&&(!p(e)||t(e.data))||(m=y.oes_element_index_uint?5125:5123);c.buffer.bind();v._initBuffer(c.buffer,e,b,m,3);e=l;if(!l){switch(c.buffer.dtype){case 5121:case 5120:e=5121;break;case 5123:case 5122:e=5123;break;case 5125:case 5124:e=5125}c.buffer.dtype=e}c.type=e;0>f&&(f=c.buffer.byteLength,5123===e?f>>=1:5125===e&&(f>>=2));c.vertCount=f;f=d;0>d&&(f=4,d=c.buffer.dimension,1===d&&(f=0),2===d&&(f=1),3===d&&(f=4));c.primType=f}function l(c){w.elementsCount--;delete e[c.id];c.buffer.destroy();
c.buffer=null}var e={},c=0,m={uint8:5121,uint16:5123};y.oes_element_index_uint&&(m.uint32=5125);u.prototype.bind=function(){this.buffer.bind()};var r=[];return{create:function(c,e){function b(c){if(c)if("number"===typeof c)f(c),r.primType=4,r.vertCount=c|0,r.type=5121;else{var e=null,l=35044,u=-1,z=-1,v=0,y=0;Array.isArray(c)||t(c)||p(c)?e=c:("data"in c&&(e=c.data),"usage"in c&&(l=g[c.usage]),"primitive"in c&&(u=d[c.primitive]),"count"in c&&(z=c.count|0),"length"in c&&(v=c.length|0),"type"in c&&(y=
m[c.type]));e?q(r,e,l,u,z,v,y):(c=r.buffer,c.bind(),a.bufferData(34963,v,l),c.dtype=y||5121,c.usage=l,c.dimension=3,c.byteLength=v,r.primType=0>u?4:u,r.vertCount=0>z?0:z,r.type=c.dtype)}else f(),r.primType=4,r.vertCount=0,r.type=5121;return b}var f=v.create(null,34963,!0),r=new u(f._buffer);w.elementsCount++;b(c);b._reglType="elements";b._elements=r;b.subdata=function(c,e){f.subdata(c,e);return b};b.destroy=function(){l(r)};return b},createStream:function(c){var e=r.pop();e||(e=new u(v.create(null,
34963,!0,!1)._buffer));q(e,c,35040,-1,-1,0,0);return e},destroyStream:function(c){r.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof u?c._elements:null},clear:function(){f(e).forEach(l)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/values":32}],11:[function(a,h,n){h.exports=function(a,p){function f(f){f=f.toLowerCase();var g;try{g=d[f]=a.getExtension(f)}catch(k){}return!!g}for(var d={},
g=0;g<p.extensions.length;++g){var k=p.extensions[g];if(!f(k))return p.onDestroy(),p.onDone('"'+k+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}p.optionalExtensions.forEach(f);return{extensions:d,restore:function(){Object.keys(d).forEach(function(d){if(!f(d))throw Error("(regl): error restoring extension "+d);})}}}},{}],12:[function(a,h,n){var t=a("./util/values"),p=a("./util/extend"),f=[];f[6408]=4;var d=[];d[5121]=1;d[5126]=4;
d[36193]=2;h.exports=function(a,k,y,v,w,u){function q(b,c,e){this.target=b;this.texture=c;this.renderbuffer=e;var d=b=0;c?(b=c.width,d=c.height):e&&(b=e.width,d=e.height);this.width=b;this.height=d}function l(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function e(b,c,e){b&&(b.texture?b.texture._texture.refCount+=1:b.renderbuffer._renderbuffer.refCount+=1)}function c(b,c){c?c.texture?a.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,
0):a.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer):a.framebufferTexture2D(36160,b,3553,null,0)}function m(b){var c=3553,e=null,d=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(c=b.target|0));b=f._reglType;"texture2d"===b?e=f:"textureCube"===b?e=f:"renderbuffer"===b&&(d=f,c=36161);return new q(c,e,d)}function r(b,c,e,d,f){if(e)return b=v.create2D({width:b,height:c,format:d,type:f}),b._texture.refCount=0,new q(3553,b,null);b=w.create({width:b,height:c,format:d});
b._renderbuffer.refCount=0;return new q(36161,null,b)}function z(b){return b&&(b.texture||b.renderbuffer)}function D(b,c,e){b&&(b.texture?b.texture.resize(c,e):b.renderbuffer&&b.renderbuffer.resize(c,e))}function b(){this.id=O++;J[this.id]=this;this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function x(b){b.colorAttachments.forEach(l);l(b.depthAttachment);l(b.stencilAttachment);l(b.depthStencilAttachment)}
function F(b){a.deleteFramebuffer(b.framebuffer);b.framebuffer=null;u.framebufferCount--;delete J[b.id]}function G(b){var e;a.bindFramebuffer(36160,b.framebuffer);var d=b.colorAttachments;for(e=0;e<d.length;++e)c(36064+e,d[e]);for(e=d.length;e<y.maxColorAttachments;++e)c(36064+e,null);c(36096,b.depthAttachment);c(36128,b.stencilAttachment);c(33306,b.depthStencilAttachment);a.checkFramebufferStatus(36160);a.bindFramebuffer(36160,h.next);h.cur=h.next;a.getError()}function C(c,l){function a(b,c){var l,
k=0,q=0,p=!0,u=!0;l=null;var v=!0,y="rgba",w="uint8",F=1,t=null,D=null,C=null,h=!1;if("number"===typeof b)k=b|0,q=c|0||k;else if(b){"shape"in b?(q=b.shape,k=q[0],q=q[1]):("radius"in b&&(k=q=b.radius),"width"in b&&(k=b.width),"height"in b&&(q=b.height));if("color"in b||"colors"in b)l=b.color||b.colors,Array.isArray(l);if(!l){"colorCount"in b&&(F=b.colorCount|0);"colorTexture"in b&&(v=!!b.colorTexture,y="rgba4");if("colorType"in b&&(w=b.colorType,!v))if("half float"===w||"float16"===w)y="rgba16f";else if("float"===
w||"float32"===w)y="rgba32f";"colorFormat"in b&&(y=b.colorFormat,0<=n.indexOf(y)?v=!0:0<=H.indexOf(y)&&(v=!1))}if("depthTexture"in b||"depthStencilTexture"in b)h=!(!b.depthTexture&&!b.depthStencilTexture);"depth"in b&&("boolean"===typeof b.depth?p=b.depth:(t=b.depth,u=!1));"stencil"in b&&("boolean"===typeof b.stencil?u=b.stencil:(D=b.stencil,p=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?p=u=b.depthStencil:(C=b.depthStencil,u=p=!1))}else k=q=1;var B=null,E=null,I=null,J=null;if(Array.isArray(l))B=
l.map(m);else if(l)B=[m(l)];else for(B=Array(F),l=0;l<F;++l)B[l]=r(k,q,v,y,w);k=k||B[0].width;q=q||B[0].height;t?E=m(t):p&&!u&&(E=r(k,q,h,"depth","uint32"));D?I=m(D):u&&!p&&(I=r(k,q,!1,"stencil","uint8"));C?J=m(C):!t&&!D&&u&&p&&(J=r(k,q,h,"depth stencil","depth stencil"));p=null;for(l=0;l<B.length;++l)e(B[l],k,q),B[l]&&B[l].texture&&(u=f[B[l].texture._texture.format]*d[B[l].texture._texture.type],null===p&&(p=u));e(E,k,q);e(I,k,q);e(J,k,q);x(g);g.width=k;g.height=q;g.colorAttachments=B;g.depthAttachment=
E;g.stencilAttachment=I;g.depthStencilAttachment=J;a.color=B.map(z);a.depth=z(E);a.stencil=z(I);a.depthStencil=z(J);a.width=g.width;a.height=g.height;G(g);return a}var g=new b;u.framebufferCount++;a(c,l);return p(a,{resize:function(b,c){var e=b|0,d=c|0||e;if(e===g.width&&d===g.height)return a;for(var f=g.colorAttachments,m=0;m<f.length;++m)D(f[m],e,d);D(g.depthAttachment,e,d);D(g.stencilAttachment,e,d);D(g.depthStencilAttachment,e,d);g.width=a.width=e;g.height=a.height=d;G(g);return a},_reglType:"framebuffer",
_framebuffer:g,destroy:function(){F(g);x(g)}})}var h={cur:null,next:null,dirty:!1},n=["rgba"],H=["rgba4","rgb565","rgb5 a1"];k.ext_srgb&&H.push("srgba");k.ext_color_buffer_half_float&&H.push("rgba16f","rgb16f");k.webgl_color_buffer_float&&H.push("rgba32f");var E=["uint8"];k.oes_texture_half_float&&E.push("half float","float16");k.oes_texture_float&&E.push("float","float32");var O=0,J={};return p(h,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,
c instanceof b)?c:null},create:C,createCube:function(b){function c(b){var d,f={color:null},m=0,l=null;d="rgba";var a="uint8",g=1;if("number"===typeof b)m=b|0;else if(b){"shape"in b?m=b.shape[0]:("radius"in b&&(m=b.radius|0),"width"in b?m=b.width|0:"height"in b&&(m=b.height|0));if("color"in b||"colors"in b)l=b.color||b.colors,Array.isArray(l);l||("colorCount"in b&&(g=b.colorCount|0),"colorType"in b&&(a=b.colorType),"colorFormat"in b&&(d=b.colorFormat));"depth"in b&&(f.depth=b.depth);"stencil"in b&&
(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=b.depthStencil)}else m=1;if(l)if(Array.isArray(l))for(b=[],d=0;d<l.length;++d)b[d]=l[d];else b=[l];else for(b=Array(g),l={radius:m,format:d,type:a},d=0;d<g;++d)b[d]=v.createCube(l);f.color=Array(b.length);for(d=0;d<b.length;++d)g=b[d],m=m||g.width,f.color[d]={target:34069,data:b[d]};for(d=0;6>d;++d){for(g=0;g<b.length;++g)f.color[g].target=34069+d;0<d&&(f.depth=e[0].depth,f.stencil=e[0].stencil,f.depthStencil=e[0].depthStencil);if(e[d])e[d](f);
else e[d]=C(f)}return p(c,{width:m,height:m,color:b})}var e=Array(6);c(b);return p(c,{faces:e,resize:function(b){var d=b|0;if(d===c.width)return c;var f=c.color;for(b=0;b<f.length;++b)f[b].resize(d);for(b=0;6>b;++b)e[b].resize(d);c.width=c.height=d;return c},_reglType:"framebufferCube",destroy:function(){e.forEach(function(b){b.destroy()})}})},clear:function(){t(J).forEach(F)},restore:function(){t(J).forEach(function(b){b.framebuffer=a.createFramebuffer();G(b)})}})}},{"./util/extend":23,"./util/values":32}],
13:[function(a,h,n){h.exports=function(a,p){var f=1;p.ext_texture_filter_anisotropic&&(f=a.getParameter(34047));var d=1,g=1;p.webgl_draw_buffers&&(d=a.getParameter(34852),g=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(p).filter(function(d){return!!p[d]}),maxAnisotropic:f,maxDrawbuffers:d,maxColorAttachments:g,
pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),
glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],14:[function(a,h,n){var t=a("./util/is-typed-array");h.exports=function(a,f,d,g,k,y){return function(k){var y;y=null===f.next?5121:f.next.colorAttachments[0].texture._texture.type;var u=0,q=0,l=g.framebufferWidth,e=g.framebufferHeight,c=null;t(k)?c=k:k&&(u=k.x|0,q=k.y|0,l=(k.width||g.framebufferWidth-u)|0,e=(k.height||g.framebufferHeight-q)|0,c=k.data||null);d();k=l*e*4;c||(5121===
y?c=new Uint8Array(k):5126===y&&(c=c||new Float32Array(k)));a.pixelStorei(3333,4);a.readPixels(u,q,l,e,6408,y,c);return c}}},{"./util/is-typed-array":27}],15:[function(a,h,n){var t=a("./util/values"),p=[];p[32854]=2;p[32855]=2;p[36194]=2;p[33189]=2;p[36168]=1;p[34041]=4;p[35907]=4;p[34836]=16;p[34842]=8;p[34843]=6;h.exports=function(f,d,a,k,y){function v(c){this.id=l++;this.refCount=1;this.renderbuffer=c;this.format=32854;this.height=this.width=0;y.profile&&(this.stats={size:0})}function w(c){var d=
c.renderbuffer;f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(d);c.renderbuffer=null;c.refCount=0;delete e[c.id];k.renderbufferCount--}var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(u.srgba=35907);d.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843);d.webgl_color_buffer_float&&(u.rgba32f=34836);var q=[];Object.keys(u).forEach(function(c){q[u[c]]=c});var l=0,e={};v.prototype.decRef=function(){0>=--this.refCount&&w(this)};
y.profile&&(k.getTotalRenderbufferSize=function(){var c=0;Object.keys(e).forEach(function(d){c+=e[d].stats.size});return c});return{create:function(c,d){function l(c,b){var e=0,d=0,m=32854;"object"===typeof c&&c?("shape"in c?(d=c.shape,e=d[0]|0,d=d[1]|0):("radius"in c&&(e=d=c.radius|0),"width"in c&&(e=c.width|0),"height"in c&&(d=c.height|0)),"format"in c&&(m=u[c.format])):"number"===typeof c?(e=c|0,d="number"===typeof b?b|0:e):c||(e=d=1);if(e!==a.width||d!==a.height||m!==a.format)return l.width=a.width=
e,l.height=a.height=d,a.format=m,f.bindRenderbuffer(36161,a.renderbuffer),f.renderbufferStorage(36161,m,e,d),y.profile&&(a.stats.size=p[a.format]*a.width*a.height),l.format=q[a.format],l}var a=new v(f.createRenderbuffer());e[a.id]=a;k.renderbufferCount++;l(c,d);l.resize=function(c,b){var e=c|0,d=b|0||e;if(e===a.width&&d===a.height)return l;l.width=a.width=e;l.height=a.height=d;f.bindRenderbuffer(36161,a.renderbuffer);f.renderbufferStorage(36161,a.format,e,d);y.profile&&(a.stats.size=p[a.format]*a.width*
a.height);return l};l._reglType="renderbuffer";l._renderbuffer=a;y.profile&&(l.stats=a.stats);l.destroy=function(){a.decRef()};return l},clear:function(){t(e).forEach(w)},restore:function(){t(e).forEach(function(c){c.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,c.renderbuffer);f.renderbufferStorage(36161,c.format,c.width,c.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/values":32}],16:[function(a,h,n){var t=a("./util/values");h.exports=function(a,f,d,g){function k(c,e,d,b){this.name=
c;this.id=e;this.location=d;this.info=b}function y(c,e){for(var d=0;d<c.length;++d)if(c[d].id===e.id){c[d].location=e.location;return}c.push(e)}function v(c,e,d){d=35632===c?q:l;var b=d[e];if(!b){var m=f.str(e),b=a.createShader(c);a.shaderSource(b,m);a.compileShader(b);d[e]=b}return b}function w(c,e){this.id=m++;this.fragId=c;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[];g.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(c,e){var d,b;d=v(35632,c.fragId);b=
v(35633,c.vertId);var m=c.program=a.createProgram();a.attachShader(m,d);a.attachShader(m,b);a.linkProgram(m);var l=a.getProgramParameter(m,35718);g.profile&&(c.stats.uniformsCount=l);var q=c.uniforms;for(d=0;d<l;++d)if(b=a.getActiveUniform(m,d))if(1<b.size)for(var u=0;u<b.size;++u){var w=b.name.replace("[0]","["+u+"]");y(q,new k(w,f.id(w),a.getUniformLocation(m,w),b))}else y(q,new k(b.name,f.id(b.name),a.getUniformLocation(m,b.name),b));l=a.getProgramParameter(m,35721);g.profile&&(c.stats.attributesCount=
l);q=c.attributes;for(d=0;d<l;++d)(b=a.getActiveAttrib(m,d))&&y(q,new k(b.name,f.id(b.name),a.getAttribLocation(m,b.name),b))}var q={},l={},e={},c=[],m=0;g.profile&&(d.getMaxUniformsCount=function(){var e=0;c.forEach(function(c){c.stats.uniformsCount>e&&(e=c.stats.uniformsCount)});return e},d.getMaxAttributesCount=function(){var e=0;c.forEach(function(c){c.stats.attributesCount>e&&(e=c.stats.attributesCount)});return e});return{clear:function(){var f=a.deleteShader.bind(a);t(q).forEach(f);q={};t(l).forEach(f);
l={};c.forEach(function(c){a.deleteProgram(c.program)});c.length=0;e={};d.shaderCount=0},program:function(f,m,a){d.shaderCount++;var b=e[m];b||(b=e[m]={});var l=b[f];l||(l=new w(m,f),u(l,a),b[f]=l,c.push(l));return l},restore:function(){q={};l={};for(var e=0;e<c.length;++e)u(c[e])},shader:v,frag:-1,vert:-1}}},{"./util/values":32}],17:[function(a,h,n){h.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},
{}],18:[function(a,h,n){h.exports=function(){var a={"":0},p=[""];return{id:function(f){var d=a[f];if(d)return d;d=a[f]=p.length;p.push(f);return d},str:function(f){return p[f]}}}},{}],19:[function(a,h,n){function t(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function p(b){return Array.isArray(b)&&0!==b.length&&e(b[0])?!0:!1}function f(b){return Object.prototype.toString.call(b)}function d(c){if(!c)return!1;var e=f(c);return 0<=b.indexOf(e)?!0:t(c)||p(c)||u(c)}function g(b,c){36193===
b.type?(b.data=l(c),q.freeType(c)):b.data=c}function k(b,c,e,d,f,m){b="undefined"!==typeof F[b]?F[b]:D[b]*x[c];m&&(b*=6);if(f){for(d=0;1<=e;)d+=b*e*e,e/=2;return d}return b*e*d}var y=a("./util/extend"),v=a("./util/values"),w=a("./util/is-typed-array"),u=a("./util/is-ndarray"),q=a("./util/pool"),l=a("./util/to-half-float"),e=a("./util/is-array-like"),c=a("./util/flatten");n=a("./constants/arraytypes.json");var m=a("./constants/arraytypes.json"),r=[9984,9986,9985,9987],z=[0,6409,6410,6407,6408],D={};
D[6409]=D[6406]=D[6402]=1;D[34041]=D[6410]=2;D[6407]=D[35904]=3;D[6408]=D[35906]=4;var b=Object.keys(n).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),x=[];x[5121]=1;x[5126]=4;x[36193]=2;x[5123]=2;x[5125]=4;var F=[];F[32854]=2;F[32855]=2;F[36194]=2;F[34041]=4;F[33776]=.5;F[33777]=.5;F[33778]=1;F[33779]=1;F[35986]=.5;F[35987]=1;F[34798]=1;F[35840]=.5;F[35841]=.25;F[35842]=.5;F[35843]=.25;F[36196]=.5;h.exports=function(b,
a,x,F,h,n,O){function J(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.channels=this.height=this.width=this.colorSpace=0}function I(b,c){b.internalformat=c.internalformat;b.format=c.format;b.type=c.type;b.compressed=c.compressed;b.premultiplyAlpha=c.premultiplyAlpha;b.flipY=c.flipY;b.unpackAlignment=c.unpackAlignment;b.colorSpace=c.colorSpace;b.width=c.width;b.height=c.height;b.channels=c.channels}function Q(b,
c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(b.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(b.flipY=c.flipY);"alignment"in c&&(b.unpackAlignment=c.alignment);"colorSpace"in c&&(b.colorSpace=oa[c.colorSpace]);"type"in c&&(b.type=da[c.type]);var e=b.width,d=b.height,f=b.channels,m=!1;"shape"in c?(e=c.shape[0],d=c.shape[1],3===c.shape.length&&(f=c.shape[2],m=!0)):("radius"in c&&(e=d=c.radius),"width"in c&&(e=c.width),"height"in c&&(d=c.height),"channels"in c&&(f=c.channels,m=!0));b.width=
e|0;b.height=d|0;b.channels=f|0;e=!1;"format"in c&&(e=c.format,d=b.internalformat=fa[e],b.format=Ga[d],e in da&&!("type"in c)&&(b.type=da[e]),e in ba&&(b.compressed=!0),e=!0);!m&&e?b.channels=D[b.format]:m&&!e&&b.channels!==z[b.format]&&(b.format=b.internalformat=z[b.channels])}}function L(c){b.pixelStorei(37440,c.flipY);b.pixelStorei(37441,c.premultiplyAlpha);b.pixelStorei(37443,c.colorSpace);b.pixelStorei(3317,c.unpackAlignment)}function A(){J.call(this);this.yOffset=this.xOffset=0;this.data=null;
this.needsFree=!1;this.element=null;this.needsCopy=!1}function K(b,a){var k=null;d(a)?k=a:a&&(Q(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),d(a.data)&&(k=a.data));if(a.copy){var r=h.viewportWidth,x=h.viewportHeight;b.width=b.width||r-b.xOffset;b.height=b.height||x-b.yOffset;b.needsCopy=!0}else if(!k)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(w(k))b.channels=b.channels||4,b.data=k,"type"in a||5121!==b.type||(b.type=m[Object.prototype.toString.call(k)]|0);
else if(t(k)){b.channels=b.channels||4;r=k;x=r.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:x=q.allocType(b.type,x);x.set(r);b.data=x;break;case 36193:b.data=l(r)}b.alignment=1;b.needsFree=!0}else if(u(k)){r=k.data;Array.isArray(r)||5121!==b.type||(b.type=m[Object.prototype.toString.call(r)]|0);var x=k.shape,A=k.stride,y,v,F,K;3===x.length?(F=x[2],K=A[2]):K=F=1;y=x[0];v=x[1];x=A[0];A=A[1];b.alignment=1;b.width=y;b.height=v;b.channels=F;b.format=b.internalformat=z[F];b.needsFree=!0;
y=K;k=k.offset;F=b.width;K=b.height;v=b.channels;for(var C=q.allocType(36193===b.type?5126:b.type,F*K*v),D=0,G=0;G<K;++G)for(var P=0;P<F;++P)for(var n=0;n<v;++n)C[D++]=r[x*P+A*G+y*n+k];g(b,C)}else if("[object HTMLCanvasElement]"===f(k)||"[object CanvasRenderingContext2D]"===f(k))"[object HTMLCanvasElement]"===f(k)?b.element=k:b.element=k.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if("[object HTMLImageElement]"===f(k))b.element=k,b.width=k.naturalWidth,b.height=k.naturalHeight,
b.channels=4;else if("[object HTMLVideoElement]"===f(k))b.element=k,b.width=k.videoWidth,b.height=k.videoHeight,b.channels=4;else if(p(k)){r=b.width||k[0].length;x=b.height||k.length;A=b.channels;A=e(k[0][0])?A||k[0][0].length:A||1;y=c.shape(k);F=1;for(K=0;K<y.length;++K)F*=y[K];F=q.allocType(36193===b.type?5126:b.type,F);c.flatten(k,y,"",F);g(b,F);b.alignment=1;b.width=r;b.height=x;b.channels=A;b.format=b.internalformat=z[A];b.needsFree=!0}}function P(c,e,d,f,a){var m=c.element,l=c.data,k=c.internalformat,
g=c.format,r=c.type,x=c.width,q=c.height;L(c);m?b.texSubImage2D(e,a,d,f,g,r,m):c.compressed?b.compressedTexSubImage2D(e,a,d,f,k,x,q,l):c.needsCopy?(F(),b.copyTexSubImage2D(e,a,d,f,c.xOffset,c.yOffset,x,q)):b.texSubImage2D(e,a,d,f,x,q,g,r,l)}function U(){return Fa.pop()||new A}function Y(b){b.needsFree&&q.freeType(b.data);A.call(b);Fa.push(b)}function V(){J.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function M(b,c,e){var d=b.images[0]=U();b.mipmask=1;d.width=
b.width=c;d.height=b.height=e;d.channels=b.channels=4}function W(b,c){var e=null;if(d(c))e=b.images[0]=U(),I(e,b),K(e,c),b.mipmask=1;else if(Q(b,c),Array.isArray(c.mipmap))for(var f=c.mipmap,a=0;a<f.length;++a)e=b.images[a]=U(),I(e,b),e.width>>=a,e.height>>=a,K(e,f[a]),b.mipmask|=1<<a;else e=b.images[0]=U(),I(e,b),K(e,c),b.mipmask=1;I(b,b.images[0])}function T(c,e){for(var d=c.images,f=0;f<d.length&&d[f];++f){var a=d[f],m=e,l=f,k=a.element,g=a.data,r=a.internalformat,x=a.format,q=a.type,A=a.width,
u=a.height;L(a);k?b.texImage2D(m,l,x,x,q,k):a.compressed?b.compressedTexImage2D(m,l,r,A,u,0,g):a.needsCopy?(F(),b.copyTexImage2D(m,l,x,a.xOffset,a.yOffset,A,u,0)):b.texImage2D(m,l,x,A,u,0,x,q,g)}}function X(){var b=Ca.pop()||new V;J.call(b);for(var c=b.mipmask=0;16>c;++c)b.images[c]=null;return b}function S(b){for(var c=b.images,e=0;e<c.length;++e)c[e]&&Y(c[e]),c[e]=null;Ca.push(b)}function R(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=
4352}function aa(b,c){"min"in c&&(b.minFilter=Z[c.min],0<=r.indexOf(b.minFilter)&&(b.genMipmaps=!0));"mag"in c&&(b.magFilter=ja[c.mag]);var e=b.wrapS,d=b.wrapT;if("wrap"in c){var f=c.wrap;"string"===typeof f?e=d=ea[f]:Array.isArray(f)&&(e=ea[f[0]],d=ea[f[1]])}else"wrapS"in c&&(e=ea[c.wrapS]),"wrapT"in c&&(d=ea[c.wrapT]);b.wrapS=e;b.wrapT=d;"anisotropic"in c&&(b.anisotropic=c.anisotropic);if("mipmap"in c){e=!1;switch(typeof c.mipmap){case "string":b.mipmapHint=ia[c.mipmap];e=b.genMipmaps=!0;break;
case "boolean":e=b.genMipmaps=c.mipmap;break;case "object":b.genMipmaps=!1,e=!0}!e||"min"in c||(b.minFilter=9984)}}function ca(c,e){b.texParameteri(e,10241,c.minFilter);b.texParameteri(e,10240,c.magFilter);b.texParameteri(e,10242,c.wrapS);b.texParameteri(e,10243,c.wrapT);a.ext_texture_filter_anisotropic&&b.texParameteri(e,34046,c.anisotropic);c.genMipmaps&&(b.hint(33170,c.mipmapHint),b.generateMipmap(e))}function la(c){J.call(this);this.mipmask=0;this.internalformat=6408;this.id=ta++;this.refCount=
1;this.target=c;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new R;O.profile&&(this.stats={size:0})}function ha(c){b.activeTexture(33984);b.bindTexture(c.target,c.texture)}function ka(){var c=na[0];c?b.bindTexture(c.target,c.texture):b.bindTexture(3553,null)}function ma(c){var e=c.texture,d=c.unit,f=c.target;0<=d&&(b.activeTexture(33984+d),b.bindTexture(f,null),na[d]=null);b.deleteTexture(e);c.texture=null;c.params=null;c.pixels=null;c.refCount=0;delete ga[c.id];n.textureCount--}
var ia={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ea={repeat:10497,clamp:33071,mirror:33648},ja={nearest:9728,linear:9729},Z=y({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},ja),oa={none:0,browser:37444},da={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},fa={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ba={};a.ext_srgb&&(fa.srgb=35904,
fa.srgba=35906);a.oes_texture_float&&(da.float32=da["float"]=5126);a.oes_texture_half_float&&(da.float16=da["half float"]=36193);a.webgl_depth_texture&&(y(fa,{depth:6402,"depth stencil":34041}),y(da,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&y(ba,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&y(ba,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});
a.webgl_compressed_texture_pvrtc&&y(ba,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(ba["rgb etc1"]=36196);var za=Array.prototype.slice.call(b.getParameter(34467));Object.keys(ba).forEach(function(b){var c=ba[b];0<=za.indexOf(c)&&(fa[b]=c)});var wa=Object.keys(fa);x.textureFormats=wa;var xa=[];Object.keys(fa).forEach(function(b){xa[fa[b]]=b});var Aa=[];Object.keys(da).forEach(function(b){Aa[da[b]]=b});var Ba=
[];Object.keys(ja).forEach(function(b){Ba[ja[b]]=b});var ua=[];Object.keys(Z).forEach(function(b){ua[Z[b]]=b});var va=[];Object.keys(ea).forEach(function(b){va[ea[b]]=b});var Ga=wa.reduce(function(b,c){var e=fa[c];6409===e||6406===e||6409===e||6410===e||6402===e||34041===e?b[e]=e:32855===e||0<=c.indexOf("rgba")?b[e]=6408:b[e]=6407;return b},{}),Fa=[],Ca=[],ta=0,ga={},pa=x.maxTextureUnits,na=Array(pa).map(function(){return null});y(la.prototype,{bind:function(){this.bindCount+=1;var c=this.unit;if(0>
c){for(var e=0;e<pa;++e){var d=na[e];if(d){if(0<d.bindCount)continue;d.unit=-1}na[e]=this;c=e;break}O.profile&&n.maxTextureUnits<c+1&&(n.maxTextureUnits=c+1);this.unit=c;b.activeTexture(33984+c);b.bindTexture(this.target,this.texture)}return c},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ma(this)}});O.profile&&(n.getTotalTextureSize=function(){var b=0;Object.keys(ga).forEach(function(c){b+=ga[c].stats.size});return b});return{create2D:function(c,e){function d(b,c){var e=
f.texInfo;R.call(e);var a=X();"number"===typeof b?"number"===typeof c?M(a,b|0,c|0):M(a,b|0,b|0):b?(aa(e,b),W(a,b)):M(a,1,1);e.genMipmaps&&(a.mipmask=(a.width<<1)-1);f.mipmask=a.mipmask;I(f,a);f.internalformat=a.internalformat;d.width=a.width;d.height=a.height;ha(f);T(a,3553);ca(e,3553);ka();S(a);O.profile&&(f.stats.size=k(f.internalformat,f.type,a.width,a.height,e.genMipmaps,!1));d.format=xa[f.internalformat];d.type=Aa[f.type];d.mag=Ba[e.magFilter];d.min=ua[e.minFilter];d.wrapS=va[e.wrapS];d.wrapT=
va[e.wrapT];return d}var f=new la(3553);ga[f.id]=f;n.textureCount++;d(c,e);d.subimage=function(b,c,e,a){c|=0;e|=0;a|=0;var m=U();I(m,f);m.width=0;m.height=0;K(m,b);m.width=m.width||(f.width>>a)-c;m.height=m.height||(f.height>>a)-e;ha(f);P(m,3553,c,e,a);ka();Y(m);return d};d.resize=function(c,e){var a=c|0,m=e|0||a;if(a===f.width&&m===f.height)return d;d.width=f.width=a;d.height=f.height=m;ha(f);for(var l=0;f.mipmask>>l;++l)b.texImage2D(3553,l,f.format,a>>l,m>>l,0,f.format,f.type,null);ka();O.profile&&
(f.stats.size=k(f.internalformat,f.type,a,m,!1,!1));return d};d._reglType="texture2d";d._texture=f;O.profile&&(d.stats=f.stats);d.destroy=function(){f.decRef()};return d},createCube:function(c,e,d,f,a,m){function l(b,c,e,d,f,a){var m,x=g.texInfo;R.call(x);for(m=0;6>m;++m)r[m]=X();if("number"===typeof b||!b)for(b=b|0||1,m=0;6>m;++m)M(r[m],b,b);else if("object"===typeof b)if(c)W(r[0],b),W(r[1],c),W(r[2],e),W(r[3],d),W(r[4],f),W(r[5],a);else if(aa(x,b),Q(g,b),"faces"in b)for(b=b.faces,m=0;6>m;++m)I(r[m],
g),W(r[m],b[m]);else for(m=0;6>m;++m)W(r[m],b);I(g,r[0]);g.mipmask=x.genMipmaps?(r[0].width<<1)-1:r[0].mipmask;g.internalformat=r[0].internalformat;l.width=r[0].width;l.height=r[0].height;ha(g);for(m=0;6>m;++m)T(r[m],34069+m);ca(x,34067);ka();O.profile&&(g.stats.size=k(g.internalformat,g.type,l.width,l.height,x.genMipmaps,!0));l.format=xa[g.internalformat];l.type=Aa[g.type];l.mag=Ba[x.magFilter];l.min=ua[x.minFilter];l.wrapS=va[x.wrapS];l.wrapT=va[x.wrapT];for(m=0;6>m;++m)S(r[m]);return l}var g=new la(34067);
ga[g.id]=g;n.cubeCount++;var r=Array(6);l(c,e,d,f,a,m);l.subimage=function(b,c,e,d,f){e|=0;d|=0;f|=0;var a=U();I(a,g);a.width=0;a.height=0;K(a,c);a.width=a.width||(g.width>>f)-e;a.height=a.height||(g.height>>f)-d;ha(g);P(a,34069+b,e,d,f);ka();Y(a);return l};l.resize=function(c){c|=0;if(c!==g.width){l.width=g.width=c;l.height=g.height=c;ha(g);for(var e=0;6>e;++e)for(var d=0;g.mipmask>>d;++d)b.texImage2D(34069+e,d,g.format,c>>d,c>>d,0,g.format,g.type,null);ka();O.profile&&(g.stats.size=k(g.internalformat,
g.type,l.width,l.height,!1,!0));return l}};l._reglType="textureCube";l._texture=g;O.profile&&(l.stats=g.stats);l.destroy=function(){g.decRef()};return l},clear:function(){for(var c=0;c<pa;++c)b.activeTexture(33984+c),b.bindTexture(3553,null),na[c]=null;v(ga).forEach(ma);n.cubeCount=0;n.textureCount=0},getTexture:function(b){return null},restore:function(){v(ga).forEach(function(c){c.texture=b.createTexture();b.bindTexture(c.target,c.texture);for(var e=0;32>e;++e)if(0!==(c.mipmask&1<<e))if(3553===
c.target)b.texImage2D(3553,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,c.type,null);else for(var d=0;6>d;++d)b.texImage2D(34069+d,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,c.type,null);ca(c.texInfo,c.target)})}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/flatten":24,"./util/is-array-like":25,"./util/is-ndarray":26,"./util/is-typed-array":27,"./util/pool":29,"./util/to-half-float":31,"./util/values":32}],20:[function(a,h,n){h.exports=function(a,
p){function f(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function d(d,e,c){var a=v.pop()||new f;a.startQueryIndex=d;a.endQueryIndex=e;a.sum=0;a.stats=c;w.push(a)}var g=p.ext_disjoint_timer_query;if(!g)return null;var k=[],y=[],v=[],w=[],u=[],q=[];return{beginQuery:function(f){var e=k.pop()||g.createQueryEXT();g.beginQueryEXT(35007,e);y.push(e);d(y.length-1,y.length,f)},endQuery:function(){g.endQueryEXT(35007)},pushScopeStats:d,update:function(){var d,e;d=y.length;if(0!==
d){q.length=Math.max(q.length,d+1);u.length=Math.max(u.length,d+1);u[0]=0;var c=q[0]=0;for(e=d=0;e<y.length;++e){var f=y[e];g.getQueryObjectEXT(f,34919)?(c+=g.getQueryObjectEXT(f,34918),k.push(f)):y[d++]=f;u[e+1]=c;q[e+1]=d}y.length=d;for(e=d=0;e<w.length;++e){var c=w[e],a=c.startQueryIndex,f=c.endQueryIndex;c.sum+=u[f]-u[a];a=q[a];f=q[f];f===a?(c.stats.gpuTime+=c.sum/1E6,v.push(c)):(c.startQueryIndex=a,c.endQueryIndex=f,w[d++]=c)}w.length=d}},getNumPendingQueries:function(){return y.length},clear:function(){k.push.apply(k,
y);for(var d=0;d<k.length;d++)g.deleteQueryEXT(k[d]);y.length=0;k.length=0},restore:function(){y.length=0;k.length=0}}}},{}],21:[function(a,h,n){h.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(a,h,n){function t(d){return Array.prototype.slice.call(d)}function p(d){return t(d).join("")}var f=a("./extend");h.exports=function(){function d(){var d=[],a=[];return f(function(){d.push.apply(d,t(arguments))},{def:function(){var e=
"v"+k++;a.push(e);0<arguments.length&&(d.push(e,"="),d.push.apply(d,t(arguments)),d.push(";"));return e},toString:function(){return p([0<a.length?"var "+a+";":"",p(d)])}})}function a(){function g(c,d){e(c,d,"=",l.def(c,d),";")}var l=d(),e=d(),c=l.toString,m=e.toString;return f(function(){l.apply(l,t(arguments))},{def:l.def,entry:l,exit:e,save:g,set:function(c,e,d){g(c,e);l(c,e,"=",d,";")},toString:function(){return c()+m()}})}var k=0,y=[],v=[],w=d(),u={};return{global:w,link:function(d){for(var f=
0;f<v.length;++f)if(v[f]===d)return y[f];f="g"+k++;y.push(f);v.push(d);return f},block:d,proc:function(d,l){function e(){var e="a"+c.length;c.push(e);return e}var c=[];l=l||0;for(var m=0;m<l;++m)e();var m=a(),k=m.toString;return u[d]=f(m,{arg:e,toString:function(){return p(["function(",c.join(),"){",k(),"}"])}})},scope:a,cond:function(){var d=p(arguments),l=a(),e=a(),c=l.toString,m=e.toString;return f(l,{then:function(){l.apply(l,t(arguments));return this},"else":function(){e.apply(e,t(arguments));
return this},toString:function(){var e=m();e&&(e="else{"+e+"}");return p(["if(",d,"){",c(),"}",e])}})},compile:function(){var d=['"use strict";',w,"return {"];Object.keys(u).forEach(function(e){d.push('"',e,'":',u[e].toString(),",")});d.push("}");var f=p(d).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,y.concat(f)).apply(null,v)}}}},{"./extend":23}],23:[function(a,h,n){h.exports=function(a,p){for(var f=Object.keys(p),d=0;d<f.length;++d)a[f[d]]=p[f[d]];return a}},
{}],24:[function(a,h,n){function t(d,f,a,p,v,w){for(var u=0;u<f;++u)for(var q=d[u],l=0;l<a;++l)for(var e=q[l],c=0;c<p;++c)v[w++]=e[c]}function p(d,f,a,y,v){for(var w=1,u=a+1;u<f.length;++u)w*=f[u];var q=f[a];if(4===f.length-a){var l=f[a+1],e=f[a+2];f=f[a+3];for(u=0;u<q;++u)t(d[u],l,e,f,y,v),v+=w}else for(u=0;u<q;++u)p(d[u],f,a+1,y,v),v+=w}var f=a("./pool");h.exports={shape:function(d){for(var f=[];d.length;d=d[0])f.push(d.length);return f},flatten:function(d,a,k,y){var v=1;if(a.length)for(var w=0;w<
a.length;++w)v*=a[w];else v=0;k=y||f.allocType(k,v);switch(a.length){case 0:break;case 1:y=a[0];for(a=0;a<y;++a)k[a]=d[a];break;case 2:y=a[0];a=a[1];for(w=v=0;w<y;++w)for(var u=d[w],q=0;q<a;++q)k[v++]=u[q];break;case 3:t(d,a[0],a[1],a[2],k,0);break;default:p(d,a,0,k,0)}return k}}},{"./pool":29}],25:[function(a,h,n){var t=a("./is-typed-array");h.exports=function(a){return Array.isArray(a)||t(a)}},{"./is-typed-array":27}],26:[function(a,h,n){var t=a("./is-typed-array");h.exports=function(a){return!!a&&
"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}},{"./is-typed-array":27}],27:[function(a,h,n){var t=a("../constants/arraytypes.json");h.exports=function(a){return Object.prototype.toString.call(a)in t}},{"../constants/arraytypes.json":4}],28:[function(a,h,n){h.exports=function(a,p){for(var f=Array(a),d=0;d<a;++d)f[d]=p(d);return f}},{}],29:[function(a,h,n){function t(d){var f,a;
f=(65535<d)<<4;d>>>=f;a=(255<d)<<3;d>>>=a;f|=a;a=(15<d)<<2;d>>>=a;f|=a;a=(3<d)<<1;return f|a|d>>>a>>1}function p(f){a:{for(var a=16;268435456>=a;a*=16)if(f<=a){f=a;break a}f=0}a=d[t(f)>>2];return 0<a.length?a.pop():new ArrayBuffer(f)}function f(f){d[t(f.byteLength)>>2].push(f)}var d=a("./loop")(8,function(){return[]});h.exports={alloc:p,free:f,allocType:function(d,f){var a=null;switch(d){case 5120:a=new Int8Array(p(f),0,f);break;case 5121:a=new Uint8Array(p(f),0,f);break;case 5122:a=new Int16Array(p(2*
f),0,f);break;case 5123:a=new Uint16Array(p(2*f),0,f);break;case 5124:a=new Int32Array(p(4*f),0,f);break;case 5125:a=new Uint32Array(p(4*f),0,f);break;case 5126:a=new Float32Array(p(4*f),0,f);break;default:return null}return a.length!==f?a.subarray(0,f):a},freeType:function(d){f(d.buffer)}}},{"./loop":28}],30:[function(a,h,n){h.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:
{next:function(a){return setTimeout(a,16)},cancel:clearTimeout}},{}],31:[function(a,h,n){var t=a("./pool"),p=new Float32Array(1),f=new Uint32Array(p.buffer);h.exports=function(d){for(var a=t.allocType(5123,d.length),k=0;k<d.length;++k)if(isNaN(d[k]))a[k]=65535;else if(Infinity===d[k])a[k]=31744;else if(-Infinity===d[k])a[k]=64512;else{p[0]=d[k];var y=f[0],v=y>>>31<<15,w=(y<<1>>>24)-127,y=y>>13&1023;a[k]=-24>w?v:-14>w?v+(y+1024>>-14-w):15<w?v+31744:v+(w+15<<10)+y}return a}},{"./pool":29}],32:[function(a,
h,n){h.exports=function(a){return Object.keys(a).map(function(p){return a[p]})}},{}],33:[function(a,h,n){function t(d,f,a){function p(){var f=window.innerWidth,l=window.innerHeight;d!==document.body&&(l=d.getBoundingClientRect(),f=l.right-l.left,l=l.top-l.bottom);u.width=a*f;u.height=a*l;g(u.style,{width:f+"px",height:l+"px"})}var u=document.createElement("canvas");g(u.style,{border:0,margin:0,padding:0,top:0,left:0});d.appendChild(u);d===document.body&&(u.style.position="absolute",g(d.style,{margin:0,
padding:0}));window.addEventListener("resize",p,!1);p();return{canvas:u,onDestroy:function(){window.removeEventListener("resize",p);d.removeChild(u)}}}function p(d,f){function a(g){try{return d.getContext(g,f)}catch(u){return null}}return a("webgl")||a("experimental-webgl")||a("webgl-experimental")}function f(d){return"string"===typeof d?d.split():d}function d(d){return"string"===typeof d?document.querySelector(d):d}var g=a("./util/extend");h.exports=function(a){var g=a||{},v,w,u,q;a={};var l=[],
e=[],c="undefined"===typeof window?1:window.devicePixelRatio,m=!1,r=function(c){},z=function(){};"string"===typeof g?v=document.querySelector(g):"object"===typeof g&&("string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?v=g:"function"===typeof g.drawArrays||"function"===typeof g.drawElements?(q=g,u=q.canvas):("gl"in g?q=g.gl:"canvas"in g?u=d(g.canvas):"container"in g&&(w=d(g.container)),"attributes"in g&&(a=g.attributes),"extensions"in g&&(l=
f(g.extensions)),"optionalExtensions"in g&&(e=f(g.optionalExtensions)),"onDone"in g&&(r=g.onDone),"profile"in g&&(m=!!g.profile),"pixelRatio"in g&&(c=+g.pixelRatio)));v&&("canvas"===v.nodeName.toLowerCase()?u=v:w=v);if(!q){if(!u){v=t(w||document.body,r,c);if(!v)return null;u=v.canvas;z=v.onDestroy}q=p(u,a)}return q?{gl:q,canvas:u,container:w,extensions:l,optionalExtensions:e,pixelRatio:c,profile:m,onDone:r,onDestroy:z}:(z(),r("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/extend":23}],34:[function(a,h,n){function t(d,f,a){for(var v=[],w=f;w<a;w+=3)f=(d[w]<<16)+(d[w+1]<<8)+d[w+2],v.push(p[f>>18&63]+p[f>>12&63]+p[f>>6&63]+p[f&63]);return v.join("")}n.toByteArray=function(a){var k,p,v,w,u;k=a.length;if(0<k%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===a[k-2]?2:"="===a[k-1]?1:0;u=new d(3*k/4-w);p=0<w?k-4:k;var q=0;for(k=0;k<p;k+=4)v=f[a.charCodeAt(k)]<<18|f[a.charCodeAt(k+1)]<<12|f[a.charCodeAt(k+2)]<<6|f[a.charCodeAt(k+3)],u[q++]=
v>>16&255,u[q++]=v>>8&255,u[q++]=v&255;2===w?(v=f[a.charCodeAt(k)]<<2|f[a.charCodeAt(k+1)]>>4,u[q++]=v&255):1===w&&(v=f[a.charCodeAt(k)]<<10|f[a.charCodeAt(k+1)]<<4|f[a.charCodeAt(k+2)]>>2,u[q++]=v>>8&255,u[q++]=v&255);return u};n.fromByteArray=function(d){for(var f=d.length,a=f%3,v="",w=[],u=0,q=f-a;u<q;u+=16383)w.push(t(d,u,u+16383>q?q:u+16383));1===a?(d=d[f-1],v+=p[d>>2],v+=p[d<<4&63],v+="=="):2===a&&(d=(d[f-2]<<8)+d[f-1],v+=p[d>>10],v+=p[d>>4&63],v+=p[d<<2&63],v+="=");w.push(v);return w.join("")};
var p=[],f=[],d="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var d=0;64>d;++d)p[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d],f["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(d)]=d;f[45]=62;f[95]=63})()},{}],35:[function(a,h,n){var t=a("./lib/rationalize");h.exports=function(a,f){return t(a[0].mul(f[1]).add(f[0].mul(a[1])),a[1].mul(f[1]))}},{"./lib/rationalize":45}],36:[function(a,h,n){h.exports=function(a,p){return a[0].mul(p[1]).cmp(p[0].mul(a[1]))}},
{}],37:[function(a,h,n){var t=a("./lib/rationalize");h.exports=function(a,f){return t(a[0].mul(f[1]),a[1].mul(f[0]))}},{"./lib/rationalize":45}],38:[function(a,h,n){function t(a,w){if(p(a))return w?y(a,t(w)):[a[0].clone(),a[1].clone()];var u=0,q,l;if(f(a))q=a.clone();else if("string"===typeof a)q=g(a);else{if(0===a)return[d(0),d(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),u-=256;q=d(a)}if(p(w))q.mul(w[1]),l=w[0].clone();else if(f(w))l=w.clone();else if("string"===typeof w)l=
g(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),u+=256;l=d(w)}else l=d(1);0<u?q=q.shln(u):0>u&&(l=l.shln(-u));return k(q,l)}var p=a("./is-rat"),f=a("./lib/is-bn"),d=a("./lib/num-to-bn"),g=a("./lib/str-to-bn"),k=a("./lib/rationalize"),y=a("./div");h.exports=t},{"./div":37,"./is-rat":39,"./lib/is-bn":43,"./lib/num-to-bn":44,"./lib/rationalize":45,"./lib/str-to-bn":46}],39:[function(a,h,n){var t=a("./lib/is-bn");h.exports=function(a){return Array.isArray(a)&&2===a.length&&
t(a[0])&&t(a[1])}},{"./lib/is-bn":43}],40:[function(a,h,n){var t=a("bn.js");h.exports=function(a){return a.cmp(new t(0))}},{"bn.js":48}],41:[function(a,h,n){h.exports=function(a){var p=a.length,f=a.words,d=0;if(1===p)d=f[0];else if(2===p)d=f[0]+67108864*f[1];else for(var g=d=0;g<p;g++)d+=f[g]*Math.pow(67108864,g);return a.sign?-d:d}},{}],42:[function(a,h,n){var t=a("double-bits"),p=a("bit-twiddle").countTrailingZeros;h.exports=function(f){var d=p(t.lo(f));if(32>d)return d;f=p(t.hi(f));return 20<f?
52:f+32}},{"bit-twiddle":53,"double-bits":75}],43:[function(a,h,n){a("bn.js");h.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":48}],44:[function(a,h,n){var t=a("bn.js"),p=a("double-bits");h.exports=function(f){var d=p.exponent(f);return 52>d?new t(f):(new t(f*Math.pow(2,52-d))).shln(d-52)}},{"bn.js":48,"double-bits":75}],45:[function(a,h,n){var t=a("./num-to-bn"),p=a("./bn-sign");h.exports=function(f,d){var a=p(f),k=p(d);if(0===a)return[t(0),t(1)];if(0===k)return[t(0),t(0)];
0>k&&(f=f.neg(),d=d.neg());a=f.gcd(d);return a.cmpn(1)?[f.div(a),d.div(a)]:[f,d]}},{"./bn-sign":40,"./num-to-bn":44}],46:[function(a,h,n){var t=a("bn.js");h.exports=function(a){return new t(a)}},{"bn.js":48}],47:[function(a,h,n){var t=a("./lib/rationalize");h.exports=function(a,f){return t(a[0].mul(f[0]),a[1].mul(f[1]))}},{"./lib/rationalize":45}],48:[function(a,h,n){(function(a,p){function f(b,c){if(!b)throw Error(c||"Assertion failed");}function d(b,c){b.super_=c;var e=function(){};e.prototype=
c.prototype;b.prototype=new e;b.prototype.constructor=b}function g(b,c,e){if(null!==b&&"object"===typeof b&&Array.isArray(b.words))return b;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===c||"be"===c)e=c,c=10;null!==b&&this._init(b||0,c||10,e||"be")}function k(b,c,e){var d=0;for(e=Math.min(b.length,e);c<e;c++)var f=b.charCodeAt(c)-48,d=d<<4,d=49<=f&&54>=f?d|f-49+10:17<=f&&22>=f?d|f-17+10:d|f&15;return d}function y(b,c,e,d){var f=0;for(e=Math.min(b.length,e);c<e;c++)var a=b.charCodeAt(c)-
48,f=f*d,f=49<=a?f+(a-49+10):17<=a?f+(a-17+10):f+a;return f}function v(b,c){this.name=b;this.p=new g(c,16);this.n=this.p.bitLength();this.k=(new g(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){v.call(this,
"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function e(b){"string"===typeof b?(b=g._prime(b),this.m=b.p,this.prime=b):(this.m=b,this.prime=null)}function c(b){e.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new g(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===
typeof a?a.exports=g:p.BN=g;g.BN=g;g.wordSize=26;g.prototype._init=function(b,c,e){if("number"===typeof b)return this._initNumber(b,c,e);if("object"===typeof b)return this._initArray(b,c,e);"hex"===c&&(c=16);f(c===(c|0)&&2<=c&&36>=c);b=b.toString().replace(/\s+/g,"");var d=0;"-"===b[0]&&d++;16===c?this._parseHex(b,d):this._parseBase(b,c,d);"-"===b[0]&&(this.sign=!0);this.strip();"le"===e&&this._initArray(this.toArray(),c,e)};g.prototype._initNumber=function(b,c,e){0>b&&(this.sign=!0,b=-b);67108864>
b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(f(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===e&&this._initArray(this.toArray(),c,e)};g.prototype._initArray=function(b,c,e){f("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(c=0;c<this.length;c++)this.words[c]=0;var d=0;if("be"===
e)for(c=b.length-1,e=0;0<=c;c-=3){var a=b[c]|b[c-1]<<8|b[c-2]<<16;this.words[e]|=a<<d&67108863;this.words[e+1]=a>>>26-d&67108863;d+=24;26<=d&&(d-=26,e++)}else if("le"===e)for(e=c=0;c<b.length;c+=3)a=b[c]|b[c+1]<<8|b[c+2]<<16,this.words[e]|=a<<d&67108863,this.words[e+1]=a>>>26-d&67108863,d+=24,26<=d&&(d-=26,e++);return this.strip()};g.prototype._parseHex=function(b,c){this.length=Math.ceil((b.length-c)/6);this.words=Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;for(var d=0,e=b.length-
6,f=0;e>=c;e-=6){var a=k(b,e,e+6);this.words[f]|=a<<d&67108863;this.words[f+1]|=a>>>26-d&4194303;d+=24;26<=d&&(d-=26,f++)}e+6!==c&&(a=k(b,c,e+6),this.words[f]|=a<<d&67108863,this.words[f+1]|=a>>>26-d&4194303);this.strip()};g.prototype._parseBase=function(b,c,e){this.words=[0];this.length=1;for(var d=0,f=1;67108863>=f;f*=c)d++;d--;for(var f=f/c|0,a=b.length-e,m=a%d,l=Math.min(a,a-m)+e,a=0;e<l;e+=d)a=y(b,e,e+d,c),this.imuln(f),67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a);if(0!==m){d=1;a=
y(b,e,b.length,c);for(e=0;e<m;e++)d*=c;this.imuln(d);67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a)}};g.prototype.copy=function(b){b.words=Array(this.length);for(var c=0;c<this.length;c++)b.words[c]=this.words[c];b.length=this.length;b.sign=this.sign;b.red=this.red};g.prototype.clone=function(){var b=new g(null);this.copy(b);return b};g.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};g.prototype._normSign=function(){1===
this.length&&0===this.words[0]&&(this.sign=!1);return this};g.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
r=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];g.prototype.toString=function(b,c){b=b||10;if(16===b||"hex"===b){var e="",d=0;c=c|0||1;for(var a=0,l=0;l<this.length;l++){var g=
this.words[l],k=((g<<d|a)&16777215).toString(16),a=g>>>24-d&16777215,e=0!==a||l!==this.length-1?m[6-k.length]+k+e:k+e,d=d+2;26<=d&&(d-=26,l--)}for(0!==a&&(e=a.toString(16)+e);0!==e.length%c;)e="0"+e;this.sign&&(e="-"+e);return e}if(b===(b|0)&&2<=b&&36>=b){d=r[b];a=z[b];e="";l=this.clone();for(l.sign=!1;0!==l.cmpn(0);)g=l.modn(a).toString(b),l=l.idivn(a),e=0!==l.cmpn(0)?m[d-g.length]+g+e:g+e;0===this.cmpn(0)&&(e="0"+e);this.sign&&(e="-"+e);return e}f(!1,"Base should be between 2 and 36")};g.prototype.toJSON=
function(){return this.toString(16)};g.prototype.toArray=function(b){this.strip();var c=Array(this.byteLength());c[0]=0;var e=this.clone();if("le"!==b)for(b=0;0!==e.cmpn(0);b++){var d=e.andln(255);e.ishrn(8);c[c.length-b-1]=d}else for(b=0;0!==e.cmpn(0);b++)d=e.andln(255),e.ishrn(8),c[b]=d;return c};g.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var c=0;4096<=b&&(c+=13,b>>>=13);64<=b&&(c+=7,b>>>=7);8<=b&&(c+=4,b>>>=4);2<=b&&(c+=2,b>>>=2);return c+b};g.prototype._zeroBits=
function(b){if(0===b)return 26;var c=0;0===(b&8191)&&(c+=13,b>>>=13);0===(b&127)&&(c+=7,b>>>=7);0===(b&15)&&(c+=4,b>>>=4);0===(b&3)&&(c+=2,b>>>=2);0===(b&1)&&c++;return c};g.prototype.bitLength=function(){var b=0,b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};g.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var b=0,c=0;c<this.length;c++){var e=this._zeroBits(this.words[c]),b=b+e;if(26!==e)break}return b};g.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};g.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var b=this.clone();b.sign=!this.sign;return b};g.prototype.ior=function(b){for(this.sign=this.sign||b.sign;this.length<b.length;)this.words[this.length++]=0;for(var c=0;c<b.length;c++)this.words[c]|=b.words[c];return this.strip()};g.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};g.prototype.iand=function(b){this.sign=this.sign&&b.sign;var c;c=this.length>b.length?b:this;for(var e=
0;e<c.length;e++)this.words[e]&=b.words[e];this.length=c.length;return this.strip()};g.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};g.prototype.ixor=function(b){this.sign=this.sign||b.sign;var c;this.length>b.length?c=this:(c=b,b=this);for(var e=0;e<b.length;e++)this.words[e]=c.words[e]^b.words[e];if(this!==c)for(;e<c.length;e++)this.words[e]=c.words[e];this.length=c.length;return this.strip()};g.prototype.xor=function(b){return this.length>b.length?
this.clone().ixor(b):b.clone().ixor(this)};g.prototype.setn=function(b,c){f("number"===typeof b&&0<=b);for(var e=b/26|0,d=b%26;this.length<=e;)this.words[this.length++]=0;this.words[e]=c?this.words[e]|1<<d:this.words[e]&~(1<<d);return this.strip()};g.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var c=this.isub(b);this.sign=!this.sign;return this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,c=this.isub(b),b.sign=!0,c._normSign();var e;this.length>b.length?e=this:(e=b,b=this);
for(var d=c=0;d<b.length;d++)c=e.words[d]+b.words[d]+c,this.words[d]=c&67108863,c>>>=26;for(;0!==c&&d<e.length;d++)c=e.words[d]+c,this.words[d]=c&67108863,c>>>=26;this.length=e.length;if(0!==c)this.words[this.length]=c,this.length++;else if(e!==this)for(;d<e.length;d++)this.words[d]=e.words[d];return this};g.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var c=this.sub(b);b.sign=!0;return c}return!b.sign&&this.sign?(this.sign=!1,c=b.sub(this),this.sign=!0,c):this.length>b.length?this.clone().iadd(b):
b.clone().iadd(this)};g.prototype.isub=function(b){if(b.sign){b.sign=!1;var c=this.iadd(b);b.sign=!0;return c._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();c=this.cmp(b);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var e;0<c?e=this:(e=b,b=this);for(var d=0,f=0;f<b.length;f++)c=e.words[f]-b.words[f]+d,d=c>>26,this.words[f]=c&67108863;for(;0!==d&&f<e.length;f++)c=e.words[f]+d,d=c>>26,this.words[f]=c&67108863;if(0===d&&f<e.length&&e!==this)for(;f<
e.length;f++)this.words[f]=e.words[f];this.length=Math.max(this.length,f);e!==this&&(this.sign=!0);return this.strip()};g.prototype.sub=function(b){return this.clone().isub(b)};g.prototype._smallMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var e=0,d=0;d<c.length-1;d++){for(var f=e>>>26,e=e&67108863,a=Math.min(d,b.length-1),m=Math.max(0,d-this.length+1);m<=a;m++)var l=(this.words[d-m]|0)*(b.words[m]|0),g=l&67108863,f=f+(l/67108864|0)|0,g=g+e|0,e=g&67108863,f=f+(g>>>
26)|0;c.words[d]=e;e=f}0!==e?c.words[d]=e:c.length--;return c.strip()};g.prototype._bigMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var e=0,d=0,f=0;f<c.length-1;f++){for(var a=d,d=0,e=e&67108863,m=Math.min(f,b.length-1),l=Math.max(0,f-this.length+1);l<=m;l++)var g=(this.words[f-l]|0)*(b.words[l]|0),r=g&67108863,a=a+(g/67108864|0)|0,r=r+e|0,e=r&67108863,a=a+(r>>>26)|0,d=d+(a>>>26),a=a&67108863;c.words[f]=e;e=a}0!==e?c.words[f]=e:c.length--;return c.strip()};g.prototype.mulTo=
function(b,c){return 63>this.length+b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};g.prototype.mul=function(b){var c=new g(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};g.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,e=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var d=this.length-2;0<=d;d--){for(var f=0,a=0,m=Math.min(d,e-1),l=Math.max(0,d-c+1);l<=m;l++)var g=
d-l,g=this.words[g]*b.words[l],r=g&67108863,f=f+(g/67108864|0),r=r+a,a=r&67108863,f=f+(r>>>26);this.words[d]=a;this.words[d+1]+=f}f=0;for(g=1;g<this.length;g++)b=this.words[g]+f,this.words[g]=b&67108863,f=b>>>26;return this.strip()};g.prototype.imuln=function(b){f("number"===typeof b);for(var c=0,e=0;e<this.length;e++){var d=this.words[e]*b,a=(d&67108863)+(c&67108863),c=c>>26,c=c+(d/67108864|0),c=c+(a>>>26);this.words[e]=a&67108863}0!==c&&(this.words[e]=c,this.length++);return this};g.prototype.muln=
function(b){return this.clone().imuln(b)};g.prototype.sqr=function(){return this.mul(this)};g.prototype.isqr=function(){return this.mul(this)};g.prototype.ishln=function(b){f("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;var e=67108863>>>26-c<<26-c;if(0!==c){for(var d=0,a=0;a<this.length;a++){var m=this.words[a]&e;this.words[a]=this.words[a]-m<<c|d;d=m>>>26-c}d&&(this.words[a]=d,this.length++)}if(0!==b){for(a=this.length-1;0<=a;a--)this.words[a+b]=this.words[a];for(a=0;a<b;a++)this.words[a]=0;
this.length+=b}return this.strip()};g.prototype.ishrn=function(b,c,e){f("number"===typeof b&&0<=b);var d=b%26,a=Math.min((b-d)/26,this.length);b=67108863^67108863>>>d<<d;c=(c?(c-c%26)/26:0)-a;c=Math.max(0,c);if(e){for(var m=0;m<a;m++)e.words[m]=this.words[m];e.length=a}if(0!==a)if(this.length>a)for(this.length-=a,m=0;m<this.length;m++)this.words[m]=this.words[m+a];else this.words[0]=0,this.length=1;a=0;for(m=this.length-1;0<=m&&(0!==a||m>=c);m--){var l=this.words[m];this.words[m]=a<<26-d|l>>>d;a=
l&b}e&&0!==a&&(e.words[e.length++]=a);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};g.prototype.shln=function(b){return this.clone().ishln(b)};g.prototype.shrn=function(b){return this.clone().ishrn(b)};g.prototype.testn=function(b){f("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;return this.length<=b?!1:!!(this.words[b]&1<<c)};g.prototype.imaskn=function(b){f("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;f(!this.sign,"imaskn works only with positive numbers");0!==
c&&b++;this.length=Math.min(b,this.length);0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c);return this.strip()};g.prototype.maskn=function(b){return this.clone().imaskn(b)};g.prototype.iaddn=function(b){f("number"===typeof b);if(0>b)return this.isubn(-b);if(this.sign){if(1===this.length&&this.words[0]<b)return this.words[0]=b-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(b);this.sign=!0;return this}return this._iaddn(b)};g.prototype._iaddn=function(b){this.words[0]+=b;for(b=
0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};g.prototype.isubn=function(b){f("number"===typeof b);if(0>b)return this.iaddn(-b);if(this.sign)return this.sign=!1,this.iaddn(b),this.sign=!0,this;this.words[0]-=b;for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};g.prototype.addn=function(b){return this.clone().iaddn(b)};
g.prototype.subn=function(b){return this.clone().isubn(b)};g.prototype.iabs=function(){this.sign=!1;return this};g.prototype.abs=function(){return this.clone().iabs()};g.prototype._ishlnsubmul=function(b,c,e){var d=b.length+e,a;if(this.words.length<d){var m=Array(d);for(a=0;a<this.length;a++)m[a]=this.words[a];this.words=m}else a=this.length;for(this.length=Math.max(this.length,d);a<this.length;a++)this.words[a]=0;for(a=m=0;a<b.length;a++)d=this.words[a+e]+m,m=b.words[a]*c,d-=m&67108863,m=(d>>26)-
(m/67108864|0),this.words[a+e]=d&67108863;for(;a<this.length-e;a++)d=this.words[a+e]+m,m=d>>26,this.words[a+e]=d&67108863;if(0===m)return this.strip();f(-1===m);for(a=m=0;a<this.length;a++)d=-this.words[a]+m,m=d>>26,this.words[a]=d&67108863;this.sign=!0;return this.strip()};g.prototype._wordDiv=function(b,c){var e=this.length-b.length,d=this.clone(),f=b,a=f.words[f.length-1],e=26-this._countBits(a);0!==e&&(f=f.shln(e),d.ishln(e),a=f.words[f.length-1]);var m=d.length-f.length,l;if("mod"!==c){l=new g(null);
l.length=m+1;l.words=Array(l.length);for(var r=0;r<l.length;r++)l.words[r]=0}r=d.clone()._ishlnsubmul(f,1,m);r.sign||(d=r,l&&(l.words[m]=1));for(--m;0<=m;m--){r=67108864*d.words[f.length+m]+d.words[f.length+m-1];r=Math.min(r/a|0,67108863);for(d._ishlnsubmul(f,r,m);d.sign;)r--,d.sign=!1,d._ishlnsubmul(f,1,m),0!==d.cmpn(0)&&(d.sign=!d.sign);l&&(l.words[m]=r)}l&&l.strip();d.strip();"div"!==c&&0!==e&&d.ishrn(e);return{div:l?l:null,mod:d}};g.prototype.divmod=function(b,c){f(0!==b.cmpn(0));if(this.sign&&
!b.sign){var e=this.neg().divmod(b,c),d,a;"mod"!==c&&(d=e.div.neg());"div"!==c&&(a=0===e.mod.cmpn(0)?e.mod:b.sub(e.mod));return{div:d,mod:a}}return!this.sign&&b.sign?(e=this.divmod(b.neg(),c),"mod"!==c&&(d=e.div.neg()),{div:d,mod:e.mod}):this.sign&&b.sign?this.neg().divmod(b.neg(),c):b.length>this.length||0>this.cmp(b)?{div:new g(0),mod:this}:1===b.length?"div"===c?{div:this.divn(b.words[0]),mod:null}:"mod"===c?{div:null,mod:new g(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new g(this.modn(b.words[0]))}:
this._wordDiv(b,c)};g.prototype.div=function(b){return this.divmod(b,"div").div};g.prototype.mod=function(b){return this.divmod(b,"mod").mod};g.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var e=c.div.sign?c.mod.isub(b):c.mod,d=b.shrn(1);b=b.andln(1);e=e.cmp(d);return 0>e||1===b&&0===e?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};g.prototype.modn=function(b){f(67108863>=b);for(var c=67108864%b,e=0,d=this.length-1;0<=d;d--)e=(c*e+this.words[d])%b;return e};
g.prototype.idivn=function(b){f(67108863>=b);for(var c=0,e=this.length-1;0<=e;e--)c=this.words[e]+67108864*c,this.words[e]=c/b|0,c%=b;return this.strip()};g.prototype.divn=function(b){return this.clone().idivn(b)};g.prototype.egcd=function(b){f(!b.sign);f(0!==b.cmpn(0));var c=this,e=b.clone(),c=c.sign?c.mod(b):c.clone();b=new g(1);for(var d=new g(0),a=new g(0),m=new g(1),l=0;c.isEven()&&e.isEven();)c.ishrn(1),e.ishrn(1),++l;for(var r=e.clone(),k=c.clone();0!==c.cmpn(0);){for(;c.isEven();)c.ishrn(1),
b.isEven()&&d.isEven()?(b.ishrn(1),d.ishrn(1)):(b.iadd(r).ishrn(1),d.isub(k).ishrn(1));for(;e.isEven();)e.ishrn(1),a.isEven()&&m.isEven()?(a.ishrn(1),m.ishrn(1)):(a.iadd(r).ishrn(1),m.isub(k).ishrn(1));0<=c.cmp(e)?(c.isub(e),b.isub(a),d.isub(m)):(e.isub(c),a.isub(b),m.isub(d))}return{a:a,b:m,gcd:e.ishln(l)}};g.prototype._invmp=function(b){f(!b.sign);f(0!==b.cmpn(0));var c=this,e=b.clone(),c=c.sign?c.mod(b):c.clone();b=new g(1);for(var d=new g(0),a=e.clone();0<c.cmpn(1)&&0<e.cmpn(1);){for(;c.isEven();)c.ishrn(1),
b.isEven()?b.ishrn(1):b.iadd(a).ishrn(1);for(;e.isEven();)e.ishrn(1),d.isEven()?d.ishrn(1):d.iadd(a).ishrn(1);0<=c.cmp(e)?(c.isub(e),b.isub(d)):(e.isub(c),d.isub(b))}return 0===c.cmpn(1)?b:d};g.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var e=0;c.isEven()&&b.isEven();e++)c.ishrn(1),b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var d=c.cmp(b);if(0>d)d=c,c=b,b=d;else if(0===
d||0===b.cmpn(1))break;c.isub(b)}while(1);return b.ishln(e)};g.prototype.invm=function(b){return this.egcd(b).a.mod(b)};g.prototype.isEven=function(){return 0===(this.words[0]&1)};g.prototype.isOdd=function(){return 1===(this.words[0]&1)};g.prototype.andln=function(b){return this.words[0]&b};g.prototype.bincn=function(b){f("number"===typeof b);var c=b%26;b=(b-c)/26;var e=1<<c;if(this.length<=b){for(c=this.length;c<b+1;c++)this.words[c]=0;this.words[b]|=e;this.length=b+1;return this}for(c=b;0!==e&&
c<this.length;c++)b=this.words[c],b+=e,e=b>>>26,b&=67108863,this.words[c]=b;0!==e&&(this.words[c]=e,this.length++);return this};g.prototype.cmpn=function(b){var c=0>b;c&&(b=-b);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:c<b?-1:1);this.sign&&(b=-b);return b};g.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};g.prototype.ucmp=function(b){if(this.length>
b.length)return 1;if(this.length<b.length)return-1;for(var c=0,e=this.length-1;0<=e;e--){var d=this.words[e],f=b.words[e];if(d!==f){d<f?c=-1:d>f&&(c=1);break}}return c};g.red=function(b){return new e(b)};g.prototype.toRed=function(b){f(!this.red,"Already a number in reduction context");f(!this.sign,"red works only with positives");return b.convertTo(this)._forceRed(b)};g.prototype.fromRed=function(){f(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
g.prototype._forceRed=function(b){this.red=b;return this};g.prototype.forceRed=function(b){f(!this.red,"Already a number in reduction context");return this._forceRed(b)};g.prototype.redAdd=function(b){f(this.red,"redAdd works only with red numbers");return this.red.add(this,b)};g.prototype.redIAdd=function(b){f(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};g.prototype.redSub=function(b){f(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};g.prototype.redISub=
function(b){f(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};g.prototype.redShl=function(b){f(this.red,"redShl works only with red numbers");return this.red.shl(this,b)};g.prototype.redMul=function(b){f(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};g.prototype.redIMul=function(b){f(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};g.prototype.redSqr=function(){f(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};g.prototype.redISqr=function(){f(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};g.prototype.redSqrt=function(){f(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};g.prototype.redInvm=function(){f(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};g.prototype.redNeg=
function(){f(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};g.prototype.redPow=function(b){f(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,b)};var h={k256:null,p224:null,p192:null,p25519:null};v.prototype._tmp=function(){var b=new g(null);b.words=Array(Math.ceil(this.n/13));return b};v.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);
c=c<this.n?-1:b.ucmp(this.p);0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):b.strip();return b};v.prototype.split=function(b,c){b.ishrn(this.n,0,c)};v.prototype.imulK=function(b){return b.imul(this.k)};d(w,v);w.prototype.split=function(b,c){for(var e=Math.min(b.length,9),d=0;d<e;d++)c.words[d]=b.words[d];c.length=e;if(9>=b.length)b.words[0]=0,b.length=1;else{e=b.words[9];c.words[c.length++]=e&4194303;for(d=10;d<b.length;d++){var f=b.words[d];b.words[d-10]=(f&4194303)<<4|e>>>22;e=f}b.words[d-10]=
e>>>22;b.length-=9}};w.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c,e=0,d=0;d<b.length;d++){var f=b.words[d];c=64*f;e+=977*f;c+=e/67108864|0;e&=67108863;b.words[d]=e;e=c}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};d(u,v);d(q,v);d(l,v);l.prototype.imulK=function(b){for(var c=0,e=0;e<b.length;e++){var c=19*b.words[e]+c,d=c&67108863,c=c>>>26;b.words[e]=d}0!==c&&(b.words[b.length++]=c);return b};g._prime=function(b){if(h[b])return h[b];
var c;if("k256"===b)c=new w;else if("p224"===b)c=new u;else if("p192"===b)c=new q;else if("p25519"===b)c=new l;else throw Error("Unknown prime "+b);return h[b]=c};e.prototype._verify1=function(b){f(!b.sign,"red works only with positives");f(b.red,"red works only with red numbers")};e.prototype._verify2=function(b,c){f(!b.sign&&!c.sign,"red works only with positives");f(b.red&&b.red===c.red,"red works only with red numbers")};e.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};e.prototype.neg=function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};e.prototype.add=function(b,c){this._verify2(b,c);var e=b.add(c);0<=e.cmp(this.m)&&e.isub(this.m);return e._forceRed(this)};e.prototype.iadd=function(b,c){this._verify2(b,c);var e=b.iadd(c);0<=e.cmp(this.m)&&e.isub(this.m);return e};e.prototype.sub=function(b,c){this._verify2(b,c);var e=b.sub(c);0>e.cmpn(0)&&e.iadd(this.m);return e._forceRed(this)};e.prototype.isub=function(b,
c){this._verify2(b,c);var e=b.isub(c);0>e.cmpn(0)&&e.iadd(this.m);return e};e.prototype.shl=function(b,c){this._verify1(b);return this.imod(b.shln(c))};e.prototype.imul=function(b,c){this._verify2(b,c);return this.imod(b.imul(c))};e.prototype.mul=function(b,c){this._verify2(b,c);return this.imod(b.mul(c))};e.prototype.isqr=function(b){return this.imul(b,b)};e.prototype.sqr=function(b){return this.mul(b,b)};e.prototype.sqrt=function(b){if(0===b.cmpn(0))return b.clone();var c=this.m.andln(3);f(1===
c%2);if(3===c){var c=this.m.add(new g(1)).ishrn(2),e=this.pow(b,c);return e}for(var d=this.m.subn(1),a=0;0!==d.cmpn(0)&&0===d.andln(1);)a++,d.ishrn(1);f(0!==d.cmpn(0));for(var c=(new g(1)).toRed(this),e=c.redNeg(),m=this.m.subn(1).ishrn(1),l=this.m.bitLength(),l=(new g(2*l*l)).toRed(this);0!==this.pow(l,m).cmp(e);)l.redIAdd(e);m=this.pow(l,d);e=this.pow(b,d.addn(1).ishrn(1));b=this.pow(b,d);for(d=a;0!==b.cmp(c);){l=b;for(a=0;0!==l.cmp(c);a++)l=l.redSqr();f(a<d);m=this.pow(m,(new g(1)).ishln(d-a-1));
e=e.redMul(m);m=m.redSqr();b=b.redMul(m);d=a}return e};e.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};e.prototype.pow=function(b,c){var e=[];if(0===c.cmpn(0))return new g(1);for(var d=c.clone();0!==d.cmpn(0);)e.push(d.andln(1)),d.ishrn(1);for(var f=b,a=0;a<e.length&&0===e[a];a++,f=this.sqr(f));if(++a<e.length)for(d=this.sqr(f);a<e.length;a++,d=this.sqr(d))0!==e[a]&&(f=this.mul(f,d));return f};e.prototype.convertTo=function(b){var c=b.mod(this.m);
return c===b?c.clone():c};e.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};g.mont=function(b){return new c(b)};d(c,e);c.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};c.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};c.prototype.imul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return b.words[0]=0,b.length=1,b;var e=b.imul(c),d=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=e=e.isub(d).ishrn(this.shift);
0<=e.cmp(this.m)?d=e.isub(this.m):0>e.cmpn(0)&&(d=e.iadd(this.m));return d._forceRed(this)};c.prototype.mul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return(new g(0))._forceRed(this);var e=b.mul(c),d=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=e=e.isub(d).ishrn(this.shift);0<=e.cmp(this.m)?d=e.isub(this.m):0>e.cmpn(0)&&(d=e.iadd(this.m));return d._forceRed(this)};c.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof h||h,this)},{}],49:[function(a,h,n){var t=a("./lib/bn-sign");h.exports=function(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":40}],50:[function(a,h,n){var t=a("./lib/rationalize");h.exports=function(a,f){return t(a[0].mul(f[1]).sub(a[1].mul(f[0])),a[1].mul(f[1]))}},{"./lib/rationalize":45}],51:[function(a,h,n){var t=a("./lib/bn-to-num"),p=a("./lib/ctz");h.exports=function(a){var d=a[0];a=a[1];if(0===d.cmpn(0))return 0;var g=d.divmod(a),d=t(g.div),g=g.mod;if(0===g.cmpn(0))return d;if(d){var k=
p(d)+4;a=t(g.shln(k).divRound(a));0>d&&(a=-a);return d+a*Math.pow(2,-k)}d=a.bitLength()-g.bitLength()+53;a=t(g.shln(d).divRound(a));if(1023>d)return a*Math.pow(2,-d);a*=Math.pow(2,-1023);return a*Math.pow(2,1023-d)}},{"./lib/bn-to-num":41,"./lib/ctz":42}],52:[function(a,h,n){function t(a,d,g,k,p){a=["function ",a,"(a,l,h,",k.join(","),"){",p?"":"var i=",g?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];p?0>d.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
a.push(";if(",d,"){i=m;");g?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");p?a.push("return -1};"):a.push("return i};");return a.join("")}function p(a,d,g,k){return(new Function([t("A","x"+a+"y",d,["y"],k),t("P","c(x,y)"+a+"0",d,["y","c"],k),"function dispatchBsearch",g,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",g].join("")))()}
h.exports={ge:p(">=",!1,"GE"),gt:p(">",!1,"GT"),lt:p("<",!0,"LT"),le:p("<=",!0,"LE"),eq:p("-",!0,"EQ",!0)}},{}],53:[function(a,h,n){function t(a){var d=32;(a&=-a)&&d--;a&65535&&(d-=16);a&16711935&&(d-=8);a&252645135&&(d-=4);a&858993459&&(d-=2);a&1431655765&&--d;return d}"use restrict";n.INT_BITS=32;n.INT_MAX=2147483647;n.INT_MIN=-2147483648;n.sign=function(a){return(0<a)-(0>a)};n.abs=function(a){var d=a>>31;return(a^d)-d};n.min=function(a,d){return d^(a^d)&-(a<d)};n.max=function(a,d){return a^(a^
d)&-(a<d)};n.isPow2=function(a){return!(a&a-1)&&!!a};n.log2=function(a){var d,g;d=(65535<a)<<4;a>>>=d;g=(255<a)<<3;a>>>=g;d|=g;g=(15<a)<<2;a>>>=g;d|=g;g=(3<a)<<1;return d|g|a>>>g>>1};n.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};n.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};n.countTrailingZeros=t;n.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=
a>>>8;return(a|a>>>16)+1};n.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};n.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var p=Array(256);(function(a){for(var d=0;256>d;++d){for(var g=d,k=d,p=7,g=g>>>1;g;g>>>=1)k<<=1,k|=g&1,--p;a[d]=k<<p&255}})(p);n.reverse=function(a){return p[a&255]<<24|p[a>>>8&255]<<16|p[a>>>16&255]<<8|p[a>>>24&255]};n.interleave2=function(a,d){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;
d&=65535;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(a|a<<1)&1431655765|((d|d<<1)&1431655765)<<1};n.deinterleave2=function(a,d){a=a>>>d&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};n.interleave3=function(a,d,g){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;d&=1023;d=(d|d<<16)&4278190335;d=(d|d<<8)&251719695;d=(d|d<<4)&3272356035;a=(a|a<<2)&1227133513|((d|d<<2)&1227133513)<<1;g&=1023;
g=(g|g<<16)&4278190335;g=(g|g<<8)&251719695;g=(g|g<<4)&3272356035;return a|((g|g<<2)&1227133513)<<2};n.deinterleave3=function(a,d){a=a>>>d&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};n.nextCombination=function(a){var d=a|a-1;return d+1|(~d&-~d)-1>>>t(a)+1}},{}],54:[function(a,h,n){function t(d,a,f,g){for(var l=0,e=0,c=0,m=d.length;c<m;++c){var r=d[c],k;a:{for(k=0;k<a;++k)if(!(r[k]<=r[k+a])){k=!0;break a}k=!1}if(!k){for(k=0;k<2*a;++k)f[l++]=
r[k];g[e++]=c}}return e}function p(a,f,u,q){var l=a.length,e=f.length;if(!(0>=l||0>=e)){var c=a[0].length>>>1;if(!(0>=c)){var m,r=d.mallocDouble(2*c*l),p=d.mallocInt32(l),l=t(a,c,r,p);if(0<l){if(1===c&&q)g.init(l),m=g.sweepComplete(c,u,0,l,r,p,0,l,r,p);else{a=d.mallocDouble(2*c*e);var y=d.mallocInt32(e),e=t(f,c,a,y);0<e&&(g.init(l+e),m=1===c?g.sweepBipartite(c,u,0,l,r,p,0,e,a,y):k(c,u,q,l,r,p,e,a,y),d.free(a),d.free(y))}d.free(r);d.free(p)}return m}}}function f(d,a){y.push([d,a])}h.exports=function(d,
a,g){switch(arguments.length){case 1:return y=[],p(d,d,f,!0),y;case 2:if("function"===typeof a)return p(d,d,a,!0);y=[];p(d,a,f,!1);return y;case 3:return p(d,a,g,!1);default:throw Error("box-intersect: Invalid arguments");}};var d=a("typedarray-pool"),g=a("./lib/sweep"),k=a("./lib/intersect"),y},{"./lib/intersect":56,"./lib/sweep":60,"typedarray-pool":122}],55:[function(a,h,n){function t(a){function d(d,g){var q,l="bruteForce"+(d?"Red":"Blue")+(g?"Flip":"")+(a?"Full":"");q=["function ",l,"(",p.join(),
"){","var ","es","=2*","d",";"];var e="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(a?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";d?q.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",e):q.push(e,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");a?q.push("if(y1<x0||x1<y0)continue;"):g?q.push("if(y0<=x0||x1<y0)continue;"):q.push("if(y0<x0||x1<y0)continue;");q.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
g?q.push("yi,xi"):q.push("xi,yi");q.push(");if(rv!==void 0)return rv;}}}");q=q.join("");k.push(q);v.push("return "+l+"("+p.join()+");")}var g="bruteForce"+(a?"Full":"Partial"),k=[],y=p.slice();a||y.splice(3,0,"fp");var v=["function "+g+"("+y.join()+"){"];v.push("if(re-rs>be-bs){");a?(d(!0,!1),v.push("}else{"),d(!1,!1)):(v.push("if(fp){"),d(!0,!0),v.push("}else{"),d(!0,!1),v.push("}}else{if(fp){"),d(!1,!0),v.push("}else{"),d(!1,!1),v.push("}"));v.push("}}return "+g);g=k.join("")+v.join("");return(new Function(g))()}
var p="d ax vv rs re rb ri bs be bb bi".split(" ");n.partial=t(!1);n.full=t(!0)},{}],56:[function(a,h,n){function t(c,e,d,a,f,m,l,g,r){var k=z*c;b[k]=e;b[k+1]=d;b[k+2]=a;b[k+3]=f;b[k+4]=m;b[k+5]=l;c*=D;x[c]=g;x[c+1]=r}h.exports=function(a,h,n,B,N,H,E,O,J){var I=8*f.log2(B+E+1)*(a+1)|0,Q=f.nextPow2(z*I);b.length<Q&&(p.free(b),b=p.mallocInt32(Q));I=f.nextPow2(D*I);x<I&&(p.free(x),x=p.mallocDouble(I));var I=0,Q=2*a,L;t(I++,0,0,B,0,E,n?16:0,-Infinity,Infinity);for(n||t(I++,0,0,E,0,B,1,-Infinity,Infinity);0<
I;){--I;n=I*z;var A=b[n];E=b[n+1];var K=b[n+2],P=b[n+3],U=b[n+4];n=b[n+5];B=I*D;var Y=x[B],V=x[B+1],M=n&1,W=!!(n&16),T=N,X=H,S=O;B=J;M&&(T=O,X=J,S=N,B=H);if(n&2&&(K=e(a,A,E,K,T,X,V),E>=K))continue;if(n&4&&(E=c(a,A,E,K,T,X,Y),E>=K))continue;n=K-E;var R=U-P;if(W){if(a*n*(n+R)<u){L=k.scanComplete(a,A,h,E,K,T,X,P,U,S,B);if(void 0!==L)return L;continue}}else if(a*Math.min(n,R)<v){L=d(a,A,h,M,E,K,T,X,P,U,S,B);if(void 0!==L)return L;continue}else if(a*n*R<w){L=k.scanBipartite(a,A,h,M,E,K,T,X,P,U,S,B);if(void 0!==
L)return L;continue}n=q(a,A,E,K,T,X,Y,V);if(E<n)if(a*(n-E)<v){if(L=g(a,A+1,h,E,n,T,X,P,U,S,B),void 0!==L)return L}else if(A===a-2){if(L=M?k.sweepBipartite(a,h,P,U,S,B,E,n,T,X):k.sweepBipartite(a,h,E,n,T,X,P,U,S,B),void 0!==L)return L}else t(I++,A+1,E,n,P,U,M,-Infinity,Infinity),t(I++,A+1,P,U,E,n,M^1,-Infinity,Infinity);if(n<K)if(E=y(a,A,P,U,S,B),L=S[Q*E+A],R=l(a,A,E,U,S,B,L),R<U&&t(I++,A,n,K,R,U,(M|4)+(W?16:0),L,V),P<E&&t(I++,A,n,K,P,E,(M|2)+(W?16:0),Y,L),E+1===R){if(W)a:{P=a;U=h;B=B[E];M=2*P;E*=
M;Y=S[E+A];V=n;n*=M;b:for(;V<K;++V,n+=M)if(W=X[V],W!==B&&(R=T[n+A],L=T[n+A+P],!(Y<R||L<Y))){for(var aa=A+1;aa<P;++aa){R=T[n+aa];L=T[n+aa+P];var ca=S[E+aa+P];if(L<S[E+aa]||ca<R)continue b}W=U(W,B);if(void 0!==W){L=W;break a}}L=void 0}else a:{P=a;U=h;B=B[E];Y=2*P;E*=Y;V=S[E+A];W=n;n*=Y;b:for(;W<K;++W,n+=Y)if(R=T[n+A],L=T[n+A+P],!(V<R||L<V||M&&V===R)){aa=X[W];for(ca=A+1;ca<P;++ca){R=T[n+ca];L=T[n+ca+P];var la=S[E+ca+P];if(L<S[E+ca]||la<R)continue b}R=M?U(B,aa):U(aa,B);if(void 0!==R){L=R;break a}}L=void 0}if(void 0!==
L)return L}else if(E<R)if(W){if(K=m(a,A,n,K,T,X,L),n<K)if(P=l(a,A,n,K,T,X,L),A===a-2){if(n<P&&(L=k.sweepComplete(a,h,n,P,T,X,E,R,S,B),void 0!==L)||P<K&&(L=k.sweepBipartite(a,h,P,K,T,X,E,R,S,B),void 0!==L))return L}else n<P&&t(I++,A+1,n,P,E,R,16,-Infinity,Infinity),P<K&&(t(I++,A+1,P,K,E,R,0,-Infinity,Infinity),t(I++,A+1,E,R,P,K,1,-Infinity,Infinity))}else K=M?r(a,A,n,K,T,X,L):m(a,A,n,K,T,X,L),n<K&&(A===a-2?M?k.sweepBipartite(a,h,E,R,S,B,n,K,T,X):k.sweepBipartite(a,h,n,K,T,X,E,R,S,B):(t(I++,A+1,n,K,
E,R,M,-Infinity,Infinity),t(I++,A+1,E,R,n,K,M^1,-Infinity,Infinity)))}};var p=a("typedarray-pool"),f=a("bit-twiddle");h=a("./brute");var d=h.partial,g=h.full,k=a("./sweep"),y=a("./median");a=a("./partition");var v=128,w=4194304,u=4194304,q=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),l=a("lo===p0",["p0"]),e=a("lo<p0",["p0"]),c=a("hi<=p0",["p0"]),m=a("lo<=p0&&p0<=hi",["p0"]),r=a("lo<p0&&p0<=hi",["p0"]),z=6,D=2,b=p.mallocInt32(1024),x=p.mallocDouble(1024)},{"./brute":55,"./median":57,"./partition":58,"./sweep":60,
"bit-twiddle":53,"typedarray-pool":122}],57:[function(a,h,n){h.exports=function(a,d,g,k,y,v){if(k<=g+1)return g;var w=g,u=k;k=k+g>>>1;for(var q=2*a,l=k,e=y[q*k+d];w<u;){if(u-w<p){for(var l=d,e=y,c=v,m=2*a,r=m*(w+1)+l,z=w+1;z<u;++z,r+=m)for(var h=e[r],b=z,x=m*(z-1);b>w&&e[x+l]>h;--b,x-=m){for(var n=x,G=x+m,C=0;C<m;++C,++n,++G){var B=e[n];e[n]=e[G];e[G]=B}n=c[b];c[b]=c[b-1];c[b-1]=n}break}r=u-w;l=Math.random()*r+w|0;e=y[q*l+d];m=Math.random()*r+w|0;c=y[q*m+d];z=Math.random()*r+w|0;r=y[q*z+d];e<=c?r>=
c?(l=m,e=c):e>=r||(l=z,e=r):c>=r?(l=m,e=c):r>=e||(l=z,e=r);c=q*(u-1);m=q*l;for(r=0;r<q;++r,++c,++m)z=y[c],y[c]=y[m],y[m]=z;c=v[u-1];v[u-1]=v[l];v[l]=c;l=t(a,d,w,u-1,y,v,e);c=q*(u-1);m=q*l;for(r=0;r<q;++r,++c,++m)z=y[c],y[c]=y[m],y[m]=z;c=v[u-1];v[u-1]=v[l];v[l]=c;if(k<l){for(u=l-1;w<u&&y[q*(u-1)+d]===e;)--u;u+=1}else if(l<k)for(w=l+1;w<u&&y[q*w+d]===e;)w+=1;else break}return t(a,d,g,k,y,v,y[q*k+d])};var t=a("./partition")("lo<p0",["p0"]),p=8},{"./partition":58}],58:[function(a,h,n){h.exports=function(a,
f){var d="abcdef".split("").concat(f),g=[];0<=a.indexOf("lo")&&g.push("lo=e[k+n]");0<=a.indexOf("hi")&&g.push("hi=e[k+o]");d.push(t.replace("_",g.join()).replace("$",a));return Function.apply(void 0,d)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],59:[function(a,h,n){function t(d,a,f){for(var l=2*(d+1),e=d+1;e<=a;++e){for(var c=f[l++],m=f[l++],g=
e,k=l-2;g-- >d;){var p=f[k-2],b=f[k-1];if(p<c)break;else if(p===c&&b<m)break;f[k]=p;f[k+1]=b;k-=2}f[k]=c;f[k+1]=m}}function p(d,a,f){d*=2;a*=2;var l=f[d],e=f[d+1];f[d]=f[a];f[d+1]=f[a+1];f[a]=l;f[a+1]=e}function f(d,a,f){d*=2;a*=2;f[d]=f[a];f[d+1]=f[a+1]}function d(d,a,f,l,e){d*=2;a*=2;e[d]=e[a];e[a]=f;e[d+1]=e[a+1];e[a+1]=l}function g(d,a,f){d*=2;a*=2;var l=f[d],e=f[a];return l<e?!1:l===e?f[d+1]>f[a+1]:!0}function k(d,a,f,l){d*=2;var e=l[d];return e<a?!0:e===a?l[d+1]<f:!1}function y(a,u,q){var l=
(u-a+1)/6|0,e=a+l,c=u-l,m=a+u>>1,r=m-l,z=m+l,h=e,b=r,x=m,n=z,G=c,l=a+1,C=u-1,B=0;g(h,b,q)&&(B=h,h=b,b=B);g(n,G,q)&&(B=n,n=G,G=B);g(h,x,q)&&(B=h,h=x,x=B);g(b,x,q)&&(B=b,b=x,x=B);g(h,n,q)&&(B=h,h=n,n=B);g(x,n,q)&&(B=x,x=n,n=B);g(b,G,q)&&(B=b,b=G,G=B);g(b,x,q)&&(B=b,b=x,x=B);g(n,G,q)&&(B=n,n=G,G=B);for(var B=q[2*b],b=q[2*b+1],N=q[2*n],n=q[2*n+1],h=2*h,x=2*x,G=2*G,e=2*e,m=2*m,c=2*c,H=0;2>H;++H){var E=q[x+H],O=q[G+H];q[e+H]=q[h+H];q[m+H]=E;q[c+H]=O}f(r,a,q);f(z,u,q);for(r=l;r<=C;++r)if(k(r,B,b,q))r!==
l&&p(r,l,q),++l;else if(!k(r,N,n,q))for(;;)if(k(C,N,n,q)){k(C,B,b,q)?(z=r,c=l,m=C,h=q,z*=2,c*=2,m*=2,e=h[z],x=h[z+1],h[z]=h[c],h[z+1]=h[c+1],h[c]=h[m],h[c+1]=h[m+1],h[m]=e,h[m+1]=x,++l):p(r,C,q);--C;break}else if(--C<r)break;d(a,l-1,B,b,q);d(u,C+1,N,n,q);l-2-a<=v?t(a,l-2,q):y(a,l-2,q);u-(C+2)<=v?t(C+2,u,q):y(C+2,u,q);C-l<=v?t(l,C,q):y(l,C,q)}h.exports=function(d,a){a<=4*v?t(0,a-1,d):y(0,a-1,d)};var v=32},{}],60:[function(a,h,n){function t(e,c,d,a){a=c[a];d=e[d-1];e[a]=d;c[d]=a}h.exports={init:function(e){e=
f.nextPow2(e);k.length<e&&(p.free(k),k=p.mallocInt32(e));y.length<e&&(p.free(y),y=p.mallocInt32(e));v.length<e&&(p.free(v),v=p.mallocInt32(e));w.length<e&&(p.free(w),w=p.mallocInt32(e));u.length<e&&(p.free(u),u=p.mallocInt32(e));q.length<e&&(p.free(q),q=p.mallocInt32(e));e*=8;l.length<e&&(p.free(l),l=p.mallocDouble(e))},sweepBipartite:function(e,c,a,f,q,p,b,u,h,n){var C=0,B=2*e;--e;for(var N=B-1;a<f;++a){var H=p[a],E=B*a;l[C++]=q[E+e];l[C++]=-(H+1);l[C++]=q[E+N];l[C++]=H}for(a=b;a<u;++a)H=n[a]+g,
f=B*a,l[C++]=h[f+e],l[C++]=-H,l[C++]=h[f+N],l[C++]=H;u=C>>>1;d(l,u);for(a=n=h=0;a<u;++a)if(C=l[2*a+1]|0,C>=g)C=C-g|0,t(v,w,n--,C);else if(0<=C)t(k,y,h--,C);else{if(C<=-g){C=-C-g|0;for(B=0;B<h;++B)if(f=c(k[B],C),void 0!==f)return f;B=w;f=n++;v[f]=C}else{C=-C-1|0;for(B=0;B<n;++B)if(f=c(C,v[B]),void 0!==f)return f;B=y;f=h++;k[f]=C}B[C]=f}},sweepComplete:function(e,c,a,f,g,p,b,h,n,G){var C=0,B=2*e;--e;for(var N=B-1;a<f;++a){var H=p[a]+1<<1,E=B*a;l[C++]=g[E+e];l[C++]=-H;l[C++]=g[E+N];l[C++]=H}for(a=b;a<
h;++a)H=G[a]+1<<1,f=B*a,l[C++]=n[f+e],l[C++]=-H|1,l[C++]=n[f+N],l[C++]=H|1;h=C>>>1;d(l,h);for(a=C=G=n=0;a<h;++a)if(B=l[2*a+1]|0,f=B&1,a<h-1&&B>>1===l[2*a+3]>>1&&(f=2,a+=1),0>B){B=-(B>>1)-1;for(g=0;g<C;++g)if(p=c(u[g],B),void 0!==p)return p;if(0!==f)for(g=0;g<n;++g)if(p=c(k[g],B),void 0!==p)return p;if(1!==f)for(g=0;g<G;++g)if(p=c(v[g],B),void 0!==p)return p;0===f?(f=y,g=n++,k[g]=B,f[B]=g):1===f?(f=w,g=G++,v[g]=B,f[B]=g):2===f&&(f=q,g=C++,u[g]=B,f[B]=g)}else B=(B>>1)-1,0===f?t(k,y,n--,B):1===f?t(v,
w,G--,B):2===f&&t(u,q,C--,B)},scanBipartite:function(e,c,a,f,q,p,b,u,v,h,w,n){var N=0,H=2*e,E=c+e,O=1,J=1;for(f?J=g:O=g;q<p;++q){var I=q+O,Q=H*q;l[N++]=b[Q+c];l[N++]=-I;l[N++]=b[Q+E];l[N++]=I}for(q=v;q<h;++q)I=q+J,p=H*q,l[N++]=w[p+c],l[N++]=-I;h=N>>>1;d(l,h);for(q=N=0;q<h;++q)if(I=l[2*q+1]|0,0>I)if(I=-I,J=!1,I>=g?(J=!f,I-=g):(J=!!f,--I),J)J=y,p=N++,k[p]=I,J[I]=p;else a:for(J=n[I],I*=H,p=w[I+c+1],v=w[I+c+1+e],E=0;E<N;++E){var Q=k[E],L=H*Q;if(!(v<b[L+c+1]||b[L+c+1+e]<p)){for(var A=c+2;A<e;++A)if(w[I+
A+e]<b[L+A]||b[L+A+e]<w[I+A])continue a;Q=u[Q];Q=f?a(J,Q):a(Q,J);if(void 0!==Q)return Q}}else t(k,y,N--,I-O)},scanComplete:function(e,c,a,f,q,p,b,u,v,y,h){for(var w=0,t=2*e,n=c+e;f<q;++f){var E=f+g,O=t*f;l[w++]=p[O+c];l[w++]=-E;l[w++]=p[O+n];l[w++]=E}for(f=u;f<v;++f)E=f+1,q=t*f,l[w++]=y[q+c],l[w++]=-E;v=w>>>1;d(l,v);for(f=w=0;f<v;++f)if(q=l[2*f+1]|0,0>q)if(E=-q,E>=g)k[w++]=E-g;else a:for(--E,q=h[E],E*=t,n=y[E+c+1],O=y[E+c+1+e],u=0;u<w;++u){var J=k[u],I=b[J];if(I===q)break;J*=t;if(!(O<p[J+c+1]||p[J+
c+1+e]<n)){for(var Q=c+2;Q<e;++Q)if(y[E+Q+e]<p[J+Q]||p[J+Q+e]<y[E+Q])continue a;I=a(I,q);if(void 0!==I)return I}}else{E=q-g;for(u=w-1;0<=u;--u)if(k[u]===E){for(Q=u+1;Q<w;++Q)k[Q-1]=k[Q];break}--w}}};var p=a("typedarray-pool"),f=a("bit-twiddle"),d=a("./sort"),g=268435456,k=p.mallocInt32(1024),y=p.mallocInt32(1024),v=p.mallocInt32(1024),w=p.mallocInt32(1024),u=p.mallocInt32(1024),q=p.mallocInt32(1024),l=p.mallocDouble(8192)},{"./sort":59,"bit-twiddle":53,"typedarray-pool":122}],61:[function(a,h,n){(function(h){function p(){try{var b=
new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function f(b,c){if((d.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");d.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(c),b.__proto__=d.prototype):(null===b&&(b=new d(c)),b.length=c);return b}function d(b,c,e){if(!(d.TYPED_ARRAY_SUPPORT||this instanceof d))return new d(b,
c,e);if("number"===typeof b){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return y(this,b)}return g(this,b,c,e)}function g(b,c,e,a){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;if(0>e||c.byteLength<e)throw new RangeError("'offset' is out of bounds");if(c.byteLength<e+(a||0))throw new RangeError("'length' is out of bounds");c=
void 0===e&&void 0===a?new Uint8Array(c):void 0===a?new Uint8Array(c,e):new Uint8Array(c,e,a);d.TYPED_ARRAY_SUPPORT?(b=c,b.__proto__=d.prototype):b=v(b,c);return b}if("string"===typeof c){a=b;b=e;if("string"!==typeof b||""===b)b="utf8";if(!d.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');e=q(c,b)|0;a=f(a,e);c=a.write(c,b);c!==e&&(a=a.slice(0,c));return a}return w(b,c)}function k(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');if(0>
b)throw new RangeError('"size" argument must not be negative');}function y(b,c){k(c);b=f(b,0>c?0:u(c)|0);if(!d.TYPED_ARRAY_SUPPORT)for(var e=0;e<c;++e)b[e]=0;return b}function v(b,c){var e=0>c.length?0:u(c.length)|0;b=f(b,e);for(var a=0;a<e;a+=1)b[a]=c[a]&255;return b}function w(b,c){if(d.isBuffer(c)){var e=u(c.length)|0;b=f(b,e);if(0===b.length)return b;c.copy(b,0,0,e);return b}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(e="number"!==typeof c.length)||
(e=c.length,e=e!==e),e?f(b,0):v(b,c);if("Buffer"===c.type&&I(c.data))return v(b,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function u(b){if(b>=(d.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(d.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return b|0}function q(b,c){if(d.isBuffer(b))return b.length;if("undefined"!==typeof ArrayBuffer&&
"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(b)||b instanceof ArrayBuffer))return b.byteLength;"string"!==typeof b&&(b=""+b);var e=b.length;if(0===e)return 0;for(var a=!1;;)switch(c){case "ascii":case "latin1":case "binary":return e;case "utf8":case "utf-8":case void 0:return N(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return O.toByteArray(B(b)).length;default:if(a)return N(b).length;c=(""+c).toLowerCase();a=!0}}
function l(b,c,e){var a=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===e||e>this.length)e=this.length;if(0>=e)return"";e>>>=0;c>>>=0;if(e<=c)return"";for(b||(b="utf8");;)switch(b){case "hex":b=c;c=e;e=this.length;if(!b||0>b)b=0;if(!c||0>c||c>e)c=e;a="";for(e=b;e<c;++e)b=a,a=this[e],a=16>a?"0"+a.toString(16):a.toString(16),a=b+a;return a;case "utf8":case "utf-8":return r(this,c,e);case "ascii":b="";for(e=Math.min(this.length,e);c<e;++c)b+=String.fromCharCode(this[c]&127);return b;
case "latin1":case "binary":b="";for(e=Math.min(this.length,e);c<e;++c)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&e===this.length?O.fromByteArray(this):O.fromByteArray(this.slice(c,e)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,e);e="";for(b=0;b<c.length;b+=2)e+=String.fromCharCode(c[b]+256*c[b+1]);return e;default:if(a)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();a=!0}}function e(b,c,e){var a=b[c];b[c]=b[e];b[e]=a}function c(b,
c,e,a,f){if(0===b.length)return-1;"string"===typeof e?(a=e,e=0):2147483647<e?e=2147483647:-2147483648>e&&(e=-2147483648);e=+e;isNaN(e)&&(e=f?0:b.length-1);0>e&&(e=b.length+e);if(e>=b.length){if(f)return-1;e=b.length-1}else if(0>e)if(f)e=0;else return-1;"string"===typeof c&&(c=d.from(c,a));if(d.isBuffer(c))return 0===c.length?-1:m(b,c,e,a,f);if("number"===typeof c)return c&=255,d.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(b,c,e):Uint8Array.prototype.lastIndexOf.call(b,
c,e):m(b,[c],e,a,f);throw new TypeError("val must be string, number or Buffer");}function m(b,c,e,a,d){function f(b,c){return 1===m?b[c]:b.readUInt16BE(c*m)}var m=1,l=b.length,g=c.length;if(void 0!==a&&(a=String(a).toLowerCase(),"ucs2"===a||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(2>b.length||2>c.length)return-1;m=2;l/=2;g/=2;e/=2}if(d)for(a=-1;e<l;e++)if(f(b,e)===f(c,-1===a?0:e-a)){if(-1===a&&(a=e),e-a+1===g)return a*m}else-1!==a&&(e-=e-a),a=-1;else for(e+g>l&&(e=l-g);0<=e;e--){l=!0;for(a=
0;a<g;a++)if(f(b,e+a)!==f(c,a)){l=!1;break}if(l)return e}return-1}function r(b,c,e){e=Math.min(b.length,e);for(var a=[];c<e;){var d=b[c],f=null,m=239<d?4:223<d?3:191<d?2:1;if(c+m<=e){var l,g,k;switch(m){case 1:128>d&&(f=d);break;case 2:l=b[c+1];128===(l&192)&&(d=(d&31)<<6|l&63,127<d&&(f=d));break;case 3:l=b[c+1];g=b[c+2];128===(l&192)&&128===(g&192)&&(d=(d&15)<<12|(l&63)<<6|g&63,2047<d&&(55296>d||57343<d)&&(f=d));break;case 4:l=b[c+1],g=b[c+2],k=b[c+3],128===(l&192)&&128===(g&192)&&128===(k&192)&&
(d=(d&15)<<18|(l&63)<<12|(g&63)<<6|k&63,65535<d&&1114112>d&&(f=d))}}null===f?(f=65533,m=1):65535<f&&(f-=65536,a.push(f>>>10&1023|55296),f=56320|f&1023);a.push(f);c+=m}b=a.length;if(b<=Q)a=String.fromCharCode.apply(String,a);else{e="";for(c=0;c<b;)e+=String.fromCharCode.apply(String,a.slice(c,c+=Q));a=e}return a}function z(b,c,e){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>e)throw new RangeError("Trying to access beyond buffer length");}function D(b,c,e,a,f,m){if(!d.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>f||c<m)throw new RangeError('"value" argument is out of bounds');if(e+a>b.length)throw new RangeError("Index out of range");}function b(b,c,e,a){0>c&&(c=65535+c+1);for(var d=0,f=Math.min(b.length-e,2);d<f;++d)b[e+d]=(c&255<<8*(a?d:1-d))>>>8*(a?d:1-d)}function x(b,c,e,a){0>c&&(c=4294967295+c+1);for(var d=0,f=Math.min(b.length-e,4);d<f;++d)b[e+d]=c>>>8*(a?d:3-d)&255}function F(b,c,e,a,d,f){if(e+a>b.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");
}function G(b,c,e,a,d){d||F(b,c,e,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(b,c,e,a,23,4);return e+4}function C(b,c,e,a,d){d||F(b,c,e,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(b,c,e,a,52,8);return e+8}function B(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(L,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function N(b,c){c=c||Infinity;for(var e,a=b.length,d=null,f=[],m=0;m<a;++m){e=b.charCodeAt(m);if(55295<e&&57344>e){if(!d){if(56319<e){-1<
(c-=3)&&f.push(239,191,189);continue}else if(m+1===a){-1<(c-=3)&&f.push(239,191,189);continue}d=e;continue}if(56320>e){-1<(c-=3)&&f.push(239,191,189);d=e;continue}e=(d-55296<<10|e-56320)+65536}else d&&-1<(c-=3)&&f.push(239,191,189);d=null;if(128>e){if(0>--c)break;f.push(e)}else if(2048>e){if(0>(c-=2))break;f.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(c-=3))break;f.push(e>>12|224,e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(c-=4))break;f.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw Error("Invalid code point");
}return f}function H(b){for(var c=[],e=0;e<b.length;++e)c.push(b.charCodeAt(e)&255);return c}function E(b,c,e,a){for(var d=0;d<a&&!(d+e>=c.length||d>=b.length);++d)c[d+e]=b[d];return d}var O=a("base64-js"),J=a("ieee754"),I=a("isarray");n.Buffer=d;n.SlowBuffer=function(b){+b!=b&&(b=0);return d.alloc(+b)};n.INSPECT_MAX_BYTES=50;d.TYPED_ARRAY_SUPPORT=void 0!==h.TYPED_ARRAY_SUPPORT?h.TYPED_ARRAY_SUPPORT:p();n.kMaxLength=d.TYPED_ARRAY_SUPPORT?2147483647:1073741823;d.poolSize=8192;d._augment=function(b){b.__proto__=
d.prototype;return b};d.from=function(b,c,e){return g(null,b,c,e)};d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&($jscomp.initSymbol(),Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})));d.alloc=function(b,c,e){k(b);b=0>=b?f(null,b):void 0!==c?"string"===typeof e?f(null,b).fill(c,e):f(null,b).fill(c):f(null,
b);return b};d.allocUnsafe=function(b){return y(null,b)};d.allocUnsafeSlow=function(b){return y(null,b)};d.isBuffer=function(b){return!(null==b||!b._isBuffer)};d.compare=function(b,c){if(!d.isBuffer(b)||!d.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var e=b.length,a=c.length,f=0,m=Math.min(e,a);f<m;++f)if(b[f]!==c[f]){e=b[f];a=c[f];break}return e<a?-1:a<e?1:0};d.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};d.concat=function(b,c){if(!I(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return d.alloc(0);var e;if(void 0===c)for(e=c=0;e<b.length;++e)c+=b[e].length;var a=d.allocUnsafe(c),f=0;for(e=0;e<b.length;++e){var m=b[e];if(!d.isBuffer(m))throw new TypeError('"list" argument must be an Array of Buffers');m.copy(a,f);f+=m.length}return a};d.byteLength=q;d.prototype._isBuffer=!0;d.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var c=0;c<b;c+=2)e(this,c,c+1);return this};d.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=4)e(this,c,c+3),e(this,c+1,c+2);return this};d.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<b;c+=8)e(this,c,c+7),e(this,c+1,c+6),e(this,c+2,c+5),e(this,c+3,c+4);return this};d.prototype.toString=function(){var b=this.length|
0;return 0===b?"":0===arguments.length?r(this,0,b):l.apply(this,arguments)};d.prototype.equals=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===d.compare(this,b)};d.prototype.inspect=function(){var b="",c=n.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};d.prototype.compare=function(b,c,e,a,f){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");
void 0===c&&(c=0);void 0===e&&(e=b?b.length:0);void 0===a&&(a=0);void 0===f&&(f=this.length);if(0>c||e>b.length||0>a||f>this.length)throw new RangeError("out of range index");if(a>=f&&c>=e)return 0;if(a>=f)return-1;if(c>=e)return 1;c>>>=0;e>>>=0;a>>>=0;f>>>=0;if(this===b)return 0;var m=f-a,l=e-c,g=Math.min(m,l);a=this.slice(a,f);b=b.slice(c,e);for(c=0;c<g;++c)if(a[c]!==b[c]){m=a[c];l=b[c];break}return m<l?-1:l<m?1:0};d.prototype.includes=function(b,c,e){return-1!==this.indexOf(b,c,e)};d.prototype.indexOf=
function(b,e,a){return c(this,b,e,a,!0)};d.prototype.lastIndexOf=function(b,e,a){return c(this,b,e,a,!1)};d.prototype.write=function(b,c,e,a){if(void 0===c)a="utf8",e=this.length,c=0;else if(void 0===e&&"string"===typeof c)a=c,e=this.length,c=0;else if(isFinite(c))c|=0,isFinite(e)?(e|=0,void 0===a&&(a="utf8")):(a=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-c;if(void 0===e||e>d)e=d;if(0<b.length&&(0>e||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");
a||(a="utf8");for(d=!1;;)switch(a){case "hex":a:{c=Number(c)||0;a=this.length-c;e?(e=Number(e),e>a&&(e=a)):e=a;a=b.length;if(0!==a%2)throw new TypeError("Invalid hex string");e>a/2&&(e=a/2);for(a=0;a<e;++a){d=parseInt(b.substr(2*a,2),16);if(isNaN(d)){b=a;break a}this[c+a]=d}b=a}return b;case "utf8":case "utf-8":return E(N(b,this.length-c),this,c,e);case "ascii":return E(H(b),this,c,e);case "latin1":case "binary":return E(H(b),this,c,e);case "base64":return E(O.toByteArray(B(b)),this,c,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=
this.length-c;for(var f=void 0,f=d=void 0,m=[],l=0;l<b.length&&!(0>(a-=2));++l)f=b.charCodeAt(l),d=f>>8,f%=256,m.push(f),m.push(d);return E(m,this,c,e);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();d=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;d.prototype.slice=function(b,c){var e=this.length;b=~~b;c=void 0===c?e:~~c;0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);c<b&&(c=
b);if(d.TYPED_ARRAY_SUPPORT)e=this.subarray(b,c),e.__proto__=d.prototype;else for(var a=c-b,e=new d(a,void 0),f=0;f<a;++f)e[f]=this[f+b];return e};d.prototype.readUIntLE=function(b,c,e){b|=0;c|=0;e||z(b,c,this.length);e=this[b];for(var a=1,d=0;++d<c&&(a*=256);)e+=this[b+d]*a;return e};d.prototype.readUIntBE=function(b,c,e){b|=0;c|=0;e||z(b,c,this.length);e=this[b+--c];for(var a=1;0<c&&(a*=256);)e+=this[b+--c]*a;return e};d.prototype.readUInt8=function(b,c){c||z(b,1,this.length);return this[b]};d.prototype.readUInt16LE=
function(b,c){c||z(b,2,this.length);return this[b]|this[b+1]<<8};d.prototype.readUInt16BE=function(b,c){c||z(b,2,this.length);return this[b]<<8|this[b+1]};d.prototype.readUInt32LE=function(b,c){c||z(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};d.prototype.readUInt32BE=function(b,c){c||z(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};d.prototype.readIntLE=function(b,c,e){b|=0;c|=0;e||z(b,c,this.length);e=this[b];for(var a=1,d=0;++d<
c&&(a*=256);)e+=this[b+d]*a;e>=128*a&&(e-=Math.pow(2,8*c));return e};d.prototype.readIntBE=function(b,c,e){b|=0;c|=0;e||z(b,c,this.length);e=c;for(var a=1,d=this[b+--e];0<e&&(a*=256);)d+=this[b+--e]*a;d>=128*a&&(d-=Math.pow(2,8*c));return d};d.prototype.readInt8=function(b,c){c||z(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};d.prototype.readInt16LE=function(b,c){c||z(b,2,this.length);var e=this[b]|this[b+1]<<8;return e&32768?e|4294901760:e};d.prototype.readInt16BE=function(b,c){c||
z(b,2,this.length);var e=this[b+1]|this[b]<<8;return e&32768?e|4294901760:e};d.prototype.readInt32LE=function(b,c){c||z(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};d.prototype.readInt32BE=function(b,c){c||z(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};d.prototype.readFloatLE=function(b,c){c||z(b,4,this.length);return J.read(this,b,!0,23,4)};d.prototype.readFloatBE=function(b,c){c||z(b,4,this.length);return J.read(this,b,!1,23,4)};d.prototype.readDoubleLE=
function(b,c){c||z(b,8,this.length);return J.read(this,b,!0,52,8)};d.prototype.readDoubleBE=function(b,c){c||z(b,8,this.length);return J.read(this,b,!1,52,8)};d.prototype.writeUIntLE=function(b,c,e,a){b=+b;c|=0;e|=0;a||D(this,b,c,e,Math.pow(2,8*e)-1,0);a=1;var d=0;for(this[c]=b&255;++d<e&&(a*=256);)this[c+d]=b/a&255;return c+e};d.prototype.writeUIntBE=function(b,c,e,a){b=+b;c|=0;e|=0;a||D(this,b,c,e,Math.pow(2,8*e)-1,0);a=e-1;var d=1;for(this[c+a]=b&255;0<=--a&&(d*=256);)this[c+a]=b/d&255;return c+
e};d.prototype.writeUInt8=function(b,c,e){b=+b;c|=0;e||D(this,b,c,1,255,0);d.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b&255;return c+1};d.prototype.writeUInt16LE=function(c,e,a){c=+c;e|=0;a||D(this,c,e,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[e]=c&255,this[e+1]=c>>>8):b(this,c,e,!0);return e+2};d.prototype.writeUInt16BE=function(c,e,a){c=+c;e|=0;a||D(this,c,e,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[e]=c>>>8,this[e+1]=c&255):b(this,c,e,!1);return e+2};d.prototype.writeUInt32LE=function(b,c,e){b=
+b;c|=0;e||D(this,b,c,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=b&255):x(this,b,c,!0);return c+4};d.prototype.writeUInt32BE=function(b,c,e){b=+b;c|=0;e||D(this,b,c,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b&255):x(this,b,c,!1);return c+4};d.prototype.writeIntLE=function(b,c,e,a){b=+b;c|=0;a||(a=Math.pow(2,8*e-1),D(this,b,c,e,a-1,-a));a=0;var d=1,f=0;for(this[c]=b&255;++a<e&&(d*=256);)0>b&&
0===f&&0!==this[c+a-1]&&(f=1),this[c+a]=(b/d>>0)-f&255;return c+e};d.prototype.writeIntBE=function(b,c,e,a){b=+b;c|=0;a||(a=Math.pow(2,8*e-1),D(this,b,c,e,a-1,-a));a=e-1;var d=1,f=0;for(this[c+a]=b&255;0<=--a&&(d*=256);)0>b&&0===f&&0!==this[c+a+1]&&(f=1),this[c+a]=(b/d>>0)-f&255;return c+e};d.prototype.writeInt8=function(b,c,e){b=+b;c|=0;e||D(this,b,c,1,127,-128);d.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b&255;return c+1};d.prototype.writeInt16LE=function(c,e,a){c=+c;e|=0;
a||D(this,c,e,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[e]=c&255,this[e+1]=c>>>8):b(this,c,e,!0);return e+2};d.prototype.writeInt16BE=function(c,e,a){c=+c;e|=0;a||D(this,c,e,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[e]=c>>>8,this[e+1]=c&255):b(this,c,e,!1);return e+2};d.prototype.writeInt32LE=function(b,c,e){b=+b;c|=0;e||D(this,b,c,4,2147483647,-2147483648);d.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):x(this,b,c,!0);return c+4};d.prototype.writeInt32BE=
function(b,c,e){b=+b;c|=0;e||D(this,b,c,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b&255):x(this,b,c,!1);return c+4};d.prototype.writeFloatLE=function(b,c,e){return G(this,b,c,!0,e)};d.prototype.writeFloatBE=function(b,c,e){return G(this,b,c,!1,e)};d.prototype.writeDoubleLE=function(b,c,e){return C(this,b,c,!0,e)};d.prototype.writeDoubleBE=function(b,c,e){return C(this,b,c,!1,e)};d.prototype.copy=function(b,c,
e,a){e||(e=0);a||0===a||(a=this.length);c>=b.length&&(c=b.length);c||(c=0);0<a&&a<e&&(a=e);if(a===e||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-c<a-e&&(a=b.length-c+e);var f=a-e;if(this===b&&e<c&&c<a)for(a=f-1;0<=a;--a)b[a+c]=this[a+e];else if(1E3>f||!d.TYPED_ARRAY_SUPPORT)for(a=
0;a<f;++a)b[a+c]=this[a+e];else Uint8Array.prototype.set.call(b,this.subarray(e,e+f),c);return f};d.prototype.fill=function(b,c,e,a){if("string"===typeof b){"string"===typeof c?(a=c,c=0,e=this.length):"string"===typeof e&&(a=e,e=this.length);if(1===b.length){var f=b.charCodeAt(0);256>f&&(b=f)}if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!d.isEncoding(a))throw new TypeError("Unknown encoding: "+a);}else"number"===typeof b&&(b&=255);if(0>
c||this.length<c||this.length<e)throw new RangeError("Out of range index");if(e<=c)return this;c>>>=0;e=void 0===e?this.length:e>>>0;b||(b=0);if("number"===typeof b)for(a=c;a<e;++a)this[a]=b;else for(b=d.isBuffer(b)?b:N((new d(b,a)).toString()),f=b.length,a=0;a<e-c;++a)this[a+c]=b[a%f];return this};var L=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":34,ieee754:83,isarray:89}],62:[function(a,h,
n){function t(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function p(a,d){return a[0]-d[0]||a[1]-d[1]}function f(a,d,f){return d in a?a[d]:f}var d=a("./lib/monotone"),g=a("./lib/triangulation"),k=a("./lib/delaunay"),y=a("./lib/filter");h.exports=function(a,h,u){Array.isArray(h)?(u=u||{},h=h||[]):(u=h||{},h=[]);var q=!!f(u,"delaunay",!0),l=!!f(u,"interior",!0),e=!!f(u,"exterior",!0);u=!!f(u,"infinity",!1);if(!l&&!e||0===a.length)return[];var c=d(a,h);if(q||l!==e||u){h=g(a.length,h.map(t).sort(p));
for(var m=0;m<c.length;++m){var r=c[m];h.addTriangle(r[0],r[1],r[2])}q&&k(a,h);return e?l?u?y(h,0,u):h.cells():y(h,1,u):y(h,-1)}return c}},{"./lib/delaunay":63,"./lib/filter":64,"./lib/monotone":65,"./lib/triangulation":66}],63:[function(a,h,n){function t(a,d,g,k,y,v){var h=d.opposite(k,y);if(!(0>h)){if(y<k){var u=k;k=y;y=u;u=v;v=h;h=u}d.isConstraint(k,y)||0>p(a[k],a[y],a[v],a[h])&&g.push(k,y)}}var p=a("robust-in-sphere")[4];a("binary-search-bounds");h.exports=function(a,d){for(var g=[],k=a.length,
y=d.stars,v=0;v<k;++v)for(var h=y[v],u=1;u<h.length;u+=2){var q=h[u];if(!(q<v||d.isConstraint(v,q))){for(var l=h[u-1],e=-1,c=1;c<h.length;c+=2)if(h[c-1]===q){e=h[c];break}0>e||0>p(a[v],a[q],a[l],a[e])&&g.push(v,q)}}for(;0<g.length;){q=g.pop();v=g.pop();e=l=-1;h=y[v];for(k=1;k<h.length;k+=2)u=h[k-1],c=h[k],u===q?e=c:c===q&&(l=u);0>l||0>e||0<=p(a[v],a[q],a[l],a[e])||(d.flip(v,q),t(a,d,g,l,v,e),t(a,d,g,v,e,l),t(a,d,g,e,q,l),t(a,d,g,q,l,e))}}},{"binary-search-bounds":52,"robust-in-sphere":104}],64:[function(a,
h,n){function t(a,f,k,p,h,t,u){this.cells=a;this.neighbor=f;this.flags=p;this.constraint=k;this.active=h;this.next=t;this.boundary=u}function p(a,f){return a[0]-f[0]||a[1]-f[1]||a[2]-f[2]}var f=a("binary-search-bounds");h.exports=function(a,f,k){for(var h=a.cells(),v=h.length,w=0;w<v;++w){var u=h[w],q=u[0],l=u[1],e=u[2];l<e?l<q&&(u[0]=l,u[1]=e,u[2]=q):e<q&&(u[0]=e,u[1]=q,u[2]=l)}h.sort(p);for(var c=Array(v),w=0;w<c.length;++w)c[w]=0;var m=[],r=[],z=Array(3*v),n=Array(3*v),b=null;k&&(b=[]);e=new t(h,
z,n,c,m,r,b);for(w=0;w<v;++w)for(var u=h[w],x=0;3>x;++x){var q=u[x],l=u[(x+1)%3],F=z[3*w+x]=e.locate(l,q,a.opposite(l,q)),G=n[3*w+x]=a.isConstraint(q,l);0>F&&(G?r.push(w):(m.push(w),c[w]=1),k&&b.push([l,q,-1]))}if(0===f)return k?e.cells.concat(e.boundary):e.cells;v=1;w=e.active;u=e.next;a=e.flags;h=e.cells;q=e.constraint;for(l=e.neighbor;0<w.length||0<u.length;){for(;0<w.length;)if(c=w.pop(),a[c]!==-v)for(a[c]=v,m=0;3>m;++m)r=l[3*c+m],0<=r&&0===a[r]&&(q[3*c+m]?u.push(r):(w.push(r),a[r]=v));c=u;u=
w;w=c;u.length=0;v=-v}for(w=v=0;w<h.length;++w)a[w]===f&&(h[v++]=h[w]);h.length=v;return k?h.concat(e.boundary):h};t.prototype.locate=function(){var a=[0,0,0];return function(g,k,h){var v=g,t=k,u=h;k<h?k<g&&(v=k,t=h,u=g):h<g&&(v=h,t=g,u=k);if(0>v)return-1;a[0]=v;a[1]=t;a[2]=u;return f.eq(this.cells,a,p)}}()},{"binary-search-bounds":52}],65:[function(a,h,n){function t(a,d,f,g,l){this.a=a;this.b=d;this.idx=f;this.lowerIds=g;this.upperIds=l}function p(a,d,f,g){this.a=a;this.b=d;this.type=f;this.idx=
g}function f(a,d){var f=a.a[0]-d.a[0]||a.a[1]-d.a[1]||a.type-d.type;return f||0!==a.type&&(f=y(a.a,a.b,d.b))?f:a.idx-d.idx}function d(a,d){return y(a.a,a.b,d)}function g(a,d){var f;return(f=a.a[0]<d.a[0]?y(a.a,a.b,d.a):y(d.b,d.a,a.a))?f:(f=d.b[0]<a.b[0]?y(a.a,a.b,d.b):y(d.b,d.a,a.b))||a.idx-d.idx}var k=a("binary-search-bounds"),y=a("robust-orientation")[3];h.exports=function(a,h){for(var u=a.length,q=h.length,l=[],e=0;e<u;++e)l.push(new p(a[e],null,0,e));for(e=0;e<q;++e){var c=h[e],u=a[c[0]],c=a[c[1]];
u[0]<c[0]?l.push(new p(u,c,2,e),new p(c,u,1,e)):u[0]>c[0]&&l.push(new p(c,u,2,e),new p(u,c,1,e))}l.sort(f);e=l[0].a[0]-(1+Math.abs(l[0].a[0]))*Math.pow(2,-52);q=[new t([e,1],[e,0],-1,[],[],[],[])];u=[];e=0;for(c=l.length;e<c;++e){var m=l[e],r=m.type;if(0===r)for(var r=u,z=q,n=a,b=m.a,m=m.idx,x=k.lt(z,b,d),F=k.gt(z,b,d);x<F;++x){for(var G=z[x],C=G.lowerIds,B=C.length;1<B&&0<y(n[C[B-2]],n[C[B-1]],b);)r.push([C[B-1],C[B-2],m]),--B;C.length=B;C.push(m);G=G.upperIds;for(B=G.length;1<B&&0>y(n[G[B-2]],n[G[B-
1]],b);)r.push([G[B-2],G[B-1],m]),--B;G.length=B;G.push(m)}else 2===r?(r=q,z=m,n=k.le(r,z,g),b=r[n],m=b.upperIds,F=m[m.length-1],b.upperIds=[F],r.splice(n+1,0,new t(z.a,z.b,z.idx,[F],m))):(r=q,z=m,n=z.a,z.a=z.b,z.b=n,z=k.eq(r,z,g),r[z-1].upperIds=r[z].upperIds,r.splice(z,1))}return u}},{"binary-search-bounds":52,"robust-orientation":105}],66:[function(a,h,n){function t(a,f){this.stars=a;this.edges=f}function p(a,f,k){for(var p=1,h=a.length;p<h;p+=2)if(a[p-1]===f&&a[p]===k){a[p-1]=a[h-2];a[p]=a[h-
1];a.length=h-2;break}}var f=a("binary-search-bounds");h.exports=function(a,f){for(var k=Array(a),p=0;p<a;++p)k[p]=[];return new t(k,f)};a=t.prototype;a.isConstraint=function(){function a(d,f){return d[0]-f[0]||d[1]-f[1]}var g=[0,0];return function(k,p){g[0]=Math.min(k,p);g[1]=Math.max(k,p);return 0<=f.eq(this.edges,g,a)}}();a.removeTriangle=function(a,f,k){var h=this.stars;p(h[a],f,k);p(h[f],k,a);p(h[k],a,f)};a.addTriangle=function(a,f,k){var p=this.stars;p[a].push(f,k);p[f].push(k,a);p[k].push(a,
f)};a.opposite=function(a,f){for(var k=this.stars[f],p=1,h=k.length;p<h;p+=2)if(k[p]===a)return k[p-1];return-1};a.flip=function(a,f){var k=this.opposite(a,f),p=this.opposite(f,a);this.removeTriangle(a,f,k);this.removeTriangle(f,a,p);this.addTriangle(a,p,k);this.addTriangle(f,k,p)};a.edges=function(){for(var a=this.stars,f=[],k=0,p=a.length;k<p;++k)for(var h=a[k],t=0,u=h.length;t<u;t+=2)f.push([h[t],h[t+1]]);return f};a.cells=function(){for(var a=this.stars,f=[],k=0,p=a.length;k<p;++k)for(var h=a[k],
t=0,u=h.length;t<u;t+=2){var q=h[t],l=h[t+1];k<Math.min(q,l)&&f.push([k,q,l])}return f}},{"binary-search-bounds":52}],67:[function(a,h,n){function t(a){var b=c(a);a=e(l(b),a);return 0>a?[b,r(b,Infinity)]:0<a?[r(b,-Infinity),b]:[b,b]}function p(c,b,e){var a=[];u(e,function(e,d){var f=b[e],m=b[d];f[0]!==m[0]&&f[0]!==m[1]&&f[1]!==m[0]&&f[1]!==m[1]&&q(c[f[0]],c[f[1]],c[m[0]],c[m[1]])&&a.push([e,d])});return a}function f(c,b,e,a){var d=[];u(e,a,function(e,a){var f=b[e];if(f[0]!==a&&f[1]!==a){var m=c[a];
q(c[f[0]],c[f[1]],m,m)&&d.push([e,a])}});return d}function d(c,b,a,d,f){function g(b){if(b>=c.length)return k[b-c.length];b=c[b];return[l(b[0]),l(b[1])]}for(var k=[],r=0;r<a.length;++r){var p=a[r],q=p[0],p=p[1],u=b[q],h=b[p];if(u=z(m(c[u[0]]),m(c[u[1]]),m(c[h[0]]),m(c[h[1]])))h=k.length+c.length,k.push(u),d.push([q,h],[p,h])}d.sort(function(b,c){if(b[0]!==c[0])return b[0]-c[0];var a=g(b[1]),d=g(c[1]);return e(a[0],d[0])||e(a[1],d[1])});for(r=d.length-1;0<=r;--r){p=d[r];q=p[0];u=b[q];h=u[0];a=u[1];
var v=c[h],t=c[a];0>(v[0]-t[0]||v[1]-t[1])&&(v=h,h=a,a=v);u[0]=h;var h=u[1]=p[1],y;for(f&&(y=u[2]);0<r&&d[r-1][0]===q;)p=d[--r],p=p[1],f?b.push([h,p,y]):b.push([h,p]),h=p;f?b.push([h,a,y]):b.push([h,a])}return k}function g(e,b,a){for(var d=e.length+b.length,f=new w(d),m=0;m<b.length;++m){var l=b[m],g=t(l[0]),k=t(l[1]);a.push([g[0],k[0],g[1],k[1]]);e.push([c(l[0]),c(l[1])])}u(a,function(b,c){f.link(b,c)});b=0;a=!0;l=Array(d);for(m=0;m<d;++m)f.find(m)===m?(l[m]=b,e[b++]=e[m]):(a=!1,l[m]=-1);e.length=
b;if(a)return null;for(m=0;m<d;++m)0>l[m]&&(l[m]=l[f.find(m)]);return l}function k(c,b){return c[0]-b[0]||c[1]-b[1]}function y(c,b){var e=c[0]-b[0]||c[1]-b[1];return e?e:c[2]<b[2]?-1:c[2]>b[2]?1:0}function v(c,b,e){for(var a=Array(b.length),m=0;m<b.length;++m){var l=b[m],r=c[l[0]],l=c[l[1]];a[m]=[Math.min(r[0],l[0]),Math.min(r[1],l[1]),Math.max(r[0],l[0]),Math.max(r[1],l[1])]}m=p(c,b,a);r=Array(c.length);for(l=0;l<c.length;++l){var q=c[l];r[l]=[q[0],q[1],q[0],q[1]]}a=f(c,b,a,r);l=d(c,b,m,a,e);c=g(c,
l,r);if(0!==b.length){if(c)for(r=0;r<b.length;++r){var l=b[r],q=c[l[0]],u=c[l[1]];l[0]=Math.min(q,u);l[1]=Math.max(q,u)}else for(r=0;r<b.length;++r)l=b[r],q=l[0],u=l[1],l[0]=Math.min(q,u),l[1]=Math.max(q,u);e?b.sort(y):b.sort(k);for(r=l=1;r<b.length;++r)if(q=b[r-1],u=b[r],u[0]!==q[0]||u[1]!==q[1]||e&&u[2]!==q[2])b[l++]=u;b.length=l}return c?!0:0<m.length||0<a.length}h.exports=function(c,b,e){var a=!1,d;if(e){d=b;for(var f=Array(b.length),m=0;m<b.length;++m){var l=b[m];f[m]=[l[0],l[1],e[m]]}b=f}for(;v(c,
b,!!e);)a=!0;if(e&&a)for(d.length=0,m=e.length=0;m<b.length;++m)l=b[m],d.push([l[0],l[1]]),e.push(l[2]);return a};var w=a("union-find"),u=a("box-intersect");a("compare-cell");var q=a("robust-segment-intersect"),l=a("big-rat"),e=a("big-rat/cmp"),c=a("big-rat/to-float"),m=a("rat-vec"),r=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":68,"big-rat":38,"big-rat/cmp":36,"big-rat/to-float":51,"box-intersect":54,"compare-cell":71,nextafter:92,"rat-vec":101,"robust-segment-intersect":108,
"union-find":123}],68:[function(a,h,n){function t(a,f){return d(p(a[0],f[1]),p(a[1],f[0]))}h.exports=function(a,d,p,l){d=k(d,a);var e=k(l,p);l=t(d,e);if(0===g(l))return null;p=k(a,p);p=t(e,p);p=f(p,l);return y(a,v(d,p))};var p=a("big-rat/mul"),f=a("big-rat/div"),d=a("big-rat/sub"),g=a("big-rat/sign"),k=a("rat-vec/sub"),y=a("rat-vec/add"),v=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":37,"big-rat/mul":47,"big-rat/sign":49,"big-rat/sub":50,"big-rat/to-float":51,"rat-vec/add":100,"rat-vec/muls":102,
"rat-vec/sub":103}],69:[function(a,h,n){function t(a,f,p){var u=d(a[0],-f[0]);a=d(a[1],-f[1]);var q=d(p[0],-f[0]);f=d(p[1],-f[1]);u=k(g(u,q),g(a,f));return 0<=u[u.length-1]}h.exports=function(a,d,g,k){var q=p(d,g,k);if(0===q){var q=f(p(a,d,g)),l=f(p(a,d,k));return q===l?0===q&&(g=t(a,d,g),a=t(a,d,k),g!==a)?g?1:-1:0:0===l?0<q?-1:t(a,d,k)?-1:1:0===q?0<l?1:t(a,d,g)?1:-1:f(l-q)}l=p(a,d,g);return 0<l?0<q&&0<p(a,d,k)?1:-1:0>l?0<q||0<p(a,d,k)?1:-1:0<p(a,d,k)?1:t(a,d,g)?1:-1};var p=a("robust-orientation"),
f=a("signum"),d=a("two-sum"),g=a("robust-product"),k=a("robust-sum")},{"robust-orientation":105,"robust-product":106,"robust-sum":110,signum:70,"two-sum":121}],70:[function(a,h,n){h.exports=function(a){return 0>a?-1:0<a?1:0}},{}],71:[function(a,h,n){function t(a,d){return a-d}h.exports=function(a,d){var g=a.length,k=a.length-d.length;if(k)return k;switch(g){case 0:return 0;case 1:return a[0]-d[0];case 2:return a[0]+a[1]-d[0]-d[1]||p(a[0],a[1])-p(d[0],d[1]);case 3:var g=a[0]+a[1],h=d[0]+d[1];if(k=
g+a[2]-(h+d[2]))return k;var k=p(a[0],a[1]),v=p(d[0],d[1]);return p(k,a[2])-p(v,d[2])||p(k+a[2],g)-p(v+d[2],h);case 4:var k=a[0],g=a[1],h=a[2],v=a[3],n=d[0],u=d[1],q=d[2],l=d[3];return k+g+h+v-(n+u+q+l)||p(k,g,h,v)-p(n,u,q,l,n)||p(k+g,k+h,k+v,g+h,g+v,h+v)-p(n+u,n+q,n+l,u+q,u+l,q+l)||p(k+g+h,k+g+v,k+h+v,g+h+v)-p(n+u+q,n+u+l,n+q+l,u+q+l);default:h=a.slice().sort(t);v=d.slice().sort(t);for(n=0;n<g;++n)if(k=h[n]-v[n])return k;return 0}};var p=Math.min},{}],72:[function(a,h,n){function t(){this.argTypes=
[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var p=a("./lib/thunk.js");h.exports=function(a){var d=new t;d.pre=a.pre;d.body=a.body;d.post=a.post;var g=a.args.slice(0);d.argTypes=g;for(var k=0;k<g.length;++k){var h=g[k];if("array"===h||"object"===typeof h&&h.blockIndices){d.argTypes[k]="array";d.arrayArgs.push(k);d.arrayBlockIndices.push(h.blockIndices?
h.blockIndices:0);d.shimArgs.push("array"+k);if(k<d.pre.args.length&&0<d.pre.args[k].count)throw Error("cwise: pre() block may not reference array args");if(k<d.post.args.length&&0<d.post.args[k].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===h)d.scalarArgs.push(k),d.shimArgs.push("scalar"+k);else if("index"===h){d.indexArgs.push(k);if(k<d.pre.args.length&&0<d.pre.args[k].count)throw Error("cwise: pre() block may not reference array index");if(k<d.body.args.length&&
d.body.args[k].lvalue)throw Error("cwise: body() block may not write to array index");if(k<d.post.args.length&&0<d.post.args[k].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===h){d.shapeArgs.push(k);if(k<d.pre.args.length&&d.pre.args[k].lvalue)throw Error("cwise: pre() block may not write to array shape");if(k<d.body.args.length&&d.body.args[k].lvalue)throw Error("cwise: body() block may not write to array shape");if(k<d.post.args.length&&d.post.args[k].lvalue)throw Error("cwise: post() block may not write to array shape");
}else if("object"===typeof h&&h.offset)d.argTypes[k]="offset",d.offsetArgs.push({array:h.array,offset:h.offset}),d.offsetArgIndex.push(k);else throw Error("cwise: Unknown argument type "+g[k]);}if(0>=d.arrayArgs.length)throw Error("cwise: No array arguments specified");if(d.pre.args.length>g.length)throw Error("cwise: Too many arguments in pre() block");if(d.body.args.length>g.length)throw Error("cwise: Too many arguments in body() block");if(d.post.args.length>g.length)throw Error("cwise: Too many arguments in post() block");
d.debug=!!a.printCode||!!a.debug;d.funcName=a.funcName||"cwise";d.blockSize=a.blockSize||64;return p(d)}},{"./lib/thunk.js":74}],73:[function(a,h,n){function t(a,d,f){var g=a.length,p=d.arrayArgs.length;d=0<d.indexArgs.length;var q=[],l=[],e=0,c=0,m,r;for(m=0;m<g;++m)l.push(["i",m,"=0"].join(""));for(r=0;r<p;++r)for(m=0;m<g;++m)c=e,e=a[m],0===m?l.push(["d",r,"s",m,"=t",r,"p",e].join("")):l.push(["d",r,"s",m,"=(t",r,"p",e,"-s",c,"*t",r,"p",c,")"].join(""));q.push("var "+l.join(","));for(m=g-1;0<=m;--m)e=
a[m],q.push(["for(i",m,"=0;i",m,"<s",e,";++i",m,"){"].join(""));q.push(f);for(m=0;m<g;++m){c=e;e=a[m];for(r=0;r<p;++r)q.push(["p",r,"+=d",r,"s",m].join(""));d&&(0<m&&q.push(["index[",c,"]-=s",c].join("")),q.push(["++index[",e,"]"].join("")));q.push("}")}return q.join("\n")}function p(a,d,f,g){for(var p=d.length,q=f.arrayArgs.length,l=f.blockSize,e=0<f.indexArgs.length,c=[],m=0;m<q;++m)c.push(["var offset",m,"=p",m].join(""));for(m=a;m<p;++m)c.push(["for(var j"+m+"=SS[",d[m],"]|0;j",m,">0;){"].join("")),
c.push(["if(j",m,"<",l,"){"].join("")),c.push(["s",d[m],"=j",m].join("")),c.push(["j",m,"=0"].join("")),c.push(["}else{s",d[m],"=",l].join("")),c.push(["j",m,"-=",l,"}"].join("")),e&&c.push(["index[",d[m],"]=j",m].join(""));for(m=0;m<q;++m){l=["offset"+m];for(e=a;e<p;++e)l.push(["j",e,"*t",m,"p",d[e]].join(""));c.push(["p",m,"=(",l.join("+"),")"].join(""))}c.push(t(d,f,g));for(m=a;m<p;++m)c.push("}");return c.join("\n")}function f(a,d,f){for(var g=a.body,p=[],q=[],l=0;l<a.args.length;++l){var e=a.args[l];
if(!(0>=e.count)){var c=new RegExp(e.name,"g"),m="",r=d.arrayArgs.indexOf(l);switch(d.argTypes[l]){case "offset":var h=d.offsetArgIndex.indexOf(l),r=d.offsetArgs[h].array,m="+q"+h;case "array":var m="p"+r+m,t="l"+l,h="a"+r;if(0===d.arrayBlockIndices[r])1===e.count?"generic"===f[r]?e.lvalue?(p.push(["var ",t,"=",h,".get(",m,")"].join("")),g=g.replace(c,t),q.push([h,".set(",m,",",t,")"].join(""))):g=g.replace(c,[h,".get(",m,")"].join("")):g=g.replace(c,[h,"[",m,"]"].join("")):"generic"===f[r]?(p.push(["var ",
t,"=",h,".get(",m,")"].join("")),g=g.replace(c,t),e.lvalue&&q.push([h,".set(",m,",",t,")"].join(""))):(p.push(["var ",t,"=",h,"[",m,"]"].join("")),g=g.replace(c,t),e.lvalue&&q.push([h,"[",m,"]=",t].join("")));else{c=[e.name];e=[m];for(m=0;m<Math.abs(d.arrayBlockIndices[r]);m++)c.push("\\s*\\[([^\\]]+)\\]"),e.push("$"+(m+1)+"*t"+r+"b"+m);c=new RegExp(c.join(""),"g");m=e.join("+");if("generic"===f[r])throw Error("cwise: Generic arrays not supported in combination with blocks!");g=g.replace(c,[h,"[",
m,"]"].join(""))}break;case "scalar":g=g.replace(c,"Y"+d.scalarArgs.indexOf(l));break;case "index":g=g.replace(c,"index");break;case "shape":g=g.replace(c,"shape")}}}return[p.join("\n"),g,q.join("\n")].join("\n").trim()}function d(a){for(var d=Array(a.length),f=!0,g=0;g<a.length;++g){var p=a[g],q=p.match(/\d+/),q=q?q[0]:"";0===p.charAt(0)?d[g]="u"+p.charAt(1)+q:d[g]=p.charAt(0)+q;0<g&&(f=f&&d[g]===d[g-1])}return f?d[0]:d.join("")}var g=a("uniq");h.exports=function(a,h){for(var v=h[1].length-Math.abs(a.arrayBlockIndices[0])|
0,n=Array(a.arrayArgs.length),u=Array(a.arrayArgs.length),q=0;q<a.arrayArgs.length;++q)u[q]=h[2*q],n[q]=h[2*q+1];for(var l=[],e=[],c=[],m=[],r=[],q=0;q<a.arrayArgs.length;++q){0>a.arrayBlockIndices[q]?(c.push(0),m.push(v),l.push(v),e.push(v+a.arrayBlockIndices[q])):(c.push(a.arrayBlockIndices[q]),m.push(a.arrayBlockIndices[q]+v),l.push(0),e.push(a.arrayBlockIndices[q]));for(var z=[],D=0;D<n[q].length;D++)c[q]<=n[q][D]&&n[q][D]<m[q]&&z.push(n[q][D]-c[q]);r.push(z)}e=["SS"];m=["'use strict'"];z=[];
for(D=0;D<v;++D)z.push(["s",D,"=SS[",D,"]"].join(""));for(q=0;q<a.arrayArgs.length;++q){e.push("a"+q);e.push("t"+q);e.push("p"+q);for(D=0;D<v;++D)z.push(["t",q,"p",D,"=t",q,"[",c[q]+D,"]"].join(""));for(D=0;D<Math.abs(a.arrayBlockIndices[q]);++D)z.push(["t",q,"b",D,"=t",q,"[",l[q]+D,"]"].join(""))}for(q=0;q<a.scalarArgs.length;++q)e.push("Y"+q);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){D=Array(v);for(q=0;q<v;++q)D[q]="0";z.push(["index=[",D.join(","),"]"].join(""))}for(q=
0;q<a.offsetArgs.length;++q){l=a.offsetArgs[q];c=[];for(D=0;D<l.offset.length;++D)0!==l.offset[D]&&(1===l.offset[D]?c.push(["t",l.array,"p",D].join("")):c.push([l.offset[D],"*t",l.array,"p",D].join("")));0===c.length?z.push("q"+q+"=0"):z.push(["q",q,"=",c.join("+")].join(""))}q=g([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(q);m.push("var "+z.join(","));for(q=0;q<a.arrayArgs.length;++q)m.push("p"+q+"|=0");3<a.pre.body.length&&m.push(f(a.pre,a,u));q=f(a.body,
a,u);a:for(D=0,z=r[0].length;D<z;){for(l=1;l<r.length;++l)if(r[l][D]!==r[0][D])break a;++D}D<v?m.push(p(D,r[0],a,q)):m.push(t(r[0],a,q));3<a.post.body.length&&m.push(f(a.post,a,u));a.debug&&console.log("-----Generated cwise routine for ",h,":\n"+m.join("\n")+"\n----------");v=[a.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",D,d(u)].join("");return(new Function(["function ",v,"(",e.join(","),"){",m.join("\n"),"} return ",v].join("")))()}},{uniq:124}],74:[function(a,h,n){var t=a("./compile.js");
h.exports=function(a){var f=["'use strict'","var CACHED={}"],d=[];f.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var g=[],k=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],v=[],n=[],u=0;u<a.arrayArgs.length;++u){var q=a.arrayArgs[u];d.push(["t",q,"=array",q,".dtype,r",q,"=array",q,".order"].join(""));g.push("t"+q);g.push("r"+q);k.push("t"+q);k.push("r"+
q+".join()");h.push("array"+q+".data");h.push("array"+q+".stride");h.push("array"+q+".offset|0");0<u&&(v.push("array"+a.arrayArgs[0]+".shape.length===array"+q+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[u]))),n.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+q+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[u])+"]"))}1<a.arrayArgs.length&&(f.push("if (!("+v.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
f.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),f.push("if (!("+n.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),f.push("}"));for(u=0;u<a.scalarArgs.length;++u)h.push("scalar"+a.scalarArgs[u]);d.push(["type=[",k.join(","),"].join()"].join(""));d.push("proc=CACHED[type]");f.push("var "+d.join(","));f.push(["if(!proc){CACHED[type]=proc=compile([",g.join(","),"])}return proc(",h.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+f.join("\n")+"\n----------");return(new Function("compile",f.join("\n")))(t.bind(void 0,a))}},{"./compile.js":73}],75:[function(a,h,n){(function(a){var p=!1;if("undefined"!==typeof Float64Array){var f=new Float64Array(1),d=new Uint32Array(f.buffer);f[0]=1;p=!0;1072693248===d[1]?(h.exports=function(a){f[0]=a;return[d[0],d[1]]},h.exports.pack=function(a,g){d[0]=a;d[1]=g;return f[0]},h.exports.lo=function(a){f[0]=a;return d[0]},h.exports.hi=
function(a){f[0]=a;return d[1]}):1072693248===d[0]?(h.exports=function(a){f[0]=a;return[d[1],d[0]]},h.exports.pack=function(a,g){d[1]=a;d[0]=g;return f[0]},h.exports.lo=function(a){f[0]=a;return d[1]},h.exports.hi=function(a){f[0]=a;return d[0]}):p=!1}if(!p){var g=new a(8);h.exports=function(a){g.writeDoubleLE(a,0,!0);return[g.readUInt32LE(0,!0),g.readUInt32LE(4,!0)]};h.exports.pack=function(a,d){g.writeUInt32LE(a,0,!0);g.writeUInt32LE(d,4,!0);return g.readDoubleLE(0,!0)};h.exports.lo=function(a){g.writeDoubleLE(a,
0,!0);return g.readUInt32LE(0,!0)};h.exports.hi=function(a){g.writeDoubleLE(a,0,!0);return g.readUInt32LE(4,!0)}}h.exports.sign=function(a){return h.exports.hi(a)>>>31};h.exports.exponent=function(a){return(h.exports.hi(a)<<1>>>21)-1023};h.exports.fraction=function(a){var d=h.exports.lo(a);a=h.exports.hi(a);var f=a&1048575;a&2146435072&&(f+=1048576);return[d,f]};h.exports.denormalized=function(a){return!(h.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:61}],76:[function(a,h,n){function t(a,
f,d){var g=a[d]|0;if(0>=g)return[];var k=Array(g),h;if(d===a.length-1)for(h=0;h<g;++h)k[h]=f;else for(h=0;h<g;++h)k[h]=t(a,f,d+1);return k}h.exports=function(a,f){"undefined"===typeof f&&(f=0);switch(typeof a){case "number":if(0<a){var d=a|0,g=f,k,h;k=Array(d);for(h=0;h<d;++h)k[h]=g;return k}break;case "object":if("number"===typeof a.length)return t(a,f,0)}return[]}},{}],77:[function(a,h,n){h.exports=function(a,f){var d=a.length;if("number"!==typeof f){for(var g=f=0;g<d;++g){var k=a[g];f=Math.max(f,
k[0],k[1])}f=(f|0)+1}f|=0;for(var h=Array(f),g=0;g<f;++g)h[g]=[];for(g=0;g<d;++g)k=a[g],h[k[0]].push(k[1]),h[k[1]].push(k[0]);for(d=0;d<f;++d)t(h[d],function(a,d){return a-d});return h};var t=a("uniq")},{uniq:124}],78:[function(a,h,n){function t(a,e,c,d,f,g){this._color=a;this.key=e;this.value=c;this.left=d;this.right=f;this._count=g}function p(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function f(a,e){return new t(a,e.key,e.value,e.left,e.right,e._count)}function d(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function g(a,e){this._compare=a;this.root=e}function k(a,e){if(e.left){var c=k(a,e.left);if(c)return c}if(c=a(e.key,e.value))return c;if(e.right)return k(a,e.right)}function y(a,e,c,d){if(0>=e(a,d.key)){if(d.left){var f=y(a,e,c,d.left);if(f)return f}if(f=c(d.key,d.value))return f}if(d.right)return y(a,e,c,d.right)}function v(a,e,c,d,f){var g=c(a,f.key),k=c(e,f.key);if(0>=g&&(f.left&&(g=v(a,e,c,d,f.left))||0<k&&(g=d(f.key,f.value))))return g;if(0<
k&&f.right)return v(a,e,c,d,f.right)}function w(a,e){this.tree=a;this._stack=e}function u(a,e){a.key=e.key;a.value=e.value;a.left=e.left;a.right=e.right;a._color=e._color;a._count=e._count}function q(a,e){return a<e?-1:a>e?1:0}h.exports=function(a){return new g(a||q,null)};a=g.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(e,c){a.push(e)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(e,c){a.push(c)});return a}});
Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,e){for(var c=this._compare,m=this.root,r=[],k=[];m;){var p=c(a,m.key);r.push(m);k.push(p);m=0>=p?m.left:m.right}r.push(new t(0,a,e,null,null,1));for(p=r.length-2;0<=p;--p)m=r[p],r[p]=0>=k[p]?new t(m._color,m.key,m.value,r[p+1],m.right,m._count+1):new t(m._color,m.key,m.value,m.left,r[p+1],m._count+1);for(p=r.length-1;1<p;--p){k=r[p-1];m=r[p];if(1===k._color||1===m._color)break;var b=r[p-2];
if(b.left===k)if(k.left===m){var q=b.right;if(q&&0===q._color)k._color=1,b.right=f(1,q),b._color=0,--p;else{b._color=0;b.left=k.right;k._color=1;k.right=b;r[p-2]=k;r[p-1]=m;d(b);d(k);3<=p&&(p=r[p-3],p.left===b?p.left=k:p.right=k);break}}else if((q=b.right)&&0===q._color)k._color=1,b.right=f(1,q),b._color=0,--p;else{k.right=m.left;b._color=0;b.left=m.right;m._color=1;m.left=k;m.right=b;r[p-2]=m;r[p-1]=k;d(b);d(k);d(m);3<=p&&(p=r[p-3],p.left===b?p.left=m:p.right=m);break}else if(k.right===m)if((q=b.left)&&
0===q._color)k._color=1,b.left=f(1,q),b._color=0,--p;else{b._color=0;b.right=k.left;k._color=1;k.left=b;r[p-2]=k;r[p-1]=m;d(b);d(k);3<=p&&(p=r[p-3],p.right===b?p.right=k:p.left=k);break}else if((q=b.left)&&0===q._color)k._color=1,b.left=f(1,q),b._color=0,--p;else{k.left=m.right;b._color=0;b.right=m.left;m._color=1;m.right=k;m.left=b;r[p-2]=m;r[p-1]=k;d(b);d(k);d(m);3<=p&&(p=r[p-3],p.right===b?p.right=m:p.left=m);break}}r[0]._color=1;return new g(c,r[0])};a.forEach=function(a,e,c){if(this.root)switch(arguments.length){case 1:return k(a,
this.root);case 2:return y(e,this._compare,a,this.root);case 3:if(!(0<=this._compare(e,c)))return v(e,c,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],e=this.root;e;)a.push(e),e=e.left;return new w(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],e=this.root;e;)a.push(e),e=e.right;return new w(this,a)}});a.at=function(a){if(0>a)return new w(this,[]);for(var e=this.root,c=[];;){c.push(e);if(e.left){if(a<e.left._count){e=e.left;continue}a-=
e.left._count}if(!a)return new w(this,c);--a;if(e.right){if(a>=e.right._count)break;e=e.right}else break}return new w(this,[])};a.ge=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var g=e(a,c.key);d.push(c);0>=g&&(f=d.length);c=0>=g?c.left:c.right}d.length=f;return new w(this,d)};a.gt=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var g=e(a,c.key);d.push(c);0>g&&(f=d.length);c=0>g?c.left:c.right}d.length=f;return new w(this,d)};a.lt=function(a){for(var e=this._compare,
c=this.root,d=[],f=0;c;){var g=e(a,c.key);d.push(c);0<g&&(f=d.length);c=0>=g?c.left:c.right}d.length=f;return new w(this,d)};a.le=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var g=e(a,c.key);d.push(c);0<=g&&(f=d.length);c=0>g?c.left:c.right}d.length=f;return new w(this,d)};a.find=function(a){for(var e=this._compare,c=this.root,d=[];c;){var f=e(a,c.key);d.push(c);if(0===f)return new w(this,d);c=0>=f?c.left:c.right}return new w(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var e=this._compare,c=this.root;c;){var d=e(a,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};a=w.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new w(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var e=
Array(a.length),c=a[a.length-1];e[e.length-1]=new t(c._color,c.key,c.value,c.left,c.right,c._count);for(var m=a.length-2;0<=m;--m)c=a[m],e[m]=c.left===a[m+1]?new t(c._color,c.key,c.value,e[m+1],c.right,c._count):new t(c._color,c.key,c.value,c.left,e[m+1],c._count);c=e[e.length-1];if(c.left&&c.right){a=e.length;for(c=c.left;c.right;)e.push(c),c=c.right;m=e[a-1];e.push(new t(c._color,m.key,m.value,c.left,c.right,c._count));e[a-1].key=c.key;e[a-1].value=c.value;for(m=e.length-2;m>=a;--m)c=e[m],e[m]=
new t(c._color,c.key,c.value,c.left,e[m+1],c._count);e[a-1].left=e[a]}c=e[e.length-1];if(0===c._color)for(m=e[e.length-2],m.left===c?m.left=null:m.right===c&&(m.right=null),e.pop(),m=0;m<e.length;++m)e[m]._count--;else if(c.left||c.right)for(c.left?u(c,c.left):c.right&&u(c,c.right),c._color=1,m=0;m<e.length-1;++m)e[m]._count--;else{if(1===e.length)return new g(this.tree._compare,null);for(m=0;m<e.length;++m)e[m]._count--;for(var m=e[e.length-2],k,q,h,b=e.length-1;0<=b;--b){a=e[b];if(0===b){a._color=
1;break}k=e[b-1];if(k.left===a){q=k.right;if(q.right&&0===q.right._color){q=k.right=p(q);h=q.right=p(q.right);k.right=q.left;q.left=k;q.right=h;q._color=k._color;a._color=1;k._color=1;h._color=1;d(k);d(q);if(1<b){var n=e[b-2];n.left===k?n.left=q:n.right=q}e[b-1]=q;break}else if(q.left&&0===q.left._color){q=k.right=p(q);h=q.left=p(q.left);k.right=h.left;q.left=h.right;h.left=k;h.right=q;h._color=k._color;k._color=1;q._color=1;a._color=1;d(k);d(q);d(h);1<b&&(n=e[b-2],n.left===k?n.left=h:n.right=h);
e[b-1]=h;break}if(1===q._color)if(0===k._color){k._color=1;k.right=f(0,q);break}else k.right=f(0,q);else q=p(q),k.right=q.left,q.left=k,q._color=k._color,k._color=0,d(k),d(q),1<b&&(n=e[b-2],n.left===k?n.left=q:n.right=q),e[b-1]=q,e[b]=k,b+1<e.length?e[b+1]=a:e.push(a),b+=2}else{q=k.left;if(q.left&&0===q.left._color){q=k.left=p(q);h=q.left=p(q.left);k.left=q.right;q.right=k;q.left=h;q._color=k._color;a._color=1;k._color=1;h._color=1;d(k);d(q);1<b&&(n=e[b-2],n.right===k?n.right=q:n.left=q);e[b-1]=q;
break}else if(q.right&&0===q.right._color){q=k.left=p(q);h=q.right=p(q.right);k.left=h.right;q.right=h.left;h.right=k;h.left=q;h._color=k._color;k._color=1;q._color=1;a._color=1;d(k);d(q);d(h);1<b&&(n=e[b-2],n.right===k?n.right=h:n.left=h);e[b-1]=h;break}if(1===q._color)if(0===k._color){k._color=1;k.left=f(0,q);break}else k.left=f(0,q);else q=p(q),k.left=q.right,q.right=k,q._color=k._color,k._color=0,d(k),d(q),1<b&&(n=e[b-2],n.right===k?n.right=q:n.left=q),e[b-1]=q,e[b]=k,b+1<e.length?e[b+1]=a:e.push(a),
b+=2}}m.left===c?m.left=null:m.right=null}return new g(this.tree._compare,e[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,e=this._stack;if(0===e.length)return(a=this.tree.root)?a._count:0;e[e.length-1].left&&(a=e[e.length-
1].left._count);for(var c=e.length-2;0<=c;--c)e[c+1]===e[c].right&&(++a,e[c].left&&(a+=e[c].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var e=a[a.length-1];if(e.right)for(e=e.right;e;)a.push(e),e=e.left;else for(a.pop();0<a.length&&a[a.length-1].right===e;)e=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var e=a.length-1;0<e;--e)if(a[e-1].left===
a[e])return!0;return!1}});a.update=function(a){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var c=Array(e.length),d=e[e.length-1];c[c.length-1]=new t(d._color,d.key,a,d.left,d.right,d._count);for(a=e.length-2;0<=a;--a)d=e[a],c[a]=d.left===e[a+1]?new t(d._color,d.key,d.value,c[a+1],d.right,d._count):new t(d._color,d.key,d.value,d.left,c[a+1],d._count);return new g(this.tree._compare,c[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var e=a[a.length-1];if(e.left)for(e=
e.left;e;)a.push(e),e=e.right;else for(a.pop();0<a.length&&a[a.length-1].left===e;)e=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var e=a.length-1;0<e;--e)if(a[e-1].right===a[e])return!0;return!1}})},{}],79:[function(a,h,n){function t(a){if(0>a)return Number("0/0");for(var g=f[0],k=f.length-1;0<k;--k)g+=f[k]/(a+k);k=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(k)-k+Math.log(g)-
Math.log(a)}var p=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],f=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
h.exports=function g(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*g(1-a));if(100<a)return Math.exp(t(a));--a;for(var f=p[0],h=1;9>h;h++)f+=p[h]/(a+h);h=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,a+.5)*Math.exp(-h)*f};h.exports.log=t},{}],80:[function(a,h,n){h.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],81:[function(a,h,n){var t=a("./identity");h.exports=function(a,f,d,g){var k,h,n,w,u,
q,l,e,c=f[0],m=f[1];f=f[2];n=g[0];w=g[1];h=g[2];l=d[0];g=d[1];k=d[2];if(1E-6>Math.abs(c-l)&&1E-6>Math.abs(m-g)&&1E-6>Math.abs(f-k))return t(a);d=c-l;g=m-g;l=f-k;e=1/Math.sqrt(d*d+g*g+l*l);d*=e;g*=e;l*=e;k=w*l-h*g;h=h*d-n*l;n=n*g-w*d;(e=Math.sqrt(k*k+h*h+n*n))?(e=1/e,k*=e,h*=e,n*=e):n=h=k=0;w=g*n-l*h;u=l*k-d*n;q=d*h-g*k;(e=Math.sqrt(w*w+u*u+q*q))?(e=1/e,w*=e,u*=e,q*=e):q=u=w=0;a[0]=k;a[1]=w;a[2]=d;a[3]=0;a[4]=h;a[5]=u;a[6]=g;a[7]=0;a[8]=n;a[9]=q;a[10]=l;a[11]=0;a[12]=-(k*c+h*m+n*f);a[13]=-(w*c+u*m+
q*f);a[14]=-(d*c+g*m+l*f);a[15]=1;return a}},{"./identity":80}],82:[function(a,h,n){h.exports=function(a,p,f,d,g){p=1/Math.tan(p/2);var k=1/(d-g);a[0]=p/f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=p;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(g+d)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*g*d*k;a[15]=0;return a}},{}],83:[function(a,h,n){n.read=function(a,p,f,d,g){var k;k=8*g-d-1;var h=(1<<k)-1,n=h>>1,w=-7;g=f?g-1:0;var u=f?-1:1,q=a[p+g];g+=u;f=q&(1<<-w)-1;q>>=-w;for(w+=k;0<w;f=256*f+a[p+g],g+=u,w-=8);k=f&(1<<-w)-1;f>>=-w;
for(w+=d;0<w;k=256*k+a[p+g],g+=u,w-=8);if(0===f)f=1-n;else{if(f===h)return k?NaN:Infinity*(q?-1:1);k+=Math.pow(2,d);f-=n}return(q?-1:1)*k*Math.pow(2,f-d)};n.write=function(a,p,f,d,g,k){var h,n=8*k-g-1,w=(1<<n)-1,u=w>>1,q=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;k=d?0:k-1;var l=d?1:-1,e=0>p||0===p&&0>1/p?1:0;p=Math.abs(p);isNaN(p)||Infinity===p?(p=isNaN(p)?1:0,d=w):(d=Math.floor(Math.log(p)/Math.LN2),1>p*(h=Math.pow(2,-d))&&(d--,h*=2),p=1<=d+u?p+q/h:p+q*Math.pow(2,1-u),2<=p*h&&(d++,h/=2),d+u>=w?(p=
0,d=w):1<=d+u?(p=(p*h-1)*Math.pow(2,g),d+=u):(p=p*Math.pow(2,u-1)*Math.pow(2,g),d=0));for(;8<=g;a[f+k]=p&255,k+=l,p/=256,g-=8);d=d<<g|p;for(n+=g;0<n;a[f+k]=d&255,k+=l,d/=256,n-=8);a[f+k-l]|=128*e}},{}],84:[function(a,h,n){function t(c,a,e,d,f){this.mid=c;this.left=a;this.right=e;this.leftPoints=d;this.rightPoints=f;this.count=(a?a.count:0)+(e?e.count:0)+d.length}function p(a,e){a.mid=e.mid;a.left=e.left;a.right=e.right;a.leftPoints=e.leftPoints;a.rightPoints=e.rightPoints;a.count=e.count}function f(a,
e){var d=q(e);a.mid=d.mid;a.left=d.left;a.right=d.right;a.leftPoints=d.leftPoints;a.rightPoints=d.rightPoints;a.count=d.count}function d(a,e){var d=a.intervals([]),g=d.indexOf(e);if(0>g)return 0;d.splice(g,1);f(a,d);return 1}function g(a,e,d){for(var f=0;f<a.length&&a[f][0]<=e;++f){var g=d(a[f]);if(g)return g}}function k(a,e,d){for(var f=a.length-1;0<=f&&a[f][1]>=e;--f){var g=d(a[f]);if(g)return g}}function y(a,e){for(var d=0;d<a.length;++d){var f=e(a[d]);if(f)return f}}function v(a,e){return a-e}
function w(a,e){var d=a[0]-e[0];return d?d:a[1]-e[1]}function u(a,e){var d=a[1]-e[1];return d?d:a[0]-e[0]}function q(a){if(0===a.length)return null;for(var e=[],d=0;d<a.length;++d)e.push(a[d][0],a[d][1]);e.sort(v);for(var e=e[e.length>>1],f=[],g=[],b=[],d=0;d<a.length;++d){var l=a[d];l[1]<e?f.push(l):e<l[0]?g.push(l):b.push(l)}a=b.slice();b.sort(w);a.sort(u);return new t(e,q(f),q(g),b,a)}function l(a){this.root=a}var e=a("binary-search-bounds");h.exports=function(a){return a&&0!==a.length?new l(q(a)):
new l(null)};a=t.prototype;a.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};a.insert=function(a){var d=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(d+1)?(d=this.intervals([]),d.push(a),f(this,d)):this.left.insert(a):this.left=q([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(d+1)?(d=this.intervals([]),d.push(a),f(this,d)):this.right.insert(a):
this.right=q([a]);else{var d=e.ge(this.leftPoints,a,w),g=e.ge(this.rightPoints,a,u);this.leftPoints.splice(d,0,a);this.rightPoints.splice(g,0,a)}};a.remove=function(a){var f=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(f-1))return d(this,a);f=this.left.remove(a);if(2===f)return this.left=null,--this.count,1;1===f&&--this.count;return f}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(f-1))return d(this,a);
f=this.right.remove(a);if(2===f)return this.right=null,--this.count,1;1===f&&--this.count;return f}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var g=this.left;g.right;)a=g,g=g.right;if(a===this)g.right=this.right;else{var l=this.left,f=this.right;a.count-=g.count;a.right=g.left;g.left=l;g.right=f}p(this,g);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
p(this,this.left):p(this,this.right);return 1}for(l=e.ge(this.leftPoints,a,w);l<this.leftPoints.length&&this.leftPoints[l][0]===a[0];++l)if(this.leftPoints[l]===a)for(--this.count,this.leftPoints.splice(l,1),f=e.ge(this.rightPoints,a,u);f<this.rightPoints.length&&this.rightPoints[f][1]===a[1];++f)if(this.rightPoints[f]===a)return this.rightPoints.splice(f,1),1;return 0};a.queryPoint=function(a,e){if(a<this.mid){if(this.left){var d=this.left.queryPoint(a,e);if(d)return d}return g(this.leftPoints,a,
e)}return a>this.mid?this.right&&(d=this.right.queryPoint(a,e))?d:k(this.rightPoints,a,e):y(this.leftPoints,e)};a.queryInterval=function(a,e,d){if(a<this.mid&&this.left){var f=this.left.queryInterval(a,e,d);if(f)return f}return e>this.mid&&this.right&&(f=this.right.queryInterval(a,e,d))?f:e<this.mid?g(this.leftPoints,e,d):a>this.mid?k(this.rightPoints,a,d):y(this.leftPoints,d)};a=l.prototype;a.insert=function(a){this.root?this.root.insert(a):this.root=new t(a[0],null,null,[a],[a])};a.remove=function(a){return this.root?
(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};a.queryPoint=function(a,e){if(this.root)return this.root.queryPoint(a,e)};a.queryInterval=function(a,e,d){if(a<=e&&this.root)return this.root.queryInterval(a,e,d)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":85}],85:[function(a,h,n){function t(a,d,g,k,h,p){a=["function ",a,"(a,l,h,",
k.join(","),"){",p?"":"var i=",g?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",h?".get(m)":"[m]"];p?0>d.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",d,"){i=m;");g?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");p?a.push("return -1};"):a.push("return i};");return a.join("")}function p(a,d,g,k){return(new Function([t("A","x"+a+"y",d,["y"],!1,k),t("B","x"+a+"y",d,["y"],!0,k),t("P","c(x,y)"+a+"0",
d,["y","c"],!1,k),t("Q","c(x,y)"+a+"0",d,["y","c"],!0,k),"function dispatchBsearch",g,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",g].join("")))()}h.exports=
{ge:p(">=",!1,"GE"),gt:p(">",!1,"GT"),lt:p("<",!0,"LT"),le:p("<=",!0,"LE"),eq:p("-",!0,"EQ",!0)}},{}],86:[function(a,h,n){h.exports=function(a,p){p=p||Array(a.length);for(var f=0;f<a.length;++f)p[a[f]]=f;return p}},{}],87:[function(a,h,n){h.exports=function(a){for(var p=Array(a),f=0;f<a;++f)p[f]=f;return p}},{}],88:[function(a,h,n){function t(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}h.exports=function(a){return null!=a&&(t(a)||"function"===typeof a.readFloatLE&&
"function"===typeof a.slice&&t(a.slice(0,0))||!!a._isBuffer)}},{}],89:[function(a,h,n){var t={}.toString;h.exports=Array.isArray||function(a){return"[object Array]"==t.call(a)}},{}],90:[function(a,h,n){function t(a,d,f){for(var e=0,c=0;c<a;++c)d&1<<c&&(e|=1<<f[c]);return e}function p(a,q,l,e,c,m){function h(a,b){C.push("for(","i"+c[a],"=",b,";","i"+c[a],"<","s"+c[a],";","++","i"+c[a],"){")}function p(a){for(var b=0;b<x;++b)C.push("p"+b,"+=","u"+b+"_"+c[a],";");C.push("}")}function n(){for(var a=1;a<
1<<F;++a)C.push(w,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",w,";")}function b(a,f){if(0>a){for(var l=0;l<x;++l)m[l]?C.push("c"+l+"_0","=","d"+l,".get(","p"+l,");"):C.push("c"+l+"_0","=","d"+l,"[","p"+l,"];");for(var q=[],l=0;l<x;++l)q.push("c"+l+"_0");for(l=0;l<e;++l)q.push("x"+l);C.push("b0","=",g,"[",v,"]=phase(",q.join(),");");for(q=1;q<1<<F;++q)C.push("b"+q,"=",g,"[",v,"+","e"+q,"];");l=[];for(q=1;q<1<<F;++q)l.push("(b0!==b"+q+")");C.push("if(",l.join("||"),"){");for(var u=[],l=0;l<F;++l)u.push("i"+
l);for(l=0;l<x;++l)for(u.push("c"+l+"_0"),q=1;q<1<<F;++q)m[l]?C.push("c"+l+"_"+q,"=","d"+l,".get(","p"+l,"+","d"+l+"_"+q,");"):C.push("c"+l+"_"+q,"=","d"+l,"[","p"+l,"+","d"+l+"_"+q,"];"),u.push("c"+l+"_"+q);for(l=0;l<1<<F;++l)u.push("b"+l);for(l=0;l<e;++l)u.push("x"+l);C.push("vertex(",u.join(),");","v0","=",d,"[",v,"]=",k,"++;");l=(1<<F)-1;u="b"+l;for(q=0;q<F;++q)if(0===(f&~(1<<q))){for(var t=l^1<<q,w="b"+t,y=[],G=t;0<G;G=G-1&t)y.push(d+"["+v+"+"+("e"+G)+"]");y.push("v0");for(G=0;G<x;++G)q&1?y.push("c"+
G+"_"+l,"c"+G+"_"+t):y.push("c"+G+"_"+t,"c"+G+"_"+l);q&1?y.push(u,w):y.push(w,u);for(G=0;G<e;++G)y.push("x"+G);C.push("if(",u,"!==",w,"){","face(",y.join(),")}")}C.push("}",v,"+=1;")}else{for(q=a-1;0<=q;--q)h(q,0);l=[];for(q=0;q<x;++q)m[q]?l.push("d"+q+".get("+("p"+q)+")"):l.push("d"+q+"["+("p"+q)+"]");for(q=0;q<e;++q)l.push("x"+q);C.push(g,"[",v,"++]=phase(",l.join(),");");for(q=0;q<a;++q)p(q);for(q=0;q<x;++q)C.push("p"+q,"+=","u"+q+"_"+c[a],";");C.push("if(","s"+c[a],">0){","i"+c[a],"=1;");b(a-
1,f|1<<c[a]);for(q=0;q<x;++q)C.push("p"+q,"+=","u"+q+"_"+c[a],";");a===F-1&&(C.push(v,"=0;"),n());h(a,2);b(a-1,f);a===F-1&&(C.push("if(","i"+c[F-1],"&1){",v,"=0;}"),n());p(a);C.push("}")}}var x=m.length,F=c.length;if(2>F)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var G="extractContour"+c.join("_"),C=[],B=[],N=[],H=0;H<x;++H)N.push("a"+H);for(H=0;H<e;++H)N.push("x"+H);for(H=0;H<F;++H)B.push("s"+H+"=a0.shape["+H+"]|0");for(H=0;H<x;++H){B.push("d"+H+"="+("a"+H)+".data",
"o"+H+"="+("a"+H)+".offset|0");for(var E=0;E<F;++E)B.push("t"+H+"_"+E+"="+("a"+H)+".stride["+E+"]|0")}for(H=0;H<x;++H)for(B.push("p"+H+"="+("o"+H)),B.push("c"+H+"_0"),E=1;E<1<<F;++E){for(var O=[],J=0;J<F;++J)E&1<<J&&O.push("-"+("t"+H+"_"+J));B.push("d"+H+"_"+E+"=("+O.join("")+")|0");B.push("c"+H+"_"+E+"=0")}for(H=0;H<x;++H)for(E=0;E<F;++E)J=["t"+H+"_"+c[E]],0<E&&J.push("t"+H+"_"+c[E-1]+"*"+("s"+c[E-1])),B.push("u"+H+"_"+c[E]+"=("+J.join("-")+")|0");for(H=0;H<F;++H)B.push("i"+H+"=0");B.push(k+"=0");
E=["2"];for(H=F-2;0<=H;--H)E.push("s"+c[H]);B.push(y+"=("+E.join("*")+")|0",g+"=mallocUint32("+y+")",d+"=mallocUint32("+y+")",v+"=0");B.push("b0=0");for(E=1;E<1<<F;++E){H=[];O=[];for(J=0;J<F;++J)E&1<<J&&(0===O.length?H.push("1"):H.unshift(O.join("*"))),O.push("s"+c[J]);J="";0>H[0].indexOf("s"+c[F-2])&&(J="-");O=t(F,E,c);B.push("e"+O+"=(-"+H.join("-")+")|0","y"+O+"=("+J+H.join("-")+")|0","b"+O+"=0")}B.push("v0=0",w+"=0");b(F-1,0);C.push("freeUint32(",d,");freeUint32(",g,");");G=["'use strict';function ",
G,"(",N.join(),"){var ",B.join(),";",C.join(""),"}return ",G].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",G))(a,q,l,f.mallocUint32,f.freeUint32)}var f=a("typedarray-pool");h.exports=function(a){function d(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&d("Must specify arguments");var f=a.order;Array.isArray(f)||d("Must specify order");var e=a.arrayArguments||1;1>e&&d("Must have at least one array argument");var c=a.scalarArguments||0;0>c&&d("Scalar arg count must be > 0");
"function"!==typeof a.vertex&&d("Must specify vertex creation function");"function"!==typeof a.cell&&d("Must specify cell creation function");"function"!==typeof a.phase&&d("Must specify phase function");for(var m=a.getters||[],g=Array(e),k=0;k<e;++k)0<=m.indexOf(k)?g[k]=!0:g[k]=!1;return p(a.vertex,a.cell,a.phase,c,f,g)};var d="V",g="P",k="N",y="Q",v="X",w="T"},{"typedarray-pool":122}],91:[function(a,h,n){function t(a,d){return a[0]-d[0]}function p(){var a=this.stride,d=Array(a.length),f;for(f=0;f<
d.length;++f)d[f]=[Math.abs(a[f]),f];d.sort(t);a=Array(d.length);for(f=0;f<a.length;++f)a[f]=d[f][1];return a}function f(a,d){var f=["View",d,"d",a].join("");0>d&&(f="View_Nil"+a);var l="generic"===a;if(-1===d){var e,f=new Function("function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
f+"(a){return new "+f+"(a);}");return f()}if(0===d)return f=new Function("TrivialArray","function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
f+"_get(){return "+(l?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(l?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),f(v[a][0]);e=["'use strict'"];var c=g(d),m=c.map(function(a){return"i"+a}),k="this.offset+"+c.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),h=c.map(function(a){return"b"+a}).join(","),n=c.map(function(a){return"c"+a}).join(",");e.push("function "+
f+"(a,"+h+","+n+",d){this.data=a","this.shape=["+h+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+a+"'","proto.dimension="+d);e.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+c.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===d?e.push("proto.order=[0]"):(e.push("Object.defineProperty(proto,'order',{get:"),4>d?(e.push("function "+f+"_order(){"),2===d?e.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===d&&e.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):e.push("ORDER})"));e.push("proto.set=function "+f+"_set("+m.join(",")+",v){");l?e.push("return this.data.set("+k+",v)}"):e.push("return this.data["+k+"]=v}");e.push("proto.get=function "+f+"_get("+m.join(",")+"){");l?e.push("return this.data.get("+
k+")}"):e.push("return this.data["+k+"]}");e.push("proto.index=function "+f+"_index(",m.join(),"){return "+k+"}");e.push("proto.hi=function "+f+"_hi("+m.join(",")+"){return new "+f+"(this.data,"+c.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+c.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");l=c.map(function(a){return"a"+a+"=this.shape["+a+"]"});k=c.map(function(a){return"c"+a+"=this.stride["+a+"]"});e.push("proto.lo=function "+
f+"_lo("+m.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+k.join(","));for(l=0;l<d;++l)e.push("if(typeof i"+l+"==='number'&&i"+l+">=0){d=i"+l+"|0;b+=c"+l+"*d;a"+l+"-=d}");e.push("return new "+f+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"c"+a}).join(",")+",b)}");e.push("proto.step=function "+f+"_step("+m.join(",")+"){var "+c.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+c.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(l=0;l<d;++l)e.push("if(typeof i"+l+"==='number'){d=i"+l+"|0;if(d<0){c+=b"+l+"*(a"+l+"-1);a"+l+"=ceil(-a"+l+"/d)}else{a"+l+"=ceil(a"+l+"/d)}b"+l+"*=d}");e.push("return new "+f+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"b"+a}).join(",")+",c)}");k=Array(d);h=Array(d);for(l=0;l<d;++l)k[l]="a[i"+l+"]",h[l]="b[i"+l+"]";e.push("proto.transpose=function "+f+"_transpose("+m+"){"+m.map(function(a,c){return a+"=("+a+"===undefined?"+
c+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+k.join(",")+","+h.join(",")+",this.offset)}");e.push("proto.pick=function "+f+"_pick("+m+"){var a=[],b=[],c=this.offset");for(l=0;l<d;++l)e.push("if(typeof i"+l+"==='number'&&i"+l+">=0){c=(c+this.stride["+l+"]*i"+l+")|0}else{a.push(this.shape["+l+"]);b.push(this.stride["+l+"])}");e.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");e.push("return function construct_"+f+"(data,shape,stride,offset){return new "+
f+"(data,"+c.map(function(a){return"shape["+a+"]"}).join(",")+","+c.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");f=new Function("CTOR_LIST","ORDER",e.join("\n"));return f(v[a],p)}function d(a){if(k(a))return"buffer";if(y)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var g=a("iota-array"),k=a("is-buffer"),y="undefined"!==typeof Float64Array,v={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in v)v[a].push(f(a,-1))});h.exports=function(a,g,k,l){if(void 0===a){var e=v.array[0];return e([])}"number"===
typeof a&&(a=[a]);void 0===g&&(g=[a.length]);e=g.length;if(void 0===k){k=Array(e);for(var c=e-1,m=1;0<=c;--c)k[c]=m,m*=g[c]}if(void 0===l)for(c=l=0;c<e;++c)0>k[c]&&(l-=(g[c]-1)*k[c]);c=d(a);for(m=v[c];m.length<=e+1;)m.push(f(c,m.length-1));e=m[e+1];return e(a,g,k,l)}},{"iota-array":87,"is-buffer":88}],92:[function(a,h,n){var t=a("double-bits"),p=Math.pow(2,-1074);h.exports=function(a,d){if(isNaN(a)||isNaN(d))return NaN;if(a===d)return a;if(0===a)return 0>d?-p:p;var g=t.hi(a),k=t.lo(a);d>a===0<a?4294967295===
k?(g+=1,k=0):k+=1:0===k?(k=4294967295,--g):--k;return t.pack(k,g)}},{"double-bits":75}],93:[function(a,h,n){h.exports=function(a){var d=a.length;if(d<t)for(var g=1,k=0;k<d;++k)for(var h=0;h<k;++h)if(a[k]<a[h])g=-g;else{if(a[k]===a[h])return 0}else{for(var n=p.mallocUint8(d),k=0;k<d;++k)n[k]=0;g=1;for(k=0;k<d;++k)if(!n[k]){var w=1;n[k]=1;for(h=a[k];h!==k;h=a[h]){if(n[h])return p.freeUint8(n),0;w+=1;n[h]=1}w&1||(g=-g)}p.freeUint8(n)}return g};var t=32,p=a("typedarray-pool")},{"typedarray-pool":122}],
94:[function(a,h,n){var t=a("typedarray-pool"),p=a("invert-permutation");n.rank=function(a){var d=a.length;switch(d){case 0:case 1:return 0;case 2:return a[1]}var g=t.mallocUint32(d),k=t.mallocUint32(d),h=0,n;p(a,k);for(n=0;n<d;++n)g[n]=a[n];for(n=d-1;0<n;--n)d=k[n],a=g[n],g[n]=g[d],g[d]=a,k[n]=k[a],k[a]=d,h=(h+a)*n;t.freeUint32(k);t.freeUint32(g);return h};n.unrank=function(a,d,g){switch(a){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(d?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):
d?[0,1]:[1,0]}g=g||Array(a);var k,h,p=1;g[0]=0;for(h=1;h<a;++h)g[h]=h,p=p*h|0;for(h=a-1;0<h;--h)a=d/p|0,d=d-a*p|0,p=p/h|0,k=g[h]|0,g[h]=g[a]|0,g[a]=k|0;return g}},{"invert-permutation":86,"typedarray-pool":122}],95:[function(a,h,n){h.exports=function(a,f){function d(a,e){var d=w[e][a[e]];d.splice(d.indexOf(a),1)}function g(a,e,l){var g,k,b;for(k=0;2>k;++k)if(0<w[k][e].length){g=w[k][e][0];b=k;break}k=g[b^1];for(var h=0;2>h;++h)for(var q=w[h][e],p=0;p<q.length;++p){var u=q[p],n=u[h^1];0<t(f[a],f[e],
f[k],f[n])&&(g=u,k=n,b=h)}if(l)return k;g&&d(g,b);return k}function k(a,e){var l=w[e][a][0],k=[a];d(l,e);for(l=l[e^1];;){for(;l!==a;)k.push(l),l=g(k[k.length-2],l,!1);if(0===w[0][a].length+w[1][a].length)break;var l=k[k.length-1],h=a,b=k[1],q=g(l,h,!0);if(0>t(f[l],f[h],f[b],f[q]))break;k.push(a);l=g(l,h)}return k}for(var h=f.length|0,n=a.length,w=[Array(h),Array(h)],u=0;u<h;++u)w[0][u]=[],w[1][u]=[];for(u=0;u<n;++u){var q=a[u];w[0][q[0]].push(q);w[1][q[1]].push(q)}n=[];for(u=0;u<h;++u)0===w[0][u].length+
w[1][u].length&&n.push([u]);for(u=0;u<h;++u)for(q=0;2>q;++q){for(var l=[];0<w[q][u].length;){var e=k(u,q);e[1]===e[e.length-1]?l.push.apply(l,e):(0<l.length&&n.push(l),l=e)}0<l.length&&n.push(l)}return n};var t=a("compare-angle")},{"compare-angle":69}],96:[function(a,h,n){h.exports=function(a,f){for(var d=t(a,f.length),g=Array(f.length),k=Array(f.length),h=[],n=0;n<f.length;++n){var w=d[n].length;k[n]=w;g[n]=!0;1>=w&&h.push(n)}for(;0<h.length;)for(w=h.pop(),g[w]=!1,w=d[w],n=0;n<w.length;++n){var u=
w[n];0===--k[u]&&h.push(u)}d=Array(f.length);k=[];for(n=0;n<f.length;++n)g[n]?(w=k.length,d[n]=w,k.push(f[n])):d[n]=-1;h=[];for(n=0;n<a.length;++n)w=a[n],g[w[0]]&&g[w[1]]&&h.push([d[w[0]],d[w[1]]]);return[h,k]};var t=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":77}],97:[function(a,h,n){function t(a,d){for(var f=Array(a),e=0;e<a;++e)f[e]=d;return f}function p(a){for(var d=Array(a),f=0;f<a;++f)d[f]=[];return d}h.exports=function(a,h){function l(a){for(var b=a.length,c=0;c<b;++c)if(!E[a[c]])return!1;
return!0}var e=w(a,h);a=e[0];h=e[1];for(var c=h.length,m=f(a,h.length),r=0;r<c;++r)if(1===m[r].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var m=d(a,h),m=m.filter(function(a){for(var b=a.length,c=[0],e=0;e<b;++e)var d=h[a[e]],f=h[a[(e+1)%b]],l=k(-d[0],d[1]),m=k(-d[0],f[1]),d=k(f[0],d[1]),f=k(f[0],f[1]),c=y(c,y(y(l,m),y(d,f)));return 0<c[c.length-1]}),e=m.length,n=Array(e),D=Array(e),r=0;r<e;++r){n[r]=r;var b=Array(e),x=m[r].map(function(a){return h[a]}),F=g([x]),G=
0,C=0;a:for(;C<e;++C)if(b[C]=0,r!==C){for(var x=m[C],B=x.length,N=0;N<B;++N){var H=F(h[x[N]]);if(0!==H){0>H&&(b[C]=1,G+=1);continue a}}b[C]=1;G+=1}D[r]=[G,r,b]}D.sort(function(a,b){return b[0]-a[0]});for(r=0;r<e;++r)for(b=D[r],x=b[1],B=b[2],C=0;C<e;++C)B[C]&&(n[C]=x);D=p(e);for(r=0;r<e;++r)D[r].push(n[r]),D[n[r]].push(r);for(var b={},E=t(c,!1),r=0;r<e;++r)for(x=m[r],B=x.length,C=0;C<B;++C)c=x[C],F=x[(C+1)%B],G=Math.min(c,F)+":"+Math.max(c,F),G in b?(G=b[G],D[G].push(r),D[r].push(G),E[c]=E[F]=!0):
b[G]=r;C=[];c=t(e,-1);for(r=0;r<e;++r)n[r]!==r||l(m[r])?c[r]=-1:(C.push(r),c[r]=0);for(e=[];0<C.length;){r=C.pop();n=D[r];v(n,function(a,b){return a-b});var B=n.length,b=c[r],O;0===b&&(x=m[r],O=[x]);for(r=0;r<B;++r)x=n[r],0<=c[x]||(c[x]=b^1,C.push(x),0===b&&(x=m[x],l(x)||(x.reverse(),O.push(x))));0===b&&e.push(O)}return e};var f=a("edges-to-adjacency-list"),d=a("planar-dual"),g=a("point-in-big-polygon"),k=a("two-product"),y=a("robust-sum"),v=a("uniq"),w=a("./lib/trim-leaves")},{"./lib/trim-leaves":96,
"edges-to-adjacency-list":77,"planar-dual":95,"point-in-big-polygon":99,"robust-sum":110,"two-product":120,uniq:124}],98:[function(a,h,n){arguments[4][85][0].apply(n,arguments)},{dup:85}],99:[function(a,h,n){function t(){return!0}function p(a){return function(e,c){var d=a[e];return d?!!d.queryPoint(c,t):!1}}function f(a){for(var e={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],g=d[0][1],d=d[1][1],g=[Math.min(g,d),Math.max(g,d)];f in e?e[f].push(g):e[f]=[g]}a={};f=Object.keys(e);for(c=0;c<f.length;++c)a[f[c]]=
u(e[f[c]]);return p(a)}function d(a,e){return function(c){var d=q.le(e,c[0]);if(0>d)return 1;var f=a[d];if(!f)if(0<d&&e[d]===c[0])f=a[d-1];else return 1;for(d=1;f;){var g=f.key,k=v(c,g[0],g[1]);if(g[0][0]<g[1][0])if(0>k)f=f.left;else if(0<k)d=-1,f=f.right;else return 0;else if(0<k)f=f.left;else if(0>k)d=1,f=f.right;else return 0}return d}}function g(a){return 1}function k(a){return function(e){return a(e[0],e[1])?0:1}}function y(a,e){return function(c){return a(c[0],c[1])?0:e(c)}}h.exports=function(a){for(var e=
a.length,c=[],m=[],h=0;h<e;++h)for(var q=a[h],p=q.length,b=p-1,n=0;n<p;b=n++){var b=q[b],u=q[n];b[0]===u[0]?m.push([b,u]):c.push([b,u])}if(0===c.length)return 0===m.length?g:k(f(m));a=w(c);a=d(a.slabs,a.coordinates);return 0===m.length?a:y(f(m),a)};var v=a("robust-orientation")[3],w=a("slab-decomposition"),u=a("interval-tree-1d"),q=a("binary-search-bounds")},{"binary-search-bounds":98,"interval-tree-1d":84,"robust-orientation":105,"slab-decomposition":117}],100:[function(a,h,n){var t=a("big-rat/add");
h.exports=function(a,f){for(var d=a.length,g=Array(d),k=0;k<d;++k)g[k]=t(a[k],f[k]);return g}},{"big-rat/add":35}],101:[function(a,h,n){h.exports=function(a){for(var f=Array(a.length),d=0;d<a.length;++d)f[d]=t(a[d]);return f};var t=a("big-rat")},{"big-rat":38}],102:[function(a,h,n){var t=a("big-rat"),p=a("big-rat/mul");h.exports=function(a,d){for(var g=t(d),k=a.length,h=Array(k),n=0;n<k;++n)h[n]=p(a[n],g);return h}},{"big-rat":38,"big-rat/mul":47}],103:[function(a,h,n){var t=a("big-rat/sub");h.exports=
function(a,f){for(var d=a.length,g=Array(d),k=0;k<d;++k)g[k]=t(a[k],f[k]);return g}},{"big-rat/sub":50}],104:[function(a,h,n){function t(a,c){for(var d=Array(a.length-1),f=1;f<a.length;++f)for(var g=d[f-1]=Array(a.length-1),l=0,b=0;l<a.length;++l)l!==c&&(g[b++]=a[f][l]);return d}function p(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",p(a.slice(0,c)),",",p(a.slice(c)),")"].join("")}function f(a,c){if("m"===a.charAt(0)){if("w"===
c.charAt(0)){var d=a.split("[");return["w",c.substr(1),"m",d[0].substr(1)].join("")}return["prod(",a,",",c,")"].join("")}return f(c,a)}function d(a){if(2===a.length)return[["diff(",f(a[0][0],a[1][1]),",",f(a[1][0],a[0][1]),")"].join("")];for(var c=[],g=0;g<a.length;++g)c.push(["scale(",p(d(t(a,g))),",",g&1?"-":"",a[0][g],")"].join(""));return c}function g(a,c){for(var d=[],f=0;f<c-2;++f)d.push(["prod(m",a,"[",f,"],m",a,"[",f,"])"].join(""));return p(d)}function k(a){for(var c=[],f=[],l=Array(a),k=
0;k<a;++k){l[k]=Array(a);for(var h=0;h<a;++h)l[k][h]=["m",h,"[",a-k-2,"]"].join("")}for(k=0;k<a;++k)l[0][k]="1",l[a-1][k]="w"+k;for(k=0;k<a;++k)0===(k&1)?c.push.apply(c,d(t(l,k))):f.push.apply(f,d(t(l,k)));c=p(c);f=p(f);l="exactInSphere"+a;h=[];for(k=0;k<a;++k)h.push("m"+k);h=["function ",l,"(",h.join(),"){"];for(k=0;k<a;++k){h.push("var w",k,"=",g(k,a),";");for(var b=0;b<a;++b)b!==k&&h.push("var w",k,"m",b,"=scale(w",k,",m",b,"[0]);")}h.push("var p=",c,",n=",f,",d=diff(p,n);return d[d.length-1];}return ",
l);return(new Function("sum","diff","prod","scale",h.join("")))(w,u,v,q)}function y(a){var c=l[a.length];c||(c=l[a.length]=k(a.length));return c.apply(void 0,a)}var v=a("two-product"),w=a("robust-sum"),u=a("robust-subtract"),q=a("robust-scale"),l=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=l.length;)l.push(k(l.length));for(var a=[],c=["slow"],d=0;6>=d;++d)a.push("a"+d),c.push("o"+d);for(var f=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
d=2;6>=d;++d)f.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");f.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(f.join(""));a=Function.apply(void 0,c);h.exports=a.apply(void 0,[y].concat(l));for(d=0;6>=d;++d)h.exports[d]=l[d]})()},{"robust-scale":107,"robust-subtract":109,"robust-sum":110,"two-product":120}],105:[function(a,h,n){function t(a,c){for(var d=Array(a.length-1),f=1;f<a.length;++f)for(var g=
d[f-1]=Array(a.length-1),l=0,b=0;l<a.length;++l)l!==c&&(g[b++]=a[f][l]);return d}function p(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",p(a.slice(0,c)),",",p(a.slice(c)),")"].join("")}function f(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var c=[],d=0;d<a.length;++d)c.push(["scale(",p(f(t(a,d))),",",d&1?"-":"",a[0][d],")"].join(""));return c}function d(a){for(var c=
[],d=[],g=Array(a),l=0;l<a;++l){g[l]=Array(a);for(var h=0;h<a;++h)g[l][h]=["m",h,"[",a-l-1,"]"].join("")}l=[];for(h=0;h<a;++h)0===(h&1)?c.push.apply(c,f(t(g,h))):d.push.apply(d,f(t(g,h))),l.push("m"+h);c=p(c);d=p(d);a="orientation"+a+"Exact";a=["function ",a,"(",l.join(),"){var p=",c,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(y,k,v,w)}function g(a){var c=l[a.length];c||(c=l[a.length]=d(a.length));return c.apply(void 0,a)}var k=
a("two-product"),y=a("robust-sum"),v=a("robust-scale"),w=a("robust-subtract"),u=d(3),q=d(4),l=[function(){return 0},function(){return 0},function(a,c){return c[0]-a[0]},function(a,c,d){var f=(a[1]-d[1])*(c[0]-d[0]),g=(a[0]-d[0])*(c[1]-d[1]),l=f-g;if(0<f){if(0>=g)return l;f+=g}else if(0>f){if(0<=g)return l;f=-(f+g)}else return l;f*=3.3306690738754716E-16;return l>=f||l<=-f?l:u(a,c,d)},function(a,c,d,f){var l=a[0]-f[0],g=c[0]-f[0],b=d[0]-f[0],k=a[1]-f[1],h=c[1]-f[1],p=d[1]-f[1],n=a[2]-f[2],u=c[2]-f[2],
t=d[2]-f[2],v=g*p,w=b*h,b=b*k,p=l*p,l=l*h,k=g*k,g=n*(v-w)+u*(b-p)+t*(l-k),n=7.771561172376103E-16*((Math.abs(v)+Math.abs(w))*Math.abs(n)+(Math.abs(b)+Math.abs(p))*Math.abs(u)+(Math.abs(l)+Math.abs(k))*Math.abs(t));return g>n||-g>n?g:q(a,c,d,f)}];(function(){for(;5>=l.length;)l.push(d(l.length));for(var a=[],c=["slow"],f=0;5>=f;++f)a.push("a"+f),c.push("o"+f);for(var k=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],f=2;5>=f;++f)k.push("case ",f,":return o",
f,"(",a.slice(0,f).join(),");");k.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");c.push(k.join(""));a=Function.apply(void 0,c);h.exports=a.apply(void 0,[g].concat(l));for(f=0;5>=f;++f)h.exports[f]=l[f]})()},{"robust-scale":107,"robust-subtract":109,"robust-sum":110,"two-product":120}],106:[function(a,h,n){var t=a("robust-sum"),p=a("robust-scale");h.exports=function(a,d){if(1===a.length)return p(d,a[0]);if(1===
d.length)return p(a,d[0]);if(0===a.length||0===d.length)return[0];var g=[0];if(a.length<d.length)for(var k=0;k<a.length;++k)g=t(g,p(d,a[k]));else for(k=0;k<d.length;++k)g=t(g,p(a,d[k]));return g}},{"robust-scale":107,"robust-sum":110}],107:[function(a,h,n){var t=a("two-product"),p=a("two-sum");h.exports=function(a,d){var g=a.length;if(1===g)return g=t(a[0],d),g[0]?g:[g[1]];var k=Array(2*g),h=[.1,.1],n=[.1,.1],w=0;t(a[0],d,h);h[0]&&(k[w++]=h[0]);for(var u=1;u<g;++u){t(a[u],d,n);p(h[1],n[0],h);h[0]&&
(k[w++]=h[0]);var q=n[1],l=h[1],e=q+l,q=l-(e-q);h[1]=e;q&&(k[w++]=q)}h[1]&&(k[w++]=h[1]);0===w&&(k[w++]=0);k.length=w;return k}},{"two-product":120,"two-sum":121}],108:[function(a,h,n){h.exports=function(a,f,d,g){var k=t(a,d,g),h=t(f,d,g);if(0<k&&0<h||0>k&&0>h)return!1;var n=t(d,a,f),w=t(g,a,f);if(0<n&&0<w||0>n&&0>w)return!1;if(0===k&&0===h&&0===n&&0===w){a:{for(k=0;2>k;++k){var h=a[k],n=f[k],w=Math.max(h,n),u=d[k],q=g[k],l=Math.min(u,q);if(Math.max(u,q)<Math.min(h,n)||w<l){a=!1;break a}}a=!0}return a}return!0};
var t=a("robust-orientation")[3]},{"robust-orientation":105}],109:[function(a,h,n){h.exports=function(a,h){var f=a.length|0,d=h.length|0;if(1===f&&1===d){var d=a[0],g=-h[0],f=d+g,k=f-d,f=(d=d-(f-k)+(g-k))?[d,f]:[f];return f}var g=Array(f+d),n=k=0,v=0,w=Math.abs,u=a[n],q=w(u),l=-h[v],e=w(l),c,m;q<e?(m=u,n+=1,n<f&&(u=a[n],q=w(u))):(m=l,v+=1,v<d&&(l=-h[v],e=w(l)));n<f&&q<e||v>=d?(c=u,n+=1,n<f&&(u=a[n],q=w(u))):(c=l,v+=1,v<d&&(l=-h[v],e=w(l)));var r=c+m;m-=r-c;for(var z=r,D;n<f&&v<d;)q<e?(c=u,n+=1,n<
f&&(u=a[n],q=w(u))):(c=l,v+=1,v<d&&(l=-h[v],e=w(l))),r=c+m,c=r-c,(c=m-c)&&(g[k++]=c),c=z+r,D=c-z,m=c-D,r-=D,z-=m,m=z+r,z=c;for(;n<f;)c=u,r=c+m,c=r-c,(c=m-c)&&(g[k++]=c),c=z+r,D=c-z,m=c-D,r-=D,z-=m,m=z+r,z=c,n+=1,n<f&&(u=a[n]);for(;v<d;)c=l,r=c+m,c=r-c,(c=m-c)&&(g[k++]=c),c=z+r,D=c-z,m=c-D,r-=D,z-=m,m=z+r,z=c,v+=1,v<d&&(l=-h[v]);m&&(g[k++]=m);z&&(g[k++]=z);k||(g[k++]=0);g.length=k;return g}},{}],110:[function(a,h,n){h.exports=function(a,h){var f=a.length|0,d=h.length|0;if(1===f&&1===d){var d=a[0],
g=h[0],f=d+g,k=f-d,f=(d=d-(f-k)+(g-k))?[d,f]:[f];return f}var g=Array(f+d),n=k=0,v=0,w=Math.abs,u=a[n],q=w(u),l=h[v],e=w(l),c,m;q<e?(m=u,n+=1,n<f&&(u=a[n],q=w(u))):(m=l,v+=1,v<d&&(l=h[v],e=w(l)));n<f&&q<e||v>=d?(c=u,n+=1,n<f&&(u=a[n],q=w(u))):(c=l,v+=1,v<d&&(l=h[v],e=w(l)));var r=c+m;m-=r-c;for(var z=r,D;n<f&&v<d;)q<e?(c=u,n+=1,n<f&&(u=a[n],q=w(u))):(c=l,v+=1,v<d&&(l=h[v],e=w(l))),r=c+m,c=r-c,(c=m-c)&&(g[k++]=c),c=z+r,D=c-z,m=c-D,r-=D,z-=m,m=z+r,z=c;for(;n<f;)c=u,r=c+m,c=r-c,(c=m-c)&&(g[k++]=c),c=
z+r,D=c-z,m=c-D,r-=D,z-=m,m=z+r,z=c,n+=1,n<f&&(u=a[n]);for(;v<d;)c=l,r=c+m,c=r-c,(c=m-c)&&(g[k++]=c),c=z+r,D=c-z,m=c-D,r-=D,z-=m,m=z+r,z=c,v+=1,v<d&&(l=h[v]);m&&(g[k++]=m);z&&(g[k++]=z);k||(g[k++]=0);g.length=k;return g}},{}],111:[function(a,h,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],112:[function(a,h,n){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var f=0;f<a;++f)this.roots[f]=f,this.ranks[f]=0}"use restrict";h.exports=t;t.prototype.length=function(){return this.roots.length};
t.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};t.prototype.find=function(a){for(var f=this.roots;f[a]!==a;){var d=f[a];f[a]=f[d];a=d}return a};t.prototype.link=function(a,f){var d=this.find(a),g=this.find(f);if(d!==g){var k=this.ranks,h=this.roots,n=k[d],t=k[g];n<t?h[d]=g:t<n?h[g]=d:(h[g]=d,++k[d])}}},{}],113:[function(a,h,n){function t(a,d){var f=a.length,e=a.length-d.length,c=Math.min;if(e)return e;switch(f){case 0:return 0;case 1:return a[0]-
d[0];case 2:return(f=a[0]+a[1]-d[0]-d[1])?f:c(a[0],a[1])-c(d[0],d[1]);case 3:var e=a[0]+a[1],g=d[0]+d[1];if(f=e+a[2]-(g+d[2]))return f;var k=c(a[0],a[1]),h=c(d[0],d[1]);return(f=c(k,a[2])-c(h,d[2]))?f:c(k+a[2],e)-c(h+d[2],g);default:c=a.slice(0);c.sort();g=d.slice(0);g.sort();for(k=0;k<f;++k)if(e=c[k]-g[k])return e;return 0}}function p(a,d){return t(a[0],d[0])}function f(a,d){if(d){for(var f=a.length,e=Array(f),c=0;c<f;++c)e[c]=[a[c],d[c]];e.sort(p);for(c=0;c<f;++c)a[c]=e[c][0],d[c]=e[c][1]}else a.sort(t);
return a}function d(a){if(0===a.length)return[];for(var d=1,f=a.length,e=1;e<f;++e){var c=a[e];t(c,a[e-1])&&(e===d?d++:a[d++]=c)}a.length=d;return a}function g(a,d){for(var f=0,e=a.length-1,c=-1;f<=e;){var g=f+e>>1,k=t(a[g],d);0>=k?(0===k&&(c=g),f=g+1):0<k&&(e=g-1)}return c}function k(a,d){for(var f=Array(a.length),e=0,c=f.length;e<c;++e)f[e]=[];for(var c=[],e=0,k=d.length;e<k;++e)for(var h=d[e],p=h.length,n=1,b=1<<p;n<b;++n){c.length=v.popCount(n);for(var w=0,y=0;y<p;++y)n&1<<y&&(c[w++]=h[y]);w=
g(a,c);if(!(0>w))for(;!(f[w++].push(e),w>=a.length||0!==t(a[w],c)););}return f}function y(a,d){if(0>d)return[];for(var g=[],e=(1<<d+1)-1,c=0;c<a.length;++c)for(var k=a[c],h=e;h<1<<k.length;h=v.nextCombination(h)){for(var p=Array(d+1),n=0,b=0;b<k.length;++b)h&1<<b&&(p[n++]=k[b]);g.push(p)}return f(g)}"use restrict";var v=a("bit-twiddle"),w=a("union-find");n.dimension=function(a){for(var d=0,f=Math.max,e=0,c=a.length;e<c;++e)d=f(d,a[e].length);return d-1};n.countVertices=function(a){for(var d=-1,f=
Math.max,e=0,c=a.length;e<c;++e)for(var g=a[e],k=0,h=g.length;k<h;++k)d=f(d,g[k]);return d+1};n.cloneCells=function(a){for(var d=Array(a.length),f=0,e=a.length;f<e;++f)d[f]=a[f].slice(0);return d};n.compareCells=t;n.normalize=f;n.unique=d;n.findCell=g;n.incidence=k;n.dual=function(a,f){if(!f)return k(d(y(a,0)),a,0);for(var g=Array(f),e=0;e<f;++e)g[e]=[];for(var e=0,c=a.length;e<c;++e)for(var h=a[e],p=0,n=h.length;p<n;++p)g[h[p]].push(e);return g};n.explode=function(a){for(var d=[],g=0,e=a.length;g<
e;++g)for(var c=a[g],k=c.length|0,h=1,p=1<<k;h<p;++h){for(var n=[],b=0;b<k;++b)h>>>b&1&&n.push(c[b]);d.push(n)}return f(d)};n.skeleton=y;n.boundary=function(a){for(var d=[],g=0,e=a.length;g<e;++g)for(var c=a[g],k=0,h=c.length;k<h;++k){for(var p=Array(c.length-1),n=0,b=0;n<h;++n)n!==k&&(p[b++]=c[n]);d.push(p)}return f(d)};n.connectedComponents=function(a,k){if(k){for(var l=new w(k),e=0;e<a.length;++e)for(var c=a[e],h=0;h<c.length;++h)for(var p=h+1;p<c.length;++p)l.link(c[h],c[p]);c=[];h=l.ranks;for(e=
0;e<h.length;++e)h[e]=-1;for(e=0;e<a.length;++e)p=l.find(a[e][0]),0>h[p]?(h[p]=c.length,c.push([a[e].slice(0)])):c[h[p]].push(a[e].slice(0));return c}l=d(f(y(a,0)));e=new w(l.length);for(c=0;c<a.length;++c)for(h=a[c],p=0;p<h.length;++p)for(var n=g(l,[h[p]]),t=p+1;t<h.length;++t)e.link(n,g(l,[h[t]]));h=[];p=e.ranks;for(c=0;c<p.length;++c)p[c]=-1;for(c=0;c<a.length;++c)n=e.find(g(l,[a[c][0]])),0>p[n]?(p[n]=h.length,h.push([a[c].slice(0)])):h[p[n]].push(a[c].slice(0));return h}},{"bit-twiddle":111,"union-find":112}],
114:[function(a,h,n){h.exports=function(a,d,g){function k(a){if(b[a])return Infinity;var c=r[a],e=z[a];if(0>c||0>e)return Infinity;c=d[c];e=d[e];return Math.abs(t(d[a],c,e))/Math.sqrt(Math.pow(c[0]-e[0],2)+Math.pow(c[1]-e[1],2))}function h(a,b){var c=C[a],e=C[b];C[a]=e;C[b]=c;B[c]=b;B[e]=a}function n(a){for(var b=D[C[a]];;){var c=b,e=2*a+1,d=2*(a+1),f=a;if(e<N){var g=D[C[e]];g<c&&(f=e,c=g)}d<N&&D[C[d]]<c&&(f=d);if(f===a)return a;h(a,f);a=f}}function w(a){for(var b=D[C[a]];0<a;){var c;c=a&1?a-1>>1:
(a>>1)-1;if(0<=c&&b<D[C[c]])h(a,c),a=c;else return a}}function u(){if(0<N){var a=C[0];h(0,N-1);--N;n(0);return a}return-1}function q(a,b){var c=C[a];if(D[c]===b)return a;D[c]=-Infinity;w(a);u();D[c]=b;N+=1;return w(N-1)}function l(a){if(!b[a]){b[a]=!0;var c=r[a];a=z[a];0<=r[a]&&(r[a]=c);0<=z[c]&&(z[c]=a);0<=B[c]&&q(B[c],k(c));0<=B[a]&&q(B[a],k(a))}}function e(a,c){if(0>a[c])return c;var e=c,d=c;do{var f=a[d];if(!b[d]||0>f||f===d)break;d=f;f=a[d];if(!b[d]||0>f||f===d)break;d=f;e=a[e]}while(e!==d);
for(e=c;e!==d;e=a[e])a[e]=d;return d}for(var c=d.length,m=a.length,r=Array(c),z=Array(c),D=Array(c),b=Array(c),x=0;x<c;++x)r[x]=z[x]=-1,D[x]=Infinity,b[x]=!1;for(x=0;x<m;++x){var F=a[x];if(2!==F.length)throw Error("Input must be a graph");var G=F[1],F=F[0];z[F]=-1!==z[F]?-2:G;r[G]=-1!==r[G]?-2:F}for(var C=[],B=Array(c),x=0;x<c;++x)Infinity>(D[x]=k(x))?(B[x]=C.length,C.push(x)):B[x]=-1;for(var N=C.length,x=N>>1;0<=x;--x)n(x);for(;;){x=u();if(0>x||D[x]>g)break;l(x)}g=[];for(x=0;x<c;++x)b[x]||(B[x]=
g.length,g.push(d[x].slice()));var H=[];a.forEach(function(a){var b=e(r,a[0]);a=e(z,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&H.push([b,a]))});p.unique(p.normalize(H));return{positions:g,edges:H}};var t=a("robust-orientation"),p=a("simplicial-complex")},{"robust-orientation":105,"simplicial-complex":113}],115:[function(a,h,n){function t(a,d){var g,k;if(d[0][0]<d[1][0])g=d[0],k=d[1];else if(d[0][0]>d[1][0])g=d[1],k=d[0];else{g=Math.min(a[0][1],a[1][1]);k=Math.max(a[0][1],a[1][1]);var h=Math.min(d[0][1],
d[1][1]),n=Math.max(d[0][1],d[1][1]);return k<h?k-h:g>n?g-n:k-n}a[0][1]<a[1][1]?(n=a[0],h=a[1]):(n=a[1],h=a[0]);return(n=p(k,g,n))?n:(n=p(k,g,h))?n:h-k}h.exports=function(a,d){var g,k;if(d[0][0]<d[1][0])g=d[0],k=d[1];else if(d[0][0]>d[1][0])g=d[1],k=d[0];else return t(d,a);var h,n;if(a[0][0]<a[1][0])h=a[0],n=a[1];else if(a[0][0]>a[1][0])h=a[1],n=a[0];else return-t(a,d);var w=p(g,k,n),u=p(g,k,h);if(0>w){if(0>=u)return w}else if(0<w){if(0<=u)return w}else if(u)return u;w=p(n,h,k);u=p(n,h,g);if(0>w){if(0>=
u)return w}else if(0<w){if(0<=u)return w}else if(u)return u;return k[0]-n[0]};var p=a("robust-orientation")},{"robust-orientation":105}],116:[function(a,h,n){arguments[4][85][0].apply(n,arguments)},{dup:85}],117:[function(a,h,n){function t(a,d,f){this.slabs=a;this.coordinates=d;this.horizontal=f}function p(a,d){return a.y-d}function f(a,d){for(var g=null;a;){var e=a.key,c,k;e[0][0]<e[1][0]?(c=e[0],k=e[1]):(c=e[1],k=e[0]);c=v(c,k,d);if(0>c)a=a.left;else if(0<c)if(d[0]!==e[1][0])g=a,a=a.right;else{if(e=
f(a.right,d))return e;a=a.left}else{if(d[0]!==e[1][0])return a;if(e=f(a.right,d))return e;a=a.left}}return g}function d(a,d,f,e){this.y=a;this.index=d;this.start=f;this.closed=e}function g(a,d,f,e){this.x=a;this.segment=d;this.create=f;this.index=e}h.exports=function(a){for(var f=a.length,k=2*f,e=Array(k),c=0;c<f;++c){var h=a[c],p=h[0][0]<h[1][0];e[2*c]=new g(h[0][0],h,p,c);e[2*c+1]=new g(h[1][0],h,!p,c)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?c:Math.min(a.segment[0][1],
a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(w);f=[];h=[];p=[];for(c=0;c<k;){for(var n=e[c].x,v=[];c<k;){var b=e[c];if(b.x!==n)break;c+=1;b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(v.push(new d(b.segment[0][1],b.index,!0,!0)),v.push(new d(b.segment[1][1],b.index,!1,!1))):(v.push(new d(b.segment[1][1],b.index,!0,!1)),v.push(new d(b.segment[0][1],b.index,!1,!0)))):a=b.create?a.insert(b.segment,b.index):a.remove(b.segment)}f.push(a.root);
h.push(n);p.push(v)}return new t(f,h,p)};var k=a("binary-search-bounds"),y=a("functional-red-black-tree"),v=a("robust-orientation"),w=a("./lib/order-segments");t.prototype.castUp=function(a){var d=k.le(this.coordinates,a[0]);if(0>d)return-1;var g=f(this.slabs[d],a),e=-1;g&&(e=g.value);if(this.coordinates[d]===a[0]){var c=null;g&&(c=g.key);0<d&&(g=f(this.slabs[d-1],a))&&(c?0<w(g.key,c)&&(c=g.key,e=g.value):(e=g.value,c=g.key));g=this.horizontal[d];if(0<g.length){var h=k.ge(g,a[1],p);if(h<g.length){d=
g[h];if(a[1]===d.y){if(d.closed)return d.index;for(;h<g.length-1&&g[h+1].y===a[1];)if(h+=1,d=g[h],d.closed)return d.index;if(d.y===a[1]&&!d.start){h+=1;if(h>=g.length)return e;d=g[h]}}d.start?c?(a=v(c[0],c[1],[a[0],d.y]),c[0][0]>c[1][0]&&(a=-a),0<a&&(e=d.index)):e=d.index:d.y!==a[1]&&(e=d.index)}}}return e}},{"./lib/order-segments":115,"binary-search-bounds":116,"functional-red-black-tree":78,"robust-orientation":105}],118:[function(a,h,n){function t(a,d){var g=a.length,h=["'use strict';"],n="surfaceNets"+
a.join("_")+"d"+d;h.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===d&&h.push("getters:[0],");for(var q=[],l=[],e=0;e<g;++e)q.push("d"+e),l.push("d"+e);for(e=0;e<1<<g;++e)q.push("v"+e),l.push("v"+e);for(e=0;e<1<<g;++e)q.push("p"+e),l.push("p"+e);q.push("a","b","c");l.push("a","c");h.push("vertex:function vertexFunc(",q.join(),"){");q=[];for(e=0;e<1<<g;++e)q.push("(p"+e+"<<"+e+")");h.push("var m=(",
q.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var q=[],c=[];128>=1<<(1<<g)?(h.push("switch(m){"),c=h):h.push("switch(m>>>7){");for(e=0;e<1<<(1<<g);++e){128<1<<(1<<g)&&0===e%128&&(0<q.length&&c.push("}}"),c="vExtra"+q.length,h.push("case ",e>>>7,":",c,"(m&0x7f,",l.join(),");break;"),c=["function ",c,"(m,",l.join(),"){switch(m){"],q.push(c));c.push("case ",e&127,":");for(var m=Array(g),r=Array(g),t=Array(g),D=Array(g),b=0,x=0;x<g;++x)m[x]=[],r[x]=[],t[x]=0,D[x]=0;for(x=0;x<1<<g;++x)for(var F=
0;F<g;++F){var G=x^1<<F;if(!(G>x)&&!(e&1<<G)!==!(e&1<<x)){var C=1;e&1<<G?r[F].push("v"+G+"-v"+x):(r[F].push("v"+x+"-v"+G),C=-C);0>C?(m[F].push("-v"+x+"-v"+G),t[F]+=2):(m[F].push("v"+x+"+v"+G),t[F]-=2);b+=1;for(C=0;C<g;++C)C!==F&&(G&1<<C?D[C]+=1:--D[C])}}x=[];for(F=0;F<g;++F)0===m[F].length?x.push("d"+F+"-0.5"):(G="",0>t[F]?G=t[F]+"*c":0<t[F]&&(G="+"+t[F]+"*c"),x.push("d"+F+"-"+(.5+D[F]/b*.5)+"-"+m[F].length/b*.5+"*("+m[F].join("+")+G+")/("+r[F].join("+")+")"));c.push("a.push([",x.join(),"]);","break;")}h.push("}},");
0<q.length&&c.push("}}");l=[];for(e=0;e<1<<g-1;++e)l.push("v"+e);l.push("c0","c1","p0","p1","a","b","c");h.push("cell:function cellFunc(",l.join(),"){");g=f(g-1);h.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",n,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
n,";");for(e=0;e<q.length;++e)h.push(q[e].join(""));return(new Function("genContour",h.join("")))(p)}h.exports=function(a,f){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var h=d(a,f),p=h.length,n=Array(p),q=Array(p),l=0;l<p;++l)n[l]=[h[l]],q[l]=[l];return{positions:n,cells:q}}h=a.order.join()+"-"+a.dtype;p=g[h];f=+f||0;p||(p=g[h]=t(a.order,a.dtype));return p(a,f)};var p=a("ndarray-extract-contour"),f=a("triangulate-hypercube"),d=a("zero-crossings"),g={}},{"ndarray-extract-contour":90,
"triangulate-hypercube":119,"zero-crossings":128}],119:[function(a,h,n){h.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(f(a+1))|0,h=[],n=0;n<g;++n){for(var v=t.unrank(a,n),w=[0],u=0,q=0;q<v.length;++q)u+=1<<v[q],w.push(u);1>p(v)&&(w[0]=u,w[a]=0);h.push(w)}return h};var t=a("permutation-rank"),p=a("permutation-parity"),f=a("gamma")},{gamma:79,"permutation-parity":93,"permutation-rank":94}],120:[function(a,h,n){h.exports=function(a,f,d){var g=a*f,h=t*a,h=h-(h-a);a-=h;
var n=t*f,n=n-(n-f);f-=n;f=a*f-(g-h*n-a*n-h*f);return d?(d[0]=f,d[1]=g,d):[f,g]};var t=+(Math.pow(2,27)+1)},{}],121:[function(a,h,n){h.exports=function(a,h,f){var d=a+h,g=d-a;h-=g;a-=d-g;return f?(f[0]=a+h,f[1]=d,f):[a+h,d]}},{}],122:[function(a,h,n){(function(h,p){function f(a){if(a){var b=r.log2(a.length||a.byteLength);x[b].push(a)}}function d(a){a=r.nextPow2(a);var b=r.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function g(a){return new Uint8Array(d(a),0,a)}function k(a){return new Uint16Array(d(2*
a),0,a)}function y(a){return new Uint32Array(d(4*a),0,a)}function v(a){return new Int8Array(d(a),0,a)}function w(a){return new Int16Array(d(2*a),0,a)}function u(a){return new Int32Array(d(4*a),0,a)}function q(a){return new Float32Array(d(4*a),0,a)}function l(a){return new Float64Array(d(8*a),0,a)}function e(a){return D?new Uint8ClampedArray(d(a),0,a):g(a)}function c(a){return new DataView(d(a),0,a)}function m(a){a=r.nextPow2(a);var b=r.log2(a),b=F[b];return 0<b.length?b.pop():new p(a)}var r=a("bit-twiddle"),
z=a("dup");h.__TYPEDARRAY_POOL||(h.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var D="undefined"!==typeof Uint8ClampedArray,b=h.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=z([32,0]));b.BUFFER||(b.BUFFER=z([32,0]));var x=b.DATA,F=b.BUFFER;n.free=function(a){if(p.isBuffer(a))F[r.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=r.log2(a.length||a.byteLength)|0;x[b].push(a)}};n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(a){f(a.buffer)};n.freeArrayBuffer=f;n.freeBuffer=function(a){F[r.log2(a.length)].push(a)};n.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return d(a);switch(b){case "uint8":return g(a);case "uint16":return k(a);case "uint32":return y(a);case "int8":return v(a);
case "int16":return w(a);case "int32":return u(a);case "float":case "float32":return q(a);case "double":case "float64":return l(a);case "uint8_clamped":return e(a);case "buffer":return m(a);case "data":case "dataview":return c(a);default:return null}};n.mallocArrayBuffer=d;n.mallocUint8=g;n.mallocUint16=k;n.mallocUint32=y;n.mallocInt8=v;n.mallocInt16=w;n.mallocInt32=u;n.mallocFloat32=n.mallocFloat=q;n.mallocFloat64=n.mallocDouble=l;n.mallocUint8Clamped=e;n.mallocDataView=c;n.mallocBuffer=m;n.clearCache=
function(){for(var a=0;32>a;++a)b.UINT8[a].length=0,b.UINT16[a].length=0,b.UINT32[a].length=0,b.INT8[a].length=0,b.INT16[a].length=0,b.INT32[a].length=0,b.FLOAT[a].length=0,b.DOUBLE[a].length=0,b.UINT8C[a].length=0,x[a].length=0,F[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":53,buffer:61,dup:76}],123:[function(a,h,n){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var f=
0;f<a;++f)this.roots[f]=f,this.ranks[f]=0}"use restrict";h.exports=t;a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var f=a,d=this.roots;d[a]!==a;)a=d[a];for(;d[f]!==a;){var g=d[f];d[f]=a;f=g}return a};a.link=function(a,f){var d=this.find(a),g=this.find(f);if(d!==g){var h=this.ranks,n=this.roots,t=h[d],w=h[g];t<w?n[d]=g:w<t?n[g]=d:(n[g]=d,
++h[d])}}},{}],124:[function(a,h,n){h.exports=function(a,h,f){if(0===a.length)return a;if(h){f||a.sort(h);f=1;for(var d=a.length,g=a[0],k=a[0],n=1;n<d;++n)k=g,g=a[n],h(g,k)&&(n===f?f++:a[f++]=g);a.length=f;return a}f||a.sort();h=1;f=a.length;d=a[0];g=a[0];for(k=1;k<f;++k)g=d,d=a[k],d!==g&&(k===h?h++:a[h++]=d);a.length=h;return a}},{}],125:[function(a,h,n){h.exports=function(a,g){if("object"!==typeof g||null===g)g={};return t(a,g.canvas||p,g.context||f,g)};var t=a("./lib/vtext"),p=null,f=null;"undefined"!==
typeof document&&(p=document.createElement("canvas"),p.width=8192,p.height=1024,f=p.getContext("2d"))},{"./lib/vtext":126}],126:[function(a,h,n){function t(a,d,f){for(var e=d.textAlign||"start",c=d.textBaseline||"alphabetic",g=[1073741824,1073741824],h=[0,0],k=a.length,n=0;n<k;++n)for(var b=a[n],p=0;2>p;++p)g[p]=Math.min(g[p],b[p])|0,h[p]=Math.max(h[p],b[p])|0;var t=0;switch(e){case "center":t=-.5*(g[0]+h[0]);break;case "right":case "end":t=-h[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
e+"'");}var v=0;switch(c){case "hanging":case "top":v=-g[1];break;case "middle":v=-.5*(g[1]+h[1]);break;case "alphabetic":case "ideographic":v=-3*f;break;case "bottom":v=-h[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+c+"'");}var w=1/f;"lineHeight"in d?w*=+d.lineHeight:"width"in d?w=d.width/(h[0]-g[0]):"height"in d&&(w=d.height/(h[1]-g[1]));return a.map(function(a){return[w*(a[0]+t),w*(a[1]+v)]})}function p(a,f,g,e){a=d(a,128);e=e?k(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(e.positions,f,g);a=e.edges;e="ccw"===f.orientation;y(g,a);if(f.polygons||f.polygon||f.polyline){f=w(a,g);a=Array(f.length);for(var c=0;c<f.length;++c){for(var h=f[c],n=Array(h.length),p=0;p<h.length;++p){for(var D=h[p],b=Array(D.length),x=0;x<D.length;++x)b[x]=g[D[x]].slice();e&&b.reverse();n[p]=b}a[c]=n}return a}return f.triangles||f.triangulate||f.triangle?{cells:v(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function f(a,d,f){try{return p(a,
d,f,!0)}catch(e){}try{return p(a,d,f,!1)}catch(e){}return d.polygons||d.polyline||d.polygon?[]:d.triangles||d.triangulate||d.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}h.exports=function(a,d,h,e){var c=e.size||64;h.font=c+"px "+(e.font||"normal");h.textAlign="start";h.textBaseline="alphabetic";h.direction="ltr";var k;k=Math.ceil(h.measureText(a).width+2*c)|0;if(8192<k)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var n=3*c;d.height<n&&(d.height=n);
h.fillStyle="#000";h.fillRect(0,0,d.width,d.height);h.fillStyle="#fff";h.fillText(a,c,2*c);a=h.getImageData(0,0,k,n);k=g(a.data,[n,k,4]).pick(-1,-1,0).transpose(1,0);return f(k,e,c)};h.exports.processPixels=f;var d=a("surface-nets"),g=a("ndarray"),k=a("simplify-planar-graph"),y=a("clean-pslg"),v=a("cdt2d"),w=a("planar-graph-to-polyline")},{cdt2d:62,"clean-pslg":67,ndarray:91,"planar-graph-to-polyline":97,"simplify-planar-graph":114,"surface-nets":118}],127:[function(a,h,n){h.exports=a("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":72}],128:[function(a,h,n){h.exports=function(a,f){var d=[];f=+f||0;t(a.hi(a.shape[0]-1),d,f);return d};var t=a("./lib/zc-core")},{"./lib/zc-core":127}],129:[function(a,
h,n){function t(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var p=a("./lib/util/extend"),f=a("./lib/dynamic"),d=a("./lib/util/raf"),g=a("./lib/util/clock"),k=a("./lib/strings"),y=a("./lib/webgl"),v=a("./lib/extension"),w=a("./lib/limits"),u=a("./lib/buffer"),q=a("./lib/elements"),l=a("./lib/texture"),e=a("./lib/renderbuffer"),c=a("./lib/framebuffer"),m=a("./lib/attribute"),r=a("./lib/shader"),z=a("./lib/read"),D=a("./lib/core"),b=a("./lib/stats"),x=a("./lib/timer");h.exports=function(a){function h(){if(0===
Z.length)M&&M.update(),ba=null;else{ba=d.next(h);I();for(var a=Z.length-1;0<=a;--a){var b=Z[a];b&&b(S,null,0)}A.flush();M&&M.update()}}function n(){!ba&&0<Z.length&&(ba=d.next(h))}function B(){ba&&(d.cancel(h),ba=null)}function N(a){a.preventDefault();B();oa.forEach(function(a){a()})}function H(a){A.getError();P.restore();la.restore();aa.restore();ha.restore();ka.restore();ma.restore();M&&M.restore();ia.procs.refresh();n();da.forEach(function(a){a()})}function E(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=
a[b];f.isDynamic(e)?d[b]=f.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function c(a){for(;n.length<a;)n.push(null);return n}var d=b(a.context||{}),e=b(a.uniforms||{}),g=b(a.attributes||{}),h=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=p({},a);delete c.uniforms;delete c.attributes;delete c.context;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));a={gpuTime:0,cpuTime:0,count:0};var d=ia.compile(h,g,e,d,a),k=d.draw,l=d.batch,m=d.scope,n=[];return p(function(a,b){var d;if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|
0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:a})}function O(a){Z.push(a);n();return{cancel:function(){function b(){var a=t(Z,b);Z[a]=Z[Z.length-1];--Z.length;0>=Z.length&&B()}var c=t(Z,a);Z[c]=b}}}function J(){var a=ea.viewport,b=ea.scissor_box;a[0]=a[1]=b[0]=b[1]=0;S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=a[2]=b[2]=A.drawingBufferWidth;S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=a[3]=b[3]=A.drawingBufferHeight}
function I(){S.tick+=1;S.time=L();J();ia.procs.poll()}function Q(){J();ia.procs.refresh();M&&M.update()}function L(){return(g()-W)/1E3}a=y(a);if(!a)return null;var A=a.gl,K=A.getContextAttributes();A.isContextLost();var P=v(A,a);if(!P)return null;var U=k(),Y=b(),V=P.extensions,M=x(A,V),W=g(),T=A.drawingBufferWidth,X=A.drawingBufferHeight,S={tick:0,time:0,viewportWidth:T,viewportHeight:X,framebufferWidth:T,framebufferHeight:X,drawingBufferWidth:T,drawingBufferHeight:X,pixelRatio:a.pixelRatio},R=w(A,
V),aa=u(A,Y,a),ca=q(A,V,aa,Y),T=m(A,V,R,aa,U),la=r(A,U,Y,a),ha=l(A,V,R,function(){ia.procs.poll()},S,Y,a),ka=e(A,V,R,Y,a),ma=c(A,V,R,ha,ka,Y),ia=D(A,U,V,R,aa,ca,ha,ma,{},T,la,{elements:null,primitive:4,count:-1,offset:0,instances:-1},S,M,a),U=z(A,ma,ia.procs.poll,S,K,V),ea=ia.next,ja=A.canvas,Z=[],oa=[],da=[],fa=[a.onDestroy],ba=null;ja&&(ja.addEventListener("webglcontextlost",N,!1),ja.addEventListener("webglcontextrestored",H,!1));Q();K=p(E,{clear:function(a){var b=0;ia.procs.poll();var c=a.color;
c&&(A.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(A.clearDepth(+a.depth),b|=256);"stencil"in a&&(A.clearStencil(a.stencil|0),b|=1024);A.clear(b)},prop:f.define.bind(null,1),context:f.define.bind(null,2),"this":f.define.bind(null,3),draw:E({}),buffer:function(a){return aa.create(a,34962,!1,!1)},elements:function(a){return ca.create(a,!1)},texture:ha.create2D,cube:ha.createCube,renderbuffer:ka.create,framebuffer:ma.create,framebufferCube:ma.createCube,attributes:K,frame:O,
on:function(a,b){var c;switch(a){case "frame":return O(b);case "lost":c=oa;break;case "restore":c=da;break;case "destroy":c=fa}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:R,hasExtension:function(a){return 0<=R.extensions.indexOf(a.toLowerCase())},read:U,destroy:function(){Z.length=0;B();ja&&(ja.removeEventListener("webglcontextlost",N),ja.removeEventListener("webglcontextrestored",H));la.clear();ma.clear();ka.clear();ha.clear();
ca.clear();aa.clear();M&&M.clear();fa.forEach(function(a){a()})},_gl:A,_refresh:Q,poll:function(){I();M&&M.update()},now:L,stats:Y});a.onDone(null,K);return K}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":30,
"./lib/webgl":33}]},{},[1]);
